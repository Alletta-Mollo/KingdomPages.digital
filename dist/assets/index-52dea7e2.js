var tW=Object.defineProperty;var nW=(n,e,t)=>e in n?tW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var V=(n,e,t)=>(nW(n,typeof e!="symbol"?e+"":e,t),t),o1=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var h=(n,e,t)=>(o1(n,e,"read from private field"),t?t.call(n):e.get(n)),C=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},T=(n,e,t,s)=>(o1(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t);var bn=(n,e,t,s)=>({set _(i){T(n,e,i,t)},get _(){return h(n,e,s)}}),I=(n,e,t)=>(o1(n,e,"access private method"),t);function sW(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();var iW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Af(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var HL={exports:{}},U_={},VL={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv=Symbol.for("react.element"),rW=Symbol.for("react.portal"),oW=Symbol.for("react.fragment"),aW=Symbol.for("react.strict_mode"),lW=Symbol.for("react.profiler"),cW=Symbol.for("react.provider"),uW=Symbol.for("react.context"),hW=Symbol.for("react.forward_ref"),dW=Symbol.for("react.suspense"),fW=Symbol.for("react.memo"),pW=Symbol.for("react.lazy"),tR=Symbol.iterator;function mW(n){return n===null||typeof n!="object"?null:(n=tR&&n[tR]||n["@@iterator"],typeof n=="function"?n:null)}var UL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$L=Object.assign,zL={};function Tf(n,e,t){this.props=n,this.context=e,this.refs=zL,this.updater=t||UL}Tf.prototype.isReactComponent={};Tf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Tf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function WL(){}WL.prototype=Tf.prototype;function nk(n,e,t){this.props=n,this.context=e,this.refs=zL,this.updater=t||UL}var sk=nk.prototype=new WL;sk.constructor=nk;$L(sk,Tf.prototype);sk.isPureReactComponent=!0;var nR=Array.isArray,GL=Object.prototype.hasOwnProperty,ik={current:null},YL={key:!0,ref:!0,__self:!0,__source:!0};function KL(n,e,t){var s,i={},r=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)GL.call(e,s)&&!YL.hasOwnProperty(s)&&(i[s]=e[s]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(s in a=n.defaultProps,a)i[s]===void 0&&(i[s]=a[s]);return{$$typeof:gv,type:n,key:r,ref:o,props:i,_owner:ik.current}}function gW(n,e){return{$$typeof:gv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function rk(n){return typeof n=="object"&&n!==null&&n.$$typeof===gv}function yW(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var sR=/\/+/g;function a1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?yW(""+n.key):e.toString(36)}function Fw(n,e,t,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case gv:case rW:o=!0}}if(o)return o=n,i=i(o),n=s===""?"."+a1(o,0):s,nR(i)?(t="",n!=null&&(t=n.replace(sR,"$&/")+"/"),Fw(i,e,t,"",function(c){return c})):i!=null&&(rk(i)&&(i=gW(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sR,"$&/")+"/")+n)),e.push(i)),1;if(o=0,s=s===""?".":s+":",nR(n))for(var a=0;a<n.length;a++){r=n[a];var l=s+a1(r,a);o+=Fw(r,e,t,l,i)}else if(l=mW(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=s+a1(r,a++),o+=Fw(r,e,t,l,i);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qv(n,e,t){if(n==null)return n;var s=[],i=0;return Fw(n,s,"","",function(r){return e.call(t,r,i++)}),s}function vW(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Mn={current:null},jw={transition:null},wW={ReactCurrentDispatcher:Mn,ReactCurrentBatchConfig:jw,ReactCurrentOwner:ik};function qL(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:qv,forEach:function(n,e,t){qv(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return qv(n,function(){e++}),e},toArray:function(n){return qv(n,function(e){return e})||[]},only:function(n){if(!rk(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Se.Component=Tf;Se.Fragment=oW;Se.Profiler=lW;Se.PureComponent=nk;Se.StrictMode=aW;Se.Suspense=dW;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wW;Se.act=qL;Se.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=$L({},n.props),i=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=ik.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)GL.call(e,l)&&!YL.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:gv,type:n.type,key:i,ref:r,props:s,_owner:o}};Se.createContext=function(n){return n={$$typeof:uW,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:cW,_context:n},n.Consumer=n};Se.createElement=KL;Se.createFactory=function(n){var e=KL.bind(null,n);return e.type=n,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(n){return{$$typeof:hW,render:n}};Se.isValidElement=rk;Se.lazy=function(n){return{$$typeof:pW,_payload:{_status:-1,_result:n},_init:vW}};Se.memo=function(n,e){return{$$typeof:fW,type:n,compare:e===void 0?null:e}};Se.startTransition=function(n){var e=jw.transition;jw.transition={};try{n()}finally{jw.transition=e}};Se.unstable_act=qL;Se.useCallback=function(n,e){return Mn.current.useCallback(n,e)};Se.useContext=function(n){return Mn.current.useContext(n)};Se.useDebugValue=function(){};Se.useDeferredValue=function(n){return Mn.current.useDeferredValue(n)};Se.useEffect=function(n,e){return Mn.current.useEffect(n,e)};Se.useId=function(){return Mn.current.useId()};Se.useImperativeHandle=function(n,e,t){return Mn.current.useImperativeHandle(n,e,t)};Se.useInsertionEffect=function(n,e){return Mn.current.useInsertionEffect(n,e)};Se.useLayoutEffect=function(n,e){return Mn.current.useLayoutEffect(n,e)};Se.useMemo=function(n,e){return Mn.current.useMemo(n,e)};Se.useReducer=function(n,e,t){return Mn.current.useReducer(n,e,t)};Se.useRef=function(n){return Mn.current.useRef(n)};Se.useState=function(n){return Mn.current.useState(n)};Se.useSyncExternalStore=function(n,e,t){return Mn.current.useSyncExternalStore(n,e,t)};Se.useTransition=function(){return Mn.current.useTransition()};Se.version="18.3.1";VL.exports=Se;var E=VL.exports;const te=Af(E),ok=sW({__proto__:null,default:te},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bW=E,xW=Symbol.for("react.element"),_W=Symbol.for("react.fragment"),SW=Object.prototype.hasOwnProperty,EW=bW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CW={key:!0,ref:!0,__self:!0,__source:!0};function XL(n,e,t){var s,i={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)SW.call(e,s)&&!CW.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:xW,type:n,key:r,ref:o,props:i,_owner:EW.current}}U_.Fragment=_W;U_.jsx=XL;U_.jsxs=XL;HL.exports=U_;var b=HL.exports,FE={},QL={exports:{}},Ss={},JL={exports:{}},ZL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,j){var z=O.length;O.push(j);e:for(;0<z;){var W=z-1>>>1,K=O[W];if(0<i(K,j))O[W]=j,O[z]=K,z=W;else break e}}function t(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var j=O[0],z=O.pop();if(z!==j){O[0]=z;e:for(var W=0,K=O.length,Z=K>>>1;W<Z;){var de=2*(W+1)-1,Me=O[de],ue=de+1,G=O[ue];if(0>i(Me,z))ue<K&&0>i(G,Me)?(O[W]=G,O[ue]=z,W=ue):(O[W]=Me,O[de]=z,W=de);else if(ue<K&&0>i(G,z))O[W]=G,O[ue]=z,W=ue;else break e}}return j}function i(O,j){var z=O.sortIndex-j.sortIndex;return z!==0?z:O.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,y=!1,g=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var j=t(c);j!==null;){if(j.callback===null)s(c);else if(j.startTime<=O)s(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(c)}}function m(O){if(g=!1,v(O),!y)if(t(l)!==null)y=!0,L(x);else{var j=t(c);j!==null&&B(m,j.startTime-O)}}function x(O,j){y=!1,g&&(g=!1,w(P),P=-1),p=!0;var z=f;try{for(v(j),d=t(l);d!==null&&(!(d.expirationTime>j)||O&&!N());){var W=d.callback;if(typeof W=="function"){d.callback=null,f=d.priorityLevel;var K=W(d.expirationTime<=j);j=n.unstable_now(),typeof K=="function"?d.callback=K:d===t(l)&&s(l),v(j)}else s(l);d=t(l)}if(d!==null)var Z=!0;else{var de=t(c);de!==null&&B(m,de.startTime-j),Z=!1}return Z}finally{d=null,f=z,p=!1}}var A=!1,k=null,P=-1,R=5,M=-1;function N(){return!(n.unstable_now()-M<R)}function F(){if(k!==null){var O=n.unstable_now();M=O;var j=!0;try{j=k(!0,O)}finally{j?H():(A=!1,k=null)}}else A=!1}var H;if(typeof _=="function")H=function(){_(F)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,$=D.port2;D.port1.onmessage=F,H=function(){$.postMessage(null)}}else H=function(){S(F,0)};function L(O){k=O,A||(A=!0,H())}function B(O,j){P=S(function(){O(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){y||p||(y=!0,L(x))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var z=f;f=j;try{return O()}finally{f=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,j){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var z=f;f=O;try{return j()}finally{f=z}},n.unstable_scheduleCallback=function(O,j,z){var W=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,O){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=z+K,O={id:u++,callback:j,priorityLevel:O,startTime:z,expirationTime:K,sortIndex:-1},z>W?(O.sortIndex=z,e(c,O),t(l)===null&&O===t(c)&&(g?(w(P),P=-1):g=!0,B(m,z-W))):(O.sortIndex=K,e(l,O),y||p||(y=!0,L(x))),O},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(O){var j=f;return function(){var z=f;f=j;try{return O.apply(this,arguments)}finally{f=z}}}})(ZL);JL.exports=ZL;var AW=JL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TW=E,xs=AW;function U(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e2=new Set,om={};function yu(n,e){rf(n,e),rf(n+"Capture",e)}function rf(n,e){for(om[n]=e,n=0;n<e.length;n++)e2.add(e[n])}var io=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jE=Object.prototype.hasOwnProperty,kW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iR={},rR={};function IW(n){return jE.call(rR,n)?!0:jE.call(iR,n)?!1:kW.test(n)?rR[n]=!0:(iR[n]=!0,!1)}function PW(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function RW(n,e,t,s){if(e===null||typeof e>"u"||PW(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(n,e,t,s,i,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){rn[n]=new Nn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];rn[e]=new Nn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){rn[n]=new Nn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){rn[n]=new Nn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){rn[n]=new Nn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){rn[n]=new Nn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){rn[n]=new Nn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){rn[n]=new Nn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){rn[n]=new Nn(n,5,!1,n.toLowerCase(),null,!1,!1)});var ak=/[\-:]([a-z])/g;function lk(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(ak,lk);rn[e]=new Nn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(ak,lk);rn[e]=new Nn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(ak,lk);rn[e]=new Nn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){rn[n]=new Nn(n,1,!1,n.toLowerCase(),null,!1,!1)});rn.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){rn[n]=new Nn(n,1,!1,n.toLowerCase(),null,!0,!0)});function ck(n,e,t,s){var i=rn.hasOwnProperty(e)?rn[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RW(e,t,i,s)&&(t=null),s||i===null?IW(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,s=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var go=TW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xv=Symbol.for("react.element"),Uu=Symbol.for("react.portal"),$u=Symbol.for("react.fragment"),uk=Symbol.for("react.strict_mode"),BE=Symbol.for("react.profiler"),t2=Symbol.for("react.provider"),n2=Symbol.for("react.context"),hk=Symbol.for("react.forward_ref"),HE=Symbol.for("react.suspense"),VE=Symbol.for("react.suspense_list"),dk=Symbol.for("react.memo"),To=Symbol.for("react.lazy"),s2=Symbol.for("react.offscreen"),oR=Symbol.iterator;function $f(n){return n===null||typeof n!="object"?null:(n=oR&&n[oR]||n["@@iterator"],typeof n=="function"?n:null)}var lt=Object.assign,l1;function dp(n){if(l1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);l1=e&&e[1]||""}return`
`+l1+n}var c1=!1;function u1(n,e){if(!n||c1)return"";c1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){s=c}n.call(e.prototype)}else{try{throw Error()}catch(c){s=c}n()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),r=s.stack.split(`
`),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==r[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{c1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?dp(n):""}function MW(n){switch(n.tag){case 5:return dp(n.type);case 16:return dp("Lazy");case 13:return dp("Suspense");case 19:return dp("SuspenseList");case 0:case 2:case 15:return n=u1(n.type,!1),n;case 11:return n=u1(n.type.render,!1),n;case 1:return n=u1(n.type,!0),n;default:return""}}function UE(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $u:return"Fragment";case Uu:return"Portal";case BE:return"Profiler";case uk:return"StrictMode";case HE:return"Suspense";case VE:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case n2:return(n.displayName||"Context")+".Consumer";case t2:return(n._context.displayName||"Context")+".Provider";case hk:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case dk:return e=n.displayName||null,e!==null?e:UE(n.type)||"Memo";case To:e=n._payload,n=n._init;try{return UE(n(e))}catch{}}return null}function NW(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return UE(e);case 8:return e===uk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ba(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function i2(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DW(n){var e=i2(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Qv(n){n._valueTracker||(n._valueTracker=DW(n))}function r2(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=i2(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function F0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function $E(n,e){var t=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function aR(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Ba(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o2(n,e){e=e.checked,e!=null&&ck(n,"checked",e,!1)}function zE(n,e){o2(n,e);var t=Ba(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?WE(n,e.type,t):e.hasOwnProperty("defaultValue")&&WE(n,e.type,Ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function lR(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function WE(n,e,t){(e!=="number"||F0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var fp=Array.isArray;function lh(n,e,t,s){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Ba(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function GE(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function cR(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(U(92));if(fp(t)){if(1<t.length)throw Error(U(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ba(t)}}function a2(n,e){var t=Ba(e.value),s=Ba(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function uR(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function l2(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function YE(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?l2(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Jv,c2=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Jv=Jv||document.createElement("div"),Jv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jv.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function am(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var jp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LW=["Webkit","ms","Moz","O"];Object.keys(jp).forEach(function(n){LW.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),jp[e]=jp[n]})});function u2(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||jp.hasOwnProperty(n)&&jp[n]?(""+e).trim():e+"px"}function h2(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,i=u2(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,i):n[t]=i}}var OW=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function KE(n,e){if(e){if(OW[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function qE(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XE=null;function fk(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var QE=null,ch=null,uh=null;function hR(n){if(n=wv(n)){if(typeof QE!="function")throw Error(U(280));var e=n.stateNode;e&&(e=Y_(e),QE(n.stateNode,n.type,e))}}function d2(n){ch?uh?uh.push(n):uh=[n]:ch=n}function f2(){if(ch){var n=ch,e=uh;if(uh=ch=null,hR(n),e)for(n=0;n<e.length;n++)hR(e[n])}}function p2(n,e){return n(e)}function m2(){}var h1=!1;function g2(n,e,t){if(h1)return n(e,t);h1=!0;try{return p2(n,e,t)}finally{h1=!1,(ch!==null||uh!==null)&&(m2(),f2())}}function lm(n,e){var t=n.stateNode;if(t===null)return null;var s=Y_(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(U(231,e,typeof t));return t}var JE=!1;if(io)try{var zf={};Object.defineProperty(zf,"passive",{get:function(){JE=!0}}),window.addEventListener("test",zf,zf),window.removeEventListener("test",zf,zf)}catch{JE=!1}function FW(n,e,t,s,i,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Bp=!1,j0=null,B0=!1,ZE=null,jW={onError:function(n){Bp=!0,j0=n}};function BW(n,e,t,s,i,r,o,a,l){Bp=!1,j0=null,FW.apply(jW,arguments)}function HW(n,e,t,s,i,r,o,a,l){if(BW.apply(this,arguments),Bp){if(Bp){var c=j0;Bp=!1,j0=null}else throw Error(U(198));B0||(B0=!0,ZE=c)}}function vu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function y2(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function dR(n){if(vu(n)!==n)throw Error(U(188))}function VW(n){var e=n.alternate;if(!e){if(e=vu(n),e===null)throw Error(U(188));return e!==n?null:n}for(var t=n,s=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){t=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return dR(i),n;if(r===s)return dR(i),e;r=r.sibling}throw Error(U(188))}if(t.return!==s.return)t=i,s=r;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,s=r;break}if(a===s){o=!0,s=i,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,s=i;break}if(a===s){o=!0,s=r,t=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(t.alternate!==s)throw Error(U(190))}if(t.tag!==3)throw Error(U(188));return t.stateNode.current===t?n:e}function v2(n){return n=VW(n),n!==null?w2(n):null}function w2(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=w2(n);if(e!==null)return e;n=n.sibling}return null}var b2=xs.unstable_scheduleCallback,fR=xs.unstable_cancelCallback,UW=xs.unstable_shouldYield,$W=xs.unstable_requestPaint,bt=xs.unstable_now,zW=xs.unstable_getCurrentPriorityLevel,pk=xs.unstable_ImmediatePriority,x2=xs.unstable_UserBlockingPriority,H0=xs.unstable_NormalPriority,WW=xs.unstable_LowPriority,_2=xs.unstable_IdlePriority,$_=null,er=null;function GW(n){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot($_,n,void 0,(n.current.flags&128)===128)}catch{}}var wi=Math.clz32?Math.clz32:qW,YW=Math.log,KW=Math.LN2;function qW(n){return n>>>=0,n===0?32:31-(YW(n)/KW|0)|0}var Zv=64,ew=4194304;function pp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function V0(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?s=pp(a):(r&=o,r!==0&&(s=pp(r)))}else o=t&~i,o!==0?s=pp(o):r!==0&&(s=pp(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-wi(e),i=1<<t,s|=n[t],e&=~i;return s}function XW(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QW(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-wi(r),a=1<<o,l=i[o];l===-1?(!(a&t)||a&s)&&(i[o]=XW(a,e)):l<=e&&(n.expiredLanes|=a),r&=~a}}function eC(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function S2(){var n=Zv;return Zv<<=1,!(Zv&4194240)&&(Zv=64),n}function d1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function yv(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-wi(e),n[e]=t}function JW(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-wi(t),r=1<<i;e[i]=0,s[i]=-1,n[i]=-1,t&=~r}}function mk(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-wi(t),i=1<<s;i&e|n[s]&e&&(n[s]|=e),t&=~i}}var Le=0;function E2(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var C2,gk,A2,T2,k2,tC=!1,tw=[],Ea=null,Ca=null,Aa=null,cm=new Map,um=new Map,Po=[],ZW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pR(n,e){switch(n){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":cm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":um.delete(e.pointerId)}}function Wf(n,e,t,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=wv(e),e!==null&&gk(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function e5(n,e,t,s,i){switch(e){case"focusin":return Ea=Wf(Ea,n,e,t,s,i),!0;case"dragenter":return Ca=Wf(Ca,n,e,t,s,i),!0;case"mouseover":return Aa=Wf(Aa,n,e,t,s,i),!0;case"pointerover":var r=i.pointerId;return cm.set(r,Wf(cm.get(r)||null,n,e,t,s,i)),!0;case"gotpointercapture":return r=i.pointerId,um.set(r,Wf(um.get(r)||null,n,e,t,s,i)),!0}return!1}function I2(n){var e=xl(n.target);if(e!==null){var t=vu(e);if(t!==null){if(e=t.tag,e===13){if(e=y2(t),e!==null){n.blockedOn=e,k2(n.priority,function(){A2(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Bw(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=nC(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);XE=s,t.target.dispatchEvent(s),XE=null}else return e=wv(t),e!==null&&gk(e),n.blockedOn=t,!1;e.shift()}return!0}function mR(n,e,t){Bw(n)&&t.delete(e)}function t5(){tC=!1,Ea!==null&&Bw(Ea)&&(Ea=null),Ca!==null&&Bw(Ca)&&(Ca=null),Aa!==null&&Bw(Aa)&&(Aa=null),cm.forEach(mR),um.forEach(mR)}function Gf(n,e){n.blockedOn===e&&(n.blockedOn=null,tC||(tC=!0,xs.unstable_scheduleCallback(xs.unstable_NormalPriority,t5)))}function hm(n){function e(i){return Gf(i,n)}if(0<tw.length){Gf(tw[0],n);for(var t=1;t<tw.length;t++){var s=tw[t];s.blockedOn===n&&(s.blockedOn=null)}}for(Ea!==null&&Gf(Ea,n),Ca!==null&&Gf(Ca,n),Aa!==null&&Gf(Aa,n),cm.forEach(e),um.forEach(e),t=0;t<Po.length;t++)s=Po[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<Po.length&&(t=Po[0],t.blockedOn===null);)I2(t),t.blockedOn===null&&Po.shift()}var hh=go.ReactCurrentBatchConfig,U0=!0;function n5(n,e,t,s){var i=Le,r=hh.transition;hh.transition=null;try{Le=1,yk(n,e,t,s)}finally{Le=i,hh.transition=r}}function s5(n,e,t,s){var i=Le,r=hh.transition;hh.transition=null;try{Le=4,yk(n,e,t,s)}finally{Le=i,hh.transition=r}}function yk(n,e,t,s){if(U0){var i=nC(n,e,t,s);if(i===null)_1(n,e,s,$0,t),pR(n,s);else if(e5(i,n,e,t,s))s.stopPropagation();else if(pR(n,s),e&4&&-1<ZW.indexOf(n)){for(;i!==null;){var r=wv(i);if(r!==null&&C2(r),r=nC(n,e,t,s),r===null&&_1(n,e,s,$0,t),r===i)break;i=r}i!==null&&s.stopPropagation()}else _1(n,e,s,null,t)}}var $0=null;function nC(n,e,t,s){if($0=null,n=fk(s),n=xl(n),n!==null)if(e=vu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=y2(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return $0=n,null}function P2(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zW()){case pk:return 1;case x2:return 4;case H0:case WW:return 16;case _2:return 536870912;default:return 16}default:return 16}}var xa=null,vk=null,Hw=null;function R2(){if(Hw)return Hw;var n,e=vk,t=e.length,s,i="value"in xa?xa.value:xa.textContent,r=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===i[r-s];s++);return Hw=i.slice(n,1<s?1-s:void 0)}function Vw(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function nw(){return!0}function gR(){return!1}function Es(n){function e(t,s,i,r,o){this._reactName=t,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?nw:gR,this.isPropagationStopped=gR,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=nw)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=nw)},persist:function(){},isPersistent:nw}),e}var kf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wk=Es(kf),vv=lt({},kf,{view:0,detail:0}),i5=Es(vv),f1,p1,Yf,z_=lt({},vv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bk,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Yf&&(Yf&&n.type==="mousemove"?(f1=n.screenX-Yf.screenX,p1=n.screenY-Yf.screenY):p1=f1=0,Yf=n),f1)},movementY:function(n){return"movementY"in n?n.movementY:p1}}),yR=Es(z_),r5=lt({},z_,{dataTransfer:0}),o5=Es(r5),a5=lt({},vv,{relatedTarget:0}),m1=Es(a5),l5=lt({},kf,{animationName:0,elapsedTime:0,pseudoElement:0}),c5=Es(l5),u5=lt({},kf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h5=Es(u5),d5=lt({},kf,{data:0}),vR=Es(d5),f5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g5(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=m5[n])?!!e[n]:!1}function bk(){return g5}var y5=lt({},vv,{key:function(n){if(n.key){var e=f5[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Vw(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?p5[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bk,charCode:function(n){return n.type==="keypress"?Vw(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vw(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),v5=Es(y5),w5=lt({},z_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wR=Es(w5),b5=lt({},vv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bk}),x5=Es(b5),_5=lt({},kf,{propertyName:0,elapsedTime:0,pseudoElement:0}),S5=Es(_5),E5=lt({},z_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),C5=Es(E5),A5=[9,13,27,32],xk=io&&"CompositionEvent"in window,Hp=null;io&&"documentMode"in document&&(Hp=document.documentMode);var T5=io&&"TextEvent"in window&&!Hp,M2=io&&(!xk||Hp&&8<Hp&&11>=Hp),bR=String.fromCharCode(32),xR=!1;function N2(n,e){switch(n){case"keyup":return A5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D2(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var zu=!1;function k5(n,e){switch(n){case"compositionend":return D2(e);case"keypress":return e.which!==32?null:(xR=!0,bR);case"textInput":return n=e.data,n===bR&&xR?null:n;default:return null}}function I5(n,e){if(zu)return n==="compositionend"||!xk&&N2(n,e)?(n=R2(),Hw=vk=xa=null,zu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return M2&&e.locale!=="ko"?null:e.data;default:return null}}var P5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _R(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!P5[n.type]:e==="textarea"}function L2(n,e,t,s){d2(s),e=z0(e,"onChange"),0<e.length&&(t=new wk("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Vp=null,dm=null;function R5(n){G2(n,0)}function W_(n){var e=Yu(n);if(r2(e))return n}function M5(n,e){if(n==="change")return e}var O2=!1;if(io){var g1;if(io){var y1="oninput"in document;if(!y1){var SR=document.createElement("div");SR.setAttribute("oninput","return;"),y1=typeof SR.oninput=="function"}g1=y1}else g1=!1;O2=g1&&(!document.documentMode||9<document.documentMode)}function ER(){Vp&&(Vp.detachEvent("onpropertychange",F2),dm=Vp=null)}function F2(n){if(n.propertyName==="value"&&W_(dm)){var e=[];L2(e,dm,n,fk(n)),g2(R5,e)}}function N5(n,e,t){n==="focusin"?(ER(),Vp=e,dm=t,Vp.attachEvent("onpropertychange",F2)):n==="focusout"&&ER()}function D5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return W_(dm)}function L5(n,e){if(n==="click")return W_(e)}function O5(n,e){if(n==="input"||n==="change")return W_(e)}function F5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var _i=typeof Object.is=="function"?Object.is:F5;function fm(n,e){if(_i(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var i=t[s];if(!jE.call(e,i)||!_i(n[i],e[i]))return!1}return!0}function CR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function AR(n,e){var t=CR(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=CR(t)}}function j2(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?j2(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function B2(){for(var n=window,e=F0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=F0(n.document)}return e}function _k(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function j5(n){var e=B2(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&j2(t.ownerDocument.documentElement,t)){if(s!==null&&_k(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=AR(t,r);var o=AR(t,s);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var B5=io&&"documentMode"in document&&11>=document.documentMode,Wu=null,sC=null,Up=null,iC=!1;function TR(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;iC||Wu==null||Wu!==F0(s)||(s=Wu,"selectionStart"in s&&_k(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Up&&fm(Up,s)||(Up=s,s=z0(sC,"onSelect"),0<s.length&&(e=new wk("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Wu)))}function sw(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Gu={animationend:sw("Animation","AnimationEnd"),animationiteration:sw("Animation","AnimationIteration"),animationstart:sw("Animation","AnimationStart"),transitionend:sw("Transition","TransitionEnd")},v1={},H2={};io&&(H2=document.createElement("div").style,"AnimationEvent"in window||(delete Gu.animationend.animation,delete Gu.animationiteration.animation,delete Gu.animationstart.animation),"TransitionEvent"in window||delete Gu.transitionend.transition);function G_(n){if(v1[n])return v1[n];if(!Gu[n])return n;var e=Gu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in H2)return v1[n]=e[t];return n}var V2=G_("animationend"),U2=G_("animationiteration"),$2=G_("animationstart"),z2=G_("transitionend"),W2=new Map,kR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qa(n,e){W2.set(n,e),yu(e,[n])}for(var w1=0;w1<kR.length;w1++){var b1=kR[w1],H5=b1.toLowerCase(),V5=b1[0].toUpperCase()+b1.slice(1);qa(H5,"on"+V5)}qa(V2,"onAnimationEnd");qa(U2,"onAnimationIteration");qa($2,"onAnimationStart");qa("dblclick","onDoubleClick");qa("focusin","onFocus");qa("focusout","onBlur");qa(z2,"onTransitionEnd");rf("onMouseEnter",["mouseout","mouseover"]);rf("onMouseLeave",["mouseout","mouseover"]);rf("onPointerEnter",["pointerout","pointerover"]);rf("onPointerLeave",["pointerout","pointerover"]);yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U5=new Set("cancel close invalid load scroll toggle".split(" ").concat(mp));function IR(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,HW(s,e,void 0,n),n.currentTarget=null}function G2(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break e;IR(i,a,c),r=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break e;IR(i,a,c),r=l}}}if(B0)throw n=ZE,B0=!1,ZE=null,n}function Ke(n,e){var t=e[cC];t===void 0&&(t=e[cC]=new Set);var s=n+"__bubble";t.has(s)||(Y2(e,n,2,!1),t.add(s))}function x1(n,e,t){var s=0;e&&(s|=4),Y2(t,n,s,e)}var iw="_reactListening"+Math.random().toString(36).slice(2);function pm(n){if(!n[iw]){n[iw]=!0,e2.forEach(function(t){t!=="selectionchange"&&(U5.has(t)||x1(t,!1,n),x1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[iw]||(e[iw]=!0,x1("selectionchange",!1,e))}}function Y2(n,e,t,s){switch(P2(e)){case 1:var i=n5;break;case 4:i=s5;break;default:i=yk}t=i.bind(null,e,t,n),i=void 0,!JE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function _1(n,e,t,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=xl(a),o===null)return;if(l=o.tag,l===5||l===6){s=r=o;continue e}a=a.parentNode}}s=s.return}g2(function(){var c=r,u=fk(t),d=[];e:{var f=W2.get(n);if(f!==void 0){var p=wk,y=n;switch(n){case"keypress":if(Vw(t)===0)break e;case"keydown":case"keyup":p=v5;break;case"focusin":y="focus",p=m1;break;case"focusout":y="blur",p=m1;break;case"beforeblur":case"afterblur":p=m1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=yR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=o5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=x5;break;case V2:case U2:case $2:p=c5;break;case z2:p=S5;break;case"scroll":p=i5;break;case"wheel":p=C5;break;case"copy":case"cut":case"paste":p=h5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=wR}var g=(e&4)!==0,S=!g&&n==="scroll",w=g?f!==null?f+"Capture":null:f;g=[];for(var _=c,v;_!==null;){v=_;var m=v.stateNode;if(v.tag===5&&m!==null&&(v=m,w!==null&&(m=lm(_,w),m!=null&&g.push(mm(_,m,v)))),S)break;_=_.return}0<g.length&&(f=new p(f,y,null,t,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==XE&&(y=t.relatedTarget||t.fromElement)&&(xl(y)||y[ro]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=t.relatedTarget||t.toElement,p=c,y=y?xl(y):null,y!==null&&(S=vu(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(g=yR,m="onMouseLeave",w="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(g=wR,m="onPointerLeave",w="onPointerEnter",_="pointer"),S=p==null?f:Yu(p),v=y==null?f:Yu(y),f=new g(m,_+"leave",p,t,u),f.target=S,f.relatedTarget=v,m=null,xl(u)===c&&(g=new g(w,_+"enter",y,t,u),g.target=v,g.relatedTarget=S,m=g),S=m,p&&y)t:{for(g=p,w=y,_=0,v=g;v;v=Iu(v))_++;for(v=0,m=w;m;m=Iu(m))v++;for(;0<_-v;)g=Iu(g),_--;for(;0<v-_;)w=Iu(w),v--;for(;_--;){if(g===w||w!==null&&g===w.alternate)break t;g=Iu(g),w=Iu(w)}g=null}else g=null;p!==null&&PR(d,f,p,g,!1),y!==null&&S!==null&&PR(d,S,y,g,!0)}}e:{if(f=c?Yu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var x=M5;else if(_R(f))if(O2)x=O5;else{x=D5;var A=N5}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=L5);if(x&&(x=x(n,c))){L2(d,x,t,u);break e}A&&A(n,f,c),n==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&WE(f,"number",f.value)}switch(A=c?Yu(c):window,n){case"focusin":(_R(A)||A.contentEditable==="true")&&(Wu=A,sC=c,Up=null);break;case"focusout":Up=sC=Wu=null;break;case"mousedown":iC=!0;break;case"contextmenu":case"mouseup":case"dragend":iC=!1,TR(d,t,u);break;case"selectionchange":if(B5)break;case"keydown":case"keyup":TR(d,t,u)}var k;if(xk)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else zu?N2(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(M2&&t.locale!=="ko"&&(zu||P!=="onCompositionStart"?P==="onCompositionEnd"&&zu&&(k=R2()):(xa=u,vk="value"in xa?xa.value:xa.textContent,zu=!0)),A=z0(c,P),0<A.length&&(P=new vR(P,n,null,t,u),d.push({event:P,listeners:A}),k?P.data=k:(k=D2(t),k!==null&&(P.data=k)))),(k=T5?k5(n,t):I5(n,t))&&(c=z0(c,"onBeforeInput"),0<c.length&&(u=new vR("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=k))}G2(d,e)})}function mm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function z0(n,e){for(var t=e+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=lm(n,t),r!=null&&s.unshift(mm(n,r,i)),r=lm(n,e),r!=null&&s.push(mm(n,r,i))),n=n.return}return s}function Iu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function PR(n,e,t,s,i){for(var r=e._reactName,o=[];t!==null&&t!==s;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,i?(l=lm(t,r),l!=null&&o.unshift(mm(t,l,a))):i||(l=lm(t,r),l!=null&&o.push(mm(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var $5=/\r\n?/g,z5=/\u0000|\uFFFD/g;function RR(n){return(typeof n=="string"?n:""+n).replace($5,`
`).replace(z5,"")}function rw(n,e,t){if(e=RR(e),RR(n)!==e&&t)throw Error(U(425))}function W0(){}var rC=null,oC=null;function aC(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lC=typeof setTimeout=="function"?setTimeout:void 0,W5=typeof clearTimeout=="function"?clearTimeout:void 0,MR=typeof Promise=="function"?Promise:void 0,G5=typeof queueMicrotask=="function"?queueMicrotask:typeof MR<"u"?function(n){return MR.resolve(null).then(n).catch(Y5)}:lC;function Y5(n){setTimeout(function(){throw n})}function S1(n,e){var t=e,s=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(s===0){n.removeChild(i),hm(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=i}while(t);hm(e)}function Ta(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function NR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var If=Math.random().toString(36).slice(2),qi="__reactFiber$"+If,gm="__reactProps$"+If,ro="__reactContainer$"+If,cC="__reactEvents$"+If,K5="__reactListeners$"+If,q5="__reactHandles$"+If;function xl(n){var e=n[qi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ro]||t[qi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=NR(n);n!==null;){if(t=n[qi])return t;n=NR(n)}return e}n=t,t=n.parentNode}return null}function wv(n){return n=n[qi]||n[ro],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Yu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(U(33))}function Y_(n){return n[gm]||null}var uC=[],Ku=-1;function Xa(n){return{current:n}}function Xe(n){0>Ku||(n.current=uC[Ku],uC[Ku]=null,Ku--)}function ze(n,e){Ku++,uC[Ku]=n.current,n.current=e}var Ha={},vn=Xa(Ha),Gn=Xa(!1),tu=Ha;function of(n,e){var t=n.type.contextTypes;if(!t)return Ha;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Yn(n){return n=n.childContextTypes,n!=null}function G0(){Xe(Gn),Xe(vn)}function DR(n,e,t){if(vn.current!==Ha)throw Error(U(168));ze(vn,e),ze(Gn,t)}function K2(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(U(108,NW(n)||"Unknown",i));return lt({},t,s)}function Y0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ha,tu=vn.current,ze(vn,n),ze(Gn,Gn.current),!0}function LR(n,e,t){var s=n.stateNode;if(!s)throw Error(U(169));t?(n=K2(n,e,tu),s.__reactInternalMemoizedMergedChildContext=n,Xe(Gn),Xe(vn),ze(vn,n)):Xe(Gn),ze(Gn,t)}var gr=null,K_=!1,E1=!1;function q2(n){gr===null?gr=[n]:gr.push(n)}function X5(n){K_=!0,q2(n)}function Qa(){if(!E1&&gr!==null){E1=!0;var n=0,e=Le;try{var t=gr;for(Le=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}gr=null,K_=!1}catch(i){throw gr!==null&&(gr=gr.slice(n+1)),b2(pk,Qa),i}finally{Le=e,E1=!1}}return null}var qu=[],Xu=0,K0=null,q0=0,js=[],Bs=0,nu=null,Xr=1,Qr="";function ll(n,e){qu[Xu++]=q0,qu[Xu++]=K0,K0=n,q0=e}function X2(n,e,t){js[Bs++]=Xr,js[Bs++]=Qr,js[Bs++]=nu,nu=n;var s=Xr;n=Qr;var i=32-wi(s)-1;s&=~(1<<i),t+=1;var r=32-wi(e)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Xr=1<<32-wi(e)+i|t<<i|s,Qr=r+n}else Xr=1<<r|t<<i|s,Qr=n}function Sk(n){n.return!==null&&(ll(n,1),X2(n,1,0))}function Ek(n){for(;n===K0;)K0=qu[--Xu],qu[Xu]=null,q0=qu[--Xu],qu[Xu]=null;for(;n===nu;)nu=js[--Bs],js[Bs]=null,Qr=js[--Bs],js[Bs]=null,Xr=js[--Bs],js[Bs]=null}var ws=null,ys=null,nt=!1,pi=null;function Q2(n,e){var t=Vs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function OR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ws=n,ys=Ta(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ws=n,ys=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=nu!==null?{id:Xr,overflow:Qr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Vs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ws=n,ys=null,!0):!1;default:return!1}}function hC(n){return(n.mode&1)!==0&&(n.flags&128)===0}function dC(n){if(nt){var e=ys;if(e){var t=e;if(!OR(n,e)){if(hC(n))throw Error(U(418));e=Ta(t.nextSibling);var s=ws;e&&OR(n,e)?Q2(s,t):(n.flags=n.flags&-4097|2,nt=!1,ws=n)}}else{if(hC(n))throw Error(U(418));n.flags=n.flags&-4097|2,nt=!1,ws=n}}}function FR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ws=n}function ow(n){if(n!==ws)return!1;if(!nt)return FR(n),nt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!aC(n.type,n.memoizedProps)),e&&(e=ys)){if(hC(n))throw J2(),Error(U(418));for(;e;)Q2(n,e),e=Ta(e.nextSibling)}if(FR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(U(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ys=Ta(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ys=null}}else ys=ws?Ta(n.stateNode.nextSibling):null;return!0}function J2(){for(var n=ys;n;)n=Ta(n.nextSibling)}function af(){ys=ws=null,nt=!1}function Ck(n){pi===null?pi=[n]:pi.push(n)}var Q5=go.ReactCurrentBatchConfig;function Kf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(U(309));var s=t.stateNode}if(!s)throw Error(U(147,n));var i=s,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=i.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(U(284));if(!t._owner)throw Error(U(290,n))}return n}function aw(n,e){throw n=Object.prototype.toString.call(e),Error(U(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function jR(n){var e=n._init;return e(n._payload)}function Z2(n){function e(w,_){if(n){var v=w.deletions;v===null?(w.deletions=[_],w.flags|=16):v.push(_)}}function t(w,_){if(!n)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function s(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=Ra(w,_),w.index=0,w.sibling=null,w}function r(w,_,v){return w.index=v,n?(v=w.alternate,v!==null?(v=v.index,v<_?(w.flags|=2,_):v):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return n&&w.alternate===null&&(w.flags|=2),w}function a(w,_,v,m){return _===null||_.tag!==6?(_=R1(v,w.mode,m),_.return=w,_):(_=i(_,v),_.return=w,_)}function l(w,_,v,m){var x=v.type;return x===$u?u(w,_,v.props.children,m,v.key):_!==null&&(_.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===To&&jR(x)===_.type)?(m=i(_,v.props),m.ref=Kf(w,_,v),m.return=w,m):(m=Kw(v.type,v.key,v.props,null,w.mode,m),m.ref=Kf(w,_,v),m.return=w,m)}function c(w,_,v,m){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=M1(v,w.mode,m),_.return=w,_):(_=i(_,v.children||[]),_.return=w,_)}function u(w,_,v,m,x){return _===null||_.tag!==7?(_=Jc(v,w.mode,m,x),_.return=w,_):(_=i(_,v),_.return=w,_)}function d(w,_,v){if(typeof _=="string"&&_!==""||typeof _=="number")return _=R1(""+_,w.mode,v),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Xv:return v=Kw(_.type,_.key,_.props,null,w.mode,v),v.ref=Kf(w,null,_),v.return=w,v;case Uu:return _=M1(_,w.mode,v),_.return=w,_;case To:var m=_._init;return d(w,m(_._payload),v)}if(fp(_)||$f(_))return _=Jc(_,w.mode,v,null),_.return=w,_;aw(w,_)}return null}function f(w,_,v,m){var x=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return x!==null?null:a(w,_,""+v,m);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xv:return v.key===x?l(w,_,v,m):null;case Uu:return v.key===x?c(w,_,v,m):null;case To:return x=v._init,f(w,_,x(v._payload),m)}if(fp(v)||$f(v))return x!==null?null:u(w,_,v,m,null);aw(w,v)}return null}function p(w,_,v,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return w=w.get(v)||null,a(_,w,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Xv:return w=w.get(m.key===null?v:m.key)||null,l(_,w,m,x);case Uu:return w=w.get(m.key===null?v:m.key)||null,c(_,w,m,x);case To:var A=m._init;return p(w,_,v,A(m._payload),x)}if(fp(m)||$f(m))return w=w.get(v)||null,u(_,w,m,x,null);aw(_,m)}return null}function y(w,_,v,m){for(var x=null,A=null,k=_,P=_=0,R=null;k!==null&&P<v.length;P++){k.index>P?(R=k,k=null):R=k.sibling;var M=f(w,k,v[P],m);if(M===null){k===null&&(k=R);break}n&&k&&M.alternate===null&&e(w,k),_=r(M,_,P),A===null?x=M:A.sibling=M,A=M,k=R}if(P===v.length)return t(w,k),nt&&ll(w,P),x;if(k===null){for(;P<v.length;P++)k=d(w,v[P],m),k!==null&&(_=r(k,_,P),A===null?x=k:A.sibling=k,A=k);return nt&&ll(w,P),x}for(k=s(w,k);P<v.length;P++)R=p(k,w,P,v[P],m),R!==null&&(n&&R.alternate!==null&&k.delete(R.key===null?P:R.key),_=r(R,_,P),A===null?x=R:A.sibling=R,A=R);return n&&k.forEach(function(N){return e(w,N)}),nt&&ll(w,P),x}function g(w,_,v,m){var x=$f(v);if(typeof x!="function")throw Error(U(150));if(v=x.call(v),v==null)throw Error(U(151));for(var A=x=null,k=_,P=_=0,R=null,M=v.next();k!==null&&!M.done;P++,M=v.next()){k.index>P?(R=k,k=null):R=k.sibling;var N=f(w,k,M.value,m);if(N===null){k===null&&(k=R);break}n&&k&&N.alternate===null&&e(w,k),_=r(N,_,P),A===null?x=N:A.sibling=N,A=N,k=R}if(M.done)return t(w,k),nt&&ll(w,P),x;if(k===null){for(;!M.done;P++,M=v.next())M=d(w,M.value,m),M!==null&&(_=r(M,_,P),A===null?x=M:A.sibling=M,A=M);return nt&&ll(w,P),x}for(k=s(w,k);!M.done;P++,M=v.next())M=p(k,w,P,M.value,m),M!==null&&(n&&M.alternate!==null&&k.delete(M.key===null?P:M.key),_=r(M,_,P),A===null?x=M:A.sibling=M,A=M);return n&&k.forEach(function(F){return e(w,F)}),nt&&ll(w,P),x}function S(w,_,v,m){if(typeof v=="object"&&v!==null&&v.type===$u&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Xv:e:{for(var x=v.key,A=_;A!==null;){if(A.key===x){if(x=v.type,x===$u){if(A.tag===7){t(w,A.sibling),_=i(A,v.props.children),_.return=w,w=_;break e}}else if(A.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===To&&jR(x)===A.type){t(w,A.sibling),_=i(A,v.props),_.ref=Kf(w,A,v),_.return=w,w=_;break e}t(w,A);break}else e(w,A);A=A.sibling}v.type===$u?(_=Jc(v.props.children,w.mode,m,v.key),_.return=w,w=_):(m=Kw(v.type,v.key,v.props,null,w.mode,m),m.ref=Kf(w,_,v),m.return=w,w=m)}return o(w);case Uu:e:{for(A=v.key;_!==null;){if(_.key===A)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){t(w,_.sibling),_=i(_,v.children||[]),_.return=w,w=_;break e}else{t(w,_);break}else e(w,_);_=_.sibling}_=M1(v,w.mode,m),_.return=w,w=_}return o(w);case To:return A=v._init,S(w,_,A(v._payload),m)}if(fp(v))return y(w,_,v,m);if($f(v))return g(w,_,v,m);aw(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,_!==null&&_.tag===6?(t(w,_.sibling),_=i(_,v),_.return=w,w=_):(t(w,_),_=R1(v,w.mode,m),_.return=w,w=_),o(w)):t(w,_)}return S}var lf=Z2(!0),eO=Z2(!1),X0=Xa(null),Q0=null,Qu=null,Ak=null;function Tk(){Ak=Qu=Q0=null}function kk(n){var e=X0.current;Xe(X0),n._currentValue=e}function fC(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function dh(n,e){Q0=n,Ak=Qu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&($n=!0),n.firstContext=null)}function Ws(n){var e=n._currentValue;if(Ak!==n)if(n={context:n,memoizedValue:e,next:null},Qu===null){if(Q0===null)throw Error(U(308));Qu=n,Q0.dependencies={lanes:0,firstContext:n}}else Qu=Qu.next=n;return e}var _l=null;function Ik(n){_l===null?_l=[n]:_l.push(n)}function tO(n,e,t,s){var i=e.interleaved;return i===null?(t.next=t,Ik(e)):(t.next=i.next,i.next=t),e.interleaved=t,oo(n,s)}function oo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ko=!1;function Pk(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nO(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function to(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ka(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Pe&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,oo(n,t)}return i=s.interleaved,i===null?(e.next=e,Ik(s)):(e.next=i.next,i.next=e),s.interleaved=e,oo(n,t)}function Uw(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,mk(n,t)}}function BR(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function J0(n,e,t,s){var i=n.updateQueue;ko=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var d=i.baseState;o=0,u=c=l=null,a=r;do{var f=a.lane,p=a.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,g=a;switch(f=e,p=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){d=y.call(p,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,f=typeof y=="function"?y.call(p,d,f):y,f==null)break e;d=lt({},d,f);break e;case 2:ko=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);iu|=o,n.lanes=o,n.memoizedState=d}}function HR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],i=s.callback;if(i!==null){if(s.callback=null,s=t,typeof i!="function")throw Error(U(191,i));i.call(s)}}}var bv={},tr=Xa(bv),ym=Xa(bv),vm=Xa(bv);function Sl(n){if(n===bv)throw Error(U(174));return n}function Rk(n,e){switch(ze(vm,e),ze(ym,n),ze(tr,bv),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:YE(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=YE(e,n)}Xe(tr),ze(tr,e)}function cf(){Xe(tr),Xe(ym),Xe(vm)}function sO(n){Sl(vm.current);var e=Sl(tr.current),t=YE(e,n.type);e!==t&&(ze(ym,n),ze(tr,t))}function Mk(n){ym.current===n&&(Xe(tr),Xe(ym))}var rt=Xa(0);function Z0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var C1=[];function Nk(){for(var n=0;n<C1.length;n++)C1[n]._workInProgressVersionPrimary=null;C1.length=0}var $w=go.ReactCurrentDispatcher,A1=go.ReactCurrentBatchConfig,su=0,at=null,Pt=null,$t=null,eb=!1,$p=!1,wm=0,J5=0;function an(){throw Error(U(321))}function Dk(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!_i(n[t],e[t]))return!1;return!0}function Lk(n,e,t,s,i,r){if(su=r,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$w.current=n===null||n.memoizedState===null?n6:s6,n=t(s,i),$p){r=0;do{if($p=!1,wm=0,25<=r)throw Error(U(301));r+=1,$t=Pt=null,e.updateQueue=null,$w.current=i6,n=t(s,i)}while($p)}if($w.current=tb,e=Pt!==null&&Pt.next!==null,su=0,$t=Pt=at=null,eb=!1,e)throw Error(U(300));return n}function Ok(){var n=wm!==0;return wm=0,n}function Pi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?at.memoizedState=$t=n:$t=$t.next=n,$t}function Gs(){if(Pt===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=Pt.next;var e=$t===null?at.memoizedState:$t.next;if(e!==null)$t=e,Pt=n;else{if(n===null)throw Error(U(310));Pt=n,n={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},$t===null?at.memoizedState=$t=n:$t=$t.next=n}return $t}function bm(n,e){return typeof e=="function"?e(n):e}function T1(n){var e=Gs(),t=e.queue;if(t===null)throw Error(U(311));t.lastRenderedReducer=n;var s=Pt,i=s.baseQueue,r=t.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}s.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,s=s.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((su&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:n(s,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=s):l=l.next=d,at.lanes|=u,iu|=u}c=c.next}while(c!==null&&c!==r);l===null?o=s:l.next=a,_i(s,e.memoizedState)||($n=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,t.lastRenderedState=s}if(n=t.interleaved,n!==null){i=n;do r=i.lane,at.lanes|=r,iu|=r,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function k1(n){var e=Gs(),t=e.queue;if(t===null)throw Error(U(311));t.lastRenderedReducer=n;var s=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do r=n(r,o.action),o=o.next;while(o!==i);_i(r,e.memoizedState)||($n=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,s]}function iO(){}function rO(n,e){var t=at,s=Gs(),i=e(),r=!_i(s.memoizedState,i);if(r&&(s.memoizedState=i,$n=!0),s=s.queue,Fk(lO.bind(null,t,s,n),[n]),s.getSnapshot!==e||r||$t!==null&&$t.memoizedState.tag&1){if(t.flags|=2048,xm(9,aO.bind(null,t,s,i,e),void 0,null),Gt===null)throw Error(U(349));su&30||oO(t,e,i)}return i}function oO(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function aO(n,e,t,s){e.value=t,e.getSnapshot=s,cO(e)&&uO(n)}function lO(n,e,t){return t(function(){cO(e)&&uO(n)})}function cO(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!_i(n,t)}catch{return!0}}function uO(n){var e=oo(n,1);e!==null&&bi(e,n,1,-1)}function VR(n){var e=Pi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bm,lastRenderedState:n},e.queue=n,n=n.dispatch=t6.bind(null,at,n),[e.memoizedState,n]}function xm(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function hO(){return Gs().memoizedState}function zw(n,e,t,s){var i=Pi();at.flags|=n,i.memoizedState=xm(1|e,t,void 0,s===void 0?null:s)}function q_(n,e,t,s){var i=Gs();s=s===void 0?null:s;var r=void 0;if(Pt!==null){var o=Pt.memoizedState;if(r=o.destroy,s!==null&&Dk(s,o.deps)){i.memoizedState=xm(e,t,r,s);return}}at.flags|=n,i.memoizedState=xm(1|e,t,r,s)}function UR(n,e){return zw(8390656,8,n,e)}function Fk(n,e){return q_(2048,8,n,e)}function dO(n,e){return q_(4,2,n,e)}function fO(n,e){return q_(4,4,n,e)}function pO(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function mO(n,e,t){return t=t!=null?t.concat([n]):null,q_(4,4,pO.bind(null,e,n),t)}function jk(){}function gO(n,e){var t=Gs();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&Dk(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function yO(n,e){var t=Gs();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&Dk(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function vO(n,e,t){return su&21?(_i(t,e)||(t=S2(),at.lanes|=t,iu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,$n=!0),n.memoizedState=t)}function Z5(n,e){var t=Le;Le=t!==0&&4>t?t:4,n(!0);var s=A1.transition;A1.transition={};try{n(!1),e()}finally{Le=t,A1.transition=s}}function wO(){return Gs().memoizedState}function e6(n,e,t){var s=Pa(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},bO(n))xO(e,t);else if(t=tO(n,e,t,s),t!==null){var i=Rn();bi(t,n,s,i),_O(t,e,s)}}function t6(n,e,t){var s=Pa(n),i={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(bO(n))xO(e,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(i.hasEagerState=!0,i.eagerState=a,_i(a,o)){var l=e.interleaved;l===null?(i.next=i,Ik(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=tO(n,e,i,s),t!==null&&(i=Rn(),bi(t,n,s,i),_O(t,e,s))}}function bO(n){var e=n.alternate;return n===at||e!==null&&e===at}function xO(n,e){$p=eb=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function _O(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,mk(n,t)}}var tb={readContext:Ws,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},n6={readContext:Ws,useCallback:function(n,e){return Pi().memoizedState=[n,e===void 0?null:e],n},useContext:Ws,useEffect:UR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,zw(4194308,4,pO.bind(null,e,n),t)},useLayoutEffect:function(n,e){return zw(4194308,4,n,e)},useInsertionEffect:function(n,e){return zw(4,2,n,e)},useMemo:function(n,e){var t=Pi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=Pi();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=e6.bind(null,at,n),[s.memoizedState,n]},useRef:function(n){var e=Pi();return n={current:n},e.memoizedState=n},useState:VR,useDebugValue:jk,useDeferredValue:function(n){return Pi().memoizedState=n},useTransition:function(){var n=VR(!1),e=n[0];return n=Z5.bind(null,n[1]),Pi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=at,i=Pi();if(nt){if(t===void 0)throw Error(U(407));t=t()}else{if(t=e(),Gt===null)throw Error(U(349));su&30||oO(s,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,UR(lO.bind(null,s,r,n),[n]),s.flags|=2048,xm(9,aO.bind(null,s,r,t,e),void 0,null),t},useId:function(){var n=Pi(),e=Gt.identifierPrefix;if(nt){var t=Qr,s=Xr;t=(s&~(1<<32-wi(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=wm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=J5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},s6={readContext:Ws,useCallback:gO,useContext:Ws,useEffect:Fk,useImperativeHandle:mO,useInsertionEffect:dO,useLayoutEffect:fO,useMemo:yO,useReducer:T1,useRef:hO,useState:function(){return T1(bm)},useDebugValue:jk,useDeferredValue:function(n){var e=Gs();return vO(e,Pt.memoizedState,n)},useTransition:function(){var n=T1(bm)[0],e=Gs().memoizedState;return[n,e]},useMutableSource:iO,useSyncExternalStore:rO,useId:wO,unstable_isNewReconciler:!1},i6={readContext:Ws,useCallback:gO,useContext:Ws,useEffect:Fk,useImperativeHandle:mO,useInsertionEffect:dO,useLayoutEffect:fO,useMemo:yO,useReducer:k1,useRef:hO,useState:function(){return k1(bm)},useDebugValue:jk,useDeferredValue:function(n){var e=Gs();return Pt===null?e.memoizedState=n:vO(e,Pt.memoizedState,n)},useTransition:function(){var n=k1(bm)[0],e=Gs().memoizedState;return[n,e]},useMutableSource:iO,useSyncExternalStore:rO,useId:wO,unstable_isNewReconciler:!1};function Js(n,e){if(n&&n.defaultProps){e=lt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function pC(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:lt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var X_={isMounted:function(n){return(n=n._reactInternals)?vu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Rn(),i=Pa(n),r=to(s,i);r.payload=e,t!=null&&(r.callback=t),e=ka(n,r,i),e!==null&&(bi(e,n,i,s),Uw(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Rn(),i=Pa(n),r=to(s,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=ka(n,r,i),e!==null&&(bi(e,n,i,s),Uw(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Rn(),s=Pa(n),i=to(t,s);i.tag=2,e!=null&&(i.callback=e),e=ka(n,i,s),e!==null&&(bi(e,n,s,t),Uw(e,n,s))}};function $R(n,e,t,s,i,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,o):e.prototype&&e.prototype.isPureReactComponent?!fm(t,s)||!fm(i,r):!0}function SO(n,e,t){var s=!1,i=Ha,r=e.contextType;return typeof r=="object"&&r!==null?r=Ws(r):(i=Yn(e)?tu:vn.current,s=e.contextTypes,r=(s=s!=null)?of(n,i):Ha),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=X_,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),e}function zR(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&X_.enqueueReplaceState(e,e.state,null)}function mC(n,e,t,s){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},Pk(n);var r=e.contextType;typeof r=="object"&&r!==null?i.context=Ws(r):(r=Yn(e)?tu:vn.current,i.context=of(n,r)),i.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(pC(n,e,r,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&X_.enqueueReplaceState(i,i.state,null),J0(n,t,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function uf(n,e){try{var t="",s=e;do t+=MW(s),s=s.return;while(s);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:i,digest:null}}function I1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function gC(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var r6=typeof WeakMap=="function"?WeakMap:Map;function EO(n,e,t){t=to(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){sb||(sb=!0,AC=s),gC(n,e)},t}function CO(n,e,t){t=to(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;t.payload=function(){return s(i)},t.callback=function(){gC(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){gC(n,e),typeof s!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function WR(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new r6;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(t)||(i.add(t),n=w6.bind(null,n,e,t),e.then(n,n))}function GR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function YR(n,e,t,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=to(-1,1),e.tag=2,ka(t,e,1))),t.lanes|=1),n)}var o6=go.ReactCurrentOwner,$n=!1;function Pn(n,e,t,s){e.child=n===null?eO(e,null,t,s):lf(e,n.child,t,s)}function KR(n,e,t,s,i){t=t.render;var r=e.ref;return dh(e,i),s=Lk(n,e,t,s,r,i),t=Ok(),n!==null&&!$n?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ao(n,e,i)):(nt&&t&&Sk(e),e.flags|=1,Pn(n,e,s,i),e.child)}function qR(n,e,t,s,i){if(n===null){var r=t.type;return typeof r=="function"&&!Gk(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,AO(n,e,r,s,i)):(n=Kw(t.type,null,s,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&i)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:fm,t(o,s)&&n.ref===e.ref)return ao(n,e,i)}return e.flags|=1,n=Ra(r,s),n.ref=e.ref,n.return=e,e.child=n}function AO(n,e,t,s,i){if(n!==null){var r=n.memoizedProps;if(fm(r,s)&&n.ref===e.ref)if($n=!1,e.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&($n=!0);else return e.lanes=n.lanes,ao(n,e,i)}return yC(n,e,t,s,i)}function TO(n,e,t){var s=e.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Zu,ps),ps|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ze(Zu,ps),ps|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:t,ze(Zu,ps),ps|=s}else r!==null?(s=r.baseLanes|t,e.memoizedState=null):s=t,ze(Zu,ps),ps|=s;return Pn(n,e,i,t),e.child}function kO(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function yC(n,e,t,s,i){var r=Yn(t)?tu:vn.current;return r=of(e,r),dh(e,i),t=Lk(n,e,t,s,r,i),s=Ok(),n!==null&&!$n?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ao(n,e,i)):(nt&&s&&Sk(e),e.flags|=1,Pn(n,e,t,i),e.child)}function XR(n,e,t,s,i){if(Yn(t)){var r=!0;Y0(e)}else r=!1;if(dh(e,i),e.stateNode===null)Ww(n,e),SO(e,t,s),mC(e,t,s,i),s=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Ws(c):(c=Yn(t)?tu:vn.current,c=of(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&zR(e,o,s,c),ko=!1;var f=e.memoizedState;o.state=f,J0(e,s,o,i),l=e.memoizedState,a!==s||f!==l||Gn.current||ko?(typeof u=="function"&&(pC(e,t,u,s),l=e.memoizedState),(a=ko||$R(e,t,a,s,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,nO(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Js(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ws(l):(l=Yn(t)?tu:vn.current,l=of(e,l));var p=t.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&zR(e,o,s,l),ko=!1,f=e.memoizedState,o.state=f,J0(e,s,o,i);var y=e.memoizedState;a!==d||f!==y||Gn.current||ko?(typeof p=="function"&&(pC(e,t,p,s),y=e.memoizedState),(c=ko||$R(e,t,c,s,f,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return vC(n,e,t,s,r,i)}function vC(n,e,t,s,i,r){kO(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&LR(e,t,!1),ao(n,e,r);s=e.stateNode,o6.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=lf(e,n.child,null,r),e.child=lf(e,null,a,r)):Pn(n,e,a,r),e.memoizedState=s.state,i&&LR(e,t,!0),e.child}function IO(n){var e=n.stateNode;e.pendingContext?DR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&DR(n,e.context,!1),Rk(n,e.containerInfo)}function QR(n,e,t,s,i){return af(),Ck(i),e.flags|=256,Pn(n,e,t,s),e.child}var wC={dehydrated:null,treeContext:null,retryLane:0};function bC(n){return{baseLanes:n,cachePool:null,transitions:null}}function PO(n,e,t){var s=e.pendingProps,i=rt.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ze(rt,i&1),n===null)return dC(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,r?(s=e.mode,r=e.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Z_(o,s,0,null),n=Jc(n,s,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=bC(t),e.memoizedState=wC,n):Bk(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return a6(n,e,o,s,a,i,t);if(r){r=s.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=Ra(i,l),s.subtreeFlags=i.subtreeFlags&14680064),a!==null?r=Ra(a,r):(r=Jc(r,o,t,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,o=n.child.memoizedState,o=o===null?bC(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=wC,s}return r=n.child,n=r.sibling,s=Ra(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function Bk(n,e){return e=Z_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function lw(n,e,t,s){return s!==null&&Ck(s),lf(e,n.child,null,t),n=Bk(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function a6(n,e,t,s,i,r,o){if(t)return e.flags&256?(e.flags&=-257,s=I1(Error(U(422))),lw(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=Z_({mode:"visible",children:s.children},i,0,null),r=Jc(r,i,o,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&lf(e,n.child,null,o),e.child.memoizedState=bC(o),e.memoizedState=wC,r);if(!(e.mode&1))return lw(n,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var a=s.dgst;return s=a,r=Error(U(419)),s=I1(r,s,void 0),lw(n,e,o,s)}if(a=(o&n.childLanes)!==0,$n||a){if(s=Gt,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,oo(n,i),bi(s,n,i,-1))}return Wk(),s=I1(Error(U(421))),lw(n,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=b6.bind(null,n),i._reactRetry=e,null):(n=r.treeContext,ys=Ta(i.nextSibling),ws=e,nt=!0,pi=null,n!==null&&(js[Bs++]=Xr,js[Bs++]=Qr,js[Bs++]=nu,Xr=n.id,Qr=n.overflow,nu=e),e=Bk(e,s.children),e.flags|=4096,e)}function JR(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),fC(n.return,e,t)}function P1(n,e,t,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=t,r.tailMode=i)}function RO(n,e,t){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(Pn(n,e,s.children,t),s=rt.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&JR(n,t,e);else if(n.tag===19)JR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(ze(rt,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Z0(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),P1(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Z0(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}P1(e,!0,t,null,r);break;case"together":P1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ww(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ao(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),iu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(U(153));if(e.child!==null){for(n=e.child,t=Ra(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ra(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function l6(n,e,t){switch(e.tag){case 3:IO(e),af();break;case 5:sO(e);break;case 1:Yn(e.type)&&Y0(e);break;case 4:Rk(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;ze(X0,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ze(rt,rt.current&1),e.flags|=128,null):t&e.child.childLanes?PO(n,e,t):(ze(rt,rt.current&1),n=ao(n,e,t),n!==null?n.sibling:null);ze(rt,rt.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return RO(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(rt,rt.current),s)break;return null;case 22:case 23:return e.lanes=0,TO(n,e,t)}return ao(n,e,t)}var MO,xC,NO,DO;MO=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};xC=function(){};NO=function(n,e,t,s){var i=n.memoizedProps;if(i!==s){n=e.stateNode,Sl(tr.current);var r=null;switch(t){case"input":i=$E(n,i),s=$E(n,s),r=[];break;case"select":i=lt({},i,{value:void 0}),s=lt({},s,{value:void 0}),r=[];break;case"textarea":i=GE(n,i),s=GE(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=W0)}KE(t,s);var o;t=null;for(c in i)if(!s.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(om.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in s){var l=s[c];if(a=i!=null?i[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(om.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ke("scroll",n),r||a===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};DO=function(n,e,t,s){t!==s&&(e.flags|=4)};function qf(n,e){if(!nt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function ln(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function c6(n,e,t){var s=e.pendingProps;switch(Ek(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Yn(e.type)&&G0(),ln(e),null;case 3:return s=e.stateNode,cf(),Xe(Gn),Xe(vn),Nk(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(ow(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pi!==null&&(IC(pi),pi=null))),xC(n,e),ln(e),null;case 5:Mk(e);var i=Sl(vm.current);if(t=e.type,n!==null&&e.stateNode!=null)NO(n,e,t,s,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(U(166));return ln(e),null}if(n=Sl(tr.current),ow(e)){s=e.stateNode,t=e.type;var r=e.memoizedProps;switch(s[qi]=e,s[gm]=r,n=(e.mode&1)!==0,t){case"dialog":Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":case"embed":Ke("load",s);break;case"video":case"audio":for(i=0;i<mp.length;i++)Ke(mp[i],s);break;case"source":Ke("error",s);break;case"img":case"image":case"link":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"input":aR(s,r),Ke("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Ke("invalid",s);break;case"textarea":cR(s,r),Ke("invalid",s)}KE(t,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?s.textContent!==a&&(r.suppressHydrationWarning!==!0&&rw(s.textContent,a,n),i=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&rw(s.textContent,a,n),i=["children",""+a]):om.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ke("scroll",s)}switch(t){case"input":Qv(s),lR(s,r,!0);break;case"textarea":Qv(s),uR(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=W0)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=l2(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[qi]=e,n[gm]=s,MO(n,e,!1,!1),e.stateNode=n;e:{switch(o=qE(t,s),t){case"dialog":Ke("cancel",n),Ke("close",n),i=s;break;case"iframe":case"object":case"embed":Ke("load",n),i=s;break;case"video":case"audio":for(i=0;i<mp.length;i++)Ke(mp[i],n);i=s;break;case"source":Ke("error",n),i=s;break;case"img":case"image":case"link":Ke("error",n),Ke("load",n),i=s;break;case"details":Ke("toggle",n),i=s;break;case"input":aR(n,s),i=$E(n,s),Ke("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=lt({},s,{value:void 0}),Ke("invalid",n);break;case"textarea":cR(n,s),i=GE(n,s),Ke("invalid",n);break;default:i=s}KE(t,i),a=i;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?h2(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&c2(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&am(n,l):typeof l=="number"&&am(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(om.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Ke("scroll",n):l!=null&&ck(n,r,l,o))}switch(t){case"input":Qv(n),lR(n,s,!1);break;case"textarea":Qv(n),uR(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Ba(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?lh(n,!!s.multiple,r,!1):s.defaultValue!=null&&lh(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=W0)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(n&&e.stateNode!=null)DO(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(U(166));if(t=Sl(vm.current),Sl(tr.current),ow(e)){if(s=e.stateNode,t=e.memoizedProps,s[qi]=e,(r=s.nodeValue!==t)&&(n=ws,n!==null))switch(n.tag){case 3:rw(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&rw(s.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[qi]=e,e.stateNode=s}return ln(e),null;case 13:if(Xe(rt),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&ys!==null&&e.mode&1&&!(e.flags&128))J2(),af(),e.flags|=98560,r=!1;else if(r=ow(e),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(U(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(U(317));r[qi]=e}else af(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),r=!1}else pi!==null&&(IC(pi),pi=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||rt.current&1?Mt===0&&(Mt=3):Wk())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return cf(),xC(n,e),n===null&&pm(e.stateNode.containerInfo),ln(e),null;case 10:return kk(e.type._context),ln(e),null;case 17:return Yn(e.type)&&G0(),ln(e),null;case 19:if(Xe(rt),r=e.memoizedState,r===null)return ln(e),null;if(s=(e.flags&128)!==0,o=r.rendering,o===null)if(s)qf(r,!1);else{if(Mt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Z0(n),o!==null){for(e.flags|=128,qf(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)r=t,n=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ze(rt,rt.current&1|2),e.child}n=n.sibling}r.tail!==null&&bt()>hf&&(e.flags|=128,s=!0,qf(r,!1),e.lanes=4194304)}else{if(!s)if(n=Z0(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),qf(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!nt)return ln(e),null}else 2*bt()-r.renderingStartTime>hf&&t!==1073741824&&(e.flags|=128,s=!0,qf(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=bt(),e.sibling=null,t=rt.current,ze(rt,s?t&1|2:t&1),e):(ln(e),null);case 22:case 23:return zk(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ps&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function u6(n,e){switch(Ek(e),e.tag){case 1:return Yn(e.type)&&G0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return cf(),Xe(Gn),Xe(vn),Nk(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Mk(e),null;case 13:if(Xe(rt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(U(340));af()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Xe(rt),null;case 4:return cf(),null;case 10:return kk(e.type._context),null;case 22:case 23:return zk(),null;case 24:return null;default:return null}}var cw=!1,mn=!1,h6=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ju(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){ut(n,e,s)}else t.current=null}function _C(n,e,t){try{t()}catch(s){ut(n,e,s)}}var ZR=!1;function d6(n,e){if(rC=U0,n=B2(),_k(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=n,f=null;t:for(;;){for(var p;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==r||s!==0&&d.nodeType!==3||(l=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++c===i&&(a=o),f===r&&++u===s&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(oC={focusedElem:n,selectionRange:t},U0=!1,Q=e;Q!==null;)if(e=Q,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Q=n;else for(;Q!==null;){e=Q;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,S=y.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:Js(e.type,g),S);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(m){ut(e,e.return,m)}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}return y=ZR,ZR=!1,y}function zp(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&_C(e,t,r)}i=i.next}while(i!==s)}}function Q_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function SC(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function LO(n){var e=n.alternate;e!==null&&(n.alternate=null,LO(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[qi],delete e[gm],delete e[cC],delete e[K5],delete e[q5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function OO(n){return n.tag===5||n.tag===3||n.tag===4}function eM(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||OO(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function EC(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=W0));else if(s!==4&&(n=n.child,n!==null))for(EC(n,e,t),n=n.sibling;n!==null;)EC(n,e,t),n=n.sibling}function CC(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(CC(n,e,t),n=n.sibling;n!==null;)CC(n,e,t),n=n.sibling}var en=null,fi=!1;function _o(n,e,t){for(t=t.child;t!==null;)FO(n,e,t),t=t.sibling}function FO(n,e,t){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount($_,t)}catch{}switch(t.tag){case 5:mn||Ju(t,e);case 6:var s=en,i=fi;en=null,_o(n,e,t),en=s,fi=i,en!==null&&(fi?(n=en,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):en.removeChild(t.stateNode));break;case 18:en!==null&&(fi?(n=en,t=t.stateNode,n.nodeType===8?S1(n.parentNode,t):n.nodeType===1&&S1(n,t),hm(n)):S1(en,t.stateNode));break;case 4:s=en,i=fi,en=t.stateNode.containerInfo,fi=!0,_o(n,e,t),en=s,fi=i;break;case 0:case 11:case 14:case 15:if(!mn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&_C(t,e,o),i=i.next}while(i!==s)}_o(n,e,t);break;case 1:if(!mn&&(Ju(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(a){ut(t,e,a)}_o(n,e,t);break;case 21:_o(n,e,t);break;case 22:t.mode&1?(mn=(s=mn)||t.memoizedState!==null,_o(n,e,t),mn=s):_o(n,e,t);break;default:_o(n,e,t)}}function tM(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new h6),e.forEach(function(s){var i=x6.bind(null,n,s);t.has(s)||(t.add(s),s.then(i,i))})}}function Ks(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:en=a.stateNode,fi=!1;break e;case 3:en=a.stateNode.containerInfo,fi=!0;break e;case 4:en=a.stateNode.containerInfo,fi=!0;break e}a=a.return}if(en===null)throw Error(U(160));FO(r,o,i),en=null,fi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ut(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jO(e,n),e=e.sibling}function jO(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ks(e,n),Ai(n),s&4){try{zp(3,n,n.return),Q_(3,n)}catch(g){ut(n,n.return,g)}try{zp(5,n,n.return)}catch(g){ut(n,n.return,g)}}break;case 1:Ks(e,n),Ai(n),s&512&&t!==null&&Ju(t,t.return);break;case 5:if(Ks(e,n),Ai(n),s&512&&t!==null&&Ju(t,t.return),n.flags&32){var i=n.stateNode;try{am(i,"")}catch(g){ut(n,n.return,g)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&o2(i,r),qE(a,o);var c=qE(a,r);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?h2(i,d):u==="dangerouslySetInnerHTML"?c2(i,d):u==="children"?am(i,d):ck(i,u,d,c)}switch(a){case"input":zE(i,r);break;case"textarea":a2(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?lh(i,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?lh(i,!!r.multiple,r.defaultValue,!0):lh(i,!!r.multiple,r.multiple?[]:"",!1))}i[gm]=r}catch(g){ut(n,n.return,g)}}break;case 6:if(Ks(e,n),Ai(n),s&4){if(n.stateNode===null)throw Error(U(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(g){ut(n,n.return,g)}}break;case 3:if(Ks(e,n),Ai(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{hm(e.containerInfo)}catch(g){ut(n,n.return,g)}break;case 4:Ks(e,n),Ai(n);break;case 13:Ks(e,n),Ai(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(Uk=bt())),s&4&&tM(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(mn=(c=mn)||u,Ks(e,n),mn=c):Ks(e,n),Ai(n),s&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Q=n,u=n.child;u!==null;){for(d=Q=u;Q!==null;){switch(f=Q,p=f.child,f.tag){case 0:case 11:case 14:case 15:zp(4,f,f.return);break;case 1:Ju(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){ut(s,t,g)}}break;case 5:Ju(f,f.return);break;case 22:if(f.memoizedState!==null){sM(d);continue}}p!==null?(p.return=f,Q=p):sM(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=u2("display",o))}catch(g){ut(n,n.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){ut(n,n.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ks(e,n),Ai(n),s&4&&tM(n);break;case 21:break;default:Ks(e,n),Ai(n)}}function Ai(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(OO(t)){var s=t;break e}t=t.return}throw Error(U(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(am(i,""),s.flags&=-33);var r=eM(n);CC(n,r,i);break;case 3:case 4:var o=s.stateNode.containerInfo,a=eM(n);EC(n,a,o);break;default:throw Error(U(161))}}catch(l){ut(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function f6(n,e,t){Q=n,BO(n)}function BO(n,e,t){for(var s=(n.mode&1)!==0;Q!==null;){var i=Q,r=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||cw;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||mn;a=cw;var c=mn;if(cw=o,(mn=l)&&!c)for(Q=i;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?iM(i):l!==null?(l.return=o,Q=l):iM(i);for(;r!==null;)Q=r,BO(r),r=r.sibling;Q=i,cw=a,mn=c}nM(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,Q=r):nM(n)}}function nM(n){for(;Q!==null;){var e=Q;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mn||Q_(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!mn)if(t===null)s.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Js(e.type,t.memoizedProps);s.componentDidUpdate(i,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&HR(e,r,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}HR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&hm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}mn||e.flags&512&&SC(e)}catch(f){ut(e,e.return,f)}}if(e===n){Q=null;break}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}}function sM(n){for(;Q!==null;){var e=Q;if(e===n){Q=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Q=t;break}Q=e.return}}function iM(n){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Q_(4,e)}catch(l){ut(e,t,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(l){ut(e,i,l)}}var r=e.return;try{SC(e)}catch(l){ut(e,r,l)}break;case 5:var o=e.return;try{SC(e)}catch(l){ut(e,o,l)}}}catch(l){ut(e,e.return,l)}if(e===n){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var p6=Math.ceil,nb=go.ReactCurrentDispatcher,Hk=go.ReactCurrentOwner,$s=go.ReactCurrentBatchConfig,Pe=0,Gt=null,Ct=null,sn=0,ps=0,Zu=Xa(0),Mt=0,_m=null,iu=0,J_=0,Vk=0,Wp=null,Vn=null,Uk=0,hf=1/0,fr=null,sb=!1,AC=null,Ia=null,uw=!1,_a=null,ib=0,Gp=0,TC=null,Gw=-1,Yw=0;function Rn(){return Pe&6?bt():Gw!==-1?Gw:Gw=bt()}function Pa(n){return n.mode&1?Pe&2&&sn!==0?sn&-sn:Q5.transition!==null?(Yw===0&&(Yw=S2()),Yw):(n=Le,n!==0||(n=window.event,n=n===void 0?16:P2(n.type)),n):1}function bi(n,e,t,s){if(50<Gp)throw Gp=0,TC=null,Error(U(185));yv(n,t,s),(!(Pe&2)||n!==Gt)&&(n===Gt&&(!(Pe&2)&&(J_|=t),Mt===4&&Ro(n,sn)),Kn(n,s),t===1&&Pe===0&&!(e.mode&1)&&(hf=bt()+500,K_&&Qa()))}function Kn(n,e){var t=n.callbackNode;QW(n,e);var s=V0(n,n===Gt?sn:0);if(s===0)t!==null&&fR(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&fR(t),e===1)n.tag===0?X5(rM.bind(null,n)):q2(rM.bind(null,n)),G5(function(){!(Pe&6)&&Qa()}),t=null;else{switch(E2(s)){case 1:t=pk;break;case 4:t=x2;break;case 16:t=H0;break;case 536870912:t=_2;break;default:t=H0}t=YO(t,HO.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function HO(n,e){if(Gw=-1,Yw=0,Pe&6)throw Error(U(327));var t=n.callbackNode;if(fh()&&n.callbackNode!==t)return null;var s=V0(n,n===Gt?sn:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=rb(n,s);else{e=s;var i=Pe;Pe|=2;var r=UO();(Gt!==n||sn!==e)&&(fr=null,hf=bt()+500,Qc(n,e));do try{y6();break}catch(a){VO(n,a)}while(1);Tk(),nb.current=r,Pe=i,Ct!==null?e=0:(Gt=null,sn=0,e=Mt)}if(e!==0){if(e===2&&(i=eC(n),i!==0&&(s=i,e=kC(n,i))),e===1)throw t=_m,Qc(n,0),Ro(n,s),Kn(n,bt()),t;if(e===6)Ro(n,s);else{if(i=n.current.alternate,!(s&30)&&!m6(i)&&(e=rb(n,s),e===2&&(r=eC(n),r!==0&&(s=r,e=kC(n,r))),e===1))throw t=_m,Qc(n,0),Ro(n,s),Kn(n,bt()),t;switch(n.finishedWork=i,n.finishedLanes=s,e){case 0:case 1:throw Error(U(345));case 2:cl(n,Vn,fr);break;case 3:if(Ro(n,s),(s&130023424)===s&&(e=Uk+500-bt(),10<e)){if(V0(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){Rn(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=lC(cl.bind(null,n,Vn,fr),e);break}cl(n,Vn,fr);break;case 4:if(Ro(n,s),(s&4194240)===s)break;for(e=n.eventTimes,i=-1;0<s;){var o=31-wi(s);r=1<<o,o=e[o],o>i&&(i=o),s&=~r}if(s=i,s=bt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*p6(s/1960))-s,10<s){n.timeoutHandle=lC(cl.bind(null,n,Vn,fr),s);break}cl(n,Vn,fr);break;case 5:cl(n,Vn,fr);break;default:throw Error(U(329))}}}return Kn(n,bt()),n.callbackNode===t?HO.bind(null,n):null}function kC(n,e){var t=Wp;return n.current.memoizedState.isDehydrated&&(Qc(n,e).flags|=256),n=rb(n,e),n!==2&&(e=Vn,Vn=t,e!==null&&IC(e)),n}function IC(n){Vn===null?Vn=n:Vn.push.apply(Vn,n)}function m6(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var i=t[s],r=i.getSnapshot;i=i.value;try{if(!_i(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ro(n,e){for(e&=~Vk,e&=~J_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-wi(e),s=1<<t;n[t]=-1,e&=~s}}function rM(n){if(Pe&6)throw Error(U(327));fh();var e=V0(n,0);if(!(e&1))return Kn(n,bt()),null;var t=rb(n,e);if(n.tag!==0&&t===2){var s=eC(n);s!==0&&(e=s,t=kC(n,s))}if(t===1)throw t=_m,Qc(n,0),Ro(n,e),Kn(n,bt()),t;if(t===6)throw Error(U(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,cl(n,Vn,fr),Kn(n,bt()),null}function $k(n,e){var t=Pe;Pe|=1;try{return n(e)}finally{Pe=t,Pe===0&&(hf=bt()+500,K_&&Qa())}}function ru(n){_a!==null&&_a.tag===0&&!(Pe&6)&&fh();var e=Pe;Pe|=1;var t=$s.transition,s=Le;try{if($s.transition=null,Le=1,n)return n()}finally{Le=s,$s.transition=t,Pe=e,!(Pe&6)&&Qa()}}function zk(){ps=Zu.current,Xe(Zu)}function Qc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,W5(t)),Ct!==null)for(t=Ct.return;t!==null;){var s=t;switch(Ek(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&G0();break;case 3:cf(),Xe(Gn),Xe(vn),Nk();break;case 5:Mk(s);break;case 4:cf();break;case 13:Xe(rt);break;case 19:Xe(rt);break;case 10:kk(s.type._context);break;case 22:case 23:zk()}t=t.return}if(Gt=n,Ct=n=Ra(n.current,null),sn=ps=e,Mt=0,_m=null,Vk=J_=iu=0,Vn=Wp=null,_l!==null){for(e=0;e<_l.length;e++)if(t=_l[e],s=t.interleaved,s!==null){t.interleaved=null;var i=s.next,r=t.pending;if(r!==null){var o=r.next;r.next=i,s.next=o}t.pending=s}_l=null}return n}function VO(n,e){do{var t=Ct;try{if(Tk(),$w.current=tb,eb){for(var s=at.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}eb=!1}if(su=0,$t=Pt=at=null,$p=!1,wm=0,Hk.current=null,t===null||t.return===null){Mt=1,_m=e,Ct=null;break}e:{var r=n,o=t.return,a=t,l=e;if(e=sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=GR(o);if(p!==null){p.flags&=-257,YR(p,o,a,r,e),p.mode&1&&WR(r,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){WR(r,c,e),Wk();break e}l=Error(U(426))}}else if(nt&&a.mode&1){var S=GR(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),YR(S,o,a,r,e),Ck(uf(l,a));break e}}r=l=uf(l,a),Mt!==4&&(Mt=2),Wp===null?Wp=[r]:Wp.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var w=EO(r,l,e);BR(r,w);break e;case 1:a=l;var _=r.type,v=r.stateNode;if(!(r.flags&128)&&(typeof _.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ia===null||!Ia.has(v)))){r.flags|=65536,e&=-e,r.lanes|=e;var m=CO(r,a,e);BR(r,m);break e}}r=r.return}while(r!==null)}zO(t)}catch(x){e=x,Ct===t&&t!==null&&(Ct=t=t.return);continue}break}while(1)}function UO(){var n=nb.current;return nb.current=tb,n===null?tb:n}function Wk(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Gt===null||!(iu&268435455)&&!(J_&268435455)||Ro(Gt,sn)}function rb(n,e){var t=Pe;Pe|=2;var s=UO();(Gt!==n||sn!==e)&&(fr=null,Qc(n,e));do try{g6();break}catch(i){VO(n,i)}while(1);if(Tk(),Pe=t,nb.current=s,Ct!==null)throw Error(U(261));return Gt=null,sn=0,Mt}function g6(){for(;Ct!==null;)$O(Ct)}function y6(){for(;Ct!==null&&!UW();)$O(Ct)}function $O(n){var e=GO(n.alternate,n,ps);n.memoizedProps=n.pendingProps,e===null?zO(n):Ct=e,Hk.current=null}function zO(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=u6(t,e),t!==null){t.flags&=32767,Ct=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Mt=6,Ct=null;return}}else if(t=c6(t,e,ps),t!==null){Ct=t;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=n}while(e!==null);Mt===0&&(Mt=5)}function cl(n,e,t){var s=Le,i=$s.transition;try{$s.transition=null,Le=1,v6(n,e,t,s)}finally{$s.transition=i,Le=s}return null}function v6(n,e,t,s){do fh();while(_a!==null);if(Pe&6)throw Error(U(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(U(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(JW(n,r),n===Gt&&(Ct=Gt=null,sn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||uw||(uw=!0,YO(H0,function(){return fh(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=$s.transition,$s.transition=null;var o=Le;Le=1;var a=Pe;Pe|=4,Hk.current=null,d6(n,t),jO(t,n),j5(oC),U0=!!rC,oC=rC=null,n.current=t,f6(t),$W(),Pe=a,Le=o,$s.transition=r}else n.current=t;if(uw&&(uw=!1,_a=n,ib=i),r=n.pendingLanes,r===0&&(Ia=null),GW(t.stateNode),Kn(n,bt()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],s(i.value,{componentStack:i.stack,digest:i.digest});if(sb)throw sb=!1,n=AC,AC=null,n;return ib&1&&n.tag!==0&&fh(),r=n.pendingLanes,r&1?n===TC?Gp++:(Gp=0,TC=n):Gp=0,Qa(),null}function fh(){if(_a!==null){var n=E2(ib),e=$s.transition,t=Le;try{if($s.transition=null,Le=16>n?16:n,_a===null)var s=!1;else{if(n=_a,_a=null,ib=0,Pe&6)throw Error(U(331));var i=Pe;for(Pe|=4,Q=n.current;Q!==null;){var r=Q,o=r.child;if(Q.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Q=c;Q!==null;){var u=Q;switch(u.tag){case 0:case 11:case 15:zp(8,u,r)}var d=u.child;if(d!==null)d.return=u,Q=d;else for(;Q!==null;){u=Q;var f=u.sibling,p=u.return;if(LO(u),u===c){Q=null;break}if(f!==null){f.return=p,Q=f;break}Q=p}}}var y=r.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var S=g.sibling;g.sibling=null,g=S}while(g!==null)}}Q=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,Q=o;else e:for(;Q!==null;){if(r=Q,r.flags&2048)switch(r.tag){case 0:case 11:case 15:zp(9,r,r.return)}var w=r.sibling;if(w!==null){w.return=r.return,Q=w;break e}Q=r.return}}var _=n.current;for(Q=_;Q!==null;){o=Q;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Q=v;else e:for(o=_;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Q_(9,a)}}catch(x){ut(a,a.return,x)}if(a===o){Q=null;break e}var m=a.sibling;if(m!==null){m.return=a.return,Q=m;break e}Q=a.return}}if(Pe=i,Qa(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot($_,n)}catch{}s=!0}return s}finally{Le=t,$s.transition=e}}return!1}function oM(n,e,t){e=uf(t,e),e=EO(n,e,1),n=ka(n,e,1),e=Rn(),n!==null&&(yv(n,1,e),Kn(n,e))}function ut(n,e,t){if(n.tag===3)oM(n,n,t);else for(;e!==null;){if(e.tag===3){oM(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ia===null||!Ia.has(s))){n=uf(t,n),n=CO(e,n,1),e=ka(e,n,1),n=Rn(),e!==null&&(yv(e,1,n),Kn(e,n));break}}e=e.return}}function w6(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Rn(),n.pingedLanes|=n.suspendedLanes&t,Gt===n&&(sn&t)===t&&(Mt===4||Mt===3&&(sn&130023424)===sn&&500>bt()-Uk?Qc(n,0):Vk|=t),Kn(n,e)}function WO(n,e){e===0&&(n.mode&1?(e=ew,ew<<=1,!(ew&130023424)&&(ew=4194304)):e=1);var t=Rn();n=oo(n,e),n!==null&&(yv(n,e,t),Kn(n,t))}function b6(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),WO(n,t)}function x6(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(U(314))}s!==null&&s.delete(e),WO(n,t)}var GO;GO=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Gn.current)$n=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return $n=!1,l6(n,e,t);$n=!!(n.flags&131072)}else $n=!1,nt&&e.flags&1048576&&X2(e,q0,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Ww(n,e),n=e.pendingProps;var i=of(e,vn.current);dh(e,t),i=Lk(null,e,s,n,i,t);var r=Ok();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yn(s)?(r=!0,Y0(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pk(e),i.updater=X_,e.stateNode=i,i._reactInternals=e,mC(e,s,n,t),e=vC(null,e,s,!0,r,t)):(e.tag=0,nt&&r&&Sk(e),Pn(null,e,i,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Ww(n,e),n=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=S6(s),n=Js(s,n),i){case 0:e=yC(null,e,s,n,t);break e;case 1:e=XR(null,e,s,n,t);break e;case 11:e=KR(null,e,s,n,t);break e;case 14:e=qR(null,e,s,Js(s.type,n),t);break e}throw Error(U(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Js(s,i),yC(n,e,s,i,t);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Js(s,i),XR(n,e,s,i,t);case 3:e:{if(IO(e),n===null)throw Error(U(387));s=e.pendingProps,r=e.memoizedState,i=r.element,nO(n,e),J0(e,s,null,t);var o=e.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=uf(Error(U(423)),e),e=QR(n,e,s,t,i);break e}else if(s!==i){i=uf(Error(U(424)),e),e=QR(n,e,s,t,i);break e}else for(ys=Ta(e.stateNode.containerInfo.firstChild),ws=e,nt=!0,pi=null,t=eO(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(af(),s===i){e=ao(n,e,t);break e}Pn(n,e,s,t)}e=e.child}return e;case 5:return sO(e),n===null&&dC(e),s=e.type,i=e.pendingProps,r=n!==null?n.memoizedProps:null,o=i.children,aC(s,i)?o=null:r!==null&&aC(s,r)&&(e.flags|=32),kO(n,e),Pn(n,e,o,t),e.child;case 6:return n===null&&dC(e),null;case 13:return PO(n,e,t);case 4:return Rk(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=lf(e,null,s,t):Pn(n,e,s,t),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Js(s,i),KR(n,e,s,i,t);case 7:return Pn(n,e,e.pendingProps,t),e.child;case 8:return Pn(n,e,e.pendingProps.children,t),e.child;case 12:return Pn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,o=i.value,ze(X0,s._currentValue),s._currentValue=o,r!==null)if(_i(r.value,o)){if(r.children===i.children&&!Gn.current){e=ao(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(r.tag===1){l=to(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),fC(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(U(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),fC(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Pn(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,dh(e,t),i=Ws(i),s=s(i),e.flags|=1,Pn(n,e,s,t),e.child;case 14:return s=e.type,i=Js(s,e.pendingProps),i=Js(s.type,i),qR(n,e,s,i,t);case 15:return AO(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Js(s,i),Ww(n,e),e.tag=1,Yn(s)?(n=!0,Y0(e)):n=!1,dh(e,t),SO(e,s,i),mC(e,s,i,t),vC(null,e,s,!0,n,t);case 19:return RO(n,e,t);case 22:return TO(n,e,t)}throw Error(U(156,e.tag))};function YO(n,e){return b2(n,e)}function _6(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(n,e,t,s){return new _6(n,e,t,s)}function Gk(n){return n=n.prototype,!(!n||!n.isReactComponent)}function S6(n){if(typeof n=="function")return Gk(n)?1:0;if(n!=null){if(n=n.$$typeof,n===hk)return 11;if(n===dk)return 14}return 2}function Ra(n,e){var t=n.alternate;return t===null?(t=Vs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Kw(n,e,t,s,i,r){var o=2;if(s=n,typeof n=="function")Gk(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case $u:return Jc(t.children,i,r,e);case uk:o=8,i|=8;break;case BE:return n=Vs(12,t,e,i|2),n.elementType=BE,n.lanes=r,n;case HE:return n=Vs(13,t,e,i),n.elementType=HE,n.lanes=r,n;case VE:return n=Vs(19,t,e,i),n.elementType=VE,n.lanes=r,n;case s2:return Z_(t,i,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case t2:o=10;break e;case n2:o=9;break e;case hk:o=11;break e;case dk:o=14;break e;case To:o=16,s=null;break e}throw Error(U(130,n==null?n:typeof n,""))}return e=Vs(o,t,e,i),e.elementType=n,e.type=s,e.lanes=r,e}function Jc(n,e,t,s){return n=Vs(7,n,s,e),n.lanes=t,n}function Z_(n,e,t,s){return n=Vs(22,n,s,e),n.elementType=s2,n.lanes=t,n.stateNode={isHidden:!1},n}function R1(n,e,t){return n=Vs(6,n,null,e),n.lanes=t,n}function M1(n,e,t){return e=Vs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function E6(n,e,t,s,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=d1(0),this.expirationTimes=d1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=d1(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Yk(n,e,t,s,i,r,o,a,l){return n=new E6(n,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Vs(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pk(r),n}function C6(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uu,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function KO(n){if(!n)return Ha;n=n._reactInternals;e:{if(vu(n)!==n||n.tag!==1)throw Error(U(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(n.tag===1){var t=n.type;if(Yn(t))return K2(n,t,e)}return e}function qO(n,e,t,s,i,r,o,a,l){return n=Yk(t,s,!0,n,i,r,o,a,l),n.context=KO(null),t=n.current,s=Rn(),i=Pa(t),r=to(s,i),r.callback=e??null,ka(t,r,i),n.current.lanes=i,yv(n,i,s),Kn(n,s),n}function eS(n,e,t,s){var i=e.current,r=Rn(),o=Pa(i);return t=KO(t),e.context===null?e.context=t:e.pendingContext=t,e=to(r,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=ka(i,e,o),n!==null&&(bi(n,i,o,r),Uw(n,i,o)),o}function ob(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function aM(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Kk(n,e){aM(n,e),(n=n.alternate)&&aM(n,e)}function A6(){return null}var XO=typeof reportError=="function"?reportError:function(n){console.error(n)};function qk(n){this._internalRoot=n}tS.prototype.render=qk.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(U(409));eS(n,e,null,null)};tS.prototype.unmount=qk.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ru(function(){eS(null,n,null,null)}),e[ro]=null}};function tS(n){this._internalRoot=n}tS.prototype.unstable_scheduleHydration=function(n){if(n){var e=T2();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Po.length&&e!==0&&e<Po[t].priority;t++);Po.splice(t,0,n),t===0&&I2(n)}};function Xk(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function nS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function lM(){}function T6(n,e,t,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var c=ob(o);r.call(c)}}var o=qO(e,s,n,0,null,!1,!1,"",lM);return n._reactRootContainer=o,n[ro]=o.current,pm(n.nodeType===8?n.parentNode:n),ru(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var a=s;s=function(){var c=ob(l);a.call(c)}}var l=Yk(n,0,!1,null,null,!1,!1,"",lM);return n._reactRootContainer=l,n[ro]=l.current,pm(n.nodeType===8?n.parentNode:n),ru(function(){eS(e,l,t,s)}),l}function sS(n,e,t,s,i){var r=t._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var a=i;i=function(){var l=ob(o);a.call(l)}}eS(e,o,n,i)}else o=T6(t,e,n,i,s);return ob(o)}C2=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=pp(e.pendingLanes);t!==0&&(mk(e,t|1),Kn(e,bt()),!(Pe&6)&&(hf=bt()+500,Qa()))}break;case 13:ru(function(){var s=oo(n,1);if(s!==null){var i=Rn();bi(s,n,1,i)}}),Kk(n,1)}};gk=function(n){if(n.tag===13){var e=oo(n,134217728);if(e!==null){var t=Rn();bi(e,n,134217728,t)}Kk(n,134217728)}};A2=function(n){if(n.tag===13){var e=Pa(n),t=oo(n,e);if(t!==null){var s=Rn();bi(t,n,e,s)}Kk(n,e)}};T2=function(){return Le};k2=function(n,e){var t=Le;try{return Le=n,e()}finally{Le=t}};QE=function(n,e,t){switch(e){case"input":if(zE(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var i=Y_(s);if(!i)throw Error(U(90));r2(s),zE(s,i)}}}break;case"textarea":a2(n,t);break;case"select":e=t.value,e!=null&&lh(n,!!t.multiple,e,!1)}};p2=$k;m2=ru;var k6={usingClientEntryPoint:!1,Events:[wv,Yu,Y_,d2,f2,$k]},Xf={findFiberByHostInstance:xl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I6={bundleType:Xf.bundleType,version:Xf.version,rendererPackageName:Xf.rendererPackageName,rendererConfig:Xf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:go.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=v2(n),n===null?null:n.stateNode},findFiberByHostInstance:Xf.findFiberByHostInstance||A6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hw.isDisabled&&hw.supportsFiber)try{$_=hw.inject(I6),er=hw}catch{}}Ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k6;Ss.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xk(e))throw Error(U(200));return C6(n,e,null,t)};Ss.createRoot=function(n,e){if(!Xk(n))throw Error(U(299));var t=!1,s="",i=XO;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Yk(n,1,!1,null,null,t,!1,s,i),n[ro]=e.current,pm(n.nodeType===8?n.parentNode:n),new qk(e)};Ss.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(U(188)):(n=Object.keys(n).join(","),Error(U(268,n)));return n=v2(e),n=n===null?null:n.stateNode,n};Ss.flushSync=function(n){return ru(n)};Ss.hydrate=function(n,e,t){if(!nS(e))throw Error(U(200));return sS(null,n,e,!0,t)};Ss.hydrateRoot=function(n,e,t){if(!Xk(n))throw Error(U(405));var s=t!=null&&t.hydratedSources||null,i=!1,r="",o=XO;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=qO(e,null,n,1,t??null,i,!1,r,o),n[ro]=e.current,pm(n),s)for(n=0;n<s.length;n++)t=s[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new tS(e)};Ss.render=function(n,e,t){if(!nS(e))throw Error(U(200));return sS(null,n,e,!1,t)};Ss.unmountComponentAtNode=function(n){if(!nS(n))throw Error(U(40));return n._reactRootContainer?(ru(function(){sS(null,null,n,!1,function(){n._reactRootContainer=null,n[ro]=null})}),!0):!1};Ss.unstable_batchedUpdates=$k;Ss.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!nS(t))throw Error(U(200));if(n==null||n._reactInternals===void 0)throw Error(U(38));return sS(n,e,t,!1,s)};Ss.version="18.3.1-next-f1338f8080-20240426";function QO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QO)}catch(n){console.error(n)}}QO(),QL.exports=Ss;var wu=QL.exports;const P6=Af(wu);var cM=wu;FE.createRoot=cM.createRoot,FE.hydrateRoot=cM.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sm(){return Sm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Sm.apply(this,arguments)}var Sa;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Sa||(Sa={}));const uM="popstate";function R6(n){n===void 0&&(n={});function e(s,i){let{pathname:r,search:o,hash:a}=s.location;return PC("",{pathname:r,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:ab(i)}return N6(e,t,null,n)}function ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function JO(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M6(){return Math.random().toString(36).substr(2,8)}function hM(n,e){return{usr:n.state,key:n.key,idx:e}}function PC(n,e,t,s){return t===void 0&&(t=null),Sm({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Pf(e):e,{state:t,key:e&&e.key||s||M6()})}function ab(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Pf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function N6(n,e,t,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:r=!1}=s,o=i.history,a=Sa.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Sm({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Sa.Pop;let S=u(),w=S==null?null:S-c;c=S,l&&l({action:a,location:g.location,delta:w})}function f(S,w){a=Sa.Push;let _=PC(g.location,S,w);t&&t(_,S),c=u()+1;let v=hM(_,c),m=g.createHref(_);try{o.pushState(v,"",m)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(m)}r&&l&&l({action:a,location:g.location,delta:1})}function p(S,w){a=Sa.Replace;let _=PC(g.location,S,w);t&&t(_,S),c=u();let v=hM(_,c),m=g.createHref(_);o.replaceState(v,"",m),r&&l&&l({action:a,location:g.location,delta:0})}function y(S){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof S=="string"?S:ab(S);return _=_.replace(/ $/,"%20"),ft(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let g={get action(){return a},get location(){return n(i,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(uM,d),l=S,()=>{i.removeEventListener(uM,d),l=null}},createHref(S){return e(i,S)},createURL:y,encodeLocation(S){let w=y(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:p,go(S){return o.go(S)}};return g}var dM;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(dM||(dM={}));function D6(n,e,t){return t===void 0&&(t="/"),L6(n,e,t,!1)}function L6(n,e,t,s){let i=typeof e=="string"?Pf(e):e,r=df(i.pathname||"/",t);if(r==null)return null;let o=ZO(n);O6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Y6(r);a=W6(o[l],c,s)}return a}function ZO(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let i=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(ft(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let c=Ma([s,l.relativePath]),u=t.concat(l);r.children&&r.children.length>0&&(ft(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ZO(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:$6(c,r.index),routesMeta:u})};return n.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))i(r,o);else for(let l of eF(r.path))i(r,o,l)}),e}function eF(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),r=t.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let o=eF(s.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function O6(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:z6(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const F6=/^:[\w-]+$/,j6=3,B6=2,H6=1,V6=10,U6=-2,fM=n=>n==="*";function $6(n,e){let t=n.split("/"),s=t.length;return t.some(fM)&&(s+=U6),e&&(s+=B6),t.filter(i=>!fM(i)).reduce((i,r)=>i+(F6.test(r)?j6:r===""?H6:V6),s)}function z6(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function W6(n,e,t){t===void 0&&(t=!1);let{routesMeta:s}=n,i={},r="/",o=[];for(let a=0;a<s.length;++a){let l=s[a],c=a===s.length-1,u=r==="/"?e:e.slice(r.length)||"/",d=lb({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&t&&!s[s.length-1].route.index&&(d=lb({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ma([r,d.pathname]),pathnameBase:Q6(Ma([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=Ma([r,d.pathnameBase]))}return o}function lb(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=G6(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:s.reduce((c,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let g=a[d]||"";o=r.slice(0,r.length-g.length).replace(/(.)\/+$/,"$1")}const y=a[d];return p&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:n}}function G6(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),JO(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function Y6(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return JO(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function df(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function K6(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?Pf(n):n;return{pathname:t?t.startsWith("/")?t:q6(t,e):e,search:J6(s),hash:Z6(i)}}function q6(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function N1(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function X6(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function tF(n,e){let t=X6(n);return e?t.map((s,i)=>i===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function nF(n,e,t,s){s===void 0&&(s=!1);let i;typeof n=="string"?i=Pf(n):(i=Sm({},n),ft(!i.pathname||!i.pathname.includes("?"),N1("?","pathname","search",i)),ft(!i.pathname||!i.pathname.includes("#"),N1("#","pathname","hash",i)),ft(!i.search||!i.search.includes("#"),N1("#","search","hash",i)));let r=n===""||i.pathname==="",o=r?"/":i.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=K6(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ma=n=>n.join("/").replace(/\/\/+/g,"/"),Q6=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),J6=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Z6=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function eG(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const sF=["post","put","patch","delete"];new Set(sF);const tG=["get",...sF];new Set(tG);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Em(){return Em=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Em.apply(this,arguments)}const iS=E.createContext(null),iF=E.createContext(null),Ja=E.createContext(null),rS=E.createContext(null),Za=E.createContext({outlet:null,matches:[],isDataRoute:!1}),rF=E.createContext(null);function nG(n,e){let{relative:t}=e===void 0?{}:e;xv()||ft(!1);let{basename:s,navigator:i}=E.useContext(Ja),{hash:r,pathname:o,search:a}=oS(n,{relative:t}),l=o;return s!=="/"&&(l=o==="/"?s:Ma([s,o])),i.createHref({pathname:l,search:a,hash:r})}function xv(){return E.useContext(rS)!=null}function el(){return xv()||ft(!1),E.useContext(rS).location}function oF(n){E.useContext(Ja).static||E.useLayoutEffect(n)}function aF(){let{isDataRoute:n}=E.useContext(Za);return n?gG():sG()}function sG(){xv()||ft(!1);let n=E.useContext(iS),{basename:e,future:t,navigator:s}=E.useContext(Ja),{matches:i}=E.useContext(Za),{pathname:r}=el(),o=JSON.stringify(tF(i,t.v7_relativeSplatPath)),a=E.useRef(!1);return oF(()=>{a.current=!0}),E.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){s.go(c);return}let d=nF(c,JSON.parse(o),r,u.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ma([e,d.pathname])),(u.replace?s.replace:s.push)(d,u.state,u)},[e,s,o,r,n])}function iG(){let{matches:n}=E.useContext(Za),e=n[n.length-1];return e?e.params:{}}function oS(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=E.useContext(Ja),{matches:i}=E.useContext(Za),{pathname:r}=el(),o=JSON.stringify(tF(i,s.v7_relativeSplatPath));return E.useMemo(()=>nF(n,JSON.parse(o),r,t==="path"),[n,o,r,t])}function rG(n,e){return oG(n,e)}function oG(n,e,t,s){xv()||ft(!1);let{navigator:i}=E.useContext(Ja),{matches:r}=E.useContext(Za),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=el(),u;if(e){var d;let S=typeof e=="string"?Pf(e):e;l==="/"||(d=S.pathname)!=null&&d.startsWith(l)||ft(!1),u=S}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let S=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(S.length).join("/")}let y=D6(n,{pathname:p}),g=hG(y&&y.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Ma([l,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:Ma([l,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),r,t,s);return e&&g?E.createElement(rS.Provider,{value:{location:Em({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Sa.Pop}},g):g}function aG(){let n=mG(),e=eG(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},r=null;return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:i},t):null,r)}const lG=E.createElement(aG,null);class cG extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?E.createElement(Za.Provider,{value:this.props.routeContext},E.createElement(rF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uG(n){let{routeContext:e,match:t,children:s}=n,i=E.useContext(iS);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(Za.Provider,{value:e},s)}function hG(n,e,t,s){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=s)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||ft(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&s&&s.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:p}=t,y=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let p,y=!1,g=null,S=null;t&&(p=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||lG,l&&(c<0&&f===0?(yG("route-fallback",!1),y=!0,S=null):c===f&&(y=!0,S=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),_=()=>{let v;return p?v=g:y?v=S:d.route.Component?v=E.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,E.createElement(uG,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:t!=null},children:v})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?E.createElement(cG,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var lF=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(lF||{}),cb=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(cb||{});function dG(n){let e=E.useContext(iS);return e||ft(!1),e}function fG(n){let e=E.useContext(iF);return e||ft(!1),e}function pG(n){let e=E.useContext(Za);return e||ft(!1),e}function cF(n){let e=pG(),t=e.matches[e.matches.length-1];return t.route.id||ft(!1),t.route.id}function mG(){var n;let e=E.useContext(rF),t=fG(cb.UseRouteError),s=cF(cb.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function gG(){let{router:n}=dG(lF.UseNavigateStable),e=cF(cb.UseNavigateStable),t=E.useRef(!1);return oF(()=>{t.current=!0}),E.useCallback(function(i,r){r===void 0&&(r={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Em({fromRouteId:e},r)))},[n,e])}const pM={};function yG(n,e,t){!e&&!pM[n]&&(pM[n]=!0)}function vG(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function cr(n){ft(!1)}function wG(n){let{basename:e="/",children:t=null,location:s,navigationType:i=Sa.Pop,navigator:r,static:o=!1,future:a}=n;xv()&&ft(!1);let l=e.replace(/^\/*/,"/"),c=E.useMemo(()=>({basename:l,navigator:r,static:o,future:Em({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof s=="string"&&(s=Pf(s));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:y="default"}=s,g=E.useMemo(()=>{let S=df(u,l);return S==null?null:{location:{pathname:S,search:d,hash:f,state:p,key:y},navigationType:i}},[l,u,d,f,p,y,i]);return g==null?null:E.createElement(Ja.Provider,{value:c},E.createElement(rS.Provider,{children:t,value:g}))}function bG(n){let{children:e,location:t}=n;return rG(RC(e),t)}new Promise(()=>{});function RC(n,e){e===void 0&&(e=[]);let t=[];return E.Children.forEach(n,(s,i)=>{if(!E.isValidElement(s))return;let r=[...e,i];if(s.type===E.Fragment){t.push.apply(t,RC(s.props.children,r));return}s.type!==cr&&ft(!1),!s.props.index||!s.props.children||ft(!1);let o={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=RC(s.props.children,r)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ub(){return ub=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ub.apply(this,arguments)}function uF(n,e){if(n==null)return{};var t={},s=Object.keys(n),i,r;for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function xG(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function _G(n,e){return n.button===0&&(!e||e==="_self")&&!xG(n)}const SG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],EG=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],CG="6";try{window.__reactRouterVersion=CG}catch{}const AG=E.createContext({isTransitioning:!1}),TG="startTransition",mM=ok[TG];function kG(n){let{basename:e,children:t,future:s,window:i}=n,r=E.useRef();r.current==null&&(r.current=R6({window:i,v5Compat:!0}));let o=r.current,[a,l]=E.useState({action:o.action,location:o.location}),{v7_startTransition:c}=s||{},u=E.useCallback(d=>{c&&mM?mM(()=>l(d)):l(d)},[l,c]);return E.useLayoutEffect(()=>o.listen(u),[o,u]),E.useEffect(()=>vG(s),[s]),E.createElement(wG,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:s})}const IG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RG=E.forwardRef(function(e,t){let{onClick:s,relative:i,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=uF(e,SG),{basename:p}=E.useContext(Ja),y,g=!1;if(typeof c=="string"&&PG.test(c)&&(y=c,IG))try{let v=new URL(window.location.href),m=c.startsWith("//")?new URL(v.protocol+c):new URL(c),x=df(m.pathname,p);m.origin===v.origin&&x!=null?c=x+m.search+m.hash:g=!0}catch{}let S=nG(c,{relative:i}),w=NG(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function _(v){s&&s(v),v.defaultPrevented||w(v)}return E.createElement("a",ub({},f,{href:y||S,onClick:g||r?s:_,ref:t,target:l}))}),Us=E.forwardRef(function(e,t){let{"aria-current":s="page",caseSensitive:i=!1,className:r="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,d=uF(e,EG),f=oS(l,{relative:d.relative}),p=el(),y=E.useContext(iF),{navigator:g,basename:S}=E.useContext(Ja),w=y!=null&&DG(f)&&c===!0,_=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,v=p.pathname,m=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(v=v.toLowerCase(),m=m?m.toLowerCase():null,_=_.toLowerCase()),m&&S&&(m=df(m,S)||m);const x=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=v===_||!o&&v.startsWith(_)&&v.charAt(x)==="/",k=m!=null&&(m===_||!o&&m.startsWith(_)&&m.charAt(_.length)==="/"),P={isActive:A,isPending:k,isTransitioning:w},R=A?s:void 0,M;typeof r=="function"?M=r(P):M=[r,A?"active":null,k?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(P):a;return E.createElement(RG,ub({},d,{"aria-current":R,className:M,ref:t,style:N,to:l,viewTransition:c}),typeof u=="function"?u(P):u)});var MC;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(MC||(MC={}));var gM;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(gM||(gM={}));function MG(n){let e=E.useContext(iS);return e||ft(!1),e}function NG(n,e){let{target:t,replace:s,state:i,preventScrollReset:r,relative:o,viewTransition:a}=e===void 0?{}:e,l=aF(),c=el(),u=oS(n,{relative:o});return E.useCallback(d=>{if(_G(d,t)){d.preventDefault();let f=s!==void 0?s:ab(c)===ab(u);l(n,{replace:f,state:i,preventScrollReset:r,relative:o,viewTransition:a})}},[c,l,u,s,i,t,n,r,o,a])}function DG(n,e){e===void 0&&(e={});let t=E.useContext(AG);t==null&&ft(!1);let{basename:s}=MG(MC.useViewTransitionState),i=oS(n,{relative:e.relative});if(!t.isTransitioning)return!1;let r=df(t.currentLocation.pathname,s)||t.currentLocation.pathname,o=df(t.nextLocation.pathname,s)||t.nextLocation.pathname;return lb(i.pathname,o)!=null||lb(i.pathname,r)!=null}const aS=E.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),lS=E.createContext({}),cS=E.createContext(null),uS=typeof document<"u",_v=uS?E.useLayoutEffect:E.useEffect,hF=E.createContext({strict:!1}),Qk=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),LG="framerAppearId",dF="data-"+Qk(LG);function OG(n,e,t,s){const{visualElement:i}=E.useContext(lS),r=E.useContext(hF),o=E.useContext(cS),a=E.useContext(aS).reducedMotion,l=E.useRef();s=s||r.renderer,!l.current&&s&&(l.current=s(n,{visualState:e,parent:i,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;E.useInsertionEffect(()=>{c&&c.update(t,o)});const u=E.useRef(!!(t[dF]&&!window.HandoffComplete));return _v(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),E.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function eh(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function FG(n,e,t){return E.useCallback(s=>{s&&n.mount&&n.mount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):eh(t)&&(t.current=s))},[e])}function Cm(n){return typeof n=="string"||Array.isArray(n)}function hS(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Jk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zk=["initial",...Jk];function dS(n){return hS(n.animate)||Zk.some(e=>Cm(n[e]))}function fF(n){return!!(dS(n)||n.variants)}function jG(n,e){if(dS(n)){const{initial:t,animate:s}=n;return{initial:t===!1||Cm(t)?t:void 0,animate:Cm(s)?s:void 0}}return n.inherit!==!1?e:{}}function BG(n){const{initial:e,animate:t}=jG(n,E.useContext(lS));return E.useMemo(()=>({initial:e,animate:t}),[yM(e),yM(t)])}function yM(n){return Array.isArray(n)?n.join(" "):n}const vM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Am={};for(const n in vM)Am[n]={isEnabled:e=>vM[n].some(t=>!!e[t])};function HG(n){for(const e in n)Am[e]={...Am[e],...n[e]}}const eI=E.createContext({}),pF=E.createContext({}),VG=Symbol.for("motionComponentSymbol");function UG({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:i}){n&&HG(n);function r(a,l){let c;const u={...E.useContext(aS),...a,layoutId:$G(a)},{isStatic:d}=u,f=BG(a),p=s(a,d);if(!d&&uS){f.visualElement=OG(i,p,u,e);const y=E.useContext(pF),g=E.useContext(hF).strict;f.visualElement&&(c=f.visualElement.loadFeatures(u,g,n,y))}return E.createElement(lS.Provider,{value:f},c&&f.visualElement?E.createElement(c,{visualElement:f.visualElement,...u}):null,t(i,a,FG(p,f.visualElement,l),p,d,f.visualElement))}const o=E.forwardRef(r);return o[VG]=i,o}function $G({layoutId:n}){const e=E.useContext(eI).id;return e&&n!==void 0?e+"-"+n:n}function zG(n){function e(s,i={}){return UG(n(s,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(s,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const WG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tI(n){return typeof n!="string"||n.includes("-")?!1:!!(WG.indexOf(n)>-1||/[A-Z]/.test(n))}const hb={};function GG(n){Object.assign(hb,n)}const Sv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bu=new Set(Sv);function mF(n,{layout:e,layoutId:t}){return bu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!hb[n]||n==="opacity")}const wn=n=>!!(n&&n.getVelocity),YG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KG=Sv.length;function qG(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},s,i){let r="";for(let o=0;o<KG;o++){const a=Sv[o];if(n[a]!==void 0){const l=YG[a]||a;r+=`${l}(${n[a]}) `}}return e&&!n.z&&(r+="translateZ(0)"),r=r.trim(),i?r=i(n,s?"":r):t&&s&&(r="none"),r}const gF=n=>e=>typeof e=="string"&&e.startsWith(n),yF=gF("--"),NC=gF("var(--"),XG=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,QG=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Va=(n,e,t)=>Math.min(Math.max(t,n),e),xu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Yp={...xu,transform:n=>Va(0,1,n)},dw={...xu,default:1},Kp=n=>Math.round(n*1e5)/1e5,fS=/(-)?([\d]*\.?[\d])+/g,vF=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,JG=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ev(n){return typeof n=="string"}const Cv=n=>({test:e=>Ev(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Eo=Cv("deg"),nr=Cv("%"),ie=Cv("px"),ZG=Cv("vh"),e8=Cv("vw"),wM={...nr,parse:n=>nr.parse(n)/100,transform:n=>nr.transform(n*100)},bM={...xu,transform:Math.round},wF={borderWidth:ie,borderTopWidth:ie,borderRightWidth:ie,borderBottomWidth:ie,borderLeftWidth:ie,borderRadius:ie,radius:ie,borderTopLeftRadius:ie,borderTopRightRadius:ie,borderBottomRightRadius:ie,borderBottomLeftRadius:ie,width:ie,maxWidth:ie,height:ie,maxHeight:ie,size:ie,top:ie,right:ie,bottom:ie,left:ie,padding:ie,paddingTop:ie,paddingRight:ie,paddingBottom:ie,paddingLeft:ie,margin:ie,marginTop:ie,marginRight:ie,marginBottom:ie,marginLeft:ie,rotate:Eo,rotateX:Eo,rotateY:Eo,rotateZ:Eo,scale:dw,scaleX:dw,scaleY:dw,scaleZ:dw,skew:Eo,skewX:Eo,skewY:Eo,distance:ie,translateX:ie,translateY:ie,translateZ:ie,x:ie,y:ie,z:ie,perspective:ie,transformPerspective:ie,opacity:Yp,originX:wM,originY:wM,originZ:ie,zIndex:bM,fillOpacity:Yp,strokeOpacity:Yp,numOctaves:bM};function nI(n,e,t,s){const{style:i,vars:r,transform:o,transformOrigin:a}=n;let l=!1,c=!1,u=!0;for(const d in e){const f=e[d];if(yF(d)){r[d]=f;continue}const p=wF[d],y=QG(f,p);if(bu.has(d)){if(l=!0,o[d]=y,!u)continue;f!==(p.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=y):i[d]=y}if(e.transform||(l||s?i.transform=qG(n.transform,t,u,s):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=a;i.transformOrigin=`${d} ${f} ${p}`}}const sI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bF(n,e,t){for(const s in e)!wn(e[s])&&!mF(s,t)&&(n[s]=e[s])}function t8({transformTemplate:n},e,t){return E.useMemo(()=>{const s=sI();return nI(s,e,{enableHardwareAcceleration:!t},n),Object.assign({},s.vars,s.style)},[e])}function n8(n,e,t){const s=n.style||{},i={};return bF(i,s,n),Object.assign(i,t8(n,e,t)),n.transformValues?n.transformValues(i):i}function s8(n,e,t){const s={},i=n8(n,e,t);return n.drag&&n.dragListener!==!1&&(s.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(s.tabIndex=0),s.style=i,s}const i8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function db(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||i8.has(n)}let xF=n=>!db(n);function r8(n){n&&(xF=e=>e.startsWith("on")?!db(e):n(e))}try{r8(require("@emotion/is-prop-valid").default)}catch{}function o8(n,e,t){const s={};for(const i in n)i==="values"&&typeof n.values=="object"||(xF(i)||t===!0&&db(i)||!e&&!db(i)||n.draggable&&i.startsWith("onDrag"))&&(s[i]=n[i]);return s}function xM(n,e,t){return typeof n=="string"?n:ie.transform(e+t*n)}function a8(n,e,t){const s=xM(e,n.x,n.width),i=xM(t,n.y,n.height);return`${s} ${i}`}const l8={offset:"stroke-dashoffset",array:"stroke-dasharray"},c8={offset:"strokeDashoffset",array:"strokeDasharray"};function u8(n,e,t=1,s=0,i=!0){n.pathLength=1;const r=i?l8:c8;n[r.offset]=ie.transform(-s);const o=ie.transform(e),a=ie.transform(t);n[r.array]=`${o} ${a}`}function iI(n,{attrX:e,attrY:t,attrScale:s,originX:i,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d,f){if(nI(n,c,u,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:y,dimensions:g}=n;p.transform&&(g&&(y.transform=p.transform),delete p.transform),g&&(i!==void 0||r!==void 0||y.transform)&&(y.transformOrigin=a8(g,i!==void 0?i:.5,r!==void 0?r:.5)),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),s!==void 0&&(p.scale=s),o!==void 0&&u8(p,o,a,l,!1)}const _F=()=>({...sI(),attrs:{}}),rI=n=>typeof n=="string"&&n.toLowerCase()==="svg";function h8(n,e,t,s){const i=E.useMemo(()=>{const r=_F();return iI(r,e,{enableHardwareAcceleration:!1},rI(s),n.transformTemplate),{...r.attrs,style:{...r.style}}},[e]);if(n.style){const r={};bF(r,n.style,n),i.style={...r,...i.style}}return i}function d8(n=!1){return(t,s,i,{latestValues:r},o)=>{const l=(tI(t)?h8:s8)(s,r,o,t),u={...o8(s,typeof t=="string",n),...l,ref:i},{children:d}=s,f=E.useMemo(()=>wn(d)?d.get():d,[d]);return E.createElement(t,{...u,children:f})}}function SF(n,{style:e,vars:t},s,i){Object.assign(n.style,e,i&&i.getProjectionStyles(s));for(const r in t)n.style.setProperty(r,t[r])}const EF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function CF(n,e,t,s){SF(n,e,void 0,s);for(const i in e.attrs)n.setAttribute(EF.has(i)?i:Qk(i),e.attrs[i])}function oI(n,e){const{style:t}=n,s={};for(const i in t)(wn(t[i])||e.style&&wn(e.style[i])||mF(i,n))&&(s[i]=t[i]);return s}function AF(n,e){const t=oI(n,e);for(const s in n)if(wn(n[s])||wn(e[s])){const i=Sv.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;t[i]=n[s]}return t}function aI(n,e,t,s={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,s,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,s,i)),e}function pS(n){const e=E.useRef(null);return e.current===null&&(e.current=n()),e.current}const fb=n=>Array.isArray(n),f8=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),p8=n=>fb(n)?n[n.length-1]||0:n;function qw(n){const e=wn(n)?n.get():n;return f8(e)?e.toValue():e}function m8({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},s,i,r){const o={latestValues:g8(s,i,r,n),renderState:e()};return t&&(o.mount=a=>t(s,a,o)),o}const TF=n=>(e,t)=>{const s=E.useContext(lS),i=E.useContext(cS),r=()=>m8(n,e,s,i);return t?r():pS(r)};function g8(n,e,t,s){const i={},r=s(n,{});for(const f in r)i[f]=qw(r[f]);let{initial:o,animate:a}=n;const l=dS(n),c=fF(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const d=u?a:o;return d&&typeof d!="boolean"&&!hS(d)&&(Array.isArray(d)?d:[d]).forEach(p=>{const y=aI(n,p);if(!y)return;const{transitionEnd:g,transition:S,...w}=y;for(const _ in w){let v=w[_];if(Array.isArray(v)){const m=u?v.length-1:0;v=v[m]}v!==null&&(i[_]=v)}for(const _ in g)i[_]=g[_]}),i}const ht=n=>n;class _M{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function y8(n){let e=new _M,t=new _M,s=0,i=!1,r=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&i,f=d?e:t;return c&&o.add(l),f.add(l)&&d&&i&&(s=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(i){r=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),s=e.order.length,s)for(let c=0;c<s;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),n())}i=!1,r&&(r=!1,a.process(l))}};return a}const fw=["prepare","read","update","preRender","render","postRender"],v8=40;function w8(n,e){let t=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=fw.reduce((d,f)=>(d[f]=y8(()=>t=!0),d),{}),o=d=>r[d].process(i),a=()=>{const d=performance.now();t=!1,i.delta=s?1e3/60:Math.max(Math.min(d-i.timestamp,v8),1),i.timestamp=d,i.isProcessing=!0,fw.forEach(o),i.isProcessing=!1,t&&e&&(s=!1,n(a))},l=()=>{t=!0,s=!0,i.isProcessing||n(a)};return{schedule:fw.reduce((d,f)=>{const p=r[f];return d[f]=(y,g=!1,S=!1)=>(t||l(),p.schedule(y,g,S)),d},{}),cancel:d=>fw.forEach(f=>r[f].cancel(d)),state:i,steps:r}}const{schedule:He,cancel:rr,state:Vt,steps:D1}=w8(typeof requestAnimationFrame<"u"?requestAnimationFrame:ht,!0),b8={useVisualState:TF({scrapeMotionValuesFromProps:AF,createRenderState:_F,onMount:(n,e,{renderState:t,latestValues:s})=>{He.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),He.render(()=>{iI(t,s,{enableHardwareAcceleration:!1},rI(e.tagName),n.transformTemplate),CF(e,t)})}})},x8={useVisualState:TF({scrapeMotionValuesFromProps:oI,createRenderState:sI})};function _8(n,{forwardMotionProps:e=!1},t,s){return{...tI(n)?b8:x8,preloadedFeatures:t,useRender:d8(e),createVisualElement:s,Component:n}}function Jr(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}const kF=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function mS(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const S8=n=>e=>kF(e)&&n(e,mS(e));function no(n,e,t,s){return Jr(n,e,S8(t),s)}const E8=(n,e)=>t=>e(n(t)),Na=(...n)=>n.reduce(E8);function IF(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const SM=IF("dragHorizontal"),EM=IF("dragVertical");function PF(n){let e=!1;if(n==="y")e=EM();else if(n==="x")e=SM();else{const t=SM(),s=EM();t&&s?e=()=>{t(),s()}:(t&&t(),s&&s())}return e}function RF(){const n=PF(!0);return n?(n(),!1):!0}class tl{constructor(e){this.isMounted=!1,this.node=e}update(){}}function CM(n,e){const t="pointer"+(e?"enter":"leave"),s="onHover"+(e?"Start":"End"),i=(r,o)=>{if(r.pointerType==="touch"||RF())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[s]&&He.update(()=>a[s](r,o))};return no(n.current,t,i,{passive:!n.getProps()[s]})}class C8 extends tl{mount(){this.unmount=Na(CM(this.node,!0),CM(this.node,!1))}unmount(){}}class A8 extends tl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Na(Jr(this.node.current,"focus",()=>this.onFocus()),Jr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const MF=(n,e)=>e?n===e?!0:MF(n,e.parentElement):!1;function L1(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,mS(t))}class T8 extends tl{constructor(){super(...arguments),this.removeStartListeners=ht,this.removeEndListeners=ht,this.removeAccessibleListeners=ht,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),r=no(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps();He.update(()=>{!d&&!MF(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(s.onTap||s.onPointerUp)}),o=no(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Na(r,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=r=>{if(r.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||L1("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&He.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=Jr(this.node.current,"keyup",o),L1("down",(a,l)=>{this.startPress(a,l)})},t=Jr(this.node.current,"keydown",e),s=()=>{this.isPressing&&L1("cancel",(r,o)=>this.cancelPress(r,o))},i=Jr(this.node.current,"blur",s);this.removeAccessibleListeners=Na(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&He.update(()=>s(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!RF()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&He.update(()=>s(e,t))}mount(){const e=this.node.getProps(),t=no(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),s=Jr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Na(t,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const DC=new WeakMap,O1=new WeakMap,k8=n=>{const e=DC.get(n.target);e&&e(n)},I8=n=>{n.forEach(k8)};function P8({root:n,...e}){const t=n||document;O1.has(t)||O1.set(t,{});const s=O1.get(t),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(I8,{root:n,...e})),s[i]}function R8(n,e,t){const s=P8(e);return DC.set(n,t),s.observe(n),()=>{DC.delete(n),s.unobserve(n)}}const M8={some:0,all:1};class N8 extends tl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:i="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:M8[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return R8(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(D8(e,t))&&this.startObserver()}unmount(){}}function D8({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const L8={inView:{Feature:N8},tap:{Feature:T8},focus:{Feature:A8},hover:{Feature:C8}};function NF(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}function O8(n){const e={};return n.values.forEach((t,s)=>e[s]=t.get()),e}function F8(n){const e={};return n.values.forEach((t,s)=>e[s]=t.getVelocity()),e}function gS(n,e,t){const s=n.getProps();return aI(s,e,t!==void 0?t:s.custom,O8(n),F8(n))}let j8=ht,lI=ht;const Da=n=>n*1e3,sr=n=>n/1e3,B8={current:!1},DF=n=>Array.isArray(n)&&typeof n[0]=="number";function LF(n){return!!(!n||typeof n=="string"&&OF[n]||DF(n)||Array.isArray(n)&&n.every(LF))}const gp=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,OF={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:gp([0,.65,.55,1]),circOut:gp([.55,0,1,.45]),backIn:gp([.31,.01,.66,-.59]),backOut:gp([.33,1.53,.69,.99])};function FF(n){if(n)return DF(n)?gp(n):Array.isArray(n)?n.map(FF):OF[n]}function H8(n,e,t,{delay:s=0,duration:i,repeat:r=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=FF(a);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:s,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}function V8(n,{repeat:e,repeatType:t="loop"}){const s=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[s]}const jF=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,U8=1e-7,$8=12;function z8(n,e,t,s,i){let r,o,a=0;do o=e+(t-e)/2,r=jF(o,s,i)-n,r>0?t=o:e=o;while(Math.abs(r)>U8&&++a<$8);return o}function Av(n,e,t,s){if(n===e&&t===s)return ht;const i=r=>z8(r,0,1,n,t);return r=>r===0||r===1?r:jF(i(r),e,s)}const W8=Av(.42,0,1,1),G8=Av(0,0,.58,1),BF=Av(.42,0,.58,1),Y8=n=>Array.isArray(n)&&typeof n[0]!="number",HF=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,VF=n=>e=>1-n(1-e),cI=n=>1-Math.sin(Math.acos(n)),UF=VF(cI),K8=HF(cI),$F=Av(.33,1.53,.69,.99),uI=VF($F),q8=HF(uI),X8=n=>(n*=2)<1?.5*uI(n):.5*(2-Math.pow(2,-10*(n-1))),Q8={linear:ht,easeIn:W8,easeInOut:BF,easeOut:G8,circIn:cI,circInOut:K8,circOut:UF,backIn:uI,backInOut:q8,backOut:$F,anticipate:X8},AM=n=>{if(Array.isArray(n)){lI(n.length===4);const[e,t,s,i]=n;return Av(e,t,s,i)}else if(typeof n=="string")return Q8[n];return n},hI=(n,e)=>t=>!!(Ev(t)&&JG.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),zF=(n,e,t)=>s=>{if(!Ev(s))return s;const[i,r,o,a]=s.match(fS);return{[n]:parseFloat(i),[e]:parseFloat(r),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},J8=n=>Va(0,255,n),F1={...xu,transform:n=>Math.round(J8(n))},El={test:hI("rgb","red"),parse:zF("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+F1.transform(n)+", "+F1.transform(e)+", "+F1.transform(t)+", "+Kp(Yp.transform(s))+")"};function Z8(n){let e="",t="",s="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const LC={test:hI("#"),parse:Z8,transform:El.transform},th={test:hI("hsl","hue"),parse:zF("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+nr.transform(Kp(e))+", "+nr.transform(Kp(t))+", "+Kp(Yp.transform(s))+")"},Tn={test:n=>El.test(n)||LC.test(n)||th.test(n),parse:n=>El.test(n)?El.parse(n):th.test(n)?th.parse(n):LC.parse(n),transform:n=>Ev(n)?n:n.hasOwnProperty("red")?El.transform(n):th.transform(n)},ot=(n,e,t)=>-t*n+t*e+n;function j1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function eY({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let i=0,r=0,o=0;if(!e)i=r=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=j1(l,a,n+1/3),r=j1(l,a,n),o=j1(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:s}}const B1=(n,e,t)=>{const s=n*n;return Math.sqrt(Math.max(0,t*(e*e-s)+s))},tY=[LC,El,th],nY=n=>tY.find(e=>e.test(n));function TM(n){const e=nY(n);let t=e.parse(n);return e===th&&(t=eY(t)),t}const WF=(n,e)=>{const t=TM(n),s=TM(e),i={...t};return r=>(i.red=B1(t.red,s.red,r),i.green=B1(t.green,s.green,r),i.blue=B1(t.blue,s.blue,r),i.alpha=ot(t.alpha,s.alpha,r),El.transform(i))};function sY(n){var e,t;return isNaN(n)&&Ev(n)&&(((e=n.match(fS))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(vF))===null||t===void 0?void 0:t.length)||0)>0}const GF={regex:XG,countKey:"Vars",token:"${v}",parse:ht},YF={regex:vF,countKey:"Colors",token:"${c}",parse:Tn.parse},KF={regex:fS,countKey:"Numbers",token:"${n}",parse:xu.parse};function H1(n,{regex:e,countKey:t,token:s,parse:i}){const r=n.tokenised.match(e);r&&(n["num"+t]=r.length,n.tokenised=n.tokenised.replace(e,s),n.values.push(...r.map(i)))}function pb(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&H1(t,GF),H1(t,YF),H1(t,KF),t}function qF(n){return pb(n).values}function XF(n){const{values:e,numColors:t,numVars:s,tokenised:i}=pb(n),r=e.length;return o=>{let a=i;for(let l=0;l<r;l++)l<s?a=a.replace(GF.token,o[l]):l<s+t?a=a.replace(YF.token,Tn.transform(o[l])):a=a.replace(KF.token,Kp(o[l]));return a}}const iY=n=>typeof n=="number"?0:n;function rY(n){const e=qF(n);return XF(n)(e.map(iY))}const Ua={test:sY,parse:qF,createTransformer:XF,getAnimatableNone:rY},QF=(n,e)=>t=>`${t>0?e:n}`;function JF(n,e){return typeof n=="number"?t=>ot(n,e,t):Tn.test(n)?WF(n,e):n.startsWith("var(")?QF(n,e):ej(n,e)}const ZF=(n,e)=>{const t=[...n],s=t.length,i=n.map((r,o)=>JF(r,e[o]));return r=>{for(let o=0;o<s;o++)t[o]=i[o](r);return t}},oY=(n,e)=>{const t={...n,...e},s={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(s[i]=JF(n[i],e[i]));return i=>{for(const r in s)t[r]=s[r](i);return t}},ej=(n,e)=>{const t=Ua.createTransformer(e),s=pb(n),i=pb(e);return s.numVars===i.numVars&&s.numColors===i.numColors&&s.numNumbers>=i.numNumbers?Na(ZF(s.values,i.values),t):QF(n,e)},Tm=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s},kM=(n,e)=>t=>ot(n,e,t);function aY(n){return typeof n=="number"?kM:typeof n=="string"?Tn.test(n)?WF:ej:Array.isArray(n)?ZF:typeof n=="object"?oY:kM}function lY(n,e,t){const s=[],i=t||aY(n[0]),r=n.length-1;for(let o=0;o<r;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||ht:e;a=Na(l,a)}s.push(a)}return s}function dI(n,e,{clamp:t=!0,ease:s,mixer:i}={}){const r=n.length;if(lI(r===e.length),r===1)return()=>e[0];n[0]>n[r-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=lY(e,s,i),a=o.length,l=c=>{let u=0;if(a>1)for(;u<n.length-2&&!(c<n[u+1]);u++);const d=Tm(n[u],n[u+1],c);return o[u](d)};return t?c=>l(Va(n[0],n[r-1],c)):l}function cY(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const i=Tm(0,e,s);n.push(ot(t,1,i))}}function uY(n){const e=[0];return cY(e,n.length-1),e}function hY(n,e){return n.map(t=>t*e)}function dY(n,e){return n.map(()=>e||BF).splice(0,n.length-1)}function mb({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const i=Y8(s)?s.map(AM):AM(s),r={done:!1,value:e[0]},o=hY(t&&t.length===e.length?t:uY(e),n),a=dI(o,e,{ease:Array.isArray(i)?i:dY(e,i)});return{calculatedDuration:n,next:l=>(r.value=a(l),r.done=l>=n,r)}}function tj(n,e){return e?n*(1e3/e):0}const fY=5;function nj(n,e,t){const s=Math.max(e-fY,0);return tj(t-n(s),e-s)}const V1=.001,pY=.01,IM=10,mY=.05,gY=1;function yY({duration:n=800,bounce:e=.25,velocity:t=0,mass:s=1}){let i,r;j8(n<=Da(IM));let o=1-e;o=Va(mY,gY,o),n=Va(pY,IM,sr(n)),o<1?(i=c=>{const u=c*o,d=u*n,f=u-t,p=OC(c,o),y=Math.exp(-d);return V1-f/p*y},r=c=>{const d=c*o*n,f=d*t+t,p=Math.pow(o,2)*Math.pow(c,2)*n,y=Math.exp(-d),g=OC(Math.pow(c,2),o);return(-i(c)+V1>0?-1:1)*((f-p)*y)/g}):(i=c=>{const u=Math.exp(-c*n),d=(c-t)*n+1;return-V1+u*d},r=c=>{const u=Math.exp(-c*n),d=(t-c)*(n*n);return u*d});const a=5/n,l=wY(i,r,a);if(n=Da(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*s;return{stiffness:c,damping:o*2*Math.sqrt(s*c),duration:n}}}const vY=12;function wY(n,e,t){let s=t;for(let i=1;i<vY;i++)s=s-n(s)/e(s);return s}function OC(n,e){return n*Math.sqrt(1-e*e)}const bY=["duration","bounce"],xY=["stiffness","damping","mass"];function PM(n,e){return e.some(t=>n[t]!==void 0)}function _Y(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!PM(n,xY)&&PM(n,bY)){const t=yY(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function sj({keyframes:n,restDelta:e,restSpeed:t,...s}){const i=n[0],r=n[n.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:u,velocity:d,isResolvedFromDuration:f}=_Y({...s,velocity:-sr(s.velocity||0)}),p=d||0,y=l/(2*Math.sqrt(a*c)),g=r-i,S=sr(Math.sqrt(a/c)),w=Math.abs(g)<5;t||(t=w?.01:2),e||(e=w?.005:.5);let _;if(y<1){const v=OC(S,y);_=m=>{const x=Math.exp(-y*S*m);return r-x*((p+y*S*g)/v*Math.sin(v*m)+g*Math.cos(v*m))}}else if(y===1)_=v=>r-Math.exp(-S*v)*(g+(p+S*g)*v);else{const v=S*Math.sqrt(y*y-1);_=m=>{const x=Math.exp(-y*S*m),A=Math.min(v*m,300);return r-x*((p+y*S*g)*Math.sinh(A)+v*g*Math.cosh(A))/v}}return{calculatedDuration:f&&u||null,next:v=>{const m=_(v);if(f)o.done=v>=u;else{let x=p;v!==0&&(y<1?x=nj(_,v,m):x=0);const A=Math.abs(x)<=t,k=Math.abs(r-m)<=e;o.done=A&&k}return o.value=o.done?r:m,o}}}function RM({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=n[0],f={done:!1,value:d},p=P=>a!==void 0&&P<a||l!==void 0&&P>l,y=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let g=t*e;const S=d+g,w=o===void 0?S:o(S);w!==S&&(g=w-d);const _=P=>-g*Math.exp(-P/s),v=P=>w+_(P),m=P=>{const R=_(P),M=v(P);f.done=Math.abs(R)<=c,f.value=f.done?w:M};let x,A;const k=P=>{p(f.value)&&(x=P,A=sj({keyframes:[f.value,y(f.value)],velocity:nj(v,P,f.value),damping:i,stiffness:r,restDelta:c,restSpeed:u}))};return k(0),{calculatedDuration:null,next:P=>{let R=!1;return!A&&x===void 0&&(R=!0,m(P),k(P)),x!==void 0&&P>x?A.next(P-x):(!R&&m(P),f)}}}const SY=n=>{const e=({timestamp:t})=>n(t);return{start:()=>He.update(e,!0),stop:()=>rr(e),now:()=>Vt.isProcessing?Vt.timestamp:performance.now()}},MM=2e4;function NM(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<MM;)e+=t,s=n.next(e);return e>=MM?1/0:e}const EY={decay:RM,inertia:RM,tween:mb,keyframes:mb,spring:sj};function km({autoplay:n=!0,delay:e=0,driver:t=SY,keyframes:s,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d,...f}){let p=1,y=!1,g,S;const w=()=>{S=new Promise(W=>{g=W})};w();let _;const v=EY[i]||mb;let m;v!==mb&&typeof s[0]!="number"&&(m=dI([0,100],s,{clamp:!1}),s=[0,100]);const x=v({...f,keyframes:s});let A;a==="mirror"&&(A=v({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let k="idle",P=null,R=null,M=null;x.calculatedDuration===null&&r&&(x.calculatedDuration=NM(x));const{calculatedDuration:N}=x;let F=1/0,H=1/0;N!==null&&(F=N+o,H=F*(r+1)-o);let D=0;const $=W=>{if(R===null)return;p>0&&(R=Math.min(R,W)),p<0&&(R=Math.min(W-H/p,R)),P!==null?D=P:D=Math.round(W-R)*p;const K=D-e*(p>=0?1:-1),Z=p>=0?K<0:K>H;D=Math.max(K,0),k==="finished"&&P===null&&(D=H);let de=D,Me=x;if(r){const he=Math.min(D,H)/F;let ne=Math.floor(he),oe=he%1;!oe&&he>=1&&(oe=1),oe===1&&ne--,ne=Math.min(ne,r+1),!!(ne%2)&&(a==="reverse"?(oe=1-oe,o&&(oe-=o/F)):a==="mirror"&&(Me=A)),de=Va(0,1,oe)*F}const ue=Z?{done:!1,value:s[0]}:Me.next(de);m&&(ue.value=m(ue.value));let{done:G}=ue;!Z&&N!==null&&(G=p>=0?D>=H:D<=0);const fe=P===null&&(k==="finished"||k==="running"&&G);return d&&d(ue.value),fe&&O(),ue},L=()=>{_&&_.stop(),_=void 0},B=()=>{k="idle",L(),g(),w(),R=M=null},O=()=>{k="finished",u&&u(),L(),g()},j=()=>{if(y)return;_||(_=t($));const W=_.now();l&&l(),P!==null?R=W-P:(!R||k==="finished")&&(R=W),k==="finished"&&w(),M=R,P=null,k="running",_.start()};n&&j();const z={then(W,K){return S.then(W,K)},get time(){return sr(D)},set time(W){W=Da(W),D=W,P!==null||!_||p===0?P=W:R=_.now()-W/p},get duration(){const W=x.calculatedDuration===null?NM(x):x.calculatedDuration;return sr(W)},get speed(){return p},set speed(W){W===p||!_||(p=W,z.time=sr(D))},get state(){return k},play:j,pause:()=>{k="paused",P=D},stop:()=>{y=!0,k!=="idle"&&(k="idle",c&&c(),B())},cancel:()=>{M!==null&&$(M),B()},complete:()=>{k="finished"},sample:W=>(R=0,$(W))};return z}function CY(n){let e;return()=>(e===void 0&&(e=n()),e)}const AY=CY(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),TY=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),pw=10,kY=2e4,IY=(n,e)=>e.type==="spring"||n==="backgroundColor"||!LF(e.ease);function PY(n,e,{onUpdate:t,onComplete:s,...i}){if(!(AY()&&TY.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const u=()=>{l=new Promise(v=>{a=v})};u();let{keyframes:d,duration:f=300,ease:p,times:y}=i;if(IY(e,i)){const v=km({...i,repeat:0,delay:0});let m={done:!1,value:d[0]};const x=[];let A=0;for(;!m.done&&A<kY;)m=v.sample(A),x.push(m.value),A+=pw;y=void 0,d=x,f=A-pw,p="linear"}const g=H8(n.owner.current,e,d,{...i,duration:f,ease:p,times:y}),S=()=>{c=!1,g.cancel()},w=()=>{c=!0,He.update(S),a(),u()};return g.onfinish=()=>{c||(n.set(V8(d,i)),s&&s(),w())},{then(v,m){return l.then(v,m)},attachTimeline(v){return g.timeline=v,g.onfinish=null,ht},get time(){return sr(g.currentTime||0)},set time(v){g.currentTime=Da(v)},get speed(){return g.playbackRate},set speed(v){g.playbackRate=v},get duration(){return sr(f)},play:()=>{o||(g.play(),rr(S))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:v}=g;if(v){const m=km({...i,autoplay:!1});n.setWithVelocity(m.sample(v-pw).value,m.sample(v).value,pw)}w()},complete:()=>{c||g.finish()},cancel:w}}function RY({keyframes:n,delay:e,onUpdate:t,onComplete:s}){const i=()=>(t&&t(n[n.length-1]),s&&s(),{time:0,speed:1,duration:0,play:ht,pause:ht,stop:ht,then:r=>(r(),Promise.resolve()),cancel:ht,complete:ht});return e?km({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const MY={type:"spring",stiffness:500,damping:25,restSpeed:10},NY=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),DY={type:"keyframes",duration:.8},LY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},OY=(n,{keyframes:e})=>e.length>2?DY:bu.has(n)?n.startsWith("scale")?NY(e[1]):MY:LY,FC=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ua.test(e)||e==="0")&&!e.startsWith("url(")),FY=new Set(["brightness","contrast","saturate","opacity"]);function jY(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(fS)||[];if(!s)return n;const i=t.replace(s,"");let r=FY.has(e)?1:0;return s!==t&&(r*=100),e+"("+r+i+")"}const BY=/([a-z-]*)\(.*?\)/g,jC={...Ua,getAnimatableNone:n=>{const e=n.match(BY);return e?e.map(jY).join(" "):n}},HY={...wF,color:Tn,backgroundColor:Tn,outlineColor:Tn,fill:Tn,stroke:Tn,borderColor:Tn,borderTopColor:Tn,borderRightColor:Tn,borderBottomColor:Tn,borderLeftColor:Tn,filter:jC,WebkitFilter:jC},fI=n=>HY[n];function ij(n,e){let t=fI(n);return t!==jC&&(t=Ua),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const rj=n=>/^0[^.\s]+$/.test(n);function VY(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||rj(n)}function UY(n,e,t,s){const i=FC(e,t);let r;Array.isArray(t)?r=[...t]:r=[null,t];const o=s.from!==void 0?s.from:n.get();let a;const l=[];for(let c=0;c<r.length;c++)r[c]===null&&(r[c]=c===0?o:r[c-1]),VY(r[c])&&l.push(c),typeof r[c]=="string"&&r[c]!=="none"&&r[c]!=="0"&&(a=r[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];r[u]=ij(e,a)}return r}function $Y({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function pI(n,e){return n[e]||n.default||n}const zY={skipAnimations:!1},mI=(n,e,t,s={})=>i=>{const r=pI(s,n)||{},o=r.delay||s.delay||0;let{elapsed:a=0}=s;a=a-Da(o);const l=UY(e,n,t,r),c=l[0],u=l[l.length-1],d=FC(n,c),f=FC(n,u);let p={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...r,delay:-a,onUpdate:y=>{e.set(y),r.onUpdate&&r.onUpdate(y)},onComplete:()=>{i(),r.onComplete&&r.onComplete()}};if($Y(r)||(p={...p,...OY(n,p)}),p.duration&&(p.duration=Da(p.duration)),p.repeatDelay&&(p.repeatDelay=Da(p.repeatDelay)),!d||!f||B8.current||r.type===!1||zY.skipAnimations)return RY(p);if(!s.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=PY(e,n,p);if(y)return y}return km(p)};function gb(n){return!!(wn(n)&&n.add)}const oj=n=>/^\-?\d*\.?\d+$/.test(n);function gI(n,e){n.indexOf(e)===-1&&n.push(e)}function yI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class vI{constructor(){this.subscriptions=[]}add(e){return gI(this.subscriptions,e),()=>yI(this.subscriptions,e)}notify(e,t,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,s);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const WY=n=>!isNaN(parseFloat(n)),qp={current:void 0};class GY{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,i=!0)=>{this.prev=this.current,this.current=s;const{delta:r,timestamp:o}=Vt;this.lastUpdated!==o&&(this.timeDelta=r,this.lastUpdated=o,He.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>He.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=WY(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new vI);const s=this.events[e].add(t);return e==="change"?()=>{s(),He.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=e,this.timeDelta=s}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return qp.current&&qp.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?tj(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ou(n,e){return new GY(n,e)}const aj=n=>e=>e.test(n),YY={test:n=>n==="auto",parse:n=>n},lj=[xu,ie,nr,Eo,e8,ZG,YY],Qf=n=>lj.find(aj(n)),KY=[...lj,Tn,Ua],qY=n=>KY.find(aj(n));function XY(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ou(t))}function QY(n,e){const t=gS(n,e);let{transitionEnd:s={},transition:i={},...r}=t?n.makeTargetAnimatable(t,!1):{};r={...r,...s};for(const o in r){const a=p8(r[o]);XY(n,o,a)}}function JY(n,e,t){var s,i;const r=Object.keys(e).filter(a=>!n.hasValue(a)),o=r.length;if(o)for(let a=0;a<o;a++){const l=r[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(i=(s=t[l])!==null&&s!==void 0?s:n.readValue(l))!==null&&i!==void 0?i:e[l]),u!=null&&(typeof u=="string"&&(oj(u)||rj(u))?u=parseFloat(u):!qY(u)&&Ua.test(c)&&(u=ij(l,c)),n.addValue(l,ou(u,{owner:n})),t[l]===void 0&&(t[l]=u),u!==null&&n.setBaseTarget(l,u))}}function ZY(n,e){return e?(e[n]||e.default||e).from:void 0}function eK(n,e,t){const s={};for(const i in n){const r=ZY(i,e);if(r!==void 0)s[i]=r;else{const o=t.getValue(i);o&&(s[i]=o.get())}}return s}function tK({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function nK(n,e){const t=n.get();if(Array.isArray(e)){for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}else return t!==e}function cj(n,e,{delay:t=0,transitionOverride:s,type:i}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");s&&(r=s);const c=[],u=i&&n.animationState&&n.animationState.getState()[i];for(const d in a){const f=n.getValue(d),p=a[d];if(!f||p===void 0||u&&tK(u,d))continue;const y={delay:t,elapsed:0,...pI(r||{},d)};if(window.HandoffAppearAnimations){const w=n.getProps()[dF];if(w){const _=window.HandoffAppearAnimations(w,d,f,He);_!==null&&(y.elapsed=_,y.isHandoff=!0)}}let g=!y.isHandoff&&!nK(f,p);if(y.type==="spring"&&(f.getVelocity()||y.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(mI(d,f,p,n.shouldReduceMotion&&bu.has(d)?{type:!1}:y));const S=f.animation;gb(l)&&(l.add(d),S.then(()=>l.remove(d))),c.push(S)}return o&&Promise.all(c).then(()=>{o&&QY(n,o)}),c}function BC(n,e,t={}){const s=gS(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(i=t.transitionOverride);const r=s?()=>Promise.all(cj(n,s,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:d}=i;return sK(n,e,c+l,u,d,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[r,o]:[o,r];return l().then(()=>c())}else return Promise.all([r(),o(t.delay)])}function sK(n,e,t=0,s=0,i=1,r){const o=[],a=(n.variantChildren.size-1)*s,l=i===1?(c=0)=>c*s:(c=0)=>a-c*s;return Array.from(n.variantChildren).sort(iK).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(BC(c,e,{...r,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function iK(n,e){return n.sortNodePosition(e)}function rK(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(r=>BC(n,r,t));s=Promise.all(i)}else if(typeof e=="string")s=BC(n,e,t);else{const i=typeof e=="function"?gS(n,e,t.custom):e;s=Promise.all(cj(n,i,t))}return s.then(()=>n.notify("AnimationComplete",e))}const oK=[...Jk].reverse(),aK=Jk.length;function lK(n){return e=>Promise.all(e.map(({animation:t,options:s})=>rK(n,t,s)))}function cK(n){let e=lK(n);const t=hK();let s=!0;const i=(l,c)=>{const u=gS(n,c);if(u){const{transition:d,transitionEnd:f,...p}=u;l={...l,...p,...f}}return l};function r(l){e=l(n)}function o(l,c){const u=n.getProps(),d=n.getVariantContext(!0)||{},f=[],p=new Set;let y={},g=1/0;for(let w=0;w<aK;w++){const _=oK[w],v=t[_],m=u[_]!==void 0?u[_]:d[_],x=Cm(m),A=_===c?v.isActive:null;A===!1&&(g=w);let k=m===d[_]&&m!==u[_]&&x;if(k&&s&&n.manuallyAnimateOnMount&&(k=!1),v.protectedKeys={...y},!v.isActive&&A===null||!m&&!v.prevProp||hS(m)||typeof m=="boolean")continue;let R=uK(v.prevProp,m)||_===c&&v.isActive&&!k&&x||w>g&&x,M=!1;const N=Array.isArray(m)?m:[m];let F=N.reduce(i,{});A===!1&&(F={});const{prevResolvedValues:H={}}=v,D={...H,...F},$=L=>{R=!0,p.has(L)&&(M=!0,p.delete(L)),v.needsAnimating[L]=!0};for(const L in D){const B=F[L],O=H[L];if(y.hasOwnProperty(L))continue;let j=!1;fb(B)&&fb(O)?j=!NF(B,O):j=B!==O,j?B!==void 0?$(L):p.add(L):B!==void 0&&p.has(L)?$(L):v.protectedKeys[L]=!0}v.prevProp=m,v.prevResolvedValues=F,v.isActive&&(y={...y,...F}),s&&n.blockInitialAnimation&&(R=!1),R&&(!k||M)&&f.push(...N.map(L=>({animation:L,options:{type:_,...l}})))}if(p.size){const w={};p.forEach(_=>{const v=n.getBaseTarget(_);v!==void 0&&(w[_]=v)}),f.push({animation:w})}let S=!!f.length;return s&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(S=!1),s=!1,S?e(f):Promise.resolve()}function a(l,c,u){var d;if(t[l].isActive===c)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(p=>{var y;return(y=p.animationState)===null||y===void 0?void 0:y.setActive(l,c)}),t[l].isActive=c;const f=o(u,l);for(const p in t)t[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>t}}function uK(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!NF(e,n):!1}function ol(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hK(){return{animate:ol(!0),whileInView:ol(),whileHover:ol(),whileTap:ol(),whileDrag:ol(),whileFocus:ol(),exit:ol()}}class dK extends tl{constructor(e){super(e),e.animationState||(e.animationState=cK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),hS(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let fK=0;class pK extends tl{constructor(){super(...arguments),this.id=fK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e,{custom:s??this.node.getProps().custom});t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const mK={animation:{Feature:dK},exit:{Feature:pK}},DM=(n,e)=>Math.abs(n-e);function gK(n,e){const t=DM(n.x,e.x),s=DM(n.y,e.y);return Math.sqrt(t**2+s**2)}class uj{constructor(e,t,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=$1(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=gK(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:y}=d,{timestamp:g}=Vt;this.history.push({...y,timestamp:g});const{onStart:S,onMove:w}=this.handlers;f||(S&&S(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=U1(f,this.transformPagePoint),He.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=$1(d.type==="pointercancel"?this.lastMoveEventInfo:U1(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,S),y&&y(d,S)},!kF(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=s,this.contextWindow=i||window;const o=mS(e),a=U1(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Vt;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,$1(a,this.history)),this.removeListeners=Na(no(this.contextWindow,"pointermove",this.handlePointerMove),no(this.contextWindow,"pointerup",this.handlePointerUp),no(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),rr(this.updatePoint)}}function U1(n,e){return e?{point:e(n.point)}:n}function LM(n,e){return{x:n.x-e.x,y:n.y-e.y}}function $1({point:n},e){return{point:n,delta:LM(n,hj(e)),offset:LM(n,yK(e)),velocity:vK(e,.1)}}function yK(n){return n[0]}function hj(n){return n[n.length-1]}function vK(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const i=hj(n);for(;t>=0&&(s=n[t],!(i.timestamp-s.timestamp>Da(e)));)t--;if(!s)return{x:0,y:0};const r=sr(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function _s(n){return n.max-n.min}function HC(n,e=0,t=.01){return Math.abs(n-e)<=t}function OM(n,e,t,s=.5){n.origin=s,n.originPoint=ot(e.min,e.max,n.origin),n.scale=_s(t)/_s(e),(HC(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=ot(t.min,t.max,n.origin)-n.originPoint,(HC(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Xp(n,e,t,s){OM(n.x,e.x,t.x,s?s.originX:void 0),OM(n.y,e.y,t.y,s?s.originY:void 0)}function FM(n,e,t){n.min=t.min+e.min,n.max=n.min+_s(e)}function wK(n,e,t){FM(n.x,e.x,t.x),FM(n.y,e.y,t.y)}function jM(n,e,t){n.min=e.min-t.min,n.max=n.min+_s(e)}function Qp(n,e,t){jM(n.x,e.x,t.x),jM(n.y,e.y,t.y)}function bK(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?ot(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?ot(t,n,s.max):Math.min(n,t)),n}function BM(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function xK(n,{top:e,left:t,bottom:s,right:i}){return{x:BM(n.x,t,i),y:BM(n.y,e,s)}}function HM(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function _K(n,e){return{x:HM(n.x,e.x),y:HM(n.y,e.y)}}function SK(n,e){let t=.5;const s=_s(n),i=_s(e);return i>s?t=Tm(e.min,e.max-s,n.min):s>i&&(t=Tm(n.min,n.max-i,e.min)),Va(0,1,t)}function EK(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const VC=.35;function CK(n=VC){return n===!1?n=0:n===!0&&(n=VC),{x:VM(n,"left","right"),y:VM(n,"top","bottom")}}function VM(n,e,t){return{min:UM(n,e),max:UM(n,t)}}function UM(n,e){return typeof n=="number"?n:n[e]||0}const $M=()=>({translate:0,scale:1,origin:0,originPoint:0}),nh=()=>({x:$M(),y:$M()}),zM=()=>({min:0,max:0}),St=()=>({x:zM(),y:zM()});function ks(n){return[n("x"),n("y")]}function dj({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function AK({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function TK(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function z1(n){return n===void 0||n===1}function UC({scale:n,scaleX:e,scaleY:t}){return!z1(n)||!z1(e)||!z1(t)}function ul(n){return UC(n)||fj(n)||n.z||n.rotate||n.rotateX||n.rotateY}function fj(n){return WM(n.x)||WM(n.y)}function WM(n){return n&&n!=="0%"}function yb(n,e,t){const s=n-t,i=e*s;return t+i}function GM(n,e,t,s,i){return i!==void 0&&(n=yb(n,i,s)),yb(n,t,s)+e}function $C(n,e=0,t=1,s,i){n.min=GM(n.min,e,t,s,i),n.max=GM(n.max,e,t,s,i)}function pj(n,{x:e,y:t}){$C(n.x,e.translate,e.scale,e.originPoint),$C(n.y,t.translate,t.scale,t.originPoint)}function kK(n,e,t,s=!1){const i=t.length;if(!i)return;e.x=e.y=1;let r,o;for(let a=0;a<i;a++){r=t[a],o=r.projectionDelta;const l=r.instance;l&&l.style&&l.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&sh(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,pj(n,o)),s&&ul(r.latestValues)&&sh(n,r.latestValues))}e.x=YM(e.x),e.y=YM(e.y)}function YM(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Io(n,e){n.min=n.min+e,n.max=n.max+e}function KM(n,e,[t,s,i]){const r=e[i]!==void 0?e[i]:.5,o=ot(n.min,n.max,r);$C(n,e[t],e[s],o,e.scale)}const IK=["x","scaleX","originX"],PK=["y","scaleY","originY"];function sh(n,e){KM(n.x,e,IK),KM(n.y,e,PK)}function mj(n,e){return dj(TK(n.getBoundingClientRect(),e))}function RK(n,e,t){const s=mj(n,t),{scroll:i}=e;return i&&(Io(s.x,i.offset.x),Io(s.y,i.offset.y)),s}const gj=({current:n})=>n?n.ownerDocument.defaultView:null,MK=new WeakMap;class NK{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=St(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(mS(u,"page").point)},r=(u,d)=>{const{drag:f,dragPropagation:p,onDragStart:y}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=PF(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ks(S=>{let w=this.getAxisMotionValue(S).get()||0;if(nr.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const v=_.layout.layoutBox[S];v&&(w=_s(v)*(parseFloat(w)/100))}}this.originPoint[S]=w}),y&&He.update(()=>y(u,d),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:y,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:S}=d;if(p&&this.currentDirection===null){this.currentDirection=DK(S),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,S),this.updateAxis("y",d.point,S),this.visualElement.render(),g&&g(u,d)},a=(u,d)=>this.stop(u,d),l=()=>ks(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new uj(e,{onSessionStart:i,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:gj(this.visualElement)})}stop(e,t){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&He.update(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:i}=this.getProps();if(!s||!mw(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=bK(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,r=this.constraints;t&&eh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=xK(i.layoutBox,t):this.constraints=!1,this.elastic=CK(s),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ks(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=EK(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!eh(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=RK(s,i.root,this.visualElement.getTransformPagePoint());let o=_K(i.layout.layoutBox,r);if(t){const a=t(AK(o));this.hasMutatedConstraints=!!a,a&&(o=dj(a))}return o}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ks(u=>{if(!mw(u,t,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:s?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return s.start(mI(e,s,0,t))}stopAnimation(){ks(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ks(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),s=this.visualElement.getProps(),i=s[t];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){ks(t=>{const{drag:s}=this.getProps();if(!mw(t,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];r.set(e[t]-ot(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!eh(t)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ks(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=SK({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ks(o=>{if(!mw(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ot(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;MK.set(this.visualElement,this);const e=this.visualElement.current,t=no(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),s=()=>{const{dragConstraints:l}=this.getProps();eh(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),s();const o=Jr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ks(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=VC,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function mw(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function DK(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class LK extends tl{constructor(e){super(e),this.removeGroupControls=ht,this.removeListeners=ht,this.controls=new NK(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ht}unmount(){this.removeGroupControls(),this.removeListeners()}}const qM=n=>(e,t)=>{n&&He.update(()=>n(e,t))};class OK extends tl{constructor(){super(...arguments),this.removePointerDownListener=ht}onPointerDown(e){this.session=new uj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:qM(e),onStart:qM(t),onMove:s,onEnd:(r,o)=>{delete this.session,i&&He.update(()=>i(r,o))}}}mount(){this.removePointerDownListener=no(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function FK(){const n=E.useContext(cS);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:s}=n,i=E.useId();return E.useEffect(()=>s(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const Xw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function XM(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Jf={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ie.test(n))n=parseFloat(n);else return n;const t=XM(n,e.target.x),s=XM(n,e.target.y);return`${t}% ${s}%`}},jK={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,i=Ua.parse(n);if(i.length>5)return s;const r=Ua.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=ot(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),r(i)}};class BK extends te.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=e;GG(HK),r&&(t.group&&t.group.add(r),s&&s.register&&i&&s.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Xw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:i,isPresent:r}=this.props,o=s.projection;return o&&(o.isPresent=r,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||He.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yj(n){const[e,t]=FK(),s=E.useContext(eI);return te.createElement(BK,{...n,layoutGroup:s,switchLayoutGroup:E.useContext(pF),isPresent:e,safeToRemove:t})}const HK={borderRadius:{...Jf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Jf,borderTopRightRadius:Jf,borderBottomLeftRadius:Jf,borderBottomRightRadius:Jf,boxShadow:jK},vj=["TopLeft","TopRight","BottomLeft","BottomRight"],VK=vj.length,QM=n=>typeof n=="string"?parseFloat(n):n,JM=n=>typeof n=="number"||ie.test(n);function UK(n,e,t,s,i,r){i?(n.opacity=ot(0,t.opacity!==void 0?t.opacity:1,$K(s)),n.opacityExit=ot(e.opacity!==void 0?e.opacity:1,0,zK(s))):r&&(n.opacity=ot(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,s));for(let o=0;o<VK;o++){const a=`border${vj[o]}Radius`;let l=ZM(e,a),c=ZM(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||JM(l)===JM(c)?(n[a]=Math.max(ot(QM(l),QM(c),s),0),(nr.test(c)||nr.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=ot(e.rotate||0,t.rotate||0,s))}function ZM(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const $K=wj(0,.5,UF),zK=wj(.5,.95,ht);function wj(n,e,t){return s=>s<n?0:s>e?1:t(Tm(n,e,s))}function eN(n,e){n.min=e.min,n.max=e.max}function As(n,e){eN(n.x,e.x),eN(n.y,e.y)}function tN(n,e,t,s,i){return n-=e,n=yb(n,1/t,s),i!==void 0&&(n=yb(n,1/i,s)),n}function WK(n,e=0,t=1,s=.5,i,r=n,o=n){if(nr.test(e)&&(e=parseFloat(e),e=ot(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ot(r.min,r.max,s);n===r&&(a-=e),n.min=tN(n.min,e,t,a,i),n.max=tN(n.max,e,t,a,i)}function nN(n,e,[t,s,i],r,o){WK(n,e[t],e[s],e[i],e.scale,r,o)}const GK=["x","scaleX","originX"],YK=["y","scaleY","originY"];function sN(n,e,t,s){nN(n.x,e,GK,t?t.x:void 0,s?s.x:void 0),nN(n.y,e,YK,t?t.y:void 0,s?s.y:void 0)}function iN(n){return n.translate===0&&n.scale===1}function bj(n){return iN(n.x)&&iN(n.y)}function KK(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function xj(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function rN(n){return _s(n.x)/_s(n.y)}class qK{constructor(){this.members=[]}add(e){gI(this.members,e),e.scheduleRender()}remove(e){if(yI(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let s;for(let i=t;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oN(n,e,t){let s="";const i=n.x.translate/e.x,r=n.y.translate/e.y;if((i||r)&&(s=`translate3d(${i}px, ${r}px, 0) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:c,rotateY:u}=t;l&&(s+=`rotate(${l}deg) `),c&&(s+=`rotateX(${c}deg) `),u&&(s+=`rotateY(${u}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(s+=`scale(${o}, ${a})`),s||"none"}const XK=(n,e)=>n.depth-e.depth;class QK{constructor(){this.children=[],this.isDirty=!1}add(e){gI(this.children,e),this.isDirty=!0}remove(e){yI(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(XK),this.isDirty=!1,this.children.forEach(e)}}function JK(n,e){const t=performance.now(),s=({timestamp:i})=>{const r=i-t;r>=e&&(rr(s),n(r-e))};return He.read(s,!0),()=>rr(s)}function ZK(n){window.MotionDebug&&window.MotionDebug.record(n)}function eq(n){return n instanceof SVGElement&&n.tagName!=="svg"}function tq(n,e,t){const s=wn(n)?n:ou(n);return s.start(mI("",s,e,t)),s.animation}const aN=["","X","Y","Z"],nq={visibility:"hidden"},lN=1e3;let sq=0;const hl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function _j({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=sq++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,hl.totalNodes=hl.resolvedTargetDeltas=hl.recalculatedProjection=0,this.nodes.forEach(oq),this.nodes.forEach(hq),this.nodes.forEach(dq),this.nodes.forEach(aq),ZK(hl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new QK)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new vI),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=eq(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let d;const f=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=JK(f,250),Xw.hasAnimatedSinceResize&&(Xw.hasAnimatedSinceResize=!1,this.nodes.forEach(uN))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||yq,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=u.getProps(),_=!this.targetLayout||!xj(this.targetLayout,y)||p,v=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,v);const m={...pI(g,"layout"),onPlay:S,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(m.delay=0,m.type=!1),this.startAnimation(m)}else f||uN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,rr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fq),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(cN);return}this.isUpdating||this.nodes.forEach(cq),this.isUpdating=!1,this.nodes.forEach(uq),this.nodes.forEach(iq),this.nodes.forEach(rq),this.clearAllSnapshots();const a=performance.now();Vt.delta=Va(0,1e3/60,a-Vt.timestamp),Vt.timestamp=a,Vt.isProcessing=!0,D1.update.process(Vt),D1.preRender.process(Vt),D1.render.process(Vt),Vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(lq),this.sharedNodes.forEach(pq)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,He.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){He.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=St(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:s(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!bj(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||ul(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),vq(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return St();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Io(a.x,l.offset.x),Io(a.y,l.offset.y)),a}removeElementScroll(o){const a=St();As(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){As(a,o);const{scroll:f}=this.root;f&&(Io(a.x,-f.offset.x),Io(a.y,-f.offset.y))}Io(a.x,u.offset.x),Io(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=St();As(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&sh(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ul(u.latestValues)&&sh(l,u.latestValues)}return ul(this.latestValues)&&sh(l,this.latestValues),l}removeTransform(o){const a=St();As(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ul(c.latestValues))continue;UC(c.latestValues)&&c.updateSnapshot();const u=St(),d=c.measurePageBox();As(u,d),sN(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return ul(this.latestValues)&&sN(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Vt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),Qp(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),As(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=St(),this.targetWithTransforms=St()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):As(this.target,this.layout.layoutBox),pj(this.target,this.targetDelta)):As(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),Qp(this.relativeTargetOrigin,this.target,p.target),As(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}hl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||UC(this.parent.latestValues)||fj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Vt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;As(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;kK(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=nh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=nh(),this.projectionDeltaWithTransform=nh());const g=this.projectionTransform;Xp(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=oN(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),hl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=nh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=St(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,g=p!==y,S=this.getStack(),w=!S||S.members.length<=1,_=!!(g&&!w&&this.options.crossfade===!0&&!this.path.some(gq));this.animationProgress=0;let v;this.mixTargetDelta=m=>{const x=m/1e3;hN(d.x,o.x,x),hN(d.y,o.y,x),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qp(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mq(this.relativeTarget,this.relativeTargetOrigin,f,x),v&&KK(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=St()),As(v,this.relativeTarget)),g&&(this.animationValues=u,UK(u,c,this.latestValues,x,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(rr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=He.update(()=>{Xw.hasAnimatedSinceResize=!0,this.currentAnimation=tq(0,lN,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Sj(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||St();const d=_s(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=_s(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}As(a,l),sh(a,u),Xp(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new qK),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<aN.length;u++){const d="rotate"+aN[u];l[d]&&(c[d]=l[d],o.setStaticValue(d,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return nq;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=qw(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=qw(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ul(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=oN(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:p,y}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in hb){if(f[g]===void 0)continue;const{correct:S,applyTo:w}=hb[g],_=c.transform==="none"?f[g]:S(f[g],d);if(w){const v=w.length;for(let m=0;m<v;m++)c[w[m]]=_}else c[g]=_}return this.options.layoutId&&(c.pointerEvents=d===this?qw(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(cN),this.root.sharedNodes.clear()}}}function iq(n){n.updateLayout()}function rq(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=n.layout,{animationType:r}=n.options,o=t.source!==n.layout.source;r==="size"?ks(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],p=_s(f);f.min=s[d].min,f.max=f.min+p}):Sj(r,t.layoutBox,s)&&ks(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],p=_s(s[d]);f.max=f.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+p)});const a=nh();Xp(a,s,t.layoutBox);const l=nh();o?Xp(l,n.applyTransform(i,!0),t.measuredBox):Xp(l,s,t.layoutBox);const c=!bj(a);let u=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const y=St();Qp(y,t.layoutBox,f.layoutBox);const g=St();Qp(g,s,p.layoutBox),xj(y,g)||(u=!0),d.options.layoutRoot&&(n.relativeTarget=g,n.relativeTargetOrigin=y,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function oq(n){hl.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function aq(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function lq(n){n.clearSnapshot()}function cN(n){n.clearMeasurements()}function cq(n){n.isLayoutDirty=!1}function uq(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function uN(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function hq(n){n.resolveTargetDelta()}function dq(n){n.calcProjection()}function fq(n){n.resetRotation()}function pq(n){n.removeLeadSnapshot()}function hN(n,e,t){n.translate=ot(e.translate,0,t),n.scale=ot(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function dN(n,e,t,s){n.min=ot(e.min,t.min,s),n.max=ot(e.max,t.max,s)}function mq(n,e,t,s){dN(n.x,e.x,t.x,s),dN(n.y,e.y,t.y,s)}function gq(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const yq={duration:.45,ease:[.4,0,.1,1]},fN=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),pN=fN("applewebkit/")&&!fN("chrome/")?Math.round:ht;function mN(n){n.min=pN(n.min),n.max=pN(n.max)}function vq(n){mN(n.x),mN(n.y)}function Sj(n,e,t){return n==="position"||n==="preserve-aspect"&&!HC(rN(e),rN(t),.2)}const wq=_j({attachResizeListener:(n,e)=>Jr(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),W1={current:void 0},Ej=_j({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!W1.current){const n=new wq({});n.mount(window),n.setOptions({layoutScroll:!0}),W1.current=n}return W1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),bq={pan:{Feature:OK},drag:{Feature:LK,ProjectionNode:Ej,MeasureLayout:yj}},xq=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function _q(n){const e=xq.exec(n);if(!e)return[,];const[,t,s]=e;return[t,s]}function zC(n,e,t=1){const[s,i]=_q(n);if(!s)return;const r=window.getComputedStyle(e).getPropertyValue(s);if(r){const o=r.trim();return oj(o)?parseFloat(o):o}else return NC(i)?zC(i,e,t+1):i}function Sq(n,{...e},t){const s=n.current;if(!(s instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const r=i.get();if(!NC(r))return;const o=zC(r,s);o&&i.set(o)});for(const i in e){const r=e[i];if(!NC(r))continue;const o=zC(r,s);o&&(e[i]=o,t||(t={}),t[i]===void 0&&(t[i]=r))}return{target:e,transitionEnd:t}}const Eq=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Cj=n=>Eq.has(n),Cq=n=>Object.keys(n).some(Cj),gN=n=>n===xu||n===ie,yN=(n,e)=>parseFloat(n.split(", ")[e]),vN=(n,e)=>(t,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/);if(i)return yN(i[1],e);{const r=s.match(/^matrix\((.+)\)$/);return r?yN(r[1],n):0}},Aq=new Set(["x","y","z"]),Tq=Sv.filter(n=>!Aq.has(n));function kq(n){const e=[];return Tq.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const ff={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:vN(4,13),y:vN(5,14)};ff.translateX=ff.x;ff.translateY=ff.y;const Iq=(n,e,t)=>{const s=e.measureViewportBox(),i=e.current,r=getComputedStyle(i),{display:o}=r,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(c=>{a[c]=ff[c](s,r)}),e.render();const l=e.measureViewportBox();return t.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),n[c]=ff[c](l,r)}),n},Pq=(n,e,t={},s={})=>{e={...e},s={...s};const i=Object.keys(e).filter(Cj);let r=[],o=!1;const a=[];if(i.forEach(l=>{const c=n.getValue(l);if(!n.hasValue(l))return;let u=t[l],d=Qf(u);const f=e[l];let p;if(fb(f)){const y=f.length,g=f[0]===null?1:0;u=f[g],d=Qf(u);for(let S=g;S<y&&f[S]!==null;S++)p?lI(Qf(f[S])===p):p=Qf(f[S])}else p=Qf(f);if(d!==p)if(gN(d)&&gN(p)){const y=c.get();typeof y=="string"&&c.set(parseFloat(y)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&p===ie&&(e[l]=f.map(parseFloat))}else d!=null&&d.transform&&(p!=null&&p.transform)&&(u===0||f===0)?u===0?c.set(p.transform(u)):e[l]=d.transform(f):(o||(r=kq(n),o=!0),a.push(l),s[l]=s[l]!==void 0?s[l]:e[l],c.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=Iq(e,n,a);return r.length&&r.forEach(([u,d])=>{n.getValue(u).set(d)}),n.render(),uS&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:s}}else return{target:e,transitionEnd:s}};function Rq(n,e,t,s){return Cq(e)?Pq(n,e,t,s):{target:e,transitionEnd:s}}const Mq=(n,e,t,s)=>{const i=Sq(n,e,s);return e=i.target,s=i.transitionEnd,Rq(n,e,t,s)},WC={current:null},Aj={current:!1};function Nq(){if(Aj.current=!0,!!uS)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>WC.current=n.matches;n.addListener(e),e()}else WC.current=!1}function Dq(n,e,t){const{willChange:s}=e;for(const i in e){const r=e[i],o=t[i];if(wn(r))n.addValue(i,r),gb(s)&&s.add(i);else if(wn(o))n.addValue(i,ou(r,{owner:n})),gb(s)&&s.remove(i);else if(o!==r)if(n.hasValue(i)){const a=n.getValue(i);!a.hasAnimated&&a.set(r)}else{const a=n.getStaticValue(i);n.addValue(i,ou(a!==void 0?a:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const wN=new WeakMap,Tj=Object.keys(Am),Lq=Tj.length,bN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Oq=Zk.length;class Fq{constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:i,visualState:r},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>He.render(this.render,!1,!0);const{latestValues:a,renderState:l}=r;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=dS(t),this.isVariantNode=fF(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(t,{});for(const d in u){const f=u[d];a[d]!==void 0&&wn(f)&&(f.set(a[d],!1),gb(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,wN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),Aj.current||Nq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:WC.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){wN.delete(this.current),this.projection&&this.projection.unmount(),rr(this.notifyUpdate),rr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const s=bu.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&He.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),r()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},s,i,r){let o,a;for(let l=0;l<Lq;l++){const c=Tj[l],{isEnabled:u,Feature:d,ProjectionNode:f,MeasureLayout:p}=Am[c];f&&(o=f),u(t)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),p&&(a=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:p}=t;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||d&&eh(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:p})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):St()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<bN.length;s++){const i=bN[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r=e["on"+i];r&&(this.propEventSubscriptions[i]=this.on(i,r))}this.prevMotionValues=Dq(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const t={};for(let s=0;s<Oq;s++){const i=Zk[s],r=this.props[i];(Cm(r)||r===!1)&&(t[i]=r)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=ou(t,{owner:this}),this.addValue(e,s)),s}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:s}=this.props,i=typeof s=="string"||typeof s=="object"?(t=aI(this.props,s))===null||t===void 0?void 0:t[e]:void 0;if(s&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!wn(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new vI),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class kj extends Fq{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...s},{transformValues:i},r){let o=eK(s,e||{},this);if(i&&(t&&(t=i(t)),s&&(s=i(s)),o&&(o=i(o))),r){JY(this,s,o);const a=Mq(this,s,o,t);t=a.transitionEnd,s=a.target}return{transition:e,transitionEnd:t,...s}}}function jq(n){return window.getComputedStyle(n)}class Bq extends kj{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(bu.has(t)){const s=fI(t);return s&&s.default||0}else{const s=jq(e),i=(yF(t)?s.getPropertyValue(t):s[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return mj(e,t)}build(e,t,s,i){nI(e,t,s,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return oI(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,s,i){SF(e,t,s,i)}}class Hq extends kj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(bu.has(t)){const s=fI(t);return s&&s.default||0}return t=EF.has(t)?t:Qk(t),e.getAttribute(t)}measureInstanceViewportBox(){return St()}scrapeMotionValuesFromProps(e,t){return AF(e,t)}build(e,t,s,i){iI(e,t,s,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,s,i){CF(e,t,s,i)}mount(e){this.isSVGTag=rI(e.tagName),super.mount(e)}}const Vq=(n,e)=>tI(n)?new Hq(e,{enableHardwareAcceleration:!1}):new Bq(e,{enableHardwareAcceleration:!0}),Uq={layout:{ProjectionNode:Ej,MeasureLayout:yj}},$q={...mK,...L8,...bq,...Uq},Ae=zG((n,e)=>_8(n,e,$q,Vq));function Ij(){const n=E.useRef(!1);return _v(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function zq(){const n=Ij(),[e,t]=E.useState(0),s=E.useCallback(()=>{n.current&&t(e+1)},[e]);return[E.useCallback(()=>He.postRender(s),[s]),e]}class Wq extends E.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Gq({children:n,isPresent:e}){const t=E.useId(),s=E.useRef(null),i=E.useRef({width:0,height:0,top:0,left:0});return E.useInsertionEffect(()=>{const{width:r,height:o,top:a,left:l}=i.current;if(e||!s.current||!r||!o)return;s.current.dataset.motionPopId=t;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${r}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),E.createElement(Wq,{isPresent:e,childRef:s,sizeRef:i},E.cloneElement(n,{ref:s}))}const G1=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:i,presenceAffectsLayout:r,mode:o})=>{const a=pS(Yq),l=E.useId(),c=E.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;s&&s()},register:u=>(a.set(u,!1),()=>a.delete(u))}),r?void 0:[t]);return E.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[t]),E.useEffect(()=>{!t&&!a.size&&s&&s()},[t]),o==="popLayout"&&(n=E.createElement(Gq,{isPresent:t},n)),E.createElement(cS.Provider,{value:c},n)};function Yq(){return new Map}function Kq(n){return E.useEffect(()=>()=>n(),[])}const dl=n=>n.key||"";function qq(n,e){n.forEach(t=>{const s=dl(t);e.set(s,t)})}function Xq(n){const e=[];return E.Children.forEach(n,t=>{E.isValidElement(t)&&e.push(t)}),e}const Im=({children:n,custom:e,initial:t=!0,onExitComplete:s,exitBeforeEnter:i,presenceAffectsLayout:r=!0,mode:o="sync"})=>{const a=E.useContext(eI).forceRender||zq()[0],l=Ij(),c=Xq(n);let u=c;const d=E.useRef(new Map).current,f=E.useRef(u),p=E.useRef(new Map).current,y=E.useRef(!0);if(_v(()=>{y.current=!1,qq(c,p),f.current=u}),Kq(()=>{y.current=!0,p.clear(),d.clear()}),y.current)return E.createElement(E.Fragment,null,u.map(_=>E.createElement(G1,{key:dl(_),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:r,mode:o},_)));u=[...u];const g=f.current.map(dl),S=c.map(dl),w=g.length;for(let _=0;_<w;_++){const v=g[_];S.indexOf(v)===-1&&!d.has(v)&&d.set(v,void 0)}return o==="wait"&&d.size&&(u=[]),d.forEach((_,v)=>{if(S.indexOf(v)!==-1)return;const m=p.get(v);if(!m)return;const x=g.indexOf(v);let A=_;if(!A){const k=()=>{d.delete(v);const P=Array.from(p.keys()).filter(R=>!S.includes(R));if(P.forEach(R=>p.delete(R)),f.current=c.filter(R=>{const M=dl(R);return M===v||P.includes(M)}),!d.size){if(l.current===!1)return;a(),s&&s()}};A=E.createElement(G1,{key:dl(m),isPresent:!1,onExitComplete:k,custom:e,presenceAffectsLayout:r,mode:o},m),d.set(v,A)}u.splice(x,0,A)}),u=u.map(_=>{const v=_.key;return d.has(v)?_:E.createElement(G1,{key:dl(_),isPresent:!0,presenceAffectsLayout:r,mode:o},_)}),E.createElement(E.Fragment,null,d.size?u:u.map(_=>E.cloneElement(_)))};function vb(n){const e=pS(()=>ou(n)),{isStatic:t}=E.useContext(aS);if(t){const[,s]=E.useState(n);E.useEffect(()=>e.on("change",s),[])}return e}const Qq=n=>n&&typeof n=="object"&&n.mix,Jq=n=>Qq(n)?n.mix:void 0;function Zq(...n){const e=!Array.isArray(n[0]),t=e?0:-1,s=n[0+t],i=n[1+t],r=n[2+t],o=n[3+t],a=dI(i,r,{mixer:Jq(r[0]),...o});return e?a(s):a}function Pj(n,e){const t=vb(e()),s=()=>t.set(e());return s(),_v(()=>{const i=()=>He.update(s,!1,!0),r=n.map(o=>o.on("change",i));return()=>{r.forEach(o=>o()),rr(s)}}),t}function e7(n){qp.current=[],n();const e=Pj(qp.current,n);return qp.current=void 0,e}function gw(n,e,t,s){if(typeof n=="function")return e7(n);const i=typeof e=="function"?e:Zq(e,t,s);return Array.isArray(n)?xN(n,i):xN([n],([r])=>i(r))}function xN(n,e){const t=pS(()=>[]);return Pj(n,()=>{t.length=0;const s=n.length;for(let i=0;i<s;i++)t[i]=n[i].get();return e(t)})}function _N(n,e={}){const{isStatic:t}=E.useContext(aS),s=E.useRef(null),i=vb(wn(n)?n.get():n),r=()=>{s.current&&s.current.stop()};return E.useInsertionEffect(()=>i.attach((o,a)=>{if(t)return a(o);if(r(),s.current=km({keyframes:[i.get(),o],velocity:i.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...e,onUpdate:a}),!Vt.isProcessing){const l=performance.now()-Vt.timestamp;l<30&&(s.current.time=sr(l))}return i.get()},r),[JSON.stringify(e)]),_v(()=>{if(wn(n))return n.on("change",o=>i.set(parseFloat(o)))},[i]),i}function Rj(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Rj(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Rf(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Rj(n))&&(s&&(s+=" "),s+=e);return s}function t7(){for(var n=0,e,t,s="";n<arguments.length;)(e=arguments[n++])&&(t=Mj(e))&&(s&&(s+=" "),s+=t);return s}function Mj(n){if(typeof n=="string")return n;for(var e,t="",s=0;s<n.length;s++)n[s]&&(e=Mj(n[s]))&&(t&&(t+=" "),t+=e);return t}var wI="-";function n7(n){var e=i7(n),t=n.conflictingClassGroups,s=n.conflictingClassGroupModifiers,i=s===void 0?{}:s;function r(a){var l=a.split(wI);return l[0]===""&&l.length!==1&&l.shift(),Nj(l,e)||s7(a)}function o(a,l){var c=t[a]||[];return l&&i[a]?[].concat(c,i[a]):c}return{getClassGroupId:r,getConflictingClassGroupIds:o}}function Nj(n,e){var o;if(n.length===0)return e.classGroupId;var t=n[0],s=e.nextPart.get(t),i=s?Nj(n.slice(1),s):void 0;if(i)return i;if(e.validators.length!==0){var r=n.join(wI);return(o=e.validators.find(function(a){var l=a.validator;return l(r)}))==null?void 0:o.classGroupId}}var SN=/^\[(.+)\]$/;function s7(n){if(SN.test(n)){var e=SN.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function i7(n){var e=n.theme,t=n.prefix,s={nextPart:new Map,validators:[]},i=o7(Object.entries(n.classGroups),t);return i.forEach(function(r){var o=r[0],a=r[1];GC(a,s,o,e)}),s}function GC(n,e,t,s){n.forEach(function(i){if(typeof i=="string"){var r=i===""?e:EN(e,i);r.classGroupId=t;return}if(typeof i=="function"){if(r7(i)){GC(i(s),e,t,s);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(o){var a=o[0],l=o[1];GC(l,EN(e,a),t,s)})})}function EN(n,e){var t=n;return e.split(wI).forEach(function(s){t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t}function r7(n){return n.isThemeGetter}function o7(n,e){return e?n.map(function(t){var s=t[0],i=t[1],r=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[s,r]}):n}function a7(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,s=new Map;function i(r,o){t.set(r,o),e++,e>n&&(e=0,s=t,t=new Map)}return{get:function(o){var a=t.get(o);if(a!==void 0)return a;if((a=s.get(o))!==void 0)return i(o,a),a},set:function(o,a){t.has(o)?t.set(o,a):i(o,a)}}}var Dj="!";function l7(n){var e=n.separator||":",t=e.length===1,s=e[0],i=e.length;return function(o){for(var a=[],l=0,c=0,u,d=0;d<o.length;d++){var f=o[d];if(l===0){if(f===s&&(t||o.slice(d,d+i)===e)){a.push(o.slice(c,d)),c=d+i;continue}if(f==="/"){u=d;continue}}f==="["?l++:f==="]"&&l--}var p=a.length===0?o:o.substring(c),y=p.startsWith(Dj),g=y?p.substring(1):p,S=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:S}}}function c7(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(s){var i=s[0]==="[";i?(e.push.apply(e,t.sort().concat([s])),t=[]):t.push(s)}),e.push.apply(e,t.sort()),e}function u7(n){return{cache:a7(n.cacheSize),splitModifiers:l7(n),...n7(n)}}var h7=/\s+/;function d7(n,e){var t=e.splitModifiers,s=e.getClassGroupId,i=e.getConflictingClassGroupIds,r=new Set;return n.trim().split(h7).map(function(o){var a=t(o),l=a.modifiers,c=a.hasImportantModifier,u=a.baseClassName,d=a.maybePostfixModifierPosition,f=s(d?u.substring(0,d):u),p=!!d;if(!f){if(!d)return{isTailwindClass:!1,originalClassName:o};if(f=s(u),!f)return{isTailwindClass:!1,originalClassName:o};p=!1}var y=c7(l).join(":"),g=c?y+Dj:y;return{isTailwindClass:!0,modifierId:g,classGroupId:f,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,u=a+l;return r.has(u)?!1:(r.add(u),i(l,c).forEach(function(d){return r.add(a+d)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function f7(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var s,i,r,o=a;function a(c){var u=e[0],d=e.slice(1),f=d.reduce(function(p,y){return y(p)},u());return s=u7(f),i=s.cache.get,r=s.cache.set,o=l,l(c)}function l(c){var u=i(c);if(u)return u;var d=d7(c,s);return r(c,d),d}return function(){return o(t7.apply(null,arguments))}}function Ye(n){var e=function(s){return s[n]||[]};return e.isThemeGetter=!0,e}var Lj=/^\[(?:([a-z-]+):)?(.+)\]$/i,p7=/^\d+\/\d+$/,m7=new Set(["px","full","screen"]),g7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,y7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,v7=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function qs(n){return Cl(n)||m7.has(n)||p7.test(n)||YC(n)}function YC(n){return _u(n,"length",E7)}function w7(n){return _u(n,"size",Oj)}function b7(n){return _u(n,"position",Oj)}function x7(n){return _u(n,"url",C7)}function yw(n){return _u(n,"number",Cl)}function Cl(n){return!Number.isNaN(Number(n))}function _7(n){return n.endsWith("%")&&Cl(n.slice(0,-1))}function Zf(n){return CN(n)||_u(n,"number",CN)}function Ee(n){return Lj.test(n)}function ep(){return!0}function So(n){return g7.test(n)}function S7(n){return _u(n,"",A7)}function _u(n,e,t){var s=Lj.exec(n);return s?s[1]?s[1]===e:t(s[2]):!1}function E7(n){return y7.test(n)}function Oj(){return!1}function C7(n){return n.startsWith("url(")}function CN(n){return Number.isInteger(Number(n))}function A7(n){return v7.test(n)}function T7(){var n=Ye("colors"),e=Ye("spacing"),t=Ye("blur"),s=Ye("brightness"),i=Ye("borderColor"),r=Ye("borderRadius"),o=Ye("borderSpacing"),a=Ye("borderWidth"),l=Ye("contrast"),c=Ye("grayscale"),u=Ye("hueRotate"),d=Ye("invert"),f=Ye("gap"),p=Ye("gradientColorStops"),y=Ye("gradientColorStopPositions"),g=Ye("inset"),S=Ye("margin"),w=Ye("opacity"),_=Ye("padding"),v=Ye("saturate"),m=Ye("scale"),x=Ye("sepia"),A=Ye("skew"),k=Ye("space"),P=Ye("translate"),R=function(){return["auto","contain","none"]},M=function(){return["auto","hidden","clip","visible","scroll"]},N=function(){return["auto",Ee,e]},F=function(){return[Ee,e]},H=function(){return["",qs]},D=function(){return["auto",Cl,Ee]},$=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},L=function(){return["solid","dashed","dotted","double","none"]},B=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},O=function(){return["start","end","center","between","around","evenly","stretch"]},j=function(){return["","0",Ee]},z=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},W=function(){return[Cl,yw]},K=function(){return[Cl,Ee]};return{cacheSize:500,theme:{colors:[ep],spacing:[qs],blur:["none","",So,Ee],brightness:W(),borderColor:[n],borderRadius:["none","","full",So,Ee],borderSpacing:F(),borderWidth:H(),contrast:W(),grayscale:j(),hueRotate:K(),invert:j(),gap:F(),gradientColorStops:[n],gradientColorStopPositions:[_7,YC],inset:N(),margin:N(),opacity:W(),padding:F(),saturate:W(),scale:W(),sepia:j(),skew:K(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Ee]}],container:["container"],columns:[{columns:[So]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat($(),[Ee])}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Zf]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ee]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",Zf]}],"grid-cols":[{"grid-cols":[ep]}],"col-start-end":[{col:["auto",{span:["full",Zf]},Ee]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[ep]}],"row-start-end":[{row:["auto",{span:[Zf]},Ee]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ee]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ee]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(O())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(O(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(O(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ee,e]}],"min-w":[{"min-w":["min","max","fit",Ee,qs]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[So]},So,Ee]}],h:[{h:[Ee,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ee,qs]}],"max-h":[{"max-h":[Ee,e,"min","max","fit"]}],"font-size":[{text:["base",So,YC]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yw]}],"font-family":[{font:[ep]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ee]}],"line-clamp":[{"line-clamp":["none",Cl,yw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ee,qs]}],"list-image":[{"list-image":["none",Ee]}],"list-style-type":[{list:["none","disc","decimal",Ee]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(L(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",qs]}],"underline-offset":[{"underline-offset":["auto",Ee,qs]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat($(),[b7])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",w7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},x7]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[].concat(L(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:L()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(L())}],"outline-offset":[{"outline-offset":[Ee,qs]}],"outline-w":[{outline:[qs]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[qs]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",So,S7]}],"shadow-color":[{shadow:[ep]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":B()}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",So,Ee]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[v]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ee]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",Ee]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ee]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[m]}],"scale-x":[{"scale-x":[m]}],"scale-y":[{"scale-y":[m]}],rotate:[{rotate:[Zf,Ee]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ee]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ee]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ee]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[qs,yw]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var k7=f7(T7);function ke(...n){return k7(Rf(n))}function AN(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function yS(...n){return e=>{let t=!1;const s=n.map(i=>{const r=AN(i,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let i=0;i<s.length;i++){const r=s[i];typeof r=="function"?r():AN(n[i],null)}}}}function Re(...n){return E.useCallback(yS(...n),n)}function pf(n){const e=P7(n),t=E.forwardRef((s,i)=>{const{children:r,...o}=s,a=E.Children.toArray(r),l=a.find(M7);if(l){const c=l.props.children,u=a.map(d=>d===l?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:d);return b.jsx(e,{...o,ref:i,children:E.isValidElement(c)?E.cloneElement(c,void 0,u):null})}return b.jsx(e,{...o,ref:i,children:r})});return t.displayName=`${n}.Slot`,t}var I7=pf("Slot");function P7(n){const e=E.forwardRef((t,s)=>{const{children:i,...r}=t;if(E.isValidElement(i)){const o=D7(i),a=N7(r,i.props);return i.type!==E.Fragment&&(a.ref=s?yS(s,o):o),E.cloneElement(i,a)}return E.Children.count(i)>1?E.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var R7=Symbol("radix.slottable");function M7(n){return E.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===R7}function N7(n,e){const t={...e};for(const s in e){const i=n[s],r=e[s];/^on[A-Z]/.test(s)?i&&r?t[s]=(...a)=>{const l=r(...a);return i(...a),l}:i&&(t[s]=i):s==="style"?t[s]={...i,...r}:s==="className"&&(t[s]=[i,r].filter(Boolean).join(" "))}return{...n,...t}}function D7(n){var s,i;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const TN=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,kN=Rf,bI=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return kN(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:r}=e,o=Object.keys(i).map(c=>{const u=t==null?void 0:t[c],d=r==null?void 0:r[c];if(u===null)return null;const f=TN(u)||TN(d);return i[c][f]}),a=t&&Object.entries(t).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,u)=>{let{class:d,className:f,...p}=u;return Object.entries(p).every(y=>{let[g,S]=y;return Array.isArray(S)?S.includes({...r,...a}[g]):{...r,...a}[g]===S})?[...c,d,f]:c},[]);return kN(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)},L7=bI("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Un=te.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...i},r)=>{const o=s?I7:"button";return b.jsx(o,{className:ke(L7({variant:e,size:t,className:n})),ref:r,...i})});Un.displayName="Button";var O7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const F7=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pe=(n,e)=>{const t=E.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:o,children:a,...l},c)=>E.createElement("svg",{ref:c,...O7,width:i,height:i,stroke:s,strokeWidth:o?Number(r)*24/Number(i):r,className:`lucide lucide-${F7(n)}`,...l},[...e.map(([u,d])=>E.createElement(u,d)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${n}`,t},xI=pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),IN=pe("BookHeart",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M16 8.2C16 7 15 6 13.8 6c-.8 0-1.4.3-1.8.9-.4-.6-1-.9-1.8-.9C9 6 8 7 8 8.2c0 .6.3 1.2.7 1.6h0C10 11.1 12 13 12 13s2-1.9 3.3-3.1h0c.4-.4.7-1 .7-1.7z",key:"1dlbw1"}]]),Qw=pe("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]),_I=pe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),j7=pe("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Fj=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),jj=pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),B7=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Bj=pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),H7=pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),V7=pe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),U7=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),$7=pe("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]),z7=pe("Cross",[["path",{d:"M11 2a2 2 0 0 0-2 2v5H4a2 2 0 0 0-2 2v2c0 1.1.9 2 2 2h5v5c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-5h5a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-5V4a2 2 0 0 0-2-2h-2z",key:"1t5g7j"}]]),W7=pe("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),G7=pe("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]),Hj=pe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Y7=pe("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),K7=pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),q7=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Vj=pe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),X7=pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Q7=pe("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),Uj=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),J7=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),$j=pe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Z7=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),e9=pe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),t9=pe("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),zj=pe("PencilLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]),n9=pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),s9=pe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),i9=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),r9=pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),o9=pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),a9=pe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),l9=pe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),c9=pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Wj=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),u9=pe("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Gj=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Yj=E.createContext({theme:"system",setTheme:()=>null});function h9({children:n,defaultTheme:e="system",storageKey:t="vite-ui-theme",...s}){const[i,r]=E.useState(()=>localStorage.getItem(t)||e);E.useEffect(()=>{const a=window.document.documentElement;if(a.classList.remove("light","dark"),i==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";a.classList.add(l);return}a.classList.add(i)},[i]);const o={theme:i,setTheme:a=>{localStorage.setItem(t,a),r(a)}};return b.jsx(Yj.Provider,{...s,value:o,children:n})}const d9=()=>{const n=E.useContext(Yj);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n};function X(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function nl(n,e=[]){let t=[];function s(r,o){const a=E.createContext(o),l=t.length;t=[...t,o];const c=d=>{var w;const{scope:f,children:p,...y}=d,g=((w=f==null?void 0:f[n])==null?void 0:w[l])||a,S=E.useMemo(()=>y,Object.values(y));return b.jsx(g.Provider,{value:S,children:p})};c.displayName=r+"Provider";function u(d,f){var g;const p=((g=f==null?void 0:f[n])==null?void 0:g[l])||a,y=E.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${r}\``)}return[c,u]}const i=()=>{const r=t.map(o=>E.createContext(o));return function(a){const l=(a==null?void 0:a[n])||r;return E.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[s,f9(i,...e)]}function f9(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(r){const o=s.reduce((a,{useScope:l,scopeName:c})=>{const d=l(r)[`__scope${c}`];return{...a,...d}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var on=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},p9=ok[" useInsertionEffect ".trim().toString()]||on;function mf({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[i,r,o]=m9({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:i;{const u=E.useRef(n!==void 0);E.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${s} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,s])}const c=E.useCallback(u=>{var d;if(a){const f=g9(u)?u(n):u;f!==n&&((d=o.current)==null||d.call(o,f))}else r(u)},[a,n,r,o]);return[l,c]}function m9({defaultProp:n,onChange:e}){const[t,s]=E.useState(n),i=E.useRef(t),r=E.useRef(e);return p9(()=>{r.current=e},[e]),E.useEffect(()=>{var o;i.current!==t&&((o=r.current)==null||o.call(r,t),i.current=t)},[t,i]),[t,s,r]}function g9(n){return typeof n=="function"}var y9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],me=y9.reduce((n,e)=>{const t=pf(`Primitive.${e}`),s=E.forwardRef((i,r)=>{const{asChild:o,...a}=i,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(l,{...a,ref:r})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function SI(n,e){n&&wu.flushSync(()=>n.dispatchEvent(e))}function Tv(n){const e=n+"CollectionProvider",[t,s]=nl(e),[i,r]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:S,children:w}=g,_=te.useRef(null),v=te.useRef(new Map).current;return b.jsx(i,{scope:S,itemMap:v,collectionRef:_,children:w})};o.displayName=e;const a=n+"CollectionSlot",l=pf(a),c=te.forwardRef((g,S)=>{const{scope:w,children:_}=g,v=r(a,w),m=Re(S,v.collectionRef);return b.jsx(l,{ref:m,children:_})});c.displayName=a;const u=n+"CollectionItemSlot",d="data-radix-collection-item",f=pf(u),p=te.forwardRef((g,S)=>{const{scope:w,children:_,...v}=g,m=te.useRef(null),x=Re(S,m),A=r(u,w);return te.useEffect(()=>(A.itemMap.set(m,{ref:m,...v}),()=>void A.itemMap.delete(m))),b.jsx(f,{[d]:"",ref:x,children:_})});p.displayName=u;function y(g){const S=r(n+"CollectionConsumer",g);return te.useCallback(()=>{const _=S.collectionRef.current;if(!_)return[];const v=Array.from(_.querySelectorAll(`[${d}]`));return Array.from(S.itemMap.values()).sort((A,k)=>v.indexOf(A.ref.current)-v.indexOf(k.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},y,s]}var v9=E.createContext(void 0);function vS(n){const e=E.useContext(v9);return n||e||"ltr"}function Xn(n){const e=E.useRef(n);return E.useEffect(()=>{e.current=n}),E.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}function w9(n,e=globalThis==null?void 0:globalThis.document){const t=Xn(n);E.useEffect(()=>{const s=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var b9="DismissableLayer",KC="dismissableLayer.update",x9="dismissableLayer.pointerDownOutside",_9="dismissableLayer.focusOutside",PN,Kj=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wS=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:r,onInteractOutside:o,onDismiss:a,...l}=n,c=E.useContext(Kj),[u,d]=E.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=E.useState({}),y=Re(e,k=>d(k)),g=Array.from(c.layers),[S]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(S),_=u?g.indexOf(u):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,m=_>=w,x=E9(k=>{const P=k.target,R=[...c.branches].some(M=>M.contains(P));!m||R||(i==null||i(k),o==null||o(k),k.defaultPrevented||a==null||a())},f),A=C9(k=>{const P=k.target;[...c.branches].some(M=>M.contains(P))||(r==null||r(k),o==null||o(k),k.defaultPrevented||a==null||a())},f);return w9(k=>{_===c.layers.size-1&&(s==null||s(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},f),E.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(PN=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),RN(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=PN)}},[u,f,t,c]),E.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),RN())},[u,c]),E.useEffect(()=>{const k=()=>p({});return document.addEventListener(KC,k),()=>document.removeEventListener(KC,k)},[]),b.jsx(me.div,{...l,ref:y,style:{pointerEvents:v?m?"auto":"none":void 0,...n.style},onFocusCapture:X(n.onFocusCapture,A.onFocusCapture),onBlurCapture:X(n.onBlurCapture,A.onBlurCapture),onPointerDownCapture:X(n.onPointerDownCapture,x.onPointerDownCapture)})});wS.displayName=b9;var S9="DismissableLayerBranch",qj=E.forwardRef((n,e)=>{const t=E.useContext(Kj),s=E.useRef(null),i=Re(e,s);return E.useEffect(()=>{const r=s.current;if(r)return t.branches.add(r),()=>{t.branches.delete(r)}},[t.branches]),b.jsx(me.div,{...n,ref:i})});qj.displayName=S9;function E9(n,e=globalThis==null?void 0:globalThis.document){const t=Xn(n),s=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const r=a=>{if(a.target&&!s.current){let l=function(){Xj(x9,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",r),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function C9(n,e=globalThis==null?void 0:globalThis.document){const t=Xn(n),s=E.useRef(!1);return E.useEffect(()=>{const i=r=>{r.target&&!s.current&&Xj(_9,t,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function RN(){const n=new CustomEvent(KC);document.dispatchEvent(n)}function Xj(n,e,t,{discrete:s}){const i=t.originalEvent.target,r=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?SI(i,r):i.dispatchEvent(r)}var A9=wS,T9=qj,Y1=0;function Qj(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??MN()),document.body.insertAdjacentElement("beforeend",n[1]??MN()),Y1++,()=>{Y1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Y1--}},[])}function MN(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var K1="focusScope.autoFocusOnMount",q1="focusScope.autoFocusOnUnmount",NN={bubbles:!1,cancelable:!0},k9="FocusScope",EI=E.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:r,...o}=n,[a,l]=E.useState(null),c=Xn(i),u=Xn(r),d=E.useRef(null),f=Re(e,g=>l(g)),p=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(s){let g=function(v){if(p.paused||!a)return;const m=v.target;a.contains(m)?d.current=m:Co(d.current,{select:!0})},S=function(v){if(p.paused||!a)return;const m=v.relatedTarget;m!==null&&(a.contains(m)||Co(d.current,{select:!0}))},w=function(v){if(document.activeElement===document.body)for(const x of v)x.removedNodes.length>0&&Co(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",S);const _=new MutationObserver(w);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",S),_.disconnect()}}},[s,a,p.paused]),E.useEffect(()=>{if(a){LN.add(p);const g=document.activeElement;if(!a.contains(g)){const w=new CustomEvent(K1,NN);a.addEventListener(K1,c),a.dispatchEvent(w),w.defaultPrevented||(I9(D9(Jj(a)),{select:!0}),document.activeElement===g&&Co(a))}return()=>{a.removeEventListener(K1,c),setTimeout(()=>{const w=new CustomEvent(q1,NN);a.addEventListener(q1,u),a.dispatchEvent(w),w.defaultPrevented||Co(g??document.body,{select:!0}),a.removeEventListener(q1,u),LN.remove(p)},0)}}},[a,c,u,p]);const y=E.useCallback(g=>{if(!t&&!s||p.paused)return;const S=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(S&&w){const _=g.currentTarget,[v,m]=P9(_);v&&m?!g.shiftKey&&w===m?(g.preventDefault(),t&&Co(v,{select:!0})):g.shiftKey&&w===v&&(g.preventDefault(),t&&Co(m,{select:!0})):w===_&&g.preventDefault()}},[t,s,p.paused]);return b.jsx(me.div,{tabIndex:-1,...o,ref:f,onKeyDown:y})});EI.displayName=k9;function I9(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(Co(s,{select:e}),document.activeElement!==t)return}function P9(n){const e=Jj(n),t=DN(e,n),s=DN(e.reverse(),n);return[t,s]}function Jj(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function DN(n,e){for(const t of n)if(!R9(t,{upTo:e}))return t}function R9(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function M9(n){return n instanceof HTMLInputElement&&"select"in n}function Co(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&M9(n)&&e&&n.select()}}var LN=N9();function N9(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=ON(n,e),n.unshift(e)},remove(e){var t;n=ON(n,e),(t=n[0])==null||t.resume()}}}function ON(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function D9(n){return n.filter(e=>e.tagName!=="A")}var L9=ok[" useId ".trim().toString()]||(()=>{}),O9=0;function gf(n){const[e,t]=E.useState(L9());return on(()=>{n||t(s=>s??String(O9++))},[n]),n||(e?`radix-${e}`:"")}const F9=["top","right","bottom","left"],$a=Math.min,gs=Math.max,wb=Math.round,vw=Math.floor,ir=n=>({x:n,y:n}),j9={left:"right",right:"left",bottom:"top",top:"bottom"},B9={start:"end",end:"start"};function qC(n,e,t){return gs(n,$a(e,t))}function lo(n,e){return typeof n=="function"?n(e):n}function co(n){return n.split("-")[0]}function Mf(n){return n.split("-")[1]}function CI(n){return n==="x"?"y":"x"}function AI(n){return n==="y"?"height":"width"}const H9=new Set(["top","bottom"]);function Ji(n){return H9.has(co(n))?"y":"x"}function TI(n){return CI(Ji(n))}function V9(n,e,t){t===void 0&&(t=!1);const s=Mf(n),i=TI(n),r=AI(i);let o=i==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=bb(o)),[o,bb(o)]}function U9(n){const e=bb(n);return[XC(n),e,XC(e)]}function XC(n){return n.replace(/start|end/g,e=>B9[e])}const FN=["left","right"],jN=["right","left"],$9=["top","bottom"],z9=["bottom","top"];function W9(n,e,t){switch(n){case"top":case"bottom":return t?e?jN:FN:e?FN:jN;case"left":case"right":return e?$9:z9;default:return[]}}function G9(n,e,t,s){const i=Mf(n);let r=W9(co(n),t==="start",s);return i&&(r=r.map(o=>o+"-"+i),e&&(r=r.concat(r.map(XC)))),r}function bb(n){return n.replace(/left|right|bottom|top/g,e=>j9[e])}function Y9(n){return{top:0,right:0,bottom:0,left:0,...n}}function Zj(n){return typeof n!="number"?Y9(n):{top:n,right:n,bottom:n,left:n}}function xb(n){const{x:e,y:t,width:s,height:i}=n;return{width:s,height:i,top:t,left:e,right:e+s,bottom:t+i,x:e,y:t}}function BN(n,e,t){let{reference:s,floating:i}=n;const r=Ji(e),o=TI(e),a=AI(o),l=co(e),c=r==="y",u=s.x+s.width/2-i.width/2,d=s.y+s.height/2-i.height/2,f=s[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:s.y-i.height};break;case"bottom":p={x:u,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:d};break;case"left":p={x:s.x-i.width,y:d};break;default:p={x:s.x,y:s.y}}switch(Mf(e)){case"start":p[o]-=f*(t&&c?-1:1);break;case"end":p[o]+=f*(t&&c?-1:1);break}return p}const K9=async(n,e,t)=>{const{placement:s="bottom",strategy:i="absolute",middleware:r=[],platform:o}=t,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:d}=BN(c,s,l),f=s,p={},y=0;for(let g=0;g<a.length;g++){const{name:S,fn:w}=a[g],{x:_,y:v,data:m,reset:x}=await w({x:u,y:d,initialPlacement:s,placement:f,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:n,floating:e}});u=_??u,d=v??d,p={...p,[S]:{...p[S],...m}},x&&y<=50&&(y++,typeof x=="object"&&(x.placement&&(f=x.placement),x.rects&&(c=x.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):x.rects),{x:u,y:d}=BN(c,f,l)),g=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:p}};async function Pm(n,e){var t;e===void 0&&(e={});const{x:s,y:i,platform:r,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=lo(e,n),y=Zj(p),S=a[f?d==="floating"?"reference":"floating":d],w=xb(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(S)))==null||t?S:S.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,v=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),m=await(r.isElement==null?void 0:r.isElement(v))?await(r.getScale==null?void 0:r.getScale(v))||{x:1,y:1}:{x:1,y:1},x=xb(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:v,strategy:l}):_);return{top:(w.top-x.top+y.top)/m.y,bottom:(x.bottom-w.bottom+y.bottom)/m.y,left:(w.left-x.left+y.left)/m.x,right:(x.right-w.right+y.right)/m.x}}const q9=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:i,rects:r,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=lo(n,e)||{};if(c==null)return{};const d=Zj(u),f={x:t,y:s},p=TI(i),y=AI(p),g=await o.getDimensions(c),S=p==="y",w=S?"top":"left",_=S?"bottom":"right",v=S?"clientHeight":"clientWidth",m=r.reference[y]+r.reference[p]-f[p]-r.floating[y],x=f[p]-r.reference[p],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let k=A?A[v]:0;(!k||!await(o.isElement==null?void 0:o.isElement(A)))&&(k=a.floating[v]||r.floating[y]);const P=m/2-x/2,R=k/2-g[y]/2-1,M=$a(d[w],R),N=$a(d[_],R),F=M,H=k-g[y]-N,D=k/2-g[y]/2+P,$=qC(F,D,H),L=!l.arrow&&Mf(i)!=null&&D!==$&&r.reference[y]/2-(D<F?M:N)-g[y]/2<0,B=L?D<F?D-F:D-H:0;return{[p]:f[p]+B,data:{[p]:$,centerOffset:D-$-B,...L&&{alignmentOffset:B}},reset:L}}}),X9=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:i,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...S}=lo(n,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const w=co(i),_=Ji(a),v=co(a)===a,m=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=f||(v||!g?[bb(a)]:U9(a)),A=y!=="none";!f&&A&&x.push(...G9(a,g,y,m));const k=[a,...x],P=await Pm(e,S),R=[];let M=((s=r.flip)==null?void 0:s.overflows)||[];if(u&&R.push(P[w]),d){const D=V9(i,o,m);R.push(P[D[0]],P[D[1]])}if(M=[...M,{placement:i,overflows:R}],!R.every(D=>D<=0)){var N,F;const D=(((N=r.flip)==null?void 0:N.index)||0)+1,$=k[D];if($&&(!(d==="alignment"?_!==Ji($):!1)||M.every(O=>Ji(O.placement)===_?O.overflows[0]>0:!0)))return{data:{index:D,overflows:M},reset:{placement:$}};let L=(F=M.filter(B=>B.overflows[0]<=0).sort((B,O)=>B.overflows[1]-O.overflows[1])[0])==null?void 0:F.placement;if(!L)switch(p){case"bestFit":{var H;const B=(H=M.filter(O=>{if(A){const j=Ji(O.placement);return j===_||j==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(j=>j>0).reduce((j,z)=>j+z,0)]).sort((O,j)=>O[1]-j[1])[0])==null?void 0:H[0];B&&(L=B);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function HN(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function VN(n){return F9.some(e=>n[e]>=0)}const Q9=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...i}=lo(n,e);switch(s){case"referenceHidden":{const r=await Pm(e,{...i,elementContext:"reference"}),o=HN(r,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:VN(o)}}}case"escaped":{const r=await Pm(e,{...i,altBoundary:!0}),o=HN(r,t.floating);return{data:{escapedOffsets:o,escaped:VN(o)}}}default:return{}}}}},eB=new Set(["left","top"]);async function J9(n,e){const{placement:t,platform:s,elements:i}=n,r=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=co(t),a=Mf(t),l=Ji(t)==="y",c=eB.has(o)?-1:1,u=r&&l?-1:1,d=lo(e,n);let{mainAxis:f,crossAxis:p,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof y=="number"&&(p=a==="end"?y*-1:y),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const Z9=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:i,y:r,placement:o,middlewareData:a}=e,l=await J9(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:i+l.x,y:r+l.y,data:{...l,placement:o}}}}},eX=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:i}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:w,y:_}=S;return{x:w,y:_}}},...l}=lo(n,e),c={x:t,y:s},u=await Pm(e,l),d=Ji(co(i)),f=CI(d);let p=c[f],y=c[d];if(r){const S=f==="y"?"top":"left",w=f==="y"?"bottom":"right",_=p+u[S],v=p-u[w];p=qC(_,p,v)}if(o){const S=d==="y"?"top":"left",w=d==="y"?"bottom":"right",_=y+u[S],v=y-u[w];y=qC(_,y,v)}const g=a.fn({...e,[f]:p,[d]:y});return{...g,data:{x:g.x-t,y:g.y-s,enabled:{[f]:r,[d]:o}}}}}},tX=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:i,rects:r,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=lo(n,e),u={x:t,y:s},d=Ji(i),f=CI(d);let p=u[f],y=u[d];const g=lo(a,e),S=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const v=f==="y"?"height":"width",m=r.reference[f]-r.floating[v]+S.mainAxis,x=r.reference[f]+r.reference[v]-S.mainAxis;p<m?p=m:p>x&&(p=x)}if(c){var w,_;const v=f==="y"?"width":"height",m=eB.has(co(i)),x=r.reference[d]-r.floating[v]+(m&&((w=o.offset)==null?void 0:w[d])||0)+(m?0:S.crossAxis),A=r.reference[d]+r.reference[v]+(m?0:((_=o.offset)==null?void 0:_[d])||0)-(m?S.crossAxis:0);y<x?y=x:y>A&&(y=A)}return{[f]:p,[d]:y}}}},nX=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,s;const{placement:i,rects:r,platform:o,elements:a}=e,{apply:l=()=>{},...c}=lo(n,e),u=await Pm(e,c),d=co(i),f=Mf(i),p=Ji(i)==="y",{width:y,height:g}=r.floating;let S,w;d==="top"||d==="bottom"?(S=d,w=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=d,S=f==="end"?"top":"bottom");const _=g-u.top-u.bottom,v=y-u.left-u.right,m=$a(g-u[S],_),x=$a(y-u[w],v),A=!e.middlewareData.shift;let k=m,P=x;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=v),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(k=_),A&&!f){const M=gs(u.left,0),N=gs(u.right,0),F=gs(u.top,0),H=gs(u.bottom,0);p?P=y-2*(M!==0||N!==0?M+N:gs(u.left,u.right)):k=g-2*(F!==0||H!==0?F+H:gs(u.top,u.bottom))}await l({...e,availableWidth:P,availableHeight:k});const R=await o.getDimensions(a.floating);return y!==R.width||g!==R.height?{reset:{rects:!0}}:{}}}};function bS(){return typeof window<"u"}function Nf(n){return tB(n)?(n.nodeName||"").toLowerCase():"#document"}function bs(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ar(n){var e;return(e=(tB(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function tB(n){return bS()?n instanceof Node||n instanceof bs(n).Node:!1}function Si(n){return bS()?n instanceof Element||n instanceof bs(n).Element:!1}function or(n){return bS()?n instanceof HTMLElement||n instanceof bs(n).HTMLElement:!1}function UN(n){return!bS()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof bs(n).ShadowRoot}const sX=new Set(["inline","contents"]);function kv(n){const{overflow:e,overflowX:t,overflowY:s,display:i}=Ei(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!sX.has(i)}const iX=new Set(["table","td","th"]);function rX(n){return iX.has(Nf(n))}const oX=[":popover-open",":modal"];function xS(n){return oX.some(e=>{try{return n.matches(e)}catch{return!1}})}const aX=["transform","translate","scale","rotate","perspective"],lX=["transform","translate","scale","rotate","perspective","filter"],cX=["paint","layout","strict","content"];function kI(n){const e=II(),t=Si(n)?Ei(n):n;return aX.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||lX.some(s=>(t.willChange||"").includes(s))||cX.some(s=>(t.contain||"").includes(s))}function uX(n){let e=za(n);for(;or(e)&&!yf(e);){if(kI(e))return e;if(xS(e))return null;e=za(e)}return null}function II(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const hX=new Set(["html","body","#document"]);function yf(n){return hX.has(Nf(n))}function Ei(n){return bs(n).getComputedStyle(n)}function _S(n){return Si(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function za(n){if(Nf(n)==="html")return n;const e=n.assignedSlot||n.parentNode||UN(n)&&n.host||ar(n);return UN(e)?e.host:e}function nB(n){const e=za(n);return yf(e)?n.ownerDocument?n.ownerDocument.body:n.body:or(e)&&kv(e)?e:nB(e)}function Rm(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=nB(n),r=i===((s=n.ownerDocument)==null?void 0:s.body),o=bs(i);if(r){const a=QC(o);return e.concat(o,o.visualViewport||[],kv(i)?i:[],a&&t?Rm(a):[])}return e.concat(i,Rm(i,[],t))}function QC(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function sB(n){const e=Ei(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=or(n),r=i?n.offsetWidth:t,o=i?n.offsetHeight:s,a=wb(t)!==r||wb(s)!==o;return a&&(t=r,s=o),{width:t,height:s,$:a}}function PI(n){return Si(n)?n:n.contextElement}function ph(n){const e=PI(n);if(!or(e))return ir(1);const t=e.getBoundingClientRect(),{width:s,height:i,$:r}=sB(e);let o=(r?wb(t.width):t.width)/s,a=(r?wb(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const dX=ir(0);function iB(n){const e=bs(n);return!II()||!e.visualViewport?dX:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function fX(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==bs(n)?!1:e}function au(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),r=PI(n);let o=ir(1);e&&(s?Si(s)&&(o=ph(s)):o=ph(n));const a=fX(r,t,s)?iB(r):ir(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(r){const f=bs(r),p=s&&Si(s)?bs(s):s;let y=f,g=QC(y);for(;g&&s&&p!==y;){const S=ph(g),w=g.getBoundingClientRect(),_=Ei(g),v=w.left+(g.clientLeft+parseFloat(_.paddingLeft))*S.x,m=w.top+(g.clientTop+parseFloat(_.paddingTop))*S.y;l*=S.x,c*=S.y,u*=S.x,d*=S.y,l+=v,c+=m,y=bs(g),g=QC(y)}}return xb({width:u,height:d,x:l,y:c})}function SS(n,e){const t=_S(n).scrollLeft;return e?e.left+t:au(ar(n)).left+t}function rB(n,e){const t=n.getBoundingClientRect(),s=t.left+e.scrollLeft-SS(n,t),i=t.top+e.scrollTop;return{x:s,y:i}}function pX(n){let{elements:e,rect:t,offsetParent:s,strategy:i}=n;const r=i==="fixed",o=ar(s),a=e?xS(e.floating):!1;if(s===o||a&&r)return t;let l={scrollLeft:0,scrollTop:0},c=ir(1);const u=ir(0),d=or(s);if((d||!d&&!r)&&((Nf(s)!=="body"||kv(o))&&(l=_S(s)),or(s))){const p=au(s);c=ph(s),u.x=p.x+s.clientLeft,u.y=p.y+s.clientTop}const f=o&&!d&&!r?rB(o,l):ir(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:t.y*c.y-l.scrollTop*c.y+u.y+f.y}}function mX(n){return Array.from(n.getClientRects())}function gX(n){const e=ar(n),t=_S(n),s=n.ownerDocument.body,i=gs(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),r=gs(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-t.scrollLeft+SS(n);const a=-t.scrollTop;return Ei(s).direction==="rtl"&&(o+=gs(e.clientWidth,s.clientWidth)-i),{width:i,height:r,x:o,y:a}}const $N=25;function yX(n,e){const t=bs(n),s=ar(n),i=t.visualViewport;let r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(i){r=i.width,o=i.height;const u=II();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=SS(s);if(c<=0){const u=s.ownerDocument,d=u.body,f=getComputedStyle(d),p=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,y=Math.abs(s.clientWidth-d.clientWidth-p);y<=$N&&(r-=y)}else c<=$N&&(r+=c);return{width:r,height:o,x:a,y:l}}const vX=new Set(["absolute","fixed"]);function wX(n,e){const t=au(n,!0,e==="fixed"),s=t.top+n.clientTop,i=t.left+n.clientLeft,r=or(n)?ph(n):ir(1),o=n.clientWidth*r.x,a=n.clientHeight*r.y,l=i*r.x,c=s*r.y;return{width:o,height:a,x:l,y:c}}function zN(n,e,t){let s;if(e==="viewport")s=yX(n,t);else if(e==="document")s=gX(ar(n));else if(Si(e))s=wX(e,t);else{const i=iB(n);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return xb(s)}function oB(n,e){const t=za(n);return t===e||!Si(t)||yf(t)?!1:Ei(t).position==="fixed"||oB(t,e)}function bX(n,e){const t=e.get(n);if(t)return t;let s=Rm(n,[],!1).filter(a=>Si(a)&&Nf(a)!=="body"),i=null;const r=Ei(n).position==="fixed";let o=r?za(n):n;for(;Si(o)&&!yf(o);){const a=Ei(o),l=kI(o);!l&&a.position==="fixed"&&(i=null),(r?!l&&!i:!l&&a.position==="static"&&!!i&&vX.has(i.position)||kv(o)&&!l&&oB(n,o))?s=s.filter(u=>u!==o):i=a,o=za(o)}return e.set(n,s),s}function xX(n){let{element:e,boundary:t,rootBoundary:s,strategy:i}=n;const o=[...t==="clippingAncestors"?xS(e)?[]:bX(e,this._c):[].concat(t),s],a=o[0],l=o.reduce((c,u)=>{const d=zN(e,u,i);return c.top=gs(d.top,c.top),c.right=$a(d.right,c.right),c.bottom=$a(d.bottom,c.bottom),c.left=gs(d.left,c.left),c},zN(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function _X(n){const{width:e,height:t}=sB(n);return{width:e,height:t}}function SX(n,e,t){const s=or(e),i=ar(e),r=t==="fixed",o=au(n,!0,r,e);let a={scrollLeft:0,scrollTop:0};const l=ir(0);function c(){l.x=SS(i)}if(s||!s&&!r)if((Nf(e)!=="body"||kv(i))&&(a=_S(e)),s){const p=au(e,!0,r,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&c();r&&!s&&i&&c();const u=i&&!s&&!r?rB(i,a):ir(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function X1(n){return Ei(n).position==="static"}function WN(n,e){if(!or(n)||Ei(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ar(n)===t&&(t=t.ownerDocument.body),t}function aB(n,e){const t=bs(n);if(xS(n))return t;if(!or(n)){let i=za(n);for(;i&&!yf(i);){if(Si(i)&&!X1(i))return i;i=za(i)}return t}let s=WN(n,e);for(;s&&rX(s)&&X1(s);)s=WN(s,e);return s&&yf(s)&&X1(s)&&!kI(s)?t:s||uX(n)||t}const EX=async function(n){const e=this.getOffsetParent||aB,t=this.getDimensions,s=await t(n.floating);return{reference:SX(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function CX(n){return Ei(n).direction==="rtl"}const AX={convertOffsetParentRelativeRectToViewportRelativeRect:pX,getDocumentElement:ar,getClippingRect:xX,getOffsetParent:aB,getElementRects:EX,getClientRects:mX,getDimensions:_X,getScale:ph,isElement:Si,isRTL:CX};function lB(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function TX(n,e){let t=null,s;const i=ar(n);function r(){var a;clearTimeout(s),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const c=n.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const y=vw(d),g=vw(i.clientWidth-(u+f)),S=vw(i.clientHeight-(d+p)),w=vw(u),v={rootMargin:-y+"px "+-g+"px "+-S+"px "+-w+"px",threshold:gs(0,$a(1,l))||1};let m=!0;function x(A){const k=A[0].intersectionRatio;if(k!==l){if(!m)return o();k?o(!1,k):s=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!lB(c,n.getBoundingClientRect())&&o(),m=!1}try{t=new IntersectionObserver(x,{...v,root:i.ownerDocument})}catch{t=new IntersectionObserver(x,v)}t.observe(n)}return o(!0),r}function kX(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,c=PI(n),u=i||r?[...c?Rm(c):[],...Rm(e)]:[];u.forEach(w=>{i&&w.addEventListener("scroll",t,{passive:!0}),r&&w.addEventListener("resize",t)});const d=c&&a?TX(c,t):null;let f=-1,p=null;o&&(p=new ResizeObserver(w=>{let[_]=w;_&&_.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=p)==null||v.observe(e)})),t()}),c&&!l&&p.observe(c),p.observe(e));let y,g=l?au(n):null;l&&S();function S(){const w=au(n);g&&!lB(g,w)&&t(),g=w,y=requestAnimationFrame(S)}return t(),()=>{var w;u.forEach(_=>{i&&_.removeEventListener("scroll",t),r&&_.removeEventListener("resize",t)}),d==null||d(),(w=p)==null||w.disconnect(),p=null,l&&cancelAnimationFrame(y)}}const IX=Z9,PX=eX,RX=X9,MX=nX,NX=Q9,GN=q9,DX=tX,LX=(n,e,t)=>{const s=new Map,i={platform:AX,...t},r={...i.platform,_c:s};return K9(n,e,{...i,platform:r})};var OX=typeof document<"u",FX=function(){},Jw=OX?E.useLayoutEffect:FX;function _b(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!_b(n[s],e[s]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=t;s--!==0;){const r=i[s];if(!(r==="_owner"&&n.$$typeof)&&!_b(n[r],e[r]))return!1}return!0}return n!==n&&e!==e}function cB(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function YN(n,e){const t=cB(n);return Math.round(e*t)/t}function Q1(n){const e=E.useRef(n);return Jw(()=>{e.current=n}),e}function jX(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:i,elements:{reference:r,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,d]=E.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=E.useState(s);_b(f,s)||p(s);const[y,g]=E.useState(null),[S,w]=E.useState(null),_=E.useCallback(O=>{O!==A.current&&(A.current=O,g(O))},[]),v=E.useCallback(O=>{O!==k.current&&(k.current=O,w(O))},[]),m=r||y,x=o||S,A=E.useRef(null),k=E.useRef(null),P=E.useRef(u),R=l!=null,M=Q1(l),N=Q1(i),F=Q1(c),H=E.useCallback(()=>{if(!A.current||!k.current)return;const O={placement:e,strategy:t,middleware:f};N.current&&(O.platform=N.current),LX(A.current,k.current,O).then(j=>{const z={...j,isPositioned:F.current!==!1};D.current&&!_b(P.current,z)&&(P.current=z,wu.flushSync(()=>{d(z)}))})},[f,e,t,N,F]);Jw(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(O=>({...O,isPositioned:!1})))},[c]);const D=E.useRef(!1);Jw(()=>(D.current=!0,()=>{D.current=!1}),[]),Jw(()=>{if(m&&(A.current=m),x&&(k.current=x),m&&x){if(M.current)return M.current(m,x,H);H()}},[m,x,H,M,R]);const $=E.useMemo(()=>({reference:A,floating:k,setReference:_,setFloating:v}),[_,v]),L=E.useMemo(()=>({reference:m,floating:x}),[m,x]),B=E.useMemo(()=>{const O={position:t,left:0,top:0};if(!L.floating)return O;const j=YN(L.floating,u.x),z=YN(L.floating,u.y);return a?{...O,transform:"translate("+j+"px, "+z+"px)",...cB(L.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:j,top:z}},[t,a,L.floating,u.x,u.y]);return E.useMemo(()=>({...u,update:H,refs:$,elements:L,floatingStyles:B}),[u,H,$,L,B])}const BX=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:i}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?GN({element:s.current,padding:i}).fn(t):{}:s?GN({element:s,padding:i}).fn(t):{}}}},HX=(n,e)=>({...IX(n),options:[n,e]}),VX=(n,e)=>({...PX(n),options:[n,e]}),UX=(n,e)=>({...DX(n),options:[n,e]}),$X=(n,e)=>({...RX(n),options:[n,e]}),zX=(n,e)=>({...MX(n),options:[n,e]}),WX=(n,e)=>({...NX(n),options:[n,e]}),GX=(n,e)=>({...BX(n),options:[n,e]});var YX="Arrow",uB=E.forwardRef((n,e)=>{const{children:t,width:s=10,height:i=5,...r}=n;return b.jsx(me.svg,{...r,ref:e,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:b.jsx("polygon",{points:"0,0 30,0 15,10"})})});uB.displayName=YX;var KX=uB;function hB(n){const[e,t]=E.useState(void 0);return on(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const r=i[0];let o,a;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}var RI="Popper",[dB,ES]=nl(RI),[qX,fB]=dB(RI),pB=n=>{const{__scopePopper:e,children:t}=n,[s,i]=E.useState(null);return b.jsx(qX,{scope:e,anchor:s,onAnchorChange:i,children:t})};pB.displayName=RI;var mB="PopperAnchor",gB=E.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...i}=n,r=fB(mB,t),o=E.useRef(null),a=Re(e,o),l=E.useRef(null);return E.useEffect(()=>{const c=l.current;l.current=(s==null?void 0:s.current)||o.current,c!==l.current&&r.onAnchorChange(l.current)}),s?null:b.jsx(me.div,{...i,ref:a})});gB.displayName=mB;var MI="PopperContent",[XX,QX]=dB(MI),yB=E.forwardRef((n,e)=>{var G,fe,he,ne,oe,ye;const{__scopePopper:t,side:s="bottom",sideOffset:i=0,align:r="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:y,...g}=n,S=fB(MI,t),[w,_]=E.useState(null),v=Re(e,ae=>_(ae)),[m,x]=E.useState(null),A=hB(m),k=(A==null?void 0:A.width)??0,P=(A==null?void 0:A.height)??0,R=s+(r!=="center"?"-"+r:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},N=Array.isArray(c)?c:[c],F=N.length>0,H={padding:M,boundary:N.filter(ZX),altBoundary:F},{refs:D,floatingStyles:$,placement:L,isPositioned:B,middlewareData:O}=jX({strategy:"fixed",placement:R,whileElementsMounted:(...ae)=>kX(...ae,{animationFrame:p==="always"}),elements:{reference:S.anchor},middleware:[HX({mainAxis:i+P,alignmentAxis:o}),l&&VX({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?UX():void 0,...H}),l&&$X({...H}),zX({...H,apply:({elements:ae,rects:Te,availableWidth:Ge,availableHeight:Qe})=>{const{width:Cs,height:rl}=Te.reference,wo=ae.floating.style;wo.setProperty("--radix-popper-available-width",`${Ge}px`),wo.setProperty("--radix-popper-available-height",`${Qe}px`),wo.setProperty("--radix-popper-anchor-width",`${Cs}px`),wo.setProperty("--radix-popper-anchor-height",`${rl}px`)}}),m&&GX({element:m,padding:a}),eQ({arrowWidth:k,arrowHeight:P}),f&&WX({strategy:"referenceHidden",...H})]}),[j,z]=bB(L),W=Xn(y);on(()=>{B&&(W==null||W())},[B,W]);const K=(G=O.arrow)==null?void 0:G.x,Z=(fe=O.arrow)==null?void 0:fe.y,de=((he=O.arrow)==null?void 0:he.centerOffset)!==0,[Me,ue]=E.useState();return on(()=>{w&&ue(window.getComputedStyle(w).zIndex)},[w]),b.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:B?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(ne=O.transformOrigin)==null?void 0:ne.x,(oe=O.transformOrigin)==null?void 0:oe.y].join(" "),...((ye=O.hide)==null?void 0:ye.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:b.jsx(XX,{scope:t,placedSide:j,onArrowChange:x,arrowX:K,arrowY:Z,shouldHideArrow:de,children:b.jsx(me.div,{"data-side":j,"data-align":z,...g,ref:v,style:{...g.style,animation:B?void 0:"none"}})})})});yB.displayName=MI;var vB="PopperArrow",JX={top:"bottom",right:"left",bottom:"top",left:"right"},wB=E.forwardRef(function(e,t){const{__scopePopper:s,...i}=e,r=QX(vB,s),o=JX[r.placedSide];return b.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:b.jsx(KX,{...i,ref:t,style:{...i.style,display:"block"}})})});wB.displayName=vB;function ZX(n){return n!==null}var eQ=n=>({name:"transformOrigin",options:n,fn(e){var S,w,_;const{placement:t,rects:s,middlewareData:i}=e,o=((S=i.arrow)==null?void 0:S.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,u]=bB(t),d={start:"0%",center:"50%",end:"100%"}[u],f=(((w=i.arrow)==null?void 0:w.x)??0)+a/2,p=(((_=i.arrow)==null?void 0:_.y)??0)+l/2;let y="",g="";return c==="bottom"?(y=o?d:`${f}px`,g=`${-l}px`):c==="top"?(y=o?d:`${f}px`,g=`${s.floating.height+l}px`):c==="right"?(y=`${-l}px`,g=o?d:`${p}px`):c==="left"&&(y=`${s.floating.width+l}px`,g=o?d:`${p}px`),{data:{x:y,y:g}}}});function bB(n){const[e,t="center"]=n.split("-");return[e,t]}var xB=pB,_B=gB,SB=yB,EB=wB,tQ="Portal",CS=E.forwardRef((n,e)=>{var a;const{container:t,...s}=n,[i,r]=E.useState(!1);on(()=>r(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?P6.createPortal(b.jsx(me.div,{...s,ref:e}),o):null});CS.displayName=tQ;function nQ(n,e){return E.useReducer((t,s)=>e[t][s]??t,n)}var Df=n=>{const{present:e,children:t}=n,s=sQ(e),i=typeof t=="function"?t({present:s.isPresent}):E.Children.only(t),r=Re(s.ref,iQ(i));return typeof t=="function"||s.isPresent?E.cloneElement(i,{ref:r}):null};Df.displayName="Presence";function sQ(n){const[e,t]=E.useState(),s=E.useRef(null),i=E.useRef(n),r=E.useRef("none"),o=n?"mounted":"unmounted",[a,l]=nQ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const c=ww(s.current);r.current=a==="mounted"?c:"none"},[a]),on(()=>{const c=s.current,u=i.current;if(u!==n){const f=r.current,p=ww(c);n?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),on(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const g=ww(s.current).includes(CSS.escape(p.animationName));if(p.target===e&&g&&(l("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},f=p=>{p.target===e&&(r.current=ww(s.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:E.useCallback(c=>{s.current=c?getComputedStyle(c):null,t(c)},[])}}function ww(n){return(n==null?void 0:n.animationName)||"none"}function iQ(n){var s,i;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var J1="rovingFocusGroup.onEntryFocus",rQ={bubbles:!1,cancelable:!0},Iv="RovingFocusGroup",[JC,CB,oQ]=Tv(Iv),[aQ,AB]=nl(Iv,[oQ]),[lQ,cQ]=aQ(Iv),TB=E.forwardRef((n,e)=>b.jsx(JC.Provider,{scope:n.__scopeRovingFocusGroup,children:b.jsx(JC.Slot,{scope:n.__scopeRovingFocusGroup,children:b.jsx(uQ,{...n,ref:e})})}));TB.displayName=Iv;var uQ=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:i=!1,dir:r,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=n,f=E.useRef(null),p=Re(e,f),y=vS(r),[g,S]=mf({prop:o,defaultProp:a??null,onChange:l,caller:Iv}),[w,_]=E.useState(!1),v=Xn(c),m=CB(t),x=E.useRef(!1),[A,k]=E.useState(0);return E.useEffect(()=>{const P=f.current;if(P)return P.addEventListener(J1,v),()=>P.removeEventListener(J1,v)},[v]),b.jsx(lQ,{scope:t,orientation:s,dir:y,loop:i,currentTabStopId:g,onItemFocus:E.useCallback(P=>S(P),[S]),onItemShiftTab:E.useCallback(()=>_(!0),[]),onFocusableItemAdd:E.useCallback(()=>k(P=>P+1),[]),onFocusableItemRemove:E.useCallback(()=>k(P=>P-1),[]),children:b.jsx(me.div,{tabIndex:w||A===0?-1:0,"data-orientation":s,...d,ref:p,style:{outline:"none",...n.style},onMouseDown:X(n.onMouseDown,()=>{x.current=!0}),onFocus:X(n.onFocus,P=>{const R=!x.current;if(P.target===P.currentTarget&&R&&!w){const M=new CustomEvent(J1,rQ);if(P.currentTarget.dispatchEvent(M),!M.defaultPrevented){const N=m().filter(L=>L.focusable),F=N.find(L=>L.active),H=N.find(L=>L.id===g),$=[F,H,...N].filter(Boolean).map(L=>L.ref.current);PB($,u)}}x.current=!1}),onBlur:X(n.onBlur,()=>_(!1))})})}),kB="RovingFocusGroupItem",IB=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:i=!1,tabStopId:r,children:o,...a}=n,l=gf(),c=r||l,u=cQ(kB,t),d=u.currentTabStopId===c,f=CB(t),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:g}=u;return E.useEffect(()=>{if(s)return p(),()=>y()},[s,p,y]),b.jsx(JC.ItemSlot,{scope:t,id:c,focusable:s,active:i,children:b.jsx(me.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:X(n.onMouseDown,S=>{s?u.onItemFocus(c):S.preventDefault()}),onFocus:X(n.onFocus,()=>u.onItemFocus(c)),onKeyDown:X(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){u.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const w=fQ(S,u.orientation,u.dir);if(w!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let v=f().filter(m=>m.focusable).map(m=>m.ref.current);if(w==="last")v.reverse();else if(w==="prev"||w==="next"){w==="prev"&&v.reverse();const m=v.indexOf(S.currentTarget);v=u.loop?pQ(v,m+1):v.slice(m+1)}setTimeout(()=>PB(v))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:g!=null}):o})})});IB.displayName=kB;var hQ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dQ(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function fQ(n,e,t){const s=dQ(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return hQ[s]}function PB(n,e=!1){const t=document.activeElement;for(const s of n)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function pQ(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var mQ=TB,gQ=IB,yQ=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Pu=new WeakMap,bw=new WeakMap,xw={},Z1=0,RB=function(n){return n&&(n.host||RB(n.parentNode))},vQ=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=RB(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},wQ=function(n,e,t,s){var i=vQ(e,Array.isArray(n)?n:[n]);xw[t]||(xw[t]=new WeakMap);var r=xw[t],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(s),y=p!==null&&p!=="false",g=(Pu.get(f)||0)+1,S=(r.get(f)||0)+1;Pu.set(f,g),r.set(f,S),o.push(f),g===1&&y&&bw.set(f,!0),S===1&&f.setAttribute(t,"true"),y||f.setAttribute(s,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return u(e),a.clear(),Z1++,function(){o.forEach(function(d){var f=Pu.get(d)-1,p=r.get(d)-1;Pu.set(d,f),r.set(d,p),f||(bw.has(d)||d.removeAttribute(s),bw.delete(d)),p||d.removeAttribute(t)}),Z1--,Z1||(Pu=new WeakMap,Pu=new WeakMap,bw=new WeakMap,xw={})}},MB=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),i=e||yQ(n);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),wQ(s,i,t,"aria-hidden")):function(){return null}},Xi=function(){return Xi=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Xi.apply(this,arguments)};function NB(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t}function bQ(n,e,t){if(t||arguments.length===2)for(var s=0,i=e.length,r;s<i;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return n.concat(r||Array.prototype.slice.call(e))}var Zw="right-scroll-bar-position",e0="width-before-scroll-bar",xQ="with-scroll-bars-hidden",_Q="--removed-body-scroll-bar-size";function eE(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function SQ(n,e){var t=E.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var i=t.value;i!==s&&(t.value=s,t.callback(s,i))}}}})[0];return t.callback=e,t.facade}var EQ=typeof window<"u"?E.useLayoutEffect:E.useEffect,KN=new WeakMap;function CQ(n,e){var t=SQ(e||null,function(s){return n.forEach(function(i){return eE(i,s)})});return EQ(function(){var s=KN.get(t);if(s){var i=new Set(s),r=new Set(n),o=t.current;i.forEach(function(a){r.has(a)||eE(a,null)}),r.forEach(function(a){i.has(a)||eE(a,o)})}KN.set(t,n)},[n]),t}function AQ(n){return n}function TQ(n,e){e===void 0&&(e=AQ);var t=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(r){var o=e(r,s);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(r){for(s=!0;t.length;){var o=t;t=[],o.forEach(r)}t={push:function(a){return r(a)},filter:function(){return t}}},assignMedium:function(r){s=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(r),o=t}var l=function(){var u=o;o=[],u.forEach(r)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return i}function kQ(n){n===void 0&&(n={});var e=TQ(null);return e.options=Xi({async:!0,ssr:!1},n),e}var DB=function(n){var e=n.sideCar,t=NB(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return E.createElement(s,Xi({},t))};DB.isSideCarExport=!0;function IQ(n,e){return n.useMedium(e),DB}var LB=kQ(),tE=function(){},AS=E.forwardRef(function(n,e){var t=E.useRef(null),s=E.useState({onScrollCapture:tE,onWheelCapture:tE,onTouchMoveCapture:tE}),i=s[0],r=s[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,d=n.shards,f=n.sideCar,p=n.noRelative,y=n.noIsolation,g=n.inert,S=n.allowPinchZoom,w=n.as,_=w===void 0?"div":w,v=n.gapMode,m=NB(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=f,A=CQ([t,e]),k=Xi(Xi({},m),i);return E.createElement(E.Fragment,null,u&&E.createElement(x,{sideCar:LB,removeScrollBar:c,shards:d,noRelative:p,noIsolation:y,inert:g,setCallbacks:r,allowPinchZoom:!!S,lockRef:t,gapMode:v}),o?E.cloneElement(E.Children.only(a),Xi(Xi({},k),{ref:A})):E.createElement(_,Xi({},k,{className:l,ref:A}),a))});AS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};AS.classNames={fullWidth:e0,zeroRight:Zw};var qN,PQ=function(){if(qN)return qN;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RQ(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=PQ();return e&&n.setAttribute("nonce",e),n}function MQ(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function NQ(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var DQ=function(){var n=0,e=null;return{add:function(t){n==0&&(e=RQ())&&(MQ(e,t),NQ(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},LQ=function(){var n=DQ();return function(e,t){E.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},OB=function(){var n=LQ(),e=function(t){var s=t.styles,i=t.dynamic;return n(s,i),null};return e},OQ={left:0,top:0,right:0,gap:0},nE=function(n){return parseInt(n||"",10)||0},FQ=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[nE(t),nE(s),nE(i)]},jQ=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return OQ;var e=FQ(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},BQ=OB(),mh="data-scroll-locked",HQ=function(n,e,t,s){var i=n.left,r=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(xQ,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(a,"px ").concat(s,`;
  }
  body[`).concat(mh,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zw,` {
    right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(e0,` {
    margin-right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(Zw," .").concat(Zw,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(e0," .").concat(e0,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(mh,`] {
    `).concat(_Q,": ").concat(a,`px;
  }
`)},XN=function(){var n=parseInt(document.body.getAttribute(mh)||"0",10);return isFinite(n)?n:0},VQ=function(){E.useEffect(function(){return document.body.setAttribute(mh,(XN()+1).toString()),function(){var n=XN()-1;n<=0?document.body.removeAttribute(mh):document.body.setAttribute(mh,n.toString())}},[])},UQ=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,i=s===void 0?"margin":s;VQ();var r=E.useMemo(function(){return jQ(i)},[i]);return E.createElement(BQ,{styles:HQ(r,!e,i,t?"":"!important")})},ZC=!1;if(typeof window<"u")try{var _w=Object.defineProperty({},"passive",{get:function(){return ZC=!0,!0}});window.addEventListener("test",_w,_w),window.removeEventListener("test",_w,_w)}catch{ZC=!1}var Ru=ZC?{passive:!1}:!1,$Q=function(n){return n.tagName==="TEXTAREA"},FB=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!$Q(n)&&t[e]==="visible")},zQ=function(n){return FB(n,"overflowY")},WQ=function(n){return FB(n,"overflowX")},QN=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=jB(n,s);if(i){var r=BB(n,s),o=r[1],a=r[2];if(o>a)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},GQ=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},YQ=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},jB=function(n,e){return n==="v"?zQ(e):WQ(e)},BB=function(n,e){return n==="v"?GQ(e):YQ(e)},KQ=function(n,e){return n==="h"&&e==="rtl"?-1:1},qQ=function(n,e,t,s,i){var r=KQ(n,window.getComputedStyle(e).direction),o=r*s,a=t.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var p=BB(n,a),y=p[0],g=p[1],S=p[2],w=g-S-r*y;(y||w)&&jB(n,a)&&(d+=w,f+=y);var _=a.parentNode;a=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&Math.abs(d)<1||!i&&o>d)||!u&&(i&&Math.abs(f)<1||!i&&-o>f))&&(c=!0),c},Sw=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},JN=function(n){return[n.deltaX,n.deltaY]},ZN=function(n){return n&&"current"in n?n.current:n},XQ=function(n,e){return n[0]===e[0]&&n[1]===e[1]},QQ=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},JQ=0,Mu=[];function ZQ(n){var e=E.useRef([]),t=E.useRef([0,0]),s=E.useRef(),i=E.useState(JQ++)[0],r=E.useState(OB)[0],o=E.useRef(n);E.useEffect(function(){o.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var g=bQ([n.lockRef.current],(n.shards||[]).map(ZN),!0).filter(Boolean);return g.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=E.useCallback(function(g,S){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var w=Sw(g),_=t.current,v="deltaX"in g?g.deltaX:_[0]-w[0],m="deltaY"in g?g.deltaY:_[1]-w[1],x,A=g.target,k=Math.abs(v)>Math.abs(m)?"h":"v";if("touches"in g&&k==="h"&&A.type==="range")return!1;var P=QN(k,A);if(!P)return!0;if(P?x=k:(x=k==="v"?"h":"v",P=QN(k,A)),!P)return!1;if(!s.current&&"changedTouches"in g&&(v||m)&&(s.current=x),!x)return!0;var R=s.current||x;return qQ(R,S,g,R==="h"?v:m,!0)},[]),l=E.useCallback(function(g){var S=g;if(!(!Mu.length||Mu[Mu.length-1]!==r)){var w="deltaY"in S?JN(S):Sw(S),_=e.current.filter(function(x){return x.name===S.type&&(x.target===S.target||S.target===x.shadowParent)&&XQ(x.delta,w)})[0];if(_&&_.should){S.cancelable&&S.preventDefault();return}if(!_){var v=(o.current.shards||[]).map(ZN).filter(Boolean).filter(function(x){return x.contains(S.target)}),m=v.length>0?a(S,v[0]):!o.current.noIsolation;m&&S.cancelable&&S.preventDefault()}}},[]),c=E.useCallback(function(g,S,w,_){var v={name:g,delta:S,target:w,should:_,shadowParent:eJ(w)};e.current.push(v),setTimeout(function(){e.current=e.current.filter(function(m){return m!==v})},1)},[]),u=E.useCallback(function(g){t.current=Sw(g),s.current=void 0},[]),d=E.useCallback(function(g){c(g.type,JN(g),g.target,a(g,n.lockRef.current))},[]),f=E.useCallback(function(g){c(g.type,Sw(g),g.target,a(g,n.lockRef.current))},[]);E.useEffect(function(){return Mu.push(r),n.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ru),document.addEventListener("touchmove",l,Ru),document.addEventListener("touchstart",u,Ru),function(){Mu=Mu.filter(function(g){return g!==r}),document.removeEventListener("wheel",l,Ru),document.removeEventListener("touchmove",l,Ru),document.removeEventListener("touchstart",u,Ru)}},[]);var p=n.removeScrollBar,y=n.inert;return E.createElement(E.Fragment,null,y?E.createElement(r,{styles:QQ(i)}):null,p?E.createElement(UQ,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function eJ(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const tJ=IQ(LB,ZQ);var HB=E.forwardRef(function(n,e){return E.createElement(AS,Xi({},n,{ref:e,sideCar:tJ}))});HB.classNames=AS.classNames;const VB=HB;var eA=["Enter"," "],nJ=["ArrowDown","PageUp","Home"],UB=["ArrowUp","PageDown","End"],sJ=[...nJ,...UB],iJ={ltr:[...eA,"ArrowRight"],rtl:[...eA,"ArrowLeft"]},rJ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Pv="Menu",[Mm,oJ,aJ]=Tv(Pv),[Su,$B]=nl(Pv,[aJ,ES,AB]),TS=ES(),zB=AB(),[lJ,Eu]=Su(Pv),[cJ,Rv]=Su(Pv),WB=n=>{const{__scopeMenu:e,open:t=!1,children:s,dir:i,onOpenChange:r,modal:o=!0}=n,a=TS(e),[l,c]=E.useState(null),u=E.useRef(!1),d=Xn(r),f=vS(i);return E.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),b.jsx(xB,{...a,children:b.jsx(lJ,{scope:e,open:t,onOpenChange:d,content:l,onContentChange:c,children:b.jsx(cJ,{scope:e,onClose:E.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o,children:s})})})};WB.displayName=Pv;var uJ="MenuAnchor",NI=E.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n,i=TS(t);return b.jsx(_B,{...i,...s,ref:e})});NI.displayName=uJ;var DI="MenuPortal",[hJ,GB]=Su(DI,{forceMount:void 0}),YB=n=>{const{__scopeMenu:e,forceMount:t,children:s,container:i}=n,r=Eu(DI,e);return b.jsx(hJ,{scope:e,forceMount:t,children:b.jsx(Df,{present:t||r.open,children:b.jsx(CS,{asChild:!0,container:i,children:s})})})};YB.displayName=DI;var zs="MenuContent",[dJ,LI]=Su(zs),KB=E.forwardRef((n,e)=>{const t=GB(zs,n.__scopeMenu),{forceMount:s=t.forceMount,...i}=n,r=Eu(zs,n.__scopeMenu),o=Rv(zs,n.__scopeMenu);return b.jsx(Mm.Provider,{scope:n.__scopeMenu,children:b.jsx(Df,{present:s||r.open,children:b.jsx(Mm.Slot,{scope:n.__scopeMenu,children:o.modal?b.jsx(fJ,{...i,ref:e}):b.jsx(pJ,{...i,ref:e})})})})}),fJ=E.forwardRef((n,e)=>{const t=Eu(zs,n.__scopeMenu),s=E.useRef(null),i=Re(e,s);return E.useEffect(()=>{const r=s.current;if(r)return MB(r)},[]),b.jsx(OI,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:X(n.onFocusOutside,r=>r.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),pJ=E.forwardRef((n,e)=>{const t=Eu(zs,n.__scopeMenu);return b.jsx(OI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),mJ=pf("MenuContent.ScrollLock"),OI=E.forwardRef((n,e)=>{const{__scopeMenu:t,loop:s=!1,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:y,...g}=n,S=Eu(zs,t),w=Rv(zs,t),_=TS(t),v=zB(t),m=oJ(t),[x,A]=E.useState(null),k=E.useRef(null),P=Re(e,k,S.onContentChange),R=E.useRef(0),M=E.useRef(""),N=E.useRef(0),F=E.useRef(null),H=E.useRef("right"),D=E.useRef(0),$=y?VB:E.Fragment,L=y?{as:mJ,allowPinchZoom:!0}:void 0,B=j=>{var G,fe;const z=M.current+j,W=m().filter(he=>!he.disabled),K=document.activeElement,Z=(G=W.find(he=>he.ref.current===K))==null?void 0:G.textValue,de=W.map(he=>he.textValue),Me=TJ(de,z,Z),ue=(fe=W.find(he=>he.textValue===Me))==null?void 0:fe.ref.current;(function he(ne){M.current=ne,window.clearTimeout(R.current),ne!==""&&(R.current=window.setTimeout(()=>he(""),1e3))})(z),ue&&setTimeout(()=>ue.focus())};E.useEffect(()=>()=>window.clearTimeout(R.current),[]),Qj();const O=E.useCallback(j=>{var W,K;return H.current===((W=F.current)==null?void 0:W.side)&&IJ(j,(K=F.current)==null?void 0:K.area)},[]);return b.jsx(dJ,{scope:t,searchRef:M,onItemEnter:E.useCallback(j=>{O(j)&&j.preventDefault()},[O]),onItemLeave:E.useCallback(j=>{var z;O(j)||((z=k.current)==null||z.focus(),A(null))},[O]),onTriggerLeave:E.useCallback(j=>{O(j)&&j.preventDefault()},[O]),pointerGraceTimerRef:N,onPointerGraceIntentChange:E.useCallback(j=>{F.current=j},[]),children:b.jsx($,{...L,children:b.jsx(EI,{asChild:!0,trapped:i,onMountAutoFocus:X(r,j=>{var z;j.preventDefault(),(z=k.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:b.jsx(wS,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:b.jsx(mQ,{asChild:!0,...v,dir:w.dir,orientation:"vertical",loop:s,currentTabStopId:x,onCurrentTabStopIdChange:A,onEntryFocus:X(l,j=>{w.isUsingKeyboardRef.current||j.preventDefault()}),preventScrollOnEntryFocus:!0,children:b.jsx(SB,{role:"menu","aria-orientation":"vertical","data-state":uH(S.open),"data-radix-menu-content":"",dir:w.dir,..._,...g,ref:P,style:{outline:"none",...g.style},onKeyDown:X(g.onKeyDown,j=>{const W=j.target.closest("[data-radix-menu-content]")===j.currentTarget,K=j.ctrlKey||j.altKey||j.metaKey,Z=j.key.length===1;W&&(j.key==="Tab"&&j.preventDefault(),!K&&Z&&B(j.key));const de=k.current;if(j.target!==de||!sJ.includes(j.key))return;j.preventDefault();const ue=m().filter(G=>!G.disabled).map(G=>G.ref.current);UB.includes(j.key)&&ue.reverse(),CJ(ue)}),onBlur:X(n.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(R.current),M.current="")}),onPointerMove:X(n.onPointerMove,Nm(j=>{const z=j.target,W=D.current!==j.clientX;if(j.currentTarget.contains(z)&&W){const K=j.clientX>D.current?"right":"left";H.current=K,D.current=j.clientX}}))})})})})})})});KB.displayName=zs;var gJ="MenuGroup",FI=E.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return b.jsx(me.div,{role:"group",...s,ref:e})});FI.displayName=gJ;var yJ="MenuLabel",qB=E.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return b.jsx(me.div,{...s,ref:e})});qB.displayName=yJ;var Sb="MenuItem",eD="menu.itemSelect",kS=E.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:s,...i}=n,r=E.useRef(null),o=Rv(Sb,n.__scopeMenu),a=LI(Sb,n.__scopeMenu),l=Re(e,r),c=E.useRef(!1),u=()=>{const d=r.current;if(!t&&d){const f=new CustomEvent(eD,{bubbles:!0,cancelable:!0});d.addEventListener(eD,p=>s==null?void 0:s(p),{once:!0}),SI(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return b.jsx(XB,{...i,ref:l,disabled:t,onClick:X(n.onClick,u),onPointerDown:d=>{var f;(f=n.onPointerDown)==null||f.call(n,d),c.current=!0},onPointerUp:X(n.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:X(n.onKeyDown,d=>{const f=a.searchRef.current!=="";t||f&&d.key===" "||eA.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});kS.displayName=Sb;var XB=E.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:s=!1,textValue:i,...r}=n,o=LI(Sb,t),a=zB(t),l=E.useRef(null),c=Re(e,l),[u,d]=E.useState(!1),[f,p]=E.useState("");return E.useEffect(()=>{const y=l.current;y&&p((y.textContent??"").trim())},[r.children]),b.jsx(Mm.ItemSlot,{scope:t,disabled:s,textValue:i??f,children:b.jsx(gQ,{asChild:!0,...a,focusable:!s,children:b.jsx(me.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...r,ref:c,onPointerMove:X(n.onPointerMove,Nm(y=>{s?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:X(n.onPointerLeave,Nm(y=>o.onItemLeave(y))),onFocus:X(n.onFocus,()=>d(!0)),onBlur:X(n.onBlur,()=>d(!1))})})})}),vJ="MenuCheckboxItem",QB=E.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:s,...i}=n;return b.jsx(nH,{scope:n.__scopeMenu,checked:t,children:b.jsx(kS,{role:"menuitemcheckbox","aria-checked":Eb(t)?"mixed":t,...i,ref:e,"data-state":BI(t),onSelect:X(i.onSelect,()=>s==null?void 0:s(Eb(t)?!0:!t),{checkForDefaultPrevented:!1})})})});QB.displayName=vJ;var JB="MenuRadioGroup",[wJ,bJ]=Su(JB,{value:void 0,onValueChange:()=>{}}),ZB=E.forwardRef((n,e)=>{const{value:t,onValueChange:s,...i}=n,r=Xn(s);return b.jsx(wJ,{scope:n.__scopeMenu,value:t,onValueChange:r,children:b.jsx(FI,{...i,ref:e})})});ZB.displayName=JB;var eH="MenuRadioItem",tH=E.forwardRef((n,e)=>{const{value:t,...s}=n,i=bJ(eH,n.__scopeMenu),r=t===i.value;return b.jsx(nH,{scope:n.__scopeMenu,checked:r,children:b.jsx(kS,{role:"menuitemradio","aria-checked":r,...s,ref:e,"data-state":BI(r),onSelect:X(s.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,t)},{checkForDefaultPrevented:!1})})})});tH.displayName=eH;var jI="MenuItemIndicator",[nH,xJ]=Su(jI,{checked:!1}),sH=E.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:s,...i}=n,r=xJ(jI,t);return b.jsx(Df,{present:s||Eb(r.checked)||r.checked===!0,children:b.jsx(me.span,{...i,ref:e,"data-state":BI(r.checked)})})});sH.displayName=jI;var _J="MenuSeparator",iH=E.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return b.jsx(me.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});iH.displayName=_J;var SJ="MenuArrow",rH=E.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n,i=TS(t);return b.jsx(EB,{...i,...s,ref:e})});rH.displayName=SJ;var EJ="MenuSub",[Jue,oH]=Su(EJ),yp="MenuSubTrigger",aH=E.forwardRef((n,e)=>{const t=Eu(yp,n.__scopeMenu),s=Rv(yp,n.__scopeMenu),i=oH(yp,n.__scopeMenu),r=LI(yp,n.__scopeMenu),o=E.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=r,c={__scopeMenu:n.__scopeMenu},u=E.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return E.useEffect(()=>u,[u]),E.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),b.jsx(NI,{asChild:!0,...c,children:b.jsx(XB,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":uH(t.open),...n,ref:yS(e,i.onTriggerChange),onClick:d=>{var f;(f=n.onClick)==null||f.call(n,d),!(n.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:X(n.onPointerMove,Nm(d=>{r.onItemEnter(d),!d.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(r.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:X(n.onPointerLeave,Nm(d=>{var p,y;u();const f=(p=t.content)==null?void 0:p.getBoundingClientRect();if(f){const g=(y=t.content)==null?void 0:y.dataset.side,S=g==="right",w=S?-5:5,_=f[S?"left":"right"],v=f[S?"right":"left"];r.onPointerGraceIntentChange({area:[{x:d.clientX+w,y:d.clientY},{x:_,y:f.top},{x:v,y:f.top},{x:v,y:f.bottom},{x:_,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(d),d.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:X(n.onKeyDown,d=>{var p;const f=r.searchRef.current!=="";n.disabled||f&&d.key===" "||iJ[s.dir].includes(d.key)&&(t.onOpenChange(!0),(p=t.content)==null||p.focus(),d.preventDefault())})})})});aH.displayName=yp;var lH="MenuSubContent",cH=E.forwardRef((n,e)=>{const t=GB(zs,n.__scopeMenu),{forceMount:s=t.forceMount,...i}=n,r=Eu(zs,n.__scopeMenu),o=Rv(zs,n.__scopeMenu),a=oH(lH,n.__scopeMenu),l=E.useRef(null),c=Re(e,l);return b.jsx(Mm.Provider,{scope:n.__scopeMenu,children:b.jsx(Df,{present:s||r.open,children:b.jsx(Mm.Slot,{scope:n.__scopeMenu,children:b.jsx(OI,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:X(n.onFocusOutside,u=>{u.target!==a.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:X(n.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:X(n.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=rJ[o.dir].includes(u.key);d&&f&&(r.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});cH.displayName=lH;function uH(n){return n?"open":"closed"}function Eb(n){return n==="indeterminate"}function BI(n){return Eb(n)?"indeterminate":n?"checked":"unchecked"}function CJ(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function AJ(n,e){return n.map((t,s)=>n[(e+s)%n.length])}function TJ(n,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,r=t?n.indexOf(t):-1;let o=AJ(n,Math.max(r,0));i.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function kJ(n,e){const{x:t,y:s}=n;let i=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const a=e[r],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>s!=f>s&&t<(d-c)*(s-u)/(f-u)+c&&(i=!i)}return i}function IJ(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return kJ(t,e)}function Nm(n){return e=>e.pointerType==="mouse"?n(e):void 0}var PJ=WB,RJ=NI,MJ=YB,NJ=KB,DJ=FI,LJ=qB,OJ=kS,FJ=QB,jJ=ZB,BJ=tH,HJ=sH,VJ=iH,UJ=rH,$J=aH,zJ=cH,IS="DropdownMenu",[WJ,Zue]=nl(IS,[$B]),Dn=$B(),[GJ,hH]=WJ(IS),dH=n=>{const{__scopeDropdownMenu:e,children:t,dir:s,open:i,defaultOpen:r,onOpenChange:o,modal:a=!0}=n,l=Dn(e),c=E.useRef(null),[u,d]=mf({prop:i,defaultProp:r??!1,onChange:o,caller:IS});return b.jsx(GJ,{scope:e,triggerId:gf(),triggerRef:c,contentId:gf(),open:u,onOpenChange:d,onOpenToggle:E.useCallback(()=>d(f=>!f),[d]),modal:a,children:b.jsx(PJ,{...l,open:u,onOpenChange:d,dir:s,modal:a,children:t})})};dH.displayName=IS;var fH="DropdownMenuTrigger",pH=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:s=!1,...i}=n,r=hH(fH,t),o=Dn(t);return b.jsx(RJ,{asChild:!0,...o,children:b.jsx(me.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...i,ref:yS(e,r.triggerRef),onPointerDown:X(n.onPointerDown,a=>{!s&&a.button===0&&a.ctrlKey===!1&&(r.onOpenToggle(),r.open||a.preventDefault())}),onKeyDown:X(n.onKeyDown,a=>{s||(["Enter"," "].includes(a.key)&&r.onOpenToggle(),a.key==="ArrowDown"&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});pH.displayName=fH;var YJ="DropdownMenuPortal",mH=n=>{const{__scopeDropdownMenu:e,...t}=n,s=Dn(e);return b.jsx(MJ,{...s,...t})};mH.displayName=YJ;var gH="DropdownMenuContent",yH=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=hH(gH,t),r=Dn(t),o=E.useRef(!1);return b.jsx(NJ,{id:i.contentId,"aria-labelledby":i.triggerId,...r,...s,ref:e,onCloseAutoFocus:X(n.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:X(n.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});yH.displayName=gH;var KJ="DropdownMenuGroup",qJ=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Dn(t);return b.jsx(DJ,{...i,...s,ref:e})});qJ.displayName=KJ;var XJ="DropdownMenuLabel",vH=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Dn(t);return b.jsx(LJ,{...i,...s,ref:e})});vH.displayName=XJ;var QJ="DropdownMenuItem",wH=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Dn(t);return b.jsx(OJ,{...i,...s,ref:e})});wH.displayName=QJ;var JJ="DropdownMenuCheckboxItem",bH=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Dn(t);return b.jsx(FJ,{...i,...s,ref:e})});bH.displayName=JJ;var ZJ="DropdownMenuRadioGroup",eZ=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Dn(t);return b.jsx(jJ,{...i,...s,ref:e})});eZ.displayName=ZJ;var tZ="DropdownMenuRadioItem",xH=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Dn(t);return b.jsx(BJ,{...i,...s,ref:e})});xH.displayName=tZ;var nZ="DropdownMenuItemIndicator",_H=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Dn(t);return b.jsx(HJ,{...i,...s,ref:e})});_H.displayName=nZ;var sZ="DropdownMenuSeparator",SH=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Dn(t);return b.jsx(VJ,{...i,...s,ref:e})});SH.displayName=sZ;var iZ="DropdownMenuArrow",rZ=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Dn(t);return b.jsx(UJ,{...i,...s,ref:e})});rZ.displayName=iZ;var oZ="DropdownMenuSubTrigger",EH=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Dn(t);return b.jsx($J,{...i,...s,ref:e})});EH.displayName=oZ;var aZ="DropdownMenuSubContent",CH=E.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Dn(t);return b.jsx(zJ,{...i,...s,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});CH.displayName=aZ;var lZ=dH,cZ=pH,uZ=mH,AH=yH,TH=vH,kH=wH,IH=bH,PH=xH,RH=_H,MH=SH,NH=EH,DH=CH;const hZ=lZ,dZ=cZ,fZ=te.forwardRef(({className:n,inset:e,children:t,...s},i)=>b.jsxs(NH,{ref:i,className:ke("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...s,children:[t,b.jsx(Bj,{className:"ml-auto h-4 w-4"})]}));fZ.displayName=NH.displayName;const pZ=te.forwardRef(({className:n,...e},t)=>b.jsx(DH,{ref:t,className:ke("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));pZ.displayName=DH.displayName;const LH=te.forwardRef(({className:n,sideOffset:e=4,...t},s)=>b.jsx(uZ,{children:b.jsx(AH,{ref:s,sideOffset:e,className:ke("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));LH.displayName=AH.displayName;const tA=te.forwardRef(({className:n,inset:e,...t},s)=>b.jsx(kH,{ref:s,className:ke("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));tA.displayName=kH.displayName;const mZ=te.forwardRef(({className:n,children:e,checked:t,...s},i)=>b.jsxs(IH,{ref:i,className:ke("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...s,children:[b.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(RH,{children:b.jsx(Fj,{className:"h-4 w-4"})})}),e]}));mZ.displayName=IH.displayName;const gZ=te.forwardRef(({className:n,children:e,...t},s)=>b.jsxs(PH,{ref:s,className:ke("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[b.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(RH,{children:b.jsx(V7,{className:"h-2 w-2 fill-current"})})}),e]}));gZ.displayName=PH.displayName;const yZ=te.forwardRef(({className:n,inset:e,...t},s)=>b.jsx(TH,{ref:s,className:ke("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));yZ.displayName=TH.displayName;const vZ=te.forwardRef(({className:n,...e},t)=>b.jsx(MH,{ref:t,className:ke("-mx-1 my-1 h-px bg-muted",n),...e}));vZ.displayName=MH.displayName;function tD(){const{setTheme:n}=d9();return b.jsxs(hZ,{children:[b.jsx(dZ,{asChild:!0,children:b.jsxs(Un,{variant:"outline",size:"icon",children:[b.jsx(l9,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),b.jsx(e9,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),b.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),b.jsxs(LH,{align:"end",children:[b.jsx(tA,{onClick:()=>n("light"),children:"Light"}),b.jsx(tA,{onClick:()=>n("dark"),children:"Dark"})]})]})}const nA=({direction:n="down",className:e,...t})=>b.jsx("div",{className:ke("w-full h-20 md:h-32 lg:h-40 leading-[0] fill-current",n==="up"?"-mt-1":"-mb-1",e),...t,children:b.jsx("svg",{className:"relative block w-full h-full",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",style:{transform:n==="up"?"rotate(180deg)":""},children:b.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31.74,904.67,72.43,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"})})}),nD=[{name:"Home",path:"/",icon:Vj},{name:"Library",path:"/library",icon:Q7},{name:"About Us",path:"/about",icon:X7},{name:"Salvation",path:"/salvation",icon:z7},{name:"Contact Us",path:"/contact",icon:Uj}],wZ=({children:n})=>{const[e,t]=E.useState(!1),s=el(),i=()=>t(!e);return b.jsxs("div",{className:"min-h-screen flex flex-col bg-background transition-colors duration-500 overflow-x-hidden",children:[b.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 shadow-lg bg-background",children:[b.jsx("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex items-center justify-between h-20",children:[b.jsxs(Us,{to:"/",className:"flex items-center space-x-2",children:[b.jsx(Ae.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20,delay:.2},children:b.jsx(Qw,{className:"h-10 w-10 text-primary"})}),b.jsx("span",{className:"text-2xl font-bold gradient-text",style:{fontFamily:"'Lexend', sans-serif"},children:"Kingdom Pages"})]}),b.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[nD.map((r,o)=>b.jsx(Ae.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1*o+.5},children:b.jsx(Us,{to:r.path,onClick:()=>e&&i(),className:({isActive:a})=>`relative px-3 py-2 rounded-md text-sm font-medium transition-all duration-300 ease-in-out hover:text-primary transform hover:scale-105 ${a?"text-primary font-semibold":"text-muted-foreground"}`,children:({isActive:a})=>b.jsxs(b.Fragment,{children:[r.name,a&&b.jsx(Ae.div,{layoutId:"active-nav-underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",initial:!1,transition:{type:"spring",stiffness:350,damping:30}})]})})},r.name)),b.jsx(Ae.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1},className:"ml-4",children:b.jsx(tD,{})})]}),b.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[b.jsx(tD,{}),b.jsx(Un,{variant:"ghost",size:"icon",onClick:i,"aria-label":"Open menu",children:e?b.jsx(Gj,{className:"h-6 w-6"}):b.jsx(J7,{className:"h-6 w-6"})})]})]})}),b.jsx(Im,{children:e&&b.jsx(Ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"md:hidden bg-card shadow-xl origin-top",children:b.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 max-h-[calc(100vh-5rem)] overflow-y-auto",children:nD.map(r=>b.jsx(Us,{to:r.path,onClick:i,className:({isActive:o})=>`block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 ${o?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted/50"}`,children:b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(r.icon,{className:"h-5 w-5"}),b.jsx("span",{children:r.name})]})},r.name))})})})]}),b.jsx("main",{className:"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-12 relative",children:b.jsx(Im,{mode:"wait",children:b.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:n},s.pathname)})}),b.jsxs("footer",{className:"relative mt-0 pt-1 pb-1 text-center text-muted-foreground",children:[b.jsx(nA,{direction:"up",className:"text-background"}),b.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},className:"relative",children:[b.jsx("div",{className:"flex justify-center items-center space-x-2 mb-4",children:b.jsxs("span",{className:"text-sm",children:["Kingdom Pages © ",new Date().getFullYear()]})}),b.jsx("p",{className:"text-xs",children:"Inspiring faith through digital stories."}),b.jsx("div",{className:"mt-4 space-x-4",children:b.jsx(Us,{to:"/terms-of-service",className:"hover:text-primary transition-colors",children:"Terms of Service"})})]})]})]})},bZ=()=>{const{pathname:n}=el();return E.useEffect(()=>{window.scrollTo(0,0)},[n]),null},xZ=`**Vee**\r
\r
“…so everyone, listen up,” my manager announces. “This is unexpected and the time frame is short, but we all have to make our contributions. Assistant Managers and below, \\$200; Managers upward, \\$700.”\r
\r
“See ehn…” my colleague whispers to me.\r
\r
I can hear him speaking, but honestly, I’m not really listening. This announcement is quite unexpected, and knowing the amount in my bank account, it’s looking pretty impossible at the moment.\r
\r
“…Vee, are you even listening to me?” he whispers.\r
\r
Moments later, after the meeting.\r
\r
My mobile phone rings, and I immediately pick it up without looking at the caller ID.\r
\r
“Hello.”\r
\r
“Good afternoon, Ma. I trust you are having a great day. I’m calling to remind you of the commitment you made to The Messenger Angel Book. We need to produce several copies to send to the different communities. We are therefore counting on you to do something before the week runs out. God bless you, Ma.”\r
\r
“Thank you for the reminder,” I reply, trying to insert some cheer into my voice.\r
\r
**3 Hours Later**\r
\r
I’m driving into my estate, super glad to finally be heading home after a long day. I can’t wait to put my feet up and watch something nice. Just take a break from everything.\r
\r
Just as I pull up to the gate, a super happy greeting draws me out of my reverie. It’s Charles, our trusty security man. He’s always cheerful and super helpful. I can’t even count the number of times he has gone out of his way to make my life easier. Most times, he does it without me asking.\r
\r
“Aunty, welcome Ma. How was your day, Ma?” he greets, speaking in Nigerian pidgin English.\r
\r
“It was fine, Charles, thank you.”\r
\r
I’m honestly not in the mood for small talk, but I don’t want to be rude to Charles.\r
\r
Oblivious to my state of mind, Charles forges ahead.\r
\r
“Aunty, e be like say you get early appointment this morning, because as I say make I bring soap come wash your car, you don already dey commot. But tomorrow I go wake up early, come wash your car sharp sharp.” He smiles.\r
\r
“Oh, that’s kind of you. Yes, I was in a hurry; someone was waiting for me. But thank you all the same.”\r
\r
I’m really trying to keep a kind look on my face, although all I want is to be in the sanctuary of my house.\r
\r
I walk along the side of my car to the back seat, grabbing my bags in hopes of a quick escape.\r
\r
I head towards my apartment, only to realise that Charles is already lingering at my entrance with a hopeful expression.\r
\r
“Okay, Ma…ermmm Auntie…e get something wey I wan ask you.”\r
\r
“What is it, Charles? I hope all is well.”\r
\r
“Auntie, all is well o…na my pikin call me say she need money to buy JAMB form, and the registration dey end tomorrow. You know say I spend all the money wey I get when I go bury my brother last month. Abeg, if you fit just help me.”\r
\r
He kneels down, really pleading with me. How can I refuse to help him? I mean, it’s Charles. I know he’s not trying to take advantage of me. He’s not that type of person.\r
\r
“You know say na only you I fit beg for inside this estate,” he pleads sincerely.\r
\r
“It’s okay, Charles. Please get up, you don’t have to do all this. Just send me the account details, okay?”\r
\r
Immediately, he leaps up. “Haaaaa, Aunty, God go bless you, God go prosper you…” He proceeds to utter several blessings.\r
\r
“Amen, Charles. Thank God. Have a good evening.”\r
\r
With those parting words, I quickly unlock the door and shut myself in.\r
\r
Finally, some peace and quiet. I drop all my bags on the entry table and take off my heels. I feel like this respite couldn’t have come even one second later.\r
\r
Rubbing my slightly aching soles, I turn on the TV to one of the only stations worth watching, in my opinion, LoveWorld XP.\r
\r
Next stop on the road to getting comfy: I have to get out of these work clothes. Sweatpants and a comfy T-shirt sound more like it. So, I head to my room to change into that.\r
\r
A loud grumble from my tummy reminds me that I haven’t had anything to eat since lunchtime, 8 hours ago.\r
\r
At this point, I can’t help but celebrate the genius of whoever came up with the idea of instant noodles. Imagine having to cook in a moment like this, when hunger is already making your stomach grumble every 15 seconds. To the kitchen I go, quickly preparing two packets of my favourite noodles.\r
\r
Minutes later, I am comfortably situated on my couch, tucked under my favourite duvet. I dig into my perfect bowl of noodles while watching LoveWorld Expressions to catch the latest music video. A notification pops up on my phone.\r
\r
“Big Sis ♥️♥️♥️,” the text from my little sister reads. I was wondering when this young lady would call me; I haven’t heard from her in days.\r
\r
I fire off a quick response so I can get back to my food.\r
\r
“Baby girl, how are you? Called you yesterday but your line was off.”\r
\r
In true Gen Z fashion, my sister’s response is swift.\r
\r
“Heeeeey! Only God knows how many other people have tried to reach me and couldn’t. Sis, it’s my phone o. It started misbehaving some days ago. It just goes off when the battery is like 60%. I took it to the phone repair shop and the guys there said the battery is bad.”\r
\r
“Are you for real? Sorry o, but that your phone has tried shaa, lol.”\r
\r
“I really don’t know what to do right now because Dad just bought me a new laptop 2 weeks ago, and I can’t start telling him that my phone is bad.”\r
\r
“You’re right. He will tell you to go and read your books 🤣.”\r
\r
“Sis, that’s why I have you now, the best big sis in the whole world. Pretty please, Sis…I need a new phone.”\r
\r
I honestly cannot believe this day. I drop the forkful of noodles I was about to eat. My appetite is completely gone at this point.\r
\r
Minutes pass, and I’m fully aware that I haven’t responded. But right now, it all feels too much. First it was the \\$700 demand at work, then the reminder about my Messenger Angel Book pledge, then the unexpected plea for help from Charles, now my sister. What’s next?\r
\r
Another text comes in with a loud ping. I know my sister is probably wondering why my response is taking so long. She has no idea what this adulting business entails.\r
\r
Reluctantly, I open the text. Whatever she has to say will probably leave me with no choice but to fulfill my role as the deputy parent.\r
\r
“Okay, Sis, please just give me money to repair the phone…I’m really desperate. You know I’m in my final year, and I really need a phone to communicate with all these lecturers. You’re my only hope right now 🙏🏾.”\r
\r
A deep sigh involuntarily escapes me. How can I not help? My sister needs me. I will have to find a way to make it work.\r
\r
“No problem, girl, what are elder sisters for? Send me the cost of buying a new phone vs repairing the phone. I will weigh the pros and cons and send you the money for whichever option I decide on.”\r
\r
My sister’s reply is immediate, lest I even think about changing my mind.\r
\r
“I love you with all my heart, Big Sis ❤️😘\r
You are simply the best.”\r
\r
Yeah, yeah. I wonder if she would still say that if I had said I couldn’t help. Anyways, it is well.\r
\r
I look at the TV, seeing the end credits of the show rolling out but not registering anything I’m seeing. My mind is full. I head to the kitchen and trash the leftover cold noodles. So much for a relaxing night with a little entertainment for distraction.\r
\r
Suddenly it hits me—what am I actually going to do? What’s in my account is not so much. I wish there was someone I could call right now to help me with some funds.\r
\r
Almost immediately, a direct response to my worrisome train of thought wells up in my heart: “…that you may always and under all circumstances and whatever the need be self-sufficient (possessing enough to require no aid or support and furnished in abundance for every good work and charitable donation).”\r
\r
Wow, where did this thought come from? Yeah, that’s true though.\r
\r
Again, the same sweet and soft but clear voice whispers to me: “…If I will not open to you the windows of heaven and pour you out a blessing, that there shall not be room enough to receive it.”\r
\r
That’s right! I paid the tenth last week, so this is my lot!\r
\r
Energy surges in immediately.\r
\r
Unknown tongues are uttered.\r
\r
Hagar is going on.\r
\r
More words like the precious ones from before are pouring out.\r
\r
Soon, there is a roaring.\r
\r
Soon, there’s a note of victory. There’s a knowing that I just lambanoed.\r
\r
What a way to end the day! Now I can enjoy my sleep, knowing fully well that I have nothing to worry about. I’m just going to prepare my work clothes for tomorrow so it won’t take up my time in the morning.\r
\r
I run my mind through my closet and decide to wear my beige dress with the fringe bottom. But that means I would have to change the blue bag I was carrying today to a beige one, to avoid being a walking fashion disaster.\r
\r
I head to my bag closet and pull out the beige bag I had in mind. I start transferring things from my blue bag into it.\r
\r
As I am placing my cards in the side pocket of my beige bag, my hand brushes against some paper-like items—a bundle of notes, it seems.\r
\r
Wondering what long-forgotten notes it could be, I pull out the items from the bag. It’s then I realise it’s not a bundle of old notes—it’s money. An actual bundle of money. How did this get here? I don’t recall putting it here. I sit on my bed, absolutely stunned. I am trying to remember possibly keeping such an amount away, but nothing is coming to mind.\r
\r
Could it really be? Who put the money in my bag? Honestly, I need to stop asking unnecessary questions and count the money. It’s exactly the amount I had been wishing I could ask someone for moments ago.\r
\r
“It works!” I dance and jump all around my room. When I finally calm down, I place the money in my wallet and finish the rest of my preparations for work.\r
\r
I make sure my dress is ironed and hung, my shoes are polished, and my lunch for tomorrow is prepped. Now, it’s time to call it a day.\r
\r
I reach for my phone to set an alarm, and a notification pops up from my bank.\r
\r
These banks, don’t they sleep? Which charge have they collected again?\r
\r
Wait a minute…is this real?\r
\r
I sit up…\r
\r
It’s a credit alert with several zeros!\r
\r
Another message pops up just as I’m coming to terms with the credit alert I’ve just seen!\r
\r
“Hey Vee, how are you? I’ve been meaning to do this, and tonight I just felt I shouldn’t let it pass today. Just a little something to say thank you for housing me for a month last year when I had house issues. You are special.”\r
\r
Okay!!!!! This is what I’m talking about! Wowwwwww, I’m loving this life mehn!!!!\r
\r
The life of a Sealed One!`,_Z=`I’m working on my desktop when suddenly I feel a slight pain in my eyes.\r
I think I need to call it a day. I've been working on this document for hours, and this slight pain is a clear indication that I need to pack up and go home. Moreover, it’s past 6 p.m.\r
\r
*1 Week Later*\r
\r
I’m driving to the gym, humming along to one of the latest Afrobeat gospel songs. I downloaded it last night, and I’ve had it on repeat since I woke up.\r
The guys are going to give me a hard time for being late, but I had some work to finish before I could close for the day.\r
\r
A flash of light suddenly appears and then disappears in front of my eyes. It’s so weird I don’t even know how to explain it.\r
It’s strange because I don’t feel any pain in my eyes, and it’s not like I was working on my computer.\r
\r
Just then, the gym building comes into view. I park the car and head in, ready to face the music for my tardiness. My buddies are all in a corner, probably halfway into their workouts.\r
\r
“Hey mate! What took you so long?” Jason asks while doing chest presses.\r
“He needs to do 20 press-ups for being the last one to arrive…” Matthew adds.\r
\r
“Guys, I’m not even up to 5 minutes late…” I try to defend myself.\r
\r
We keep the banter going, and soon enough, I’ve forgotten all about the strange incident in the car.\r
\r
*2 Months Later*\r
\r
My phone rings.\r
“Hello, Sir.”\r
“Paul, could you please come to my office?” my boss asks.\r
“Okay, Sir, I’ll be there in a minute.”\r
\r
I make my way to his office and let myself in after he calls for me to come in.\r
It’s a little darker than normal, and he’s sitting with his chair facing away from his desk toward the back wall, head raised to the ceiling.\r
\r
“Good afternoon, Sir,” I greet, though I can’t hide the slight amusement in my voice. From where I’m standing, it looks like he has cucumbers on his eyes.\r
\r
My boss turns his chair to face me, removing the cucumbers from his eyes.\r
“You can let the laughter out, Paul. I know you’re wondering what I’m up to…”\r
“Uhmmm well… since you mentioned it, Sir…” I manage to say, barely stifling a chuckle.\r
\r
“My optician is working on medicated contact lenses for me because my vision gets blurry sometimes. In the meantime, he advised me to put sliced cucumbers on my eyes regularly, eat carrots, and generally drink lots of water. My eyes were really hurting right now, so I got someone to get me some cucumber slices.”\r
“Oh, I’m really sorry about that, Sir. I didn’t know you had such experiences.”\r
\r
I suddenly feel a little guilty for laughing. I honestly didn’t know he was doing it out of necessity. I figured he just wanted a little rest and relaxation in the middle of the workday. But this sounds a little serious.\r
\r
“There’s no need for sympathy, Paul,” he says matter-of-factly.\r
“You know the work we do involves looking at the screen for hours. Trust me, very soon you will be able to relate to what I’m saying.”\r
\r
“Ooookay, Sir.”\r
\r
“Back to business. The Creative Director of Art Match is coming in at 2 p.m. Please go through the web design for their app and see if it needs any more improvements.”\r
\r
“Okay, Sir. Will do, Sir.”\r
\r
*Independence Day*\r
\r
It’s Independence Day, and the parents are hosting a barbecue for the whole family. It’s been a tradition for 5 years now, and it’s one of those days I really look forward to.\r
\r
“Hey Dad, do you want more roast potatoes to eat with your steak?” I ask, seeing my dad has already finished all the sides on his plate.\r
“Yes, Paul, that would be great.”\r
\r
One by one, the kids also put in their requests: “Uncle Paul, please, I want some too!” “Me three, Uncle Paul!”\r
\r
They’re so adorable. My nieces and nephews love listening to war stories from my dad, their grandpa. They literally flock around him at every family gathering. The unintended consequence is that whatever Dad eats, they want to have a taste too.\r
\r
I head to the buffet table where everything’s been set up and pile two plates with different side dishes, just in case. I return to our little spot, greeting familiar faces along the way.\r
\r
“Thank you, Son.” “Thank you, Uncle.” “Thanks, Uncle.”\r
“You’re welcome. I think I'm going to sit here and relax for a while.”\r
\r
Little Johnny comes to sit on my lap. Warm arms go around my neck, and a kiss follows on my cheek. How sweet.\r
\r
“Mum, come have a seat. I hope you’ve rested well. Dad says you slept quite late supervising the cleaning of the house for us.”\r
“Yes, my love, I’m fine. I hope you’ve had enough to eat.”\r
“Sure, Mum. My tummy is so full, I feel like I have to hit the gym tonight just to burn some calories.”\r
\r
_(Everyone laughs)_\r
\r
“Grandma, please can you read this book to me?” four-year-old Samantha asks. Moving to where Mum is, she stretches her arms to be carried.\r
“Okay, my love, I will. Paul, please hand me my glasses from that table.”\r
“Yes, Mum.” I hand her the glasses.\r
\r
I look at the scene in front of me with a smile: Mum, with her glasses perched on her nose, little Samantha sitting in her lap while they open a colourful kiddies’ book. Honestly, I wish I could draw or paint so I could capture the moment.\r
\r
Anyway, that’s what cameras are for, right? I reach for my phone to take pictures of my family.\r
\r
Suddenly, I feel a sharp pain in my eyes that causes me to drop my phone. I put pressure on my eyes with the heels of my palms, hoping to relieve some of the pain.\r
\r
“Son, is everything okay?” my mum asks, immediately coming to where I’m seated.\r
“Yes, Mum, I’m fine. It’s just a sharp pain I felt in my eyes, but the pain will soon subside.”\r
“How do you know?”\r
“…because it’s not the first time it’s happened. It comes and goes, but it’s been more frequent in the past month. If you have cucumbers in the house, I can just cut some slices and put them on my eyes. I’ll be okay.”\r
\r
“Hey, what’s happening? Is everything alright?” Dad asks.\r
“It’s Paul. He’s having pains in his eyes.”\r
“Son, you may have to look into visiting an optician and getting a pair of glasses.”\r
“I don’t think it’s that serious. It may just be the kind of work I do. You know I’m a programmer; I have to spend hours looking at the screen. Moreover, I just got into my thirties—I’m too young for that.”\r
\r
My parents chuckle.\r
“Son, I started wearing medicated glasses in my twenties, and your dad started wearing his while in high school. Come to think of it, it may be hereditary. Most of your uncles and aunties on both your dad’s and my side of the family wear glasses. It’s probably glaucoma—that’s what we were mostly diagnosed with.”\r
“Mum, just give me the cucumber slices. I’ll be fine, trust me.”\r
“If you say so, son. But think about what we said. The earlier you get the glasses, the better.”\r
\r
*2 Weeks Later*\r
\r
It’s Saturday, and I’m getting ready to leave the house for my 10 o’clock appointment when my phone rings. Caller ID shows it’s Jason.\r
\r
“Hey bro, how are you doing?”\r
“I’m great, really glad the weekend is here. I had such a busy week.”\r
“Same here, man. What are you up to? I was wondering if we could hang out later this evening. I have some business proposals I want you to analyze.”\r
“No problem. I’m getting ready to see an optician now, but after the appointment I’m free for the day.”\r
“An optician? … Is there an issue?”\r
“Yeah, I've been feeling this sharp pain in my eyes and getting these flashes of light. It’s been more frequent lately, and I'm thinking maybe it’s glaucoma. Both my parents were diagnosed with it when they were younger. Worse still, my line of work doesn’t help matters.”\r
\r
Jason is silent for a while.\r
“Hello… Jason, are you still there?”\r
“Bro, have you forgotten who you are?”\r
“I don’t understand.”\r
“You’re sealed, man—and the sealed have a culture!”\r
“Yeah, man, I know I’m sealed…”\r
“You sure aren’t acting like it, ‘cause we don’t utter the kind of things you just did some minutes ago. Do you remember ‘I have a goodly heritage’? And this heritage doesn’t come with any disease. I think you need a word bath ‘cause you’ve been listening to the wrong voices.”\r
\r
Suddenly, it’s like a lightbulb comes on in my mind.\r
“You’re right, bro. Optician appointment cancelled. Word appointment activated. Talk to you later—I need to do what I should have done since.”\r
“Sure thing. I’ll be expecting your call later.”\r
\r
I go back to my room, pull out my iPad, and open the PCDL app. After going through the library for some minutes, I finally find what I’m looking for and click play—word bath mode activated.\r
\r
It’s been thirty minutes. I am sweating even though the cooling unit is on. I am pacing the floor and uttering words, some in English and some in a strange language.\r
\r
“…my body is the member of Christ (inserts unknown tongues)… that same Spirit quickens my eyes… my body is His temple, He sees through my eyes (inserts unknown tongues).”\r
\r
*3 Months Later*\r
\r
I bump into Jason at the shop close to my house.\r
“Paul, my guy, how are you? Fancy seeing you here. By the way, thanks for the other day—I made some changes to the business proposal, and it was approved.”\r
“Oh, that’s great. Congrats!”\r
“Meanwhile, how are things with your eyes?”\r
“J, I’m so happy you called me that day. I dealt with it right after we spoke, and that was the end of the pain and the flashes. In fact, my vision is clearer than it’s ever been.”\r
“That’s the sealed life, bro!”`,SZ=`It’s great to be starting school again. I had missed my friends, especially Eden.\r
\r
“Hey Gianna, I kept a seat for you!” Eden shouts, waving at me.\r
\r
“Thanks, Eden.” I launch myself at her for a bear hug.\r
\r
“I missed you.”\r
\r
“I missed you too, but I miss the holidays already,” she chuckles.\r
\r
“Hey kids, it’s time to get off the bus.”\r
\r
We get off and walk into the school compound, side by side.\r
\r
“Hey G, there’s like a glow on your face. You can’t be that happy to be back in school. Honestly, no one ever looks this excited on the first day of school except the weirdos, and the last time I checked, you weren’t one.”\r
\r
“Wellllllll, let’s just say something special happened to me during the summer. I became a member of a special group of people.”\r
\r
“Oh really, that’s cool. Personally, I’m in enough groups and I have so much going on in my life right now. I can’t add being a part of a new group.”\r
\r
“Trust me, Eden, you would definitely want to join this group when I tell you more about it.”\r
\r
“I’m serious, Gianna. Maybe next year, but not this year. Anyways, let’s hurry to class.”\r
\r
*Weeks later*\r
\r
Our teacher is going around the class handing back our marked GST 601 test scripts. I am a little nervous because I remember the test was quite difficult for me.\r
\r
“Ermm… Eden, what was your score? ‘Cause mine is not good,” I lean over to ask. Her desk has always been the one right in front of mine. It makes it easier for us to talk and pass notes during class, although we don’t do it all the time.\r
\r
“G, mine is not good, and from the murmurings I’m hearing, no one’s score was above average.”\r
\r
“This is not good at all.”\r
\r
“I don’t think you should stress yourself over it though,” Eden tries to comfort me. “This is the 3rd test we’re writing in this course, and the results have not been any different. Remember we’ve always heard stories from seniors about how tough this course is. Right now, we should just aim at maintaining the average and not going below it.”\r
\r
I know Eden is trying to say this is not a big deal, but I don’t understand why this is happening. This is not what I was expecting.\r
\r
“Hey G, are you okay? You’ve been looking disturbed since you got this test result, and now you’re mumbling to yourself.”\r
\r
Oops, I must have been speaking out loud.\r
\r
“It’s just… it’s not supposed to be like this… this was not the picture I had… this was not the impression I was given… I’m supposed to be always on top.”\r
\r
“Gianna, what are you talking about? What picture? What impression?… Who and what are you referring to?”\r
\r
“It’s the special group I told you about.”\r
\r
“Girl, you are making a big deal out of nothing. I don’t know what group you joined or what information they are giving you there. It’s just one course, and you’re acing the others. Moreover, it’s a general thing.”\r
\r
“But I’m different!” I practically shout, feeling exasperated.\r
I know she doesn’t understand, but I know what I was told. I know what I believe.\r
\r
*2 Days later*\r
\r
It’s the weekend and I’m very eager to attend our special group meeting. We meet physically every weekend, and I always enjoy it. I gain so much knowledge about my new identity from every meeting.\r
\r
Today, there are some things on my chest that I need to express—things that have been bothering me since I got that test result earlier in the week.\r
\r
*Hours later*\r
\r
“…and this is the end of our discussion. Before we go, is there anybody that has a question?… Yes, Gianna, I can see your hand. Please share your question with us.”\r
\r
“Thank you. During the summer, not too long after I joined the group, I remember when one of you said that as members of this group, we will always remain tops in everything we do, including our academics. But there’s a course in school I’m having issues with, and even though everyone in school has resigned themselves to the fact that they won’t go above average, I don’t want that for myself. So, what am I not doing right?”\r
\r
“The Sealed Ones have a manual, Gianna. Are you reading the manual? The manual is the best guide to show you who we are, how we operate, and how to live this life. You have to diligently study the manual for your questions to be answered. And mind you, it’s not a one-time thing—you have to study it daily to rightly live this life…”\r
\r
“Ohhhh, I must confess, I was given the manual as soon as I became a member of the group, but I haven’t really been reading it ‘cause I thought attending these weekend meetings and listening to you all talk was enough. But now I’m going back to study it.”\r
\r
*Days later*\r
\r
Ever since I got back from the meeting last week, I’ve been studying the manual every day. There’s so much to see.\r
\r
I’m studying the manual once again, and I see some striking sentences there:\r
\r
“…but ye have an unction from the Holy One, and ye know all things.”\r
\r
“…hath not given us the spirit of fear; but of power, and of love, and of a sound mind.”\r
\r
I brood on these words for minutes and, after a while, I personalize them and repeat the words to myself, stopping only to utter strange tongues, until my whole mind is consumed with the words and new pictures are formed in me.\r
\r
*1 Week later*\r
\r
School is on, and our GST 601 teacher just walked into class. A collective groan resounds from the class.\r
\r
Meanwhile, I start muttering to myself softly those precious words I had seen in the manual.\r
\r
Minutes into the class, Eden nudges me softly. “Hey G, you seem to be following what is being taught…”\r
\r
“Yeah, I actually am.”\r
\r
“Really… how did that happen? Did you have extra lessons with the teacher?”\r
\r
“No, you see…”\r
\r
There’s an interruption from the teacher, and our conversation is cut short before I can explain.\r
\r
“Okay class, we are going to have a quick test.”\r
\r
The end of the Term\r
\r
Awards are being handed to the best students in various courses.\r
\r
“…and the Best Student in GST 601 is Miss Gianna Lee…”\r
\r
“Wowwwwww, G! I know you’re smart, but for years there hasn’t been a best student in GST 601 because it’s so technical and tough to understand. I mean, when the school session started, the whole class, including you, complained about how we have to try so hard just to maintain average. But then, suddenly you started picking up and now you even got a distinction!!! What happened? ‘Cause I know you weren’t having extra classes with the teacher…”\r
\r
“Well, Eden, remember I told you how I joined a special group of people? You see, there are certain things that are not consistent with these people, and one of these things is that they don’t fail at anything nor do they settle for average. When the test scores came out, I knew something was missing, so I had to study the manual of the group to know what to do.”\r
\r
“Ohhh, you definitely need to tell me more about these people. I know I said I wasn’t interested in joining a new group, but now I’ve had a change of heart. What is the name of this group? What do I need to do to join them? Do they have room for more people? I need to know everything.”\r
\r
“Woah woah, relax, I’ll tell you,” I say laughing. “We are called the Sealed Ones. And don’t worry, Sis, it’s so easy to be a member—you don’t need to do anything hectic. Also, there’s room for billions of people to join. Come, let me take you somewhere less noisy and tell you all about us.”`,EZ=`“…Thank you, dear people of Smyrna,” I say, closing off yet another very well-attended election rally.\r
\r
\r
Loud applause and cheers follow as I wave goodbye to the people. I am continually overwhelmed with gratitude by the great show of support for my campaign to be the next Governor of Smyrna.\r
\r
\r
“Congratulations, Sir. The votes of the people belong to you,” my trusted Executive Assistant, Linda, comments as I step into our makeshift office.\r
\r
\r
“Great job, Mr. Andrew—or should I say Governor Andrew…” Bob, who’s been my campaign manager from the beginning, grips my hand in a firm shake. Everyone in the room is in high spirits.\r
\r
\r
Aside from the large crowds that have attended all our rallies in the last couple of months, the stats and all the analysis point to the fact that our work here will not be in vain. I am far ahead of all my opponents in the voter polls. In fact, I recently heard I’ve been nicknamed *The Golden Man* by the media.\r
\r
\r
My eyes scan the room, meeting the eyes of every single member of the team. I know how hard they’ve worked to get us to this point. I hope they can feel how much I appreciate their efforts. I am trusting that in a couple of months, we will get to celebrate the fruits of our labor. We just need to shore up our position and keep pressing our advantage for the next eight weeks. It’s time to seal the deal.\r
\r
\r
\r
**One week later**\r
\r
\r
It’s 6 a.m. My wife and I wake up to all our phones ringing incessantly. The noise cuts through the fog of sleep, and almost immediately, we are both wide awake. Our eyes connect, communicating silently, minds racing to our teenage daughter who is at school in a different city.\r
\r
\r
In a split second, we each reach for the nearest phone. The call is not what I expected—thankfully—but the news I’m getting is not any less catastrophic. I hurriedly grab the TV remote, switching it on, and right there on the screen is breaking news that could potentially cost me all my life’s work.\r
\r
\r
“What in the world are you talking about…?” I hear my wife exclaim in the background.\r
\r
\r
The entire room fades away as I stare at the TV screen, watching the whole debacle unfold. It feels like watching an atomic bomb detonate on all our hopes for the future. I can’t watch any longer or I may not be able to prevent the mental breakdown trying to engulf my mind. I head to the study, where I’ve spent many sleepless nights and early mornings toiling away at making our dreams a reality—dreams that now seem virtually impossible.\r
\r
\r
I lock the door behind me, but I can’t stop seeing the images from the news headline. *“THE GOLDEN MAN EMBROILED IN SCANDAL!”* keeps flashing in my mind. Everything we worked for, all the investment, down the drain because of an incident that took place twenty-five years ago.\r
\r
\r
My mind travels back to that fateful day—the day my friend and I were caught in the act of stealing a prized painting.\r
\r
\r
I was born without a silver spoon, raised in a tardy neighborhood. We barely had a proper meal to eat in a day. With two younger siblings and a sick single mother who tried to get cleaning jobs to make money, I got sucked in by the bad crowd. They taught me to pick pockets to make ends meet.\r
\r
\r
I knew it was wrong, but with my dad gone, I felt responsible as the eldest son. I couldn’t bear to see my siblings hungry or my mum cry every night because she was too weak to get a proper job.\r
\r
\r
This is the exact kind of situation I was hoping to prevent as the new Governor of Smyrna. How ironic that the same incident that made me vow to be an agent of change in my community would cost me the opportunity to do so.\r
\r
\r
I remember the day the new kid, Jimmy, showed up on our block. He bragged about how experienced he was—not just at picking pockets, but stealing larger and more expensive items. It wasn’t long before he goaded us into going for bigger steals. He convinced us that we could cart away one of the principal’s prized paintings worth thousands of dollars. We were frightened and reluctant, but the desire to impress Jimmy was compelling.\r
\r
\r
On the day of the stint, I tried so hard to come up with a thousand and one excuses not to join the squad, but none of my attempts were successful. Eventually, I gave up and joined them.\r
\r
\r
It didn’t take much. With Jimmy’s superior skills, we successfully broke into the principal’s house and picked up the painting. On our way out, something else caught Jimmy’s attention. As he went in for a closer look, an alarm was triggered. We scurried out of the house trying to escape, but unfortunately one of my friends sprained his leg while jumping from the window. I ran back to help him while the others fled, and that’s how we got caught by the principal’s housekeeper, who called the police.\r
\r
\r
Interestingly, it was discovered that “Jimmy”—whose name was not even Jimmy—was a notorious thief in the city he previously resided in and was actually on the run from the cops. Thankfully, I was young enough not to get sent to prison. The judge was compassionate, and I got away with community service and mandatory counseling.\r
\r
\r
I thought I had paid dearly for that act through the punishment that was given. In addition, I had a permanent mark on my record that stopped me from getting my top picks for university. Yet here I am, years later, paying the ultimate price for my sins.\r
\r
\r
\r
**Hours later**\r
\r
\r
Loud banging on the door brings me out of the loop my brain has been stuck in. I can’t tell how many hours it’s been, only that the sun is no longer high in the sky, and it was just rising when I set foot in here and locked the door behind me. I can only imagine what Gracie has had to deal with all day. I have been recounting every single detail, rehashing every decision and circumstance that led to this moment. I don’t really know what to say or how to face everyone.\r
\r
\r
“Honey, are you alright? It’s been hours,” Gracie calls at the door. “I’ve tried to give you space, but if you don’t say anything, I’m going to have to call someone to break the door down. I need to know if you are okay.” I can hear the deep concern in her voice.\r
\r
\r
I have to get it together. I need to face Gracie, and I need to speak to the team.\r
\r
\r
“I’m coming, honey,” I respond as I go to unlock the door. The moment the door opens, Gracie wraps her arms around me, and the emotions I’ve been holding back come rushing out.\r
\r
\r
\r
**Two weeks later**\r
\r
\r
It’s getting closer to the elections, and the media is in a frenzy. With all the negative press around the scandal, the other aspirants have suddenly come up in the polls. The people of Smyrna are divided into so many camps. It’s almost hard to imagine that a few weeks ago, I was *The Golden Man*.\r
\r
\r
I’m in a meeting with my campaign team, and it’s been going on for hours—just like the one we had yesterday, the day before, and every day since the scandal erupted. I honestly don’t know what other strategies we can implement.\r
\r
\r
We tried a public apology, to show the people how remorseful I am for my actions all those years ago. We tried a press conference where I answered all the media questions to help people understand the difficulty of my circumstances back then. I’ve even resorted to carrying out humanitarian activities, intentionally reported to the media. Nothing has made a difference. I’m not even among the top three aspirants. Every time an update comes in, my heart races hoping for some good news, but it’s been back-to-back bad news.\r
\r
\r
I made up my mind this morning that if we couldn’t come up with a viable solution today, then I would have to consider calling it quits. We’ve been at it for hours, and all evidence points to the same conclusion: there is absolutely no way my campaign will be able to recover from the scandal. I guess it’s time to make one of the toughest announcements I’ve ever had to make.\r
\r
\r
“Ladies and gentlemen, can I have everyone’s attention…” I call out, drawing the room silent. I take a bracing breath, gathering my strength as the atmosphere becomes completely solemn.\r
\r
\r
“First off, I want to say, you are the most amazing team. You have put your all into this campaign, and I am eternally grateful for every single one of you.\r
\r
\r
“Once again, I am so sorry that you had to go through the fiasco of these past two weeks. It was my actions that brought scandal to this campaign, and for that I am deeply sorry. I can’t tell you in words how much I wish I could go back in time and reverse what happened. Regardless, no amount of wishing can make that happen, and that leads me to my final announcement.\r
\r
\r
“You all stood by me in the last two weeks. We tried every strategy in the book, and I am so grateful. But at some point, I have to evaluate if all the sacrifice is worth it. I strongly believe that the best course of action now would be to drop out of the race and cut our losses. I will give my final decision tomorrow. Thank you all.”\r
\r
\r
Without lingering to see their responses, I pick up my briefcase and head out to the parking lot. I can’t bear to see the disappointment on their faces.\r
\r
\r
\r
**Later that day**\r
\r
\r
“Honey, you need to eat your food. You’ve barely eaten well in weeks.” Gracie looks at me with the concern I’ve seen on her face more times than I can count in the past two weeks.\r
\r
\r
She hasn’t said much, but I know this whole thing must be taking a toll on her. We’ve worked towards this vision meticulously since we got engaged all those years ago. I’ve been postponing the conversation about my decision to drop out of the race, but now I have to tell her. I reach out to hold her two hands in mine.\r
\r
\r
“Babe, I need to tell you something… Thank you so much for standing by me all these years. I may not say it enough, but you have been the most amazing wife—helping me and supporting this vision all these years. I know how much you’ve put in, and it means so much to me. Even these past two weeks, you’ve been such an encouragement to me, so thank you from the bottom of my heart.”\r
\r
\r
At this point, I can barely restrain my emotions, but I have to soldier on. “I think that, with everything that’s happened, the right thing for me to do is to step down.”\r
\r
\r
The shock on her face is undeniable.\r
\r
\r
“Okay, honey, hear me out…” I try to reassure her.\r
\r
\r
I can see she’s got that determined glint in her eyes—the one that means she is not going to go down without a fight. So I nod for her to voice her thoughts.\r
\r
\r
“I felt you needed your space,” she says, “…and I’ve let you be for a while. But I think it’s high time I speak frankly, because there’s something you’ve not taken into consideration.”\r
\r
\r
“Okay… what’s that?” I reply, feeling a little baffled that she thinks I haven’t explored every possible option. I would never give up on our dream without considering every avenue out of this mess.\r
\r
\r
“You are among the Sealed Ones, Andrew.”\r
\r
\r
“Yeah… I know I’m a Sealed One, but what’s that got to do with this?” I’m honestly perplexed.\r
\r
\r
“You committed this crime before you became a Sealed One. And our manual says that when you become a Sealed One, you are a new creature—old things are passed away, and all things have become new. He loved us and washed us from our sins in His own blood.”\r
\r
\r
“Yeah, I know God has forgiven me, but this is about the people.”\r
\r
\r
“You need to talk to the Master and take advantage of His grace,” she continues. “If you read the Manual, you will see several people in our lineage who did terrible things—some worse than what you did, if we want to compare. Like Jacob, David, and even Paul. By God’s grace, they ended up as great men, fulfilling their God-given purpose. So there’s absolutely no situation beyond God’s grace and restoration. Your case will not be different.”\r
\r
\r
Suddenly, a light bulb turns on in my mind, and I realize she’s right. I have been going about this all wrong. I have been allowing the old guilt and shame from the past to condemn me, when in reality, my status as a Sealed One rids me of every mistake of the past.\r
\r
\r
“Thank you so much, babe. I never saw it in this light. I will go right away to study the Manual and then have a talk with the Master.”\r
\r
\r
Hours later, I am on the floor of the study in a kneeling position, head bowed down. I speak in unknown tongues and then utter some words in English as I am inspired: “All things work together for my good… Better is the end of a thing than the beginning thereof…” The more I speak, the greater my conviction that things are turning around and my victory is sure.\r
\r
\r
**The next day**\r
\r
\r
The team is seated in the boardroom, and they all rise to greet me as soon as I walk in. The atmosphere is tense, following yesterday’s announcement.\r
\r
\r
“Good morning, everyone,” I greet with my brightest smile.\r
\r
\r
Some of the faces in the room are obviously surprised by my jovial mood. I can imagine they must be shocked by the complete 180. After my prayer session yesterday, I was flooded with the kind of peace that only the Master gives.\r
\r
\r
Not wanting to waste any more time, I begin the meeting. “Ladies and gentlemen, today is a new day for us. I’m not stepping down, and there’s going to be a turnaround of events.”\r
\r
\r
One of the maintenance staff knocks on the door and enters without waiting for my response.\r
\r
\r
“Sorry to interrupt, Sir, but a call was made that we should watch the TV right now. Apparently, there’s a large group of people rallying on the streets. They are stating that you were underaged when you committed the crime. Moreover, you served the punishment. They said you’ve helped several young people from the city since then. And guess who is leading the group—the principal himself!”\r
\r
\r
Another staff member walks in. “Sir, there’s a young man on another station being interviewed. He says he was a street kid that was into crime, but through your influence he became clean, and now he’s a doctor…”\r
\r
\r
**One month later**\r
\r
\r
“…With great pleasure, would you rise as we welcome the Executive Governor of Smyrna—our *Golden Man*—His Excellency Governor Andrew and his lovely wife to the podium…”\r
\r
`,CZ=`Hannah was perturbed in her spirit. She had been at work when she heard the news about the new
policy that her government had signed. Being a lawyer, she had immediately delved into what the new
policy was about. She spent the remaining hours of her work time carrying out her research. She knew
not to be focused on the surface news that popped up on the search engine as they never revealed their
real intentions there. She had her reliable sources and reached out to some of them.

After several hours of making calls and reading hidden write-ups sent to her by her sources, what she
found was disturbing! She discovered that the policy was designed to keep her country in bondage and
abject poverty. She knew that there was foul play involved; it was either the government had been
threatened and forced to sign the policy or the government had sold the country for power and money.
Either way, she had to do something about it.

When she got home from work, she turned on the television and the news of the policy popped up.
What surprised her was that people were rejoicing about it in the background while the government
were spitting out lies. The people were being deceived and no one was batting an eye. She dropped to
her knees in prayer with tears in her eyes. She prayed that the Lord will deliver her nation from the
hands of evil men who sought to bring it down for their own selfishness and greed.

The next day, she went to church for the weekly evangelism and cell meeting which held every Saturday.
Being a cell leader, she conducted the cell meeting where she also brought up the policy. She reminded
her members of what Pastor had said during the 'Your Loveworld Sessions' about leaders that are
signing oppressive bills and policies into law and that Christians in those nations should pray for their
country. So, Hannah led her members in fervent prayer for the country. After the meeting, they also
strategized to hold daily prayer meetings specially for the nation.

However, Hannah wanted to do more. So, she found an activist group leading the call for non-
oppressive policies. She got in contact with the leader, Mark, and showed him her research. He was
stunned! "I have to confirm this information. Things could get messy if this gets out and it's found to be
false" Mark told her. She agreed "Go ahead. I'm sure you have reliable sources that can confirm it. I'll be
waiting for your response." He got on it immediately and the feedback he got was in line with what
Hannah showed him. Then, he quickly gathered his members and they came up with a petition to
abolish the policy. He sent the petition to Hannah and she passed it across to her contacts.

Few weeks later, the petition started gaining momentum as many got to find out the truth such that
about 500, 000 people had signed the petition. This got the attention of the government and they
looked into the matter. In retaliation, the government banned the activist group from continuous
circulation of the petition. However, Mark and his team persisted. Hannah acted as their legal
representative as well as a force. She spent time praying while also pushing the circulation of the
petition. When the leaders in government saw that they were not going to comply, they fined them for
disinformation.

At this point, Hannah was almost discouraged. The fine was about half a million dollars; money she did
not have and even if she did, she had some debts that needed to be settled. The year was coming to an
end soon and she did not want to carry problems into the new year. Despite her thoughts, she still
encouraged Mark and his team to keep going.

Later that day, she received a post about the New Year's Eve Service holding in church by 8pm. She was
excited about it inspite of all that was going on. She was expectant and knew that she would receive the
word that will propel her forward in the new year. So she took her mind of what was happening around
her and focused on the service when the time came. She participated in every part of the service and
then it got to the climax when Pastor announced the year as the 'Year of Redemption' and explained the
message of the year. Oh boy! She was amazed! It was exacted what she needed. Pastor had said
something that she did not think of doing until then: Suing the government!

The next day, she called Mark and his team together and told them her plans. At first, they were
reluctant to execute it but after she explained to them what Pastor had shared at the New Year's Eve
Service, they were excited. They sprung into action and not long after, Hannah made available all the
required documents and evidence with the help of her law firm. They served the government a pre-
action notice and soon after, they appeared in court.

There were series of court sessions in which Hannah and team came forth with irrefutable evidence and
which the legal representatives of the government tried but failed to disprove. After the conclusion of
the final written addresses put forward by both parties, the court gave its judgment.

The policy was held to be oppressive and thus was not binding on the people! Hannah and her team
were elated. They had done it! They had saved their nation from a policy that would have brought it
down. She did not have to pay the fine after all because she had told the truth! The Spirit of God also
sent people to help her so that in a few weeks, all her debts were paid off. She became debt-free and
her nation became bondage-free!`,AZ=`Jeremy was fed up. His parents were at it again with their constant nagging. "Why did we not see you at the leaders' training yesterday?" "Why is it that we always have to plead with you to take up your responsibility as a Pastor's Kid?". One evening, he lashed out at them in anger "I did not ask to be born into this family! I did not ask to be a Preacher's Kid! Why won't you let me be?" Their
response had been to ground him until they could see a change, but it never lasted.
This had been the continuous story in their home. Jason felt that he was being pushed too hard, just because he was a child of a Pastor. Everyone had great expectations for him and he felt burdened trying to live up to everyone's expectations. He went to church every service day, he had been a cell leader for 2 years and was a member of the choir, so he was involved in ministry. What more did they want? As a result of his thinking, he carried out the work of the ministry sluggishly and without interest, so he did not yield much fruit.
On a particular day, while scrolling through social media and viewing the posts of his friends who, in his opinion, were having the time of their lives, he came across a post advertising a program titled 'Preacher's Kid Summit'. The post explained the theme of the program, talking about discovering your purpose as a preacher's kid and carrying out activities for kingdom impact and expansion. It also made a remarkable statement that he would never forget. It said "As preacher's kids, we have a calling and a place in ministry." His curiosity was triggered and he was intrigued. He planned towards the program and made up his mind to discover his purpose from this program.
On the day of the program, he was one of the first people to connect to it and he participated in every part of the program, from the prayers to the worship session and then the question and answer segment came up. All the questions he had in his heart were asked and he received the answers to all of them. One of the most striking parts of it was when someone asked about his calling as a preacher's kid and if he was also called into ministry just because his parents were in ministry.
This question had been on his mind for years; he had always assumed he and his parents had different paths to walk, he had his own life to live and it wasn't in ministry like his parents. However, listening to the program, it was revealed to him that because his parents were called, he was also called into ministry as well. One of the people on set, answering the question, further stated, "As a preacher's kid, you are first a Christian, so you should already be living your life according to the word of God." He made reference to the scriptures where God called not only Abraham but his lineage as well and the same happened with Moses too. "Thus, when God calls your parents, you're also called too; it's a whole package.God is into lineages and continuity. He would rather use someone who is already built in the word, by virtue of the environment he was brought up in, to continue to further his plan."
When Jeremy heard that, "Wow!!" He thought "I did not think about it like that, this has opened my eyes to a lot of things."
Along the line, another asked a question of how he could measure up to the perceived image of his parents, in the area of dressing, talking and generally, manner of living. "My God, it's like this program was set up just for me. How do these guys know my thoughts?" Jeremy wondered in awe.
The answer came, "You should measure up to God's perceived image of your parents and not man's image. Before you are a Pastor's Kid, you are a Christian" Jeremy sat up straight "Hmmm... there's that line again. I am first a Christian before I am a Pastor's Kid." He thought.
He returned his focus to the program "There is a particular way that a Christian should act and
function. Now, being a Preacher's Kid is a bonus, you have the image of your parents so there is a particular way you should act and carry yourself because of your heritage and lineage but first and foremost, once you function in line with God's word as a Christian, there's no need to be too mindful or conscious about other people's opinion of you because what matters most is God's view and perception of you."
He continued, "People see your parents in a certain way and it is not wrong that they should see you in that same way as well because you grew up under them, so it is natural for them to expect greatness from you. This should not seem like a chore or burden to you."
This statement opened his eyes, "I need to apologize to Mum and Dad for my behavior. I'm going to change from now on" He thought aloud.
The preacher continued, "Our parents bear the image of God and as Pastors, they are like shepherds who care and show love to their flocks and you can't be different from that because you're created in God's image too. Therefore, you should carry yourself the way God wants you to and your dressing as well, should display who you are because it is the extension of your personality. These things should come naturally from your spirit." He concluded.
At the end of the program, he was so enlightened, inspired and full of the Spirit. He spent an hour speaking in tongues and his parents came out to check if that was really their son.
Everything suddenly clicked and came into place for Jeremy. All he had needed was knowledge and he realized immediately, who he was and what he had to do.
Everyone noticed the change in him. He was excited about carrying out activities in church and most of the programs held in church were handled by him. He held various outreaches without being pushed to do so and he always came back with tremendous results. Jeremy no longer carried himself like someone whose shoulders bore the burdens of the whole world. He was a new man and he knew exactly what to do as a Christian and as a Pastor's Kid. He no longer ran away from responsibilities, instead he embraced it.
A year later, he became a Pastor with 5 new growing churches under him.`,TZ=`Matthew had invested so much in his business; time, energy and about two million dollars but instead of
making gains and profits, he experienced losses here and there. Frustrated that nothing seemed to be
working out, he looked for a solution elsewhere. He turned to his friends for help but they all gave one
excuse or the other. His debts were growing and he had no other source of funds. Banks and other
creditors were after him and he had to shut down his business which he had mortgaged.
One fateful day, while Matthew was in a park close to his house, contemplating running off to a
secluded place to hide from his creditors, a young man walked up to him and engaged him in a
conversation.

"Good morning Sir", he greeted Matthew with a kind smile.
"Morning" Matthew grunted. He was not in the mood for whatever the young lad had to say and he
didn't see what was good about the morning or any day in fact.
"My name is Daniel and I just need a few minutes of your time. I would like to share something
important with you."
Matthew was skeptical. 'He must be looking for someone to invest in his business. Well, jokes on him
because I'm broke', he thought.
Daniel continued, taking his silence as a go ahead "I have good news for you".

Contrary to what he thought of Daniel, Matthew perked up at the word 'good news'. He needed some
good news at this point in his life to take away part of the bleak future he was seeing for himself.
Seeing that he had caught Matthew's attention, Daniel began talking about the love of God, who Jesus is,
the significance of Jesus's death, burial and resurrection and who he is in Christ. When he finished, he
prayed for Matthew, gave him a book and invited him to church.
After Daniel left, Matthew sat back in his seat going over what he had heard. He was dumbfounded. He
had never heard such a message in his entire life, which was surprising considering that he thought of
himself as a Christian although he wasn't much of a church goer.

He looked at the book he received and saw it was a daily devotional called 'Rhapsody of Realities'. Right
there, he started going through it one page after another. He couldn't believe what he was reading. It
was as if his eyes had opened for the first time. He needed to know if what he had heard and read was
true so he made up his mind to accept the invitation.

On Sunday, Matthew was in church and he participated in every part of the service leading up to the
message. Then, it was time for the message and he heard words that transformed his life forever. The
message was on 'Redemption' and the Pastor taught that 'The Lord Jesus redeemed man from sin at the
cross, and His blood became the sacrifice for the sins of the whole world. Then He was buried, and on
the third day, God raised Him from the dead with a new life, the resurrection life. This same resurrection
life is what everyone who believes in Him has received.' It was similar to what Daniel had told him.
However there was more: Redemption had four definitions, all of which blew his mind, especially the
ones that talked about coming out of debts. He found out that the Lord wanted him to be bold and
come out of the debts and bondage that he found himself in. He made up his mind to act on all he had
heard and turn his life around. After the message, a call to salvation was made and he was the first to
step out to give his life to Christ.

Daniel met with him after the service and he expressed his profound gratitude to him for reaching out. 'I
was actually led by the Spirit of God to talk to you that day', Daniel told him. 'The Lord loves me for real'
Matthew thought in his heart.

Few months later, Matthew began experiencing sudden changes in his state and estate. This was as a
result of his continuous study, meditation and confessions of God's word. He never forgot the message
he heard that Sunday. He turned in his vouchers and coupons for actual value and he began redeeming
all he had lost and even much more. People started contacting him for contracts worth millions and
billions of dollars. He also became committed in church and moved up to being one of the top partners
in the ministry. It was indeed his 'Year of Redemption'.`,kZ=`As a child, Mitchell had always known that she was special and different from other kids. Growing up, she always had things handed to her so easily even when she didn't ask for it. She was what you would call, a favoured child. This was because of her upbringing as a child. She was always taught to stay in the word and take advantage of the grace that the word brings. She applied this life hack throughout her childhood up to her adulthood so it was no surprise that she always got promoted at work at every turn even before some of the 'professionals'. Not only was she favoured, she also excelled in whatever she did, so no one ever came out to complain about favouritism, however she was envied. Grace had been bestowed on her, so her life was always from one level of glory to another.
During a conversation with one of her friends, the question of how she advances so quickly came up and she replied ' It's Grace. I am full of grace heaped upon grace and I don't receive the grace of God in vain, rather, I recognize, celebrate and use grace.'
That friend asked baffled, "How do you recognize and use grace?"
"You recognize grace by putting yourself in the atmosphere of the word and acknowledging that the word brings grace. This is because the ministry of the word causes grace to increase in your life. Then you use grace by acting on the word" She explained with a kind smile.
"Please enlighten me" Her friend said curiously.
Mitchell beamed "God gives you grace to accomplish anything and then when you accomplish it, He gives you more grace to do more. Grace singles a person out and there is always something about a man or woman with grace that attracts people to him or her."
Her friend laughed "That's just like you. Everyone wants to be associated with you."
Mitchell grinned "That is what grace can do in your life. It gives you the advantage and you always need to be conscious of it. Grace also beautifies and no one should ever attempt to work against a person with grace because it would mean that such person is trying to fight against the source of grace, which is God. Simply put, grace means to walk in divine influence; it makes you have the mentality of 'I will get anything, if I want it'. It also delivers favor and joy to a person."
"I'm astonished, how do I receive this grace in my life?"
"The more you know the Lord, the more grace you stand to enjoy in your life. The more you fill your heart with God’s Word and have the Holy Spirit work in your life, the greater the grace of God that’ll be manifested in your life. So, you have to know the Lord for yourself and the first step in doing that, is to give your life to Jesus.”
Right where she was, the friend knelt down and said "I'm ready. I want to live for the Lord and use this grace to accomplish great things for Him."
Mitchell led her to Christ and got her filled with the Holy Sprit. Since that day, Avery, her friend became different and talked differently because she knew the life she was living and the grace that was upon her life.`,IZ=`
December was usually an extremely busy month for most event planners, and this December was no exception for Debbie’s company.

It was Tuesday afternoon and she’d already had four appointments. She was on her fifth appointment, which had been going for almost an hour. She could hardly wait for the day to end.

“…Please, Sir, Ma’am, I’m going to hand you a document I made based on today’s meeting. I would like you to take your time, go through the list, and come to an agreement on what you want for your big day. Then, at our next appointment, we can move forward with the next steps…”

It wasn’t that she was complaining — the more jobs they got, the more money and referrals came in. That being said, it was tiring having to deal with couples like the one she was currently with: the type who never seemed to agree on anything, even a detail as small as what kind of water would be served on their wedding day!

The moment she ushered them out of her office she quickly began packing her things, not wanting to get home too late. That’s when she saw the missed calls — five from her son’s school and an additional seven from her husband: thirteen missed calls in total!!!

She always put her phone on silent when in a meeting, but she had checked it before the last appointment and there hadn’t been any calls. The missed calls from her son’s school and her husband could only mean one thing…there was a problem, and it had to do with her son.

She called her husband immediately. “Honey, is Sean okay? I just saw your calls — my phone was on silent. What happened to Sean? Where is he?” she blurted, questions tumbling out one after the other, unable to control the anxious feelings swirling within her.

“Babe, please calm down. Come to the hospital; Sean is not too good. I will give you the details when you get here,” he said, sounding distressed.

“Is my son alive?” she asked, needing to know right away.

“Yes, babe, he is. Please calm down. Order an Uber if you don’t think you can drive…I can only handle one emergency in a day,” her husband replied.

“I can drive and I’m coming right away.” She absolutely couldn’t fathom waiting for an Uber, given the circumstances.

As she drove to the hospital — a journey that seemed to take forever although it was really only ten minutes — her mind kept flashing graphic images of all the possible scenarios that could have led Sean to be hospitalized. At the same time she forced herself to speak in the unknown tongues (the language often used by the Sealed). Even if she didn’t know what was going on, her spirit was communicating with the Spirit who knows all things.

On arriving at the children’s section of the hospital, she saw her husband sitting on one of the corridor benches with his head bent. She called out to him and he hurried to her, enveloping her in a warm embrace.

There could have been a thousand other people in that waiting room, but all she could think was: Where is my son and what happened to him?

“Honey, where’s my baby? What happened to him?” she asked, voicing the thoughts swirling through her mind as she backed out of his embrace.

“He’s in the emergency ward, babe. The doctors are attending to him. His teacher called me from school. Apparently, during recess he said he wanted to drink some water and, while going to get his bottle, he suddenly collapsed. They called the ambulance to bring him here and started trying to reach you and me.”

“So what are the doctors saying?” she asked, still feeling like she didn’t have the answers she needed.

Her husband looked utterly helpless, unsure of what to say, since he also hadn’t gotten much from the doctors when he arrived.

“All I know is that he’s been connected to an oxygen tank,” he said, trying to reassure her as best he could. “I’m hoping one of them will come out soon to give us more information.” He took her hands in his and tried to soothe her.

Just then, one of the doctors came out.

“Doctor, please — what’s wrong with our boy? Is he okay?” they both spoke at the same time.

“Could you kindly come to my office so we can have a private conversation?” the doctor replied.

The moment they took their seats, he went straight to business. “As I told you earlier, Mr. Lewis, your son has been connected to an oxygen tank. He was in a very critical state when he arrived, but we’ve been able to stabilize him. We've taken his blood sample for some tests and we’re waiting for the results, but from the preliminary examinations carried out so far, I think your son has a blood disorder…”

“MY SON DOES NOT HAVE A BLOOD DISORDER,” Debbie replied reflexively.

“Please calm down, ma’am,” the doctor admonished. “I can understand you are a bit hysterical at this time…”

“I’m not hysterical — I’m only telling you my son does not have a blood disorder,” she replied.

“Babe, please don’t interrupt the doctor. Sorry, Doctor, you can continue,” her husband said.

The scrape of the doctor’s chair as he stood up jolted Debbie back to the present; she hadn’t realized her mind had wandered.

“Please, can we see our son?” Debbie’s husband asked.

“He’s been taken to a private room so you can be with him, even though he’s sleeping at the moment. The nurse at reception will direct you.”

Debbie hurried into the room as soon as the nurse led them there and paused at the edge of the bed. Her three-year-old son, usually vibrant and bouncing with energy, was connected to an oxygen tank, absolutely still and much too pale for her liking.

She didn’t realize tears were rolling down her cheeks until her husband stood beside her, wiping them away.

“…that the life also of Jesus might be made manifest in our mortal flesh…”

Debbie turned sharply to her husband. “What did you say?”

“I didn’t say anything. What did you hear?”

“…Didn’t you say something about life just now?”

“Babe, I haven't said anything. Maybe it’s coming from the corridor.”

“…that the life also of Jesus might be made manifest in our mortal flesh…” she heard the words again, soft but clear. Suddenly, energy surged through her. She knew where those words were coming from, and light shone in her mind on what she should do.

Immediately she touched Sean’s hands and legs and began speaking in the unknown tongues.

“Babe, what are you doing?” her husband asked.

“I’m doing something about Sean’s blood,” she replied.

“I don’t have an issue with you praying, but you are talking gibberish. You’re literally not making sense with your words.”

“Honey, don’t worry. The one I’m talking to understands. Could you please just give me a moment with Sean…”

“Okay…let me go get some coffee, but please take it easy and know we’re in this together,” he said before stepping out of the room.

She could see the weight on his shoulders and the concern in his eyes — a few moments ago she had been feeling the same way. But now she knew exactly what to do.

As soon as he shut the door, Debbie proceeded to speak in the unknown tongues as she carefully placed her hands on one of Sean’s legs and his hand.

As she spoke more in the unknown tongues, words from the Sealed Manual that she had spent all these years reading and meditating on began leaping out of her mouth and she personalized them.

“…that Spirit that raised Christ from the dead lives in you, Sean, and therefore quickens your body.”

“…Sean, the Spirit of God has made you, and the breath of the Almighty has given you life…”

Debbie continued like this until the nurses came and asked her to vacate the room so they could attend to Sean.

The next day

Debbie and her husband were back in the doctor’s office. The atmosphere was tense, but Debbie remained quietly assured.

“Good morning, Mr. and Mrs. Donwell… The test results are out and, like I said yesterday, it’s been confirmed that your son has a blood disorder and it’s a chronic one. The good news is that it can be managed. Many people live with this condition. With the proper medication, most are able to live normal lives well into old age.” He paused as if expecting some reaction from Debbie based on her response the day before, but she remained calm, only moving to take her husband’s hand in hers.

So the doctor continued, “We’ve already taken him off the oxygen tank since his breathing has been stabilized. However, we still need to observe him and then determine his treatment plan… Do you have any questions before I continue?”

“Yes please, Doctor. Could you conduct another test on my son? Like I said yesterday, his blood is okay,” Debbie stated, the stoic expression on her face brooking no argument.

“Babe… I thought we’d gone through this yesterday…” her husband tried to reason with her.

“Please, honey, I know, but can he indulge me? Doctor, before you administer any treatment on my son, I am asking you to please take another blood sample and do the test again.”

“Mrs. Donwell, our lab is the best in the state and I can assure you we have a 100% test accuracy rate, but if you insist we can indulge you, although the earlier we start administering treatment the better his chances of resuming his normal life.”

“Please, indulge me,” she replied.

She could tell her husband was bewildered by her insistence, but she had made up her mind to fight for her son and he would eventually understand. The doctor dismissed them from his office and asked them to wait while tests were being run on their son.

The moment they stepped out of the office, she could sense her husband’s frustration.

“Babe, I'm not pleased with what you did in the doctor’s office. I know you became a member of an association or whatever you call it some time back. I don’t have a problem with it, but right now our son’s life is at stake. You can’t be taking risks based on what some brainwashed philosopher told you or wrote in a manual. Let’s be logical in our approach and face facts; the earlier we let the doctor who has medical experience of over thirty years do his work on our son, the better for us,” he stated matter-of-factly.

“Honey, I’m focusing on Truth right now, not facts,” she tried to explain. “Sean’s blood is perfectly fine, and when the doctors check him again they are going to see it. One more test isn’t going to hurt anyone; in fact, we could ask them to expedite it.”

Her husband was still looking at her like maybe she had lost her mind. But making him understand was not her priority at the moment. She left him in the hallway and headed to Sean’s room to do what she had been doing every moment she had the chance.

With her hands placed on his head and chest, she spoke in unknown tongues and quoted words from the manual of the Sealed Ones. “Sean, your body is the temple of God; Christ lives in you, so the life you have now, you live by the faith of the Son of God.”

The next day

Debbie sat in a chair next to her son’s hospital bed and made him repeat some of the things she had been saying from the manual. He had finally woken up in the early hours of the morning when she arrived to continue her sessions with him. She couldn’t wait to hear the result of the second test.

Soon after, her husband and the doctor came into the room with puzzled looks on their faces.

“Is everything okay?” Debbie asked, rising from her seat and taking Sean’s hand in hers.

“There’s been a kind of inconsistency with the second test result and I’m wondering where it came from,” the doctor replied.

“What did you see?” Debbie calmly asked.

“It shows his blood is clean and healthy, without any trace of a disorder.”

“Oh! I told you my son was okay,” she exclaimed, her joy lighting up the entire room as she peppered kisses on her son’s forehead. “Sean, my darling, you are perfect — every single bit of you, my beautiful boy! I just knew it!”

“I’m very sorry for the inconvenience, but do you mind if we do another test on him because this is not normal? We won’t expedite it this time; we want to be sure a thorough job is done.”

Debbie looked at her husband, who had been silent, and replied to the doctor, “Yes, if you wish, but the result will still show what you just saw.”

The next day

The doctor entered the room to discuss matters with Debbie and her husband, who were playing with a very energetic Sean.

“I really don’t know how to explain it, and I can't even tell at what point it changed… I know when your son was brought into the hospital he showed all the symptoms of this condition and the first test result confirmed it, but right now the second and third results are showing an entirely different outcome, and even your son is looking so healthy and acting like someone who was never sick… his discharge papers have been written.”

Debbie jumped and hugged her husband, awash with feelings of joy.

“Thank you, Doctor,” her husband replied.

As soon as the doctor left, Lewis quickly grabbed Debbie’s hands and said, “I know you had something to do with this. Does this have to do with all that sealed jargon you are always going on about?”

She laughed. “…Yes, dear, it has everything to do with the Sealed, and no, it’s not jargon.”

“Whatever it is, I'm now officially one of your converts. Tell me everything about it.”`,PZ=`To be loved by Love Himself
To have the entirety of nature sing and dance to your tune
To be an extension of eternity
Created creator
His breath in your lungs
His word in your mouth
His works by your hands
To be gifted only with goodness
Grace and mercy arrive at your home each morning to escort you on your way
Blessings tuck you in at night`,RZ=`Water your garden
with the stream of life flowing within you
And sweet fruits will dangle from your branches
Like precious stones
from the robe of a king`,MZ=`Salt of the earth
 Don’t play with dirt
Keep your flavour pure
Child of the Most High
Hold your head high
Be careful where you place your feet
Watch what your mouth eats
Don’t you know you were paid for?
Residence of the Holy Ghost
Guard your entrance
Don’t you know you’re not your own?`,NZ=`You opened your mouth and shot daggers at me, yesterday
Yesterday, my defense was down
Yesterday, I wrapped myself in a blanket of uneasiness and went to sleep
Today, I arose with determination and my defense was recalibrated
Today, you are no longer my opponent
My future and I have more noble wars to fight
Today I am strength`,DZ=`You are the Lord of my life
The love of my life
The Lord of my life
You pulled me out of troubled waters
Swaddled me with Your peace
Quietly reminded me on Your love
Carried me when the road was long
You renewed my breath before it had a chance to give out
You brought me back to myself
Now You hold my heart in the palm of your hands
And stir it to produce sweet things
I open my mouth and trees spring up
Stretching far beyond the expanse of my mind
Each branch producing fruits of every kind
Nations bring baskets from near and far to eat and feed their people
You have made me a spring of life`,LZ=`Bad dream shakes you awake
Jesus on the tip of your tongue
Fuzzy mental calculations
Attempt to plant bad dream in your reality
Close your eyes
Dream again
Or cancel dreams for the night
Tell sleep it’s all you need
You’re in control`,OZ=`I put my hand in the fire and it didn’t burn
The waters covered me
Taking out every inch of air
But I stood in the midst of the waters, breathing
Now watch me
Watch me squash every lie that made its way into my consciousness
Watch me dance on the devils neck`,FZ=`What kind of person would I be if I listened to you?
What kind of person would I be if I didn’t?
You’re looking straight at me
But there’s something you’re not seeing
Or am I the one in oblivion to the meaning of the words you pour on me?
Is there a meaning to the words you pour on me?
Or are they spurts of emotions that have no where else to go?
Direction or distraction
What are you turning me towards?
What are you turning me away from?`,jZ=`You are a strange thing
A strange thing to this earth and all that it knows
But nothing strange about you from where I’m standing
Just beauty in its purest form
A personification of light and glory
Oh how you shine`,BZ=`When death answered my call and came to take me
You stood by my door and said no
Not this one
You kept me when I didn’t know what was keeping me
When I didn’t want to be kept
What is my life that I cannot give to you
What could You possibly ask me to do that I wouldn’t make possible for You
I will be the name you have called me
Praise
The song on my lips the song on their lips the fragrance in your presence
I will be the thing you have made me
Light
The bright and shiny
The morning that comes after the night
The dancing that comes after the mourning
I have fought every contrary voice and won`,HZ=`Is this me?
Sleeping with peace
Waking with joy
What wind came and swept me out of who I was last year
That it no longer feels like a year ago but five
I sunk myself so deep in You
Your love grew me new eyes
That I can’t quite look back and see anything but beauty
With gratitude filling my heart and pouring out of my lips daily
No regrets?
I must be brand new
Fresh out of the fire
All impurities burnt out
Between the seven course Word meals
and Holy Ghost administrative activities
Operating without my consciousness
When did the transformation happen
Do you see what I see?
Or are you still looking at the old me?`,VZ=`Who do you think you are?
Why do you walk so high?
Come back down to earth
Stop playing with the clouds
I closed my eyes and I found myself in the clouds again
This time so high up you couldn’t reach me
Not with your hands, not with your voice
Where was I going?
However far my eyes could take me
The One who called me gave me no dimensions for He Himself is without dimensions`,UZ=`Your love is more real than anything
If I found out the sky was no longer blue
Or that the sea was now land
I wouldn’t ask
What about Your love? Is it still here?
Is it still real?
You are my reality`,$Z=`Your eyes are too wide
You’ve seen too much it’s made you blind
You’ve heard too much
Your ears are filled to deafness
Senses marred beyond usefulness
No back up either
Internal light out of service
What trap awaits you today?
Close your eyes and see
The truth is clearer when you close your eyes`,zZ=`Cameras! Lights! Action!
I began
Playing my role as it was written for me
Saying my lines
Gradually immersed into this world the Director had created
Feeding off my fellow actors
Taking their cues
Suddenly the Director yells cut
I startle and stop
Then He walks towards me and whispers, “Do you remember the script?”
“Ofcourse Sir I do, was I not following it?” I replied
“Remember I wrote it and to play your role exactly as I imagined and created it, you have to keep your eyes on Me” He explained
Perceiving my concern at the feasibility of this instruction, He continued, “If you do this, you’ll no longer be an actor playing a role, you’ll be fulfilling the purpose of the Director”
“Is this what you want?”
Wholeheartedly I answered, “Yes Sir”
The Director walked back to His position and once again yelled, “Action!”
This time my eyes never left Him
Suddenly the words I spoke came alive from my lips and I could feel myself disappear
I was acting but it wasn’t me, it was Him
I was speaking but I wasn’t
I was no longer there
It was all Him
As I looked intently at His face, His eyes were filled with tears but He was beaming with a smile
I wondered to myself what the expression on His face meant then He replied me there in my thoughts, “This is what I wanted from the beginning of time, before I ever wrote the script”
“It was never just about the script, it was and is about you and I as one”`,WZ=`I saw men sleeping, walking
Heavy eyed for the sleep that had fallen on them
I saw men sleeping, walking and I was distraught
I was distraught for what might befall them in their sleep
What slimy hands might find this an occasion to slip them up
For what pits they might fall into
In my distress I brought the light to their eyes in hope
That it might open their eyes
But they shut their eyes harder and pushed me away
for the brightness of this truth caused their sleepy eyes agony
And they loved their sleep
Then I heard a Voice call out to me saying,
“Let them be. For I will cause the ground beneath them to shake and there shall be an awakening. And the light that shone before their eyes and couldn’t open it will shine within them and there will be no escaping it. And their eyes will be open wide and will not be shut to sleep ever again.”
Then I fell on my knees before the One Who spoke to perform it as He had spoken
And my heart was at peace`,GZ=`How many ways can I say “I love you”
The “have you eaten?” texts
The “call me when you get home”
The listening ear
Praying with you at 2am in the morning
In how many ways did you say you love me?
How many times and in how many places did your blood spill for me?
How many stripes did your flesh take?
Or is it the consuming overwhelming love wrapping itself around me in the night seasons?
The smile on my face looking at you
The smile on your face looking at me
How can I describe the endless sweetness of your love?
My body stretched out on the floor
My face soaked in tears
Can you see that I love you?
The longing
It never ends
How do you know it’s love
If it doesn’t give you a new heart
Daily turning out treasures you didn’t know existed within
What do I do with this love?
Do I take you to your favourite spot?
Or do I curl up in a ball of tears in secret?
Holding on to you in realms beyond
Speaking unutterable words
How do I love you?
When I wake up every morning and your love renews itself
Fresher, stronger than last night
When I don’t think I can love you more than I did yesterday
You show me how
Loving me into loving you
An infinite cycle of bliss`,YZ=`Oh to see your face my Precious Lord
What would I do?
Would I jump and leap endlessly in excitement?
Would I rush to hold you, kiss your hands and feet?
Or would I be flat on my face as dead enamoured by your very presence?
Oh to be face to face with the One I adore
The One who deserves all the love songs and poems a soul could ever compose
But Who desires the heart that truly loves Him with or without sweet words to give
What an arrival it will be
What a departure
The earth and all in it have never had such a moment until that magnificent Day
The King of kings arriving in the grandest of splendour to pick His kids up
Oh to be home with you forever my Lord and King`,KZ=`Lord I hope I put a smile on your face everyday
Because when I look at you
When I let my heart sink a little deeper into your loveliness
My smile is so big my face can’t contain it
Lord I hope you’re proud of me
Because I’m so proud to be yours
I’m so proud to be the one you want
I’m so proud to identify with you
Even when standing with you means
Fighting wars
I’d rather fight wars with you than have peace without you
Assuming there’s such a thing as peace without you
I’m with you Lord
I’m not going anywhere
Lord I hope your heart sings when you think of me
Because I can’t stop the songs in my heart
They’ve become a permanent soundtrack to my daily living
All I’m saying Lord is
In you, With you
I’ve found the greatest love
& I can’t help but wonder
If every transcendent experience of you is what you experience of me
Lord your love is surer to me than the sky is blue
I pray you never have a reason to doubt my love for you`,Mv=[{id:1,title:"A Loved Life",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:PZ,picture:"./assets/ALovedLife.png"},{id:2,title:"A Watered Garden",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:RZ,picture:"/assets/AWateredGarden.png"},{id:3,title:"Salt Preserved",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:MZ,picture:"/assets/SaltPreserved.png"},{id:4,title:"Strength",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:NZ,picture:"/assets/Strength.png"},{id:5,title:"Blooming Love",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:DZ,picture:"/assets/BloomingLove.png"},{id:6,title:"Cream Your Dreams",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:LZ,picture:"/assets/CreamYourDreams.png"},{id:7,title:"Undefeated",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:OZ,picture:"/assets/Undefeated.png"},{id:8,title:"Discernment",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:FZ,picture:"/assets/Discernment.png"},{id:9,title:"Strange Beauty",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:jZ,picture:"/assets/StrangeBeauty.png"},{id:10,title:"Preserved for Purpose",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:BZ,picture:"/assets/PreservedForPurpose.png"},{id:11,title:"New Year, New Me",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:HZ,picture:"/assets/NewYearNewMe.png"},{id:12,title:"A Head In The Clouds",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:VZ,picture:"/assets/AHeadInTheClouds.png"},{id:13,title:"Real Love",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:UZ,picture:"/assets/RealLove.png"},{id:14,title:"Beyond The Senses",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:$Z,picture:"assets/BeyondTheSenses.png"},{id:15,title:"Following The Script",author:"P.E.B",genre:"Poems",length:2,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:zZ,picture:"/assets/FollowingTheScript.png"},{id:16,title:"Revival",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:WZ,picture:"/assets/Revival.png"},{id:17,title:"Expressions Of Love",author:"P.E.B",genre:"Poems",length:2,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:GZ,picture:"/assets/ExpressionsOfLove.png"},{id:18,title:"Almost Home",author:"P.E.B",genre:"Poems",length:1,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:YZ,picture:"/assets/AlmostHome.png"},{id:19,title:"Love Confessions",author:"P.E.B",genre:"Poems",length:2,type:"Poem",collection:"Eyes That See, A Heart That Speaks",content:KZ,picture:"/assets/LoveConfessions.png"},{id:20,title:"Nothing Lacking",author:"Miss EJA",genre:"Short Stories",length:6,type:"Short Stories",collection:"The Sealed Life Chronicles - I",content:xZ,picture:"/assets/NothingLacking.jpeg"},{id:21,title:"Sight By Speaking",author:"Miss EJA",genre:"Short Stories",length:5,type:"Short Stories",collection:"The Sealed Life Chronicles - II",content:_Z,picture:"/assets/SightBySpeakingFinal;.jpeg"},{id:22,title:"The Summer Everything Changed",author:"Miss EJA",genre:"Short Stories",length:4,type:"Short Stories",collection:"The Sealed Life Chronicles - III",content:SZ,picture:"/assets/TheSummerEverythingChanged.png"},{id:23,title:"The Golden Man's Trial",author:"Miss EJA",genre:"Short Stories",type:"Short Stories",length:7,collection:"The Sealed Life Chronicles - IV",content:EZ,picture:"/assets/TheGoldenMansTrial.png"},{id:25,title:"Taking Action",author:"Delight Adisa",genre:"Short Stories",length:3,type:"Short Stories",collection:"",content:CZ,picture:"./assets/TakingAction.png"},{id:26,title:"A Preacher's Kid Story",author:"Delight Adisa",genre:"Short Stories",length:3,type:"Short Stories",collection:"",content:AZ,picture:"./assets/APreachersKidsStory.jpeg"},{id:27,title:"My Redemption",author:"Delight Adisa",genre:"Short Stories",length:2,type:"Short Stories",collection:"",content:TZ,picture:"./assets/MyRedemption.jpeg"},{id:28,title:"The Graced One",author:"Delight Adisa",genre:"Short Stories",length:5,type:"Short Stories",collection:"",content:kZ,picture:"./assets/TheGracedOne.jpeg"},{id:29,title:"The Life Manifest",author:"Miss EJA",genre:"Short Stories",length:6,type:"Short Stories",collection:"The Sealed Life Chronicles - V",content:IZ,picture:"./assets/TheLifeManifest.png"},{id:24,title:"Fate And Faith",author:"Delight Adisa",genre:"Novels",length:131,type:"PDF",collection:"",content:"/assets/FateAndFaith.pdf",pdfUrl:"/assets/FateAndFaithFinal.pdf",picture:"/assets/FateAndFaith.jpg"}],qZ=n=>Mv.find(e=>e.id===parseInt(n)),XZ=n=>{const e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},QZ=()=>{const[n,e]=E.useState(0),[t,s]=E.useState(3),i=E.useMemo(()=>XZ(Mv),[]);E.useEffect(()=>{const a=()=>{window.innerWidth<768?s(3):window.innerWidth<1280?s(7):s(9)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const r=()=>{e(a=>(a+1)%i.length)},o=()=>{e(a=>a===0?i.length-1:a-1)};return E.useEffect(()=>{const a=setInterval(()=>{r()},4e3);return()=>clearInterval(a)},[]),b.jsxs("div",{className:"relative w-full flex flex-col items-center py-12",children:[b.jsx("div",{className:"relative flex items-center justify-center h-80 w-full max-w-7xl overflow-hidden perspective-[1200px]",children:b.jsx(Im,{children:i.map((a,l)=>{const c=(l-n+i.length)%i.length;if(c>=t)return null;const u=Math.floor(t/2),d=c-u,f=d*200,p=d*-15,y=Math.abs(d)>1?"blur(2px)":"none",g=d===0?1.1:.85,S=d===0?1:.4,w=t-Math.abs(d);return b.jsxs(Ae.div,{initial:{opacity:0,scale:.8,y:50},animate:{x:f,scale:g,opacity:S,rotateY:p,filter:y,zIndex:w,y:0},exit:{opacity:0,scale:.5,y:-50},transition:{type:"spring",stiffness:120,damping:20,mass:.8},className:"absolute flex flex-col items-center",children:[b.jsx("img",{src:a.picture,alt:a.title,className:"w-44 h-44 md:w-48 md:h-48 lg:w-56 lg:h-56 object-cover rounded-xl border border-gray-200 shadow-lg bg-white"}),b.jsx("p",{className:"mt-3 text-center font-semibold text-foreground text-sm md:text-base",children:a.title})]},a.id)})})}),b.jsxs("div",{className:"flex gap-6 mt-10",children:[b.jsx("button",{onClick:o,className:"px-4 py-2 rounded-full bg-primary text-white hover:bg-primary/80 transition",children:"◀"}),b.jsx("button",{onClick:r,className:"px-4 py-2 rounded-full bg-primary text-white hover:bg-primary/80 transition",children:"▶"})]})]})},sE=({className:n,initial:e,animate:t})=>b.jsx(Ae.div,{className:`orb ${n}`,initial:e,animate:t}),iE=({icon:n,title:e,description:t,link:s,linkText:i,delay:r})=>{const o=E.useRef(null),a=vb(0),l=vb(0),c=_N(a),u=_N(l);gw(u,[-.5,.5],["40%","60%"]),gw(c,[-.5,.5],["40%","60%"]);const d=g=>{const S=o.current.getBoundingClientRect(),w=S.width,_=S.height,v=g.clientX-S.left,m=g.clientY-S.top,x=v/w-.5,A=m/_-.5;a.set(x),l.set(A)},f=()=>{a.set(0),l.set(0)},p=gw(u,[-.5,.5],["12.5deg","-12.5deg"]),y=gw(c,[-.5,.5],["-12.5deg","12.5deg"]);return b.jsx(Ae.div,{ref:o,onMouseMove:d,onMouseLeave:f,style:{rotateX:p,rotateY:y,transformStyle:"preserve-3d"},initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:r},className:"relative h-full",children:b.jsxs("div",{style:{transform:"translateZ(75px)",transformStyle:"preserve-3d"},className:"h-full text-center p-6 md:p-8 glassmorphism rounded-2xl flex flex-col aurora-card",children:[b.jsx("div",{className:"mb-4 inline-block p-4 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-full text-primary",children:b.jsx(n,{size:32,style:{transform:"translateZ(50px)"}})}),b.jsx("h3",{className:"text-2xl font-bold mb-2 text-foreground",style:{transform:"translateZ(50px)"},children:e}),b.jsx("p",{className:"text-muted-foreground mb-6 flex-grow",style:{transform:"translateZ(40px)"},children:t}),b.jsx(Un,{asChild:!0,variant:"outline",style:{transform:"translateZ(60px)"},children:b.jsxs(Us,{to:s,className:"group",children:[i," ",b.jsx(xI,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})})]})})},JZ=()=>b.jsxs("div",{className:"space-y-24 md:space-y-24 overflow-hidden",children:[b.jsxs("div",{className:"creative-bg",children:[b.jsx(sE,{className:"orb-1",initial:{top:"10%",left:"10%"},animate:{top:["10%","60%","20%","10%"],left:["10%","70%","50%","10%"],transition:{duration:40,repeat:1/0,ease:"easeInOut"}}}),b.jsx(sE,{className:"orb-2",initial:{top:"80%",left:"80%"},animate:{top:["80%","20%","70%","80%"],left:["80%","30%","90%","80%"],transition:{duration:35,repeat:1/0,ease:"easeInOut"}}}),b.jsx(sE,{className:"orb-3",initial:{top:"50%",left:"50%"},animate:{top:["50%","10%","90%","50%"],left:["50%","90%","10%","50%"],transition:{duration:45,repeat:1/0,ease:"easeInOut"}}})]}),b.jsxs("section",{id:"home",className:"text-center py-6 md:py-1 relative",children:[b.jsxs(Ae.div,{initial:{opacity:0,y:-30,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:"easeOut"},className:"relative z-10",children:[b.jsx(Ae.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring",stiffness:200,damping:20},className:"inline-flex items-center gap-2 bg-primary/10 text-primary px-4 rounded-full text-sm font-semibold mb-6 transform -rotate-3",children:"Welcome, Kingdom Pager"}),b.jsxs("h1",{className:"text-6xl md:text-8xl font-black mb-6 leading-none tracking-tighter",children:[b.jsx("span",{className:"block",children:"READ. CONNECT."}),b.jsx("span",{className:"block highlight-scribble",children:"BE INSPIRED."})]}),b.jsx("p",{className:"max-w-xl mx-auto text-lg md:text-xl text-muted-foreground mb-10",children:b.jsx("em",{children:"Enjoy stories and poems of faith, hope and love. Expect to be transported into a realm of infinite possibilities, fill your thoughts with great expectations of brighter days ahead and warm your heart with the deepest of affections as you journey through each piece "})}),b.jsxs("div",{className:"flex justify-center gap-4 flex-wrap",children:[b.jsx(Un,{size:"lg",asChild:!0,className:"group bg-gradient-to-r from-primary to-secondary text-primary-foreground hover:opacity-90 transition-opacity",children:b.jsxs(Us,{to:"/library",children:["Explore The Library",b.jsx(xI,{className:"ml-2 h-5 w-5 transition-transform group-hover:translate-x-1"})]})}),b.jsx(Un,{size:"lg",variant:"outline",asChild:!0,children:b.jsx(Us,{to:"/about",children:"Our Story"})})]})]}),b.jsx(nA,{direction:"down",className:"text-background"}),b.jsxs("div",{className:"py-10 bg-background relative z-10",children:[b.jsx("h3",{className:"text-center text-xl font-semibold mb-8 text-muted-foreground",children:"Discover Our Collection"}),b.jsx(QZ,{})]}),b.jsx(nA,{direction:"up",className:"text-background"}),b.jsxs("section",{id:"features",className:"container mx-auto px-4 relative z-10",children:[b.jsxs("div",{className:"text-center mb-16",children:[b.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"A Canvas For Creativity"}),b.jsx("p",{className:"max-w-2xl mx-auto text-muted-foreground",children:" Everything you need to immerse yourself in the world of Holy Spirit inspired literary work."})]}),b.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 bg-transparent",style:{perspective:"1000px"},children:[b.jsx(iE,{icon:_I,title:"Start your journey of faith",description:"As you’ve been reading, you may have been inspired to begin a new chapter in your life, believe in Jesus Christ, find out what’s next.",delay:.2,link:"/salvation",linkText:"Receive Salvation"}),b.jsx(iE,{icon:G7,title:"Share your story",description:"Has this platform personally inspired you in a way that you would like to share with us?",delay:.4,link:"/contact",linkText:"Get In Touch"}),b.jsx(iE,{icon:Z7,title:"Join the dialogue",description:"Engage with a vibrant community. Share interpretations, explore inspired writings, and discuss the topics that matter most.",delay:.6,link:"/comment-page",linkText:"Start Commenting"})]})]})]})]}),Jp=te.forwardRef(({className:n,type:e,...t},s)=>b.jsx("input",{type:e,className:ke("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:s,...t}));Jp.displayName="Input";function Cb(n,[e,t]){return Math.min(t,Math.max(e,n))}function OH(n){const e=E.useRef({value:n,previous:n});return E.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var FH=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ZZ="VisuallyHidden",HI=E.forwardRef((n,e)=>b.jsx(me.span,{...n,ref:e,style:{...FH,...n.style}}));HI.displayName=ZZ;var eee=[" ","Enter","ArrowUp","ArrowDown"],tee=[" ","Enter"],lu="Select",[PS,RS,nee]=Tv(lu),[Lf,ehe]=nl(lu,[nee,ES]),MS=ES(),[see,sl]=Lf(lu),[iee,ree]=Lf(lu),jH=n=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:i,onOpenChange:r,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:y}=n,g=MS(e),[S,w]=E.useState(null),[_,v]=E.useState(null),[m,x]=E.useState(!1),A=vS(c),[k,P]=mf({prop:s,defaultProp:i??!1,onChange:r,caller:lu}),[R,M]=mf({prop:o,defaultProp:a,onChange:l,caller:lu}),N=E.useRef(null),F=S?y||!!S.closest("form"):!0,[H,D]=E.useState(new Set),$=Array.from(H).map(L=>L.props.value).join(";");return b.jsx(xB,{...g,children:b.jsxs(see,{required:p,scope:e,trigger:S,onTriggerChange:w,valueNode:_,onValueNodeChange:v,valueNodeHasChildren:m,onValueNodeHasChildrenChange:x,contentId:gf(),value:R,onValueChange:M,open:k,onOpenChange:P,dir:A,triggerPointerDownPosRef:N,disabled:f,children:[b.jsx(PS.Provider,{scope:e,children:b.jsx(iee,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(L=>{D(B=>new Set(B).add(L))},[]),onNativeOptionRemove:E.useCallback(L=>{D(B=>{const O=new Set(B);return O.delete(L),O})},[]),children:t})}),F?b.jsxs(l3,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:R,onChange:L=>M(L.target.value),disabled:f,form:y,children:[R===void 0?b.jsx("option",{value:""}):null,Array.from(H)]},$):null]})})};jH.displayName=lu;var BH="SelectTrigger",HH=E.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:s=!1,...i}=n,r=MS(t),o=sl(BH,t),a=o.disabled||s,l=Re(e,o.onTriggerChange),c=RS(t),u=E.useRef("touch"),[d,f,p]=u3(g=>{const S=c().filter(v=>!v.disabled),w=S.find(v=>v.value===o.value),_=h3(S,g,w);_!==void 0&&o.onValueChange(_.value)}),y=g=>{a||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return b.jsx(_B,{asChild:!0,...r,children:b.jsx(me.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":c3(o.value)?"":void 0,...i,ref:l,onClick:X(i.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&y(g)}),onPointerDown:X(i.onPointerDown,g=>{u.current=g.pointerType;const S=g.target;S.hasPointerCapture(g.pointerId)&&S.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:X(i.onKeyDown,g=>{const S=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(S&&g.key===" ")&&eee.includes(g.key)&&(y(),g.preventDefault())})})})});HH.displayName=BH;var VH="SelectValue",UH=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,children:r,placeholder:o="",...a}=n,l=sl(VH,t),{onValueNodeHasChildrenChange:c}=l,u=r!==void 0,d=Re(e,l.onValueNodeChange);return on(()=>{c(u)},[c,u]),b.jsx(me.span,{...a,ref:d,style:{pointerEvents:"none"},children:c3(l.value)?b.jsx(b.Fragment,{children:o}):r})});UH.displayName=VH;var oee="SelectIcon",$H=E.forwardRef((n,e)=>{const{__scopeSelect:t,children:s,...i}=n;return b.jsx(me.span,{"aria-hidden":!0,...i,ref:e,children:s||"▼"})});$H.displayName=oee;var aee="SelectPortal",zH=n=>b.jsx(CS,{asChild:!0,...n});zH.displayName=aee;var cu="SelectContent",WH=E.forwardRef((n,e)=>{const t=sl(cu,n.__scopeSelect),[s,i]=E.useState();if(on(()=>{i(new DocumentFragment)},[]),!t.open){const r=s;return r?wu.createPortal(b.jsx(GH,{scope:n.__scopeSelect,children:b.jsx(PS.Slot,{scope:n.__scopeSelect,children:b.jsx("div",{children:n.children})})}),r):null}return b.jsx(YH,{...n,ref:e})});WH.displayName=cu;var Xs=10,[GH,il]=Lf(cu),lee="SelectContentImpl",cee=pf("SelectContent.RemoveScroll"),YH=E.forwardRef((n,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:r,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:S,...w}=n,_=sl(cu,t),[v,m]=E.useState(null),[x,A]=E.useState(null),k=Re(e,G=>m(G)),[P,R]=E.useState(null),[M,N]=E.useState(null),F=RS(t),[H,D]=E.useState(!1),$=E.useRef(!1);E.useEffect(()=>{if(v)return MB(v)},[v]),Qj();const L=E.useCallback(G=>{const[fe,...he]=F().map(ye=>ye.ref.current),[ne]=he.slice(-1),oe=document.activeElement;for(const ye of G)if(ye===oe||(ye==null||ye.scrollIntoView({block:"nearest"}),ye===fe&&x&&(x.scrollTop=0),ye===ne&&x&&(x.scrollTop=x.scrollHeight),ye==null||ye.focus(),document.activeElement!==oe))return},[F,x]),B=E.useCallback(()=>L([P,v]),[L,P,v]);E.useEffect(()=>{H&&B()},[H,B]);const{onOpenChange:O,triggerPointerDownPosRef:j}=_;E.useEffect(()=>{if(v){let G={x:0,y:0};const fe=ne=>{var oe,ye;G={x:Math.abs(Math.round(ne.pageX)-(((oe=j.current)==null?void 0:oe.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((ye=j.current)==null?void 0:ye.y)??0))}},he=ne=>{G.x<=10&&G.y<=10?ne.preventDefault():v.contains(ne.target)||O(!1),document.removeEventListener("pointermove",fe),j.current=null};return j.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",he,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",he,{capture:!0})}}},[v,O,j]),E.useEffect(()=>{const G=()=>O(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[O]);const[z,W]=u3(G=>{const fe=F().filter(oe=>!oe.disabled),he=fe.find(oe=>oe.ref.current===document.activeElement),ne=h3(fe,G,he);ne&&setTimeout(()=>ne.ref.current.focus())}),K=E.useCallback((G,fe,he)=>{const ne=!$.current&&!he;(_.value!==void 0&&_.value===fe||ne)&&(R(G),ne&&($.current=!0))},[_.value]),Z=E.useCallback(()=>v==null?void 0:v.focus(),[v]),de=E.useCallback((G,fe,he)=>{const ne=!$.current&&!he;(_.value!==void 0&&_.value===fe||ne)&&N(G)},[_.value]),Me=s==="popper"?sA:KH,ue=Me===sA?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:S}:{};return b.jsx(GH,{scope:t,content:v,viewport:x,onViewportChange:A,itemRefCallback:K,selectedItem:P,onItemLeave:Z,itemTextRefCallback:de,focusSelectedItem:B,selectedItemText:M,position:s,isPositioned:H,searchRef:z,children:b.jsx(VB,{as:cee,allowPinchZoom:!0,children:b.jsx(EI,{asChild:!0,trapped:_.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:X(i,G=>{var fe;(fe=_.trigger)==null||fe.focus({preventScroll:!0}),G.preventDefault()}),children:b.jsx(wS,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:b.jsx(Me,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:G=>G.preventDefault(),...w,...ue,onPlaced:()=>D(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:X(w.onKeyDown,G=>{const fe=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!fe&&G.key.length===1&&W(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let ne=F().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);if(["ArrowUp","End"].includes(G.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const oe=G.target,ye=ne.indexOf(oe);ne=ne.slice(ye+1)}setTimeout(()=>L(ne)),G.preventDefault()}})})})})})})});YH.displayName=lee;var uee="SelectItemAlignedPosition",KH=E.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:s,...i}=n,r=sl(cu,t),o=il(cu,t),[a,l]=E.useState(null),[c,u]=E.useState(null),d=Re(e,k=>u(k)),f=RS(t),p=E.useRef(!1),y=E.useRef(!0),{viewport:g,selectedItem:S,selectedItemText:w,focusSelectedItem:_}=o,v=E.useCallback(()=>{if(r.trigger&&r.valueNode&&a&&c&&g&&S&&w){const k=r.trigger.getBoundingClientRect(),P=c.getBoundingClientRect(),R=r.valueNode.getBoundingClientRect(),M=w.getBoundingClientRect();if(r.dir!=="rtl"){const oe=M.left-P.left,ye=R.left-oe,ae=k.left-ye,Te=k.width+ae,Ge=Math.max(Te,P.width),Qe=window.innerWidth-Xs,Cs=Cb(ye,[Xs,Math.max(Xs,Qe-Ge)]);a.style.minWidth=Te+"px",a.style.left=Cs+"px"}else{const oe=P.right-M.right,ye=window.innerWidth-R.right-oe,ae=window.innerWidth-k.right-ye,Te=k.width+ae,Ge=Math.max(Te,P.width),Qe=window.innerWidth-Xs,Cs=Cb(ye,[Xs,Math.max(Xs,Qe-Ge)]);a.style.minWidth=Te+"px",a.style.right=Cs+"px"}const N=f(),F=window.innerHeight-Xs*2,H=g.scrollHeight,D=window.getComputedStyle(c),$=parseInt(D.borderTopWidth,10),L=parseInt(D.paddingTop,10),B=parseInt(D.borderBottomWidth,10),O=parseInt(D.paddingBottom,10),j=$+L+H+O+B,z=Math.min(S.offsetHeight*5,j),W=window.getComputedStyle(g),K=parseInt(W.paddingTop,10),Z=parseInt(W.paddingBottom,10),de=k.top+k.height/2-Xs,Me=F-de,ue=S.offsetHeight/2,G=S.offsetTop+ue,fe=$+L+G,he=j-fe;if(fe<=de){const oe=N.length>0&&S===N[N.length-1].ref.current;a.style.bottom="0px";const ye=c.clientHeight-g.offsetTop-g.offsetHeight,ae=Math.max(Me,ue+(oe?Z:0)+ye+B),Te=fe+ae;a.style.height=Te+"px"}else{const oe=N.length>0&&S===N[0].ref.current;a.style.top="0px";const ae=Math.max(de,$+g.offsetTop+(oe?K:0)+ue)+he;a.style.height=ae+"px",g.scrollTop=fe-de+g.offsetTop}a.style.margin=`${Xs}px 0`,a.style.minHeight=z+"px",a.style.maxHeight=F+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[f,r.trigger,r.valueNode,a,c,g,S,w,r.dir,s]);on(()=>v(),[v]);const[m,x]=E.useState();on(()=>{c&&x(window.getComputedStyle(c).zIndex)},[c]);const A=E.useCallback(k=>{k&&y.current===!0&&(v(),_==null||_(),y.current=!1)},[v,_]);return b.jsx(dee,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:A,children:b.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:m},children:b.jsx(me.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});KH.displayName=uee;var hee="SelectPopperPosition",sA=E.forwardRef((n,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:i=Xs,...r}=n,o=MS(t);return b.jsx(SB,{...o,...r,ref:e,align:s,collisionPadding:i,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});sA.displayName=hee;var[dee,VI]=Lf(cu,{}),iA="SelectViewport",qH=E.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:s,...i}=n,r=il(iA,t),o=VI(iA,t),a=Re(e,r.onViewportChange),l=E.useRef(0);return b.jsxs(b.Fragment,{children:[b.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),b.jsx(PS.Slot,{scope:t,children:b.jsx(me.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:X(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const y=window.innerHeight-Xs*2,g=parseFloat(d.style.minHeight),S=parseFloat(d.style.height),w=Math.max(g,S);if(w<y){const _=w+p,v=Math.min(y,_),m=_-v;d.style.height=v+"px",d.style.bottom==="0px"&&(u.scrollTop=m>0?m:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});qH.displayName=iA;var XH="SelectGroup",[fee,pee]=Lf(XH),mee=E.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=gf();return b.jsx(fee,{scope:t,id:i,children:b.jsx(me.div,{role:"group","aria-labelledby":i,...s,ref:e})})});mee.displayName=XH;var QH="SelectLabel",JH=E.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=pee(QH,t);return b.jsx(me.div,{id:i.id,...s,ref:e})});JH.displayName=QH;var Ab="SelectItem",[gee,ZH]=Lf(Ab),e3=E.forwardRef((n,e)=>{const{__scopeSelect:t,value:s,disabled:i=!1,textValue:r,...o}=n,a=sl(Ab,t),l=il(Ab,t),c=a.value===s,[u,d]=E.useState(r??""),[f,p]=E.useState(!1),y=Re(e,_=>{var v;return(v=l.itemRefCallback)==null?void 0:v.call(l,_,s,i)}),g=gf(),S=E.useRef("touch"),w=()=>{i||(a.onValueChange(s),a.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return b.jsx(gee,{scope:t,value:s,disabled:i,textId:g,isSelected:c,onItemTextChange:E.useCallback(_=>{d(v=>v||((_==null?void 0:_.textContent)??"").trim())},[]),children:b.jsx(PS.ItemSlot,{scope:t,value:s,disabled:i,textValue:u,children:b.jsx(me.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:y,onFocus:X(o.onFocus,()=>p(!0)),onBlur:X(o.onBlur,()=>p(!1)),onClick:X(o.onClick,()=>{S.current!=="mouse"&&w()}),onPointerUp:X(o.onPointerUp,()=>{S.current==="mouse"&&w()}),onPointerDown:X(o.onPointerDown,_=>{S.current=_.pointerType}),onPointerMove:X(o.onPointerMove,_=>{var v;S.current=_.pointerType,i?(v=l.onItemLeave)==null||v.call(l):S.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:X(o.onPointerLeave,_=>{var v;_.currentTarget===document.activeElement&&((v=l.onItemLeave)==null||v.call(l))}),onKeyDown:X(o.onKeyDown,_=>{var m;((m=l.searchRef)==null?void 0:m.current)!==""&&_.key===" "||(tee.includes(_.key)&&w(),_.key===" "&&_.preventDefault())})})})})});e3.displayName=Ab;var vp="SelectItemText",t3=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,...r}=n,o=sl(vp,t),a=il(vp,t),l=ZH(vp,t),c=ree(vp,t),[u,d]=E.useState(null),f=Re(e,w=>d(w),l.onItemTextChange,w=>{var _;return(_=a.itemTextRefCallback)==null?void 0:_.call(a,w,l.value,l.disabled)}),p=u==null?void 0:u.textContent,y=E.useMemo(()=>b.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:S}=c;return on(()=>(g(y),()=>S(y)),[g,S,y]),b.jsxs(b.Fragment,{children:[b.jsx(me.span,{id:l.textId,...r,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wu.createPortal(r.children,o.valueNode):null]})});t3.displayName=vp;var n3="SelectItemIndicator",s3=E.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return ZH(n3,t).isSelected?b.jsx(me.span,{"aria-hidden":!0,...s,ref:e}):null});s3.displayName=n3;var rA="SelectScrollUpButton",i3=E.forwardRef((n,e)=>{const t=il(rA,n.__scopeSelect),s=VI(rA,n.__scopeSelect),[i,r]=E.useState(!1),o=Re(e,s.onScrollButtonChange);return on(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;r(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?b.jsx(o3,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});i3.displayName=rA;var oA="SelectScrollDownButton",r3=E.forwardRef((n,e)=>{const t=il(oA,n.__scopeSelect),s=VI(oA,n.__scopeSelect),[i,r]=E.useState(!1),o=Re(e,s.onScrollButtonChange);return on(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;r(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?b.jsx(o3,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});r3.displayName=oA;var o3=E.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:s,...i}=n,r=il("SelectScrollButton",t),o=E.useRef(null),a=RS(t),l=E.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return E.useEffect(()=>()=>l(),[l]),on(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),b.jsx(me.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:X(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:X(i.onPointerMove,()=>{var c;(c=r.onItemLeave)==null||c.call(r),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:X(i.onPointerLeave,()=>{l()})})}),yee="SelectSeparator",a3=E.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return b.jsx(me.div,{"aria-hidden":!0,...s,ref:e})});a3.displayName=yee;var aA="SelectArrow",vee=E.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=MS(t),r=sl(aA,t),o=il(aA,t);return r.open&&o.position==="popper"?b.jsx(EB,{...i,...s,ref:e}):null});vee.displayName=aA;var wee="SelectBubbleInput",l3=E.forwardRef(({__scopeSelect:n,value:e,...t},s)=>{const i=E.useRef(null),r=Re(s,i),o=OH(e);return E.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),b.jsx(me.select,{...t,style:{...FH,...t.style},ref:r,defaultValue:e})});l3.displayName=wee;function c3(n){return n===""||n===void 0}function u3(n){const e=Xn(n),t=E.useRef(""),s=E.useRef(0),i=E.useCallback(o=>{const a=t.current+o;e(a),function l(c){t.current=c,window.clearTimeout(s.current),c!==""&&(s.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),r=E.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,i,r]}function h3(n,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,r=t?n.indexOf(t):-1;let o=bee(n,Math.max(r,0));i.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function bee(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var xee=jH,d3=HH,_ee=UH,See=$H,Eee=zH,f3=WH,Cee=qH,p3=JH,m3=e3,Aee=t3,Tee=s3,g3=i3,y3=r3,v3=a3;const rE=xee,oE=_ee,t0=te.forwardRef(({className:n,children:e,...t},s)=>b.jsxs(d3,{ref:s,className:ke("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...t,children:[e,b.jsx(See,{asChild:!0,children:b.jsx(jj,{className:"h-4 w-4 opacity-50"})})]}));t0.displayName=d3.displayName;const w3=te.forwardRef(({className:n,...e},t)=>b.jsx(g3,{ref:t,className:ke("flex cursor-default items-center justify-center py-1",n),...e,children:b.jsx(H7,{className:"h-4 w-4"})}));w3.displayName=g3.displayName;const b3=te.forwardRef(({className:n,...e},t)=>b.jsx(y3,{ref:t,className:ke("flex cursor-default items-center justify-center py-1",n),...e,children:b.jsx(jj,{className:"h-4 w-4"})}));b3.displayName=y3.displayName;const n0=te.forwardRef(({className:n,children:e,position:t="popper",...s},i)=>b.jsx(Eee,{children:b.jsxs(f3,{ref:i,className:ke("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...s,children:[b.jsx(w3,{}),b.jsx(Cee,{className:ke("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),b.jsx(b3,{})]})}));n0.displayName=f3.displayName;const kee=te.forwardRef(({className:n,...e},t)=>b.jsx(p3,{ref:t,className:ke("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));kee.displayName=p3.displayName;const fl=te.forwardRef(({className:n,children:e,...t},s)=>b.jsxs(m3,{ref:s,className:ke("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[b.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(Tee,{children:b.jsx(Fj,{className:"h-4 w-4"})})}),b.jsx(Aee,{children:e})]}));fl.displayName=m3.displayName;const Iee=te.forwardRef(({className:n,...e},t)=>b.jsx(v3,{ref:t,className:ke("-mx-1 my-1 h-px bg-muted",n),...e}));Iee.displayName=v3.displayName;const x3=te.forwardRef(({className:n,...e},t)=>b.jsx("div",{ref:t,className:ke("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));x3.displayName="CardBase";const NS=te.forwardRef(({className:n,children:e,...t},s)=>{const i=E.useRef(null),r=o=>{if(!i.current)return;const a=i.current.getBoundingClientRect();i.current.style.setProperty("--mouse-x",`${o.clientX-a.left}px`),i.current.style.setProperty("--mouse-y",`${o.clientY-a.top}px`)};return b.jsx(x3,{ref:s,className:ke("aurora-card relative",n),onMouseMove:r,...t,children:b.jsx("div",{ref:i,className:"h-full w-full",children:e})})});NS.displayName="Card";const DS=te.forwardRef(({className:n,...e},t)=>b.jsx("div",{ref:t,className:ke("flex flex-col space-y-1.5 p-6",n),...e}));DS.displayName="CardHeader";const LS=te.forwardRef(({className:n,...e},t)=>b.jsx("h3",{ref:t,className:ke("text-2xl font-semibold leading-none tracking-tight",n),...e}));LS.displayName="CardTitle";const Dm=te.forwardRef(({className:n,...e},t)=>b.jsx("p",{ref:t,className:ke("text-sm text-muted-foreground",n),...e}));Dm.displayName="CardDescription";const OS=te.forwardRef(({className:n,...e},t)=>b.jsx("div",{ref:t,className:ke("p-6 pt-0",n),...e}));OS.displayName="CardContent";const _3=te.forwardRef(({className:n,...e},t)=>b.jsx("div",{ref:t,className:ke("flex items-center p-6 pt-0",n),...e}));_3.displayName="CardFooter";var Pee="Label",S3=E.forwardRef((n,e)=>b.jsx(me.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));S3.displayName=Pee;var E3=S3;const Ree=bI("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Zr=te.forwardRef(({className:n,...e},t)=>b.jsx(E3,{ref:t,className:ke(Ree(),n),...e}));Zr.displayName=E3.displayName;var C3=["PageUp","PageDown"],A3=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],T3={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Of="Slider",[lA,Mee,Nee]=Tv(Of),[k3,the]=nl(Of,[Nee]),[Dee,FS]=k3(Of),I3=E.forwardRef((n,e)=>{const{name:t,min:s=0,max:i=100,step:r=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[s],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:y,...g}=n,S=E.useRef(new Set),w=E.useRef(0),v=o==="horizontal"?Lee:Oee,[m=[],x]=mf({prop:u,defaultProp:c,onChange:N=>{var H;(H=[...S.current][w.current])==null||H.focus(),d(N)}}),A=E.useRef(m);function k(N){const F=Vee(m,N);M(N,F)}function P(N){M(N,w.current)}function R(){const N=A.current[w.current];m[w.current]!==N&&f(m)}function M(N,F,{commit:H}={commit:!1}){const D=Wee(r),$=Gee(Math.round((N-s)/r)*r+s,D),L=Cb($,[s,i]);x((B=[])=>{const O=Bee(B,L,F);if(zee(O,l*r)){w.current=O.indexOf(L);const j=String(O)!==String(B);return j&&H&&f(O),j?O:B}else return B})}return b.jsx(Dee,{scope:n.__scopeSlider,name:t,disabled:a,min:s,max:i,valueIndexToChangeRef:w,thumbs:S.current,values:m,orientation:o,form:y,children:b.jsx(lA.Provider,{scope:n.__scopeSlider,children:b.jsx(lA.Slot,{scope:n.__scopeSlider,children:b.jsx(v,{"aria-disabled":a,"data-disabled":a?"":void 0,...g,ref:e,onPointerDown:X(g.onPointerDown,()=>{a||(A.current=m)}),min:s,max:i,inverted:p,onSlideStart:a?void 0:k,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:R,onHomeKeyDown:()=>!a&&M(s,0,{commit:!0}),onEndKeyDown:()=>!a&&M(i,m.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:F})=>{if(!a){const $=C3.includes(N.key)||N.shiftKey&&A3.includes(N.key)?10:1,L=w.current,B=m[L],O=r*$*F;M(B+O,L,{commit:!0})}}})})})})});I3.displayName=Of;var[P3,R3]=k3(Of,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Lee=E.forwardRef((n,e)=>{const{min:t,max:s,dir:i,inverted:r,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=n,[d,f]=E.useState(null),p=Re(e,v=>f(v)),y=E.useRef(void 0),g=vS(i),S=g==="ltr",w=S&&!r||!S&&r;function _(v){const m=y.current||d.getBoundingClientRect(),x=[0,m.width],k=UI(x,w?[t,s]:[s,t]);return y.current=m,k(v-m.left)}return b.jsx(P3,{scope:n.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:b.jsx(M3,{dir:g,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const m=_(v.clientX);o==null||o(m)},onSlideMove:v=>{const m=_(v.clientX);a==null||a(m)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:v=>{const x=T3[w?"from-left":"from-right"].includes(v.key);c==null||c({event:v,direction:x?-1:1})}})})}),Oee=E.forwardRef((n,e)=>{const{min:t,max:s,inverted:i,onSlideStart:r,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=n,u=E.useRef(null),d=Re(e,u),f=E.useRef(void 0),p=!i;function y(g){const S=f.current||u.current.getBoundingClientRect(),w=[0,S.height],v=UI(w,p?[s,t]:[t,s]);return f.current=S,v(g-S.top)}return b.jsx(P3,{scope:n.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:b.jsx(M3,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const S=y(g.clientY);r==null||r(S)},onSlideMove:g=>{const S=y(g.clientY);o==null||o(S)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:g=>{const w=T3[p?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:w?-1:1})}})})}),M3=E.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:s,onSlideMove:i,onSlideEnd:r,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=n,u=FS(Of,t);return b.jsx(me.span,{...c,ref:e,onKeyDown:X(n.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):C3.concat(A3).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:X(n.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():s(d)}),onPointerMove:X(n.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:X(n.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),r(d))})})}),N3="SliderTrack",D3=E.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,i=FS(N3,t);return b.jsx(me.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:e})});D3.displayName=N3;var cA="SliderRange",L3=E.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,i=FS(cA,t),r=R3(cA,t),o=E.useRef(null),a=Re(e,o),l=i.values.length,c=i.values.map(f=>j3(f,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return b.jsx(me.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:a,style:{...n.style,[r.startEdge]:u+"%",[r.endEdge]:d+"%"}})});L3.displayName=cA;var uA="SliderThumb",O3=E.forwardRef((n,e)=>{const t=Mee(n.__scopeSlider),[s,i]=E.useState(null),r=Re(e,a=>i(a)),o=E.useMemo(()=>s?t().findIndex(a=>a.ref.current===s):-1,[t,s]);return b.jsx(Fee,{...n,ref:r,index:o})}),Fee=E.forwardRef((n,e)=>{const{__scopeSlider:t,index:s,name:i,...r}=n,o=FS(uA,t),a=R3(uA,t),[l,c]=E.useState(null),u=Re(e,_=>c(_)),d=l?o.form||!!l.closest("form"):!0,f=hB(l),p=o.values[s],y=p===void 0?0:j3(p,o.min,o.max),g=Hee(s,o.values.length),S=f==null?void 0:f[a.size],w=S?Uee(S,y,a.direction):0;return E.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),b.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${y}% + ${w}px)`},children:[b.jsx(lA.ItemSlot,{scope:n.__scopeSlider,children:b.jsx(me.span,{role:"slider","aria-label":n["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...r,ref:u,style:p===void 0?{display:"none"}:n.style,onFocus:X(n.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),d&&b.jsx(F3,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},s)]})});O3.displayName=uA;var jee="RadioBubbleInput",F3=E.forwardRef(({__scopeSlider:n,value:e,...t},s)=>{const i=E.useRef(null),r=Re(i,s),o=OH(e);return E.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),b.jsx(me.input,{style:{display:"none"},...t,ref:r,defaultValue:e})});F3.displayName=jee;function Bee(n=[],e,t){const s=[...n];return s[t]=e,s.sort((i,r)=>i-r)}function j3(n,e,t){const r=100/(t-e)*(n-e);return Cb(r,[0,100])}function Hee(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function Vee(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),s=Math.min(...t);return t.indexOf(s)}function Uee(n,e,t){const s=n/2,r=UI([0,50],[0,s]);return(s-r(e)*t)*t}function $ee(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function zee(n,e){if(e>0){const t=$ee(n);return Math.min(...t)>=e}return!0}function UI(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(n[1]-n[0]);return e[0]+s*(t-n[0])}}function Wee(n){return(String(n).split(".")[1]||"").length}function Gee(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var B3=I3,Yee=D3,Kee=L3,sD=O3;const H3=te.forwardRef(({className:n,...e},t)=>b.jsxs(B3,{ref:t,className:ke("relative flex w-full touch-none select-none items-center",n),...e,children:[b.jsx(Yee,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary/40 dark:bg-secondary/30",children:b.jsx(Kee,{className:"absolute h-full bg-primary dark:bg-accent"})}),b.jsx(sD,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:border-accent dark:bg-popover"}),e.value&&e.value.length>1&&b.jsx(sD,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:border-accent dark:bg-popover"})]}));H3.displayName=B3.displayName;const qee=["All",...new Set(Mv.map(n=>n.genre))],Xee=["All",...new Set(Mv.map(n=>n.author))],Qee=()=>{const[n,e]=E.useState(""),[t,s]=E.useState("All"),[i,r]=E.useState("All"),[o,a]=E.useState([0,200]),[l,c]=E.useState("title_asc"),u=E.useRef({}),d=E.useMemo(()=>{let p=Mv;if(n){const y=n.toLowerCase();p=p.filter(g=>g.title.toLowerCase().includes(y)||g.author.toLowerCase().includes(y)||g.collection.toLowerCase().includes(y))}return t!=="All"&&(p=p.filter(y=>y.genre===t)),i!=="All"&&(p=p.filter(y=>y.author===i)),p=p.filter(y=>y.length>=o[0]&&y.length<=o[1]),p.sort((y,g)=>l==="title_asc"?y.title.localeCompare(g.title):l==="title_desc"?g.title.localeCompare(y.title):l==="author_asc"?y.author.localeCompare(g.author):l==="author_desc"?g.author.localeCompare(y.author):0),p},[n,t,i,o,l]),f=E.useMemo(()=>{const p={};return d.forEach(y=>{const g=y.genre||"Uncategorized";p[g]||(p[g]=[]),p[g].push(y)}),p},[d]);return b.jsxs("section",{id:"library",className:"space-y-8 scroll-mt-20 pt-16 px-4",children:[b.jsxs("div",{className:"p-6 md:p-8 bg-gradient-to-r from-primary/5 via-secondary/5 to-accent/5 rounded-xl shadow-lg glassmorphism",children:[b.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:b.jsx("h1",{className:"text-4xl font-bold gradient-text",children:"Our Digital Library"})}),b.jsxs("div",{className:"relative mb-6",children:[b.jsx(Jp,{type:"text",placeholder:"Search",value:n,onChange:p=>e(p.target.value),className:"pl-10 text-lg h-12 bg-background/80 focus:ring-primary"}),b.jsx(i9,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]}),b.jsxs("div",{className:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[b.jsxs("div",{children:[b.jsx(Zr,{htmlFor:"genre-select",className:"text-sm font-medium text-foreground/80",children:"Genre"}),b.jsxs(rE,{value:t,onValueChange:s,children:[b.jsx(t0,{id:"genre-select",className:"w-full bg-background/80",children:b.jsx(oE,{placeholder:"Filter by genre"})}),b.jsx(n0,{children:qee.map(p=>b.jsx(fl,{value:p,children:p},p))})]})]}),b.jsxs("div",{children:[b.jsx(Zr,{htmlFor:"author-select",className:"text-sm font-medium text-foreground/80",children:"Author"}),b.jsxs(rE,{value:i,onValueChange:r,children:[b.jsx(t0,{id:"author-select",className:"w-full bg-background/80",children:b.jsx(oE,{placeholder:"Filter by author"})}),b.jsx(n0,{children:Xee.map(p=>b.jsx(fl,{value:p,children:p},p))})]})]}),b.jsxs("div",{className:"lg:col-span-2",children:[b.jsxs(Zr,{htmlFor:"length-slider",className:"text-sm font-medium text-foreground/80",children:["Length (pages/issues): ",o[0]," - ",o[1]]}),b.jsx(H3,{id:"length-slider",min:0,max:200,step:10,value:o,onValueChange:a,className:"mt-2"})]}),b.jsxs("div",{children:[b.jsx(Zr,{htmlFor:"sort-select",className:"text-sm font-medium text-foreground/80",children:"Sort By"}),b.jsxs(rE,{value:l,onValueChange:c,children:[b.jsx(t0,{id:"sort-select",className:"w-full bg-background/80",children:b.jsx(oE,{placeholder:"Sort by"})}),b.jsxs(n0,{children:[b.jsx(fl,{value:"title_asc",children:"Title (A-Z)"}),b.jsx(fl,{value:"title_desc",children:"Title (Z-A)"}),b.jsx(fl,{value:"author_asc",children:"Author (A-Z)"}),b.jsx(fl,{value:"author_desc",children:"Author (Z-A)"})]})]})]})]})]}),Object.entries(f).map(([p,y])=>b.jsxs("div",{className:"space-y-4",children:[b.jsx("h2",{className:"text-2xl font-semibold gradient-text",children:p}),b.jsx("div",{ref:g=>u.current[p]=g,className:"flex space-x-4 overflow-x-auto pb-2 scroll-smooth",children:y.map(g=>b.jsxs(NS,{className:"min-w-[250px] max-w-[300px] flex-shrink-0 rounded-2xl shadow-lg overflow-hidden transition-transform hover:scale-105 bg-background/80",children:[b.jsx(DS,{className:"p-0 rounded-t-2xl overflow-hidden",children:b.jsx(Us,{to:`/read/${g.id}`,className:"block",children:b.jsx("div",{className:"w-full h-48 flex items-center justify-center overflow-hidden rounded-t-2xl",children:b.jsx("img",{src:g.picture,alt:g.title,className:"object-cover h-full w-full opacity-80 group-hover:opacity-100 transition-opacity duration-300 rounded-t-2xl"})})})}),b.jsxs(OS,{className:"p-6 flex-grow",children:[b.jsx(LS,{className:"text-xl mb-2 gradient-text",children:g.title}),b.jsxs(Dm,{className:"text-sm text-muted-foreground mb-3",children:["By ",g.author]}),b.jsxs("div",{className:"flex items-center space-x-4 text-xs text-foreground/70",children:[g.type==="PDF"?b.jsxs("span",{className:"flex items-center",children:[b.jsx(Hj,{size:14,className:"mr-1 text-red-500"})," ",g.type]}):b.jsxs("span",{className:"flex items-center",children:[b.jsx(j7,{size:14,className:"mr-1 text-primary"})," ",g.type]}),b.jsxs("span",{className:"flex items-center",children:[b.jsx(U7,{size:14,className:"mr-1 text-secondary"})," ",g.length," pages"]})]})]}),b.jsx(_3,{className:"p-4 border-t border-border/50",children:b.jsx(Dm,{className:"text-xs mb-1 gradient-text",children:g.collection})})]},g.id))})]},p)),d.length===0&&b.jsxs("div",{className:"text-center py-16 px-6 bg-card/50 rounded-xl glassmorphism",children:[b.jsx(Y7,{size:48,className:"mx-auto text-primary mb-4"}),b.jsx("h2",{className:"text-2xl font-semibold text-foreground mb-2",children:"Nothing Found"}),b.jsx("p",{className:"text-lg text-muted-foreground",children:"We couldn't find any items matching your search or filter criteria."}),b.jsx("p",{className:"text-muted-foreground mt-1",children:"Please try adjusting your filters or search term."})]}),b.jsx("button",{onClick:()=>window.location.href="/comment-page",className:"fixed bottom-6 right-6 z-50 bg-gradient-to-r from-primary to-secondary text-white p-4 rounded-full shadow-xl hover:scale-105 transition-all","aria-label":"Go to Community",children:b.jsx(zj,{size:24})})]})},aE=({icon:n,value:e,label:t,color:s,delay:i})=>b.jsxs(Ae.div,{className:`p-6 rounded-xl shadow-lg text-center glassmorphism border-2 ${s} aurora-card`,initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.5,delay:i},children:[b.jsx("div",{className:`mx-auto mb-3 w-16 h-16 rounded-full flex items-center justify-center bg-gradient-to-br ${s==="border-primary"?"from-primary to-purple-400":s==="border-secondary"?"from-secondary to-blue-400":"from-accent to-green-400"} text-primary-foreground`,children:te.createElement(n,{size:32})}),b.jsx("div",{className:"text-4xl font-bold gradient-text",children:e}),b.jsx("div",{className:"text-sm text-foreground/80",children:t})]}),Jee=()=>b.jsxs("div",{className:"space-y-16 relative",children:[b.jsx("div",{className:"creative-blob w-96 h-96 bg-primary/10 top-1/4 -left-32 animate-pulse"}),b.jsx("div",{className:"creative-blob w-72 h-72 bg-secondary/10 bottom-1/4 -right-32"}),b.jsxs("section",{id:"about",className:"overflow-visible text-center py-12 md:py-16 bg-gradient-to-bl from-purple-100/30 via-transparent to-blue-100/20 rounded-xl shadow-inner scroll-mt-20",children:[b.jsx(Ae.h1,{className:"pb-1 min-h-[80px] text-5xl md:text-6xl font-extrabold mb-4 gradient-text leading-tight",initial:{opacity:0,y:-30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7,ease:"easeOut"},children:"About Kingdom Pages"}),b.jsxs(Ae.p,{className:"pt-4 text-lg md:text-xl text-foreground/90 max-w-3xl mx-auto",initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7,delay:.2,ease:"easeOut"},children:["Kingdom Pages is a product of the ",b.jsx("strong",{children:"Loveworld Sons of Ministry. "}),"The Loveworld Sons of Ministry (SOM) is a global network of pastors’ and ministers’ children committed to equipping the next generation for life and ministry. Kingdom Pages was birthed as a response to the need for more Kingdom inspired literature. It is a faith-driven digital library that brings together Christian stories, poems, and books that inspire faith, edify believers, and draws people into a personal relationship with Jesus Christ. Our mission is to make the Christian life tangible and relatable through literature that transforms hearts, renews minds, and strengthens the Kingdom of God."]})]}),b.jsxs("section",{className:"container mx-auto",children:[b.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-12 gradient-text",children:"Our Journey & Mission"}),b.jsxs("div",{className:"grid md:grid-cols-2 gap-10 items-center",children:[b.jsxs(Ae.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},className:"space-y-6 p-6 rounded-lg bg-card shadow-xl glassmorphism aurora-card",children:[b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center mb-2",children:[b.jsx(c9,{size:28,className:"mr-3 text-primary"}),b.jsx("h3",{className:"text-2xl font-semibold text-foreground",children:"Our Mission"})]}),b.jsx("p",{className:"text-foreground/80",children:"To spread the Gospel of Jesus Christ and edify believers through Spirit-inspired literature that transforms lives, nurtures faith, and builds the Kingdom of God. "})]}),b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center mb-2",children:[b.jsx(IN,{size:28,className:"mr-3 text-secondary"}),b.jsx("h3",{className:"text-2xl font-semibold text-foreground",children:"Our Vision"})]}),b.jsx("p",{className:"text-foreground/80",children:"To be the leading Christian digital library where millions worldwide encounter Jesus, grow spiritually, and are inspired through books, poems, stories, and creative expressions."})]})]}),b.jsx(Ae.div,{initial:{opacity:0,scale:.5},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.8,delay:.2},className:"w-full h-80 md:h-96 rounded-lg overflow-hidden shadow-2xl",children:b.jsx("img",{alt:"Diverse group of people reading and interacting with digital devices in a bright, hopeful setting",className:"w-full h-full object-cover",src:"https://images.unsplash.com/photo-1674858161001-b5bfc4a311dd"})})]})]}),b.jsxs("section",{className:"py-12 md:py-16 bg-card/80 rounded-xl shadow-xl glassmorphism",children:[b.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-12 gradient-text",children:"Impact by Numbers"}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 max-w-4xl mx-auto px-4",children:[b.jsx(aE,{icon:IN,value:"29+",label:"Digital Items",color:"border-primary",delay:.1}),b.jsx(aE,{icon:Wj,value:"+",label:"Active Readers",color:"border-secondary",delay:.3}),b.jsx(aE,{icon:o9,value:"3+",label:"Contributing Authors",color:"border-accent",delay:.5})]})]}),b.jsx("button",{onClick:()=>window.location.href="/comment-page",className:"fixed bottom-6 right-6 z-50 bg-gradient-to-r from-primary to-secondary text-white p-4 rounded-full shadow-xl hover:scale-105 transition-all","aria-label":"Go to Community",children:b.jsx(zj,{size:24})})]}),V3=te.forwardRef(({className:n,...e},t)=>b.jsx("textarea",{className:ke("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));V3.displayName="Textarea";const Zee=1;let lE=0;function ete(){return lE=(lE+1)%Number.MAX_VALUE,lE.toString()}const kn={state:{toasts:[]},listeners:[],getState:()=>kn.state,setState:n=>{typeof n=="function"?kn.state=n(kn.state):kn.state={...kn.state,...n},kn.listeners.forEach(e=>e(kn.state))},subscribe:n=>(kn.listeners.push(n),()=>{kn.listeners=kn.listeners.filter(e=>e!==n)})},tte=({...n})=>{const e=ete(),t=i=>kn.setState(r=>({...r,toasts:r.toasts.map(o=>o.id===e?{...o,...i}:o)})),s=()=>kn.setState(i=>({...i,toasts:i.toasts.filter(r=>r.id!==e)}));return kn.setState(i=>({...i,toasts:[{...n,id:e,dismiss:s},...i.toasts].slice(0,Zee)})),{id:e,dismiss:s,update:t}};function $I(){const[n,e]=E.useState(kn.getState());return E.useEffect(()=>kn.subscribe(s=>{e(s)}),[]),E.useEffect(()=>{const t=[];return n.toasts.forEach(s=>{if(s.duration===1/0)return;const i=setTimeout(()=>{s.dismiss()},s.duration||5e3);t.push(i)}),()=>{t.forEach(s=>clearTimeout(s))}},[n.toasts]),{toast:tte,toasts:n.toasts}}const nte=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y=function(n,e){if(!n)throw Ff(e)},Ff=function(n){return new Error("Firebase Database ("+U3.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ste=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const i=n[t++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=n[t++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const r=n[t++],o=n[t++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},zI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const r=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),s.push(t[u],t[d],t[f],t[p])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($3(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ste(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const r=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,r==null||a==null||c==null||d==null)throw new ite;const f=r<<2|a>>4;if(s.push(f),c!==64){const p=a<<4&240|c>>2;if(s.push(p),d!==64){const y=c<<6&192|d;s.push(y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ite extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z3=function(n){const e=$3(n);return zI.encodeByteArray(e,!0)},Tb=function(n){return z3(n).replace(/\./g,"")},hA=function(n){try{return zI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rte(n){return W3(void 0,n)}function W3(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!ote(t)||(n[t]=W3(n[t],e[t]));return n}function ote(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ate(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lte=()=>ate().__FIREBASE_DEFAULTS__,cte=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ute=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&hA(n[1]);return e&&JSON.parse(e)},G3=()=>{try{return nte()||lte()||cte()||ute()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hte=n=>{var e,t;return(t=(e=G3())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Y3=n=>{const e=hte(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},K3=()=>{var n;return(n=G3())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q3(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",i=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...n},a="";return[Tb(JSON.stringify(t)),Tb(JSON.stringify(o)),a].join(".")}const Zp={};function dte(){const n={prod:[],emulator:[]};for(const e of Object.keys(Zp))Zp[e]?n.emulator.push(e):n.prod.push(e);return n}function fte(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let iD=!1;function Q3(n,e){if(typeof window>"u"||typeof document>"u"||!Nv(window.location.host)||Zp[n]===e||Zp[n]||iD)return;Zp[n]=e;function t(f){return`__firebase__banner__${f}`}const s="__firebase__banner",r=dte().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{iD=!0,o()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=fte(s),p=t("text"),y=document.getElementById(p)||document.createElement("span"),g=t("learnmore"),S=document.getElementById(g)||document.createElement("a"),w=t("preprendIcon"),_=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;a(v),u(S,g);const m=c();l(_,w),v.append(_,y,S,m),document.body.appendChild(v)}r?(y.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pte(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pte())}function mte(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Z3(){return U3.NODE_ADMIN===!0}function gte(){try{return typeof indexedDB=="object"}catch{return!1}}function yte(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var r;e(((r=i.error)==null?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vte="FirebaseError";class jf extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=vte,Object.setPrototypeOf(this,jf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eV.prototype.create)}}class eV{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?wte(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jf(i,a,s)}}function wte(n,e){return n.replace(bte,(t,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const bte=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(n){return JSON.parse(n)}function Wt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=function(n){let e={},t={},s={},i="";try{const r=n.split(".");e=Lm(hA(r[0])||""),t=Lm(hA(r[1])||""),i=r[2],s=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:s,signature:i}},xte=function(n){const e=tV(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},_te=function(n){const e=tV(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function vf(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function rD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function kb(n,e,t){const s={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=e.call(t,n[i],i,n));return s}function Ib(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const i of t){if(!s.includes(i))return!1;const r=n[i],o=e[i];if(oD(r)&&oD(o)){if(!Ib(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!t.includes(i))return!1;return!0}function oD(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ste(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ete{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)s[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const f=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^r&(o^a),u=1518500249):(c=r^o^a,u=1859775393):d<60?(c=r&o|a&(r|o),u=2400959708):(c=r^o^a,u=3395469782);const f=(i<<5|i>>>27)+c+l+u+s[d]&4294967295;l=a,a=o,o=(r<<30|r>>>2)&4294967295,r=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const s=t-this.blockSize;let i=0;const r=this.buf_;let o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=s;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<t;)if(r[o]=e[i],++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let s=0;for(let i=0;i<5;i++)for(let r=24;r>=0;r-=8)e[s]=this.chain_[i]>>r&255,++s;return e}}function WI(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cte=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);if(i>=55296&&i<=56319){const r=i-55296;s++,Y(s<n.length,"Surrogate pair missing trail surrogate.");const o=n.charCodeAt(s)-56320;i=65536+(r<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},BS=function(n){let e=0;for(let t=0;t<n.length;t++){const s=n.charCodeAt(t);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(n){return n&&n._delegate?n._delegate:n}class wf{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ate=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new jS;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kte(e))try{this.getOrInitializeService({instanceIdentifier:pl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=pl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pl){return this.instances.has(e)}getOptions(e=pl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&e(r,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const i of s)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Tte(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=pl){return this.component?this.component.multipleInstances?e:pl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Tte(n){return n===pl?void 0:n}function kte(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ite{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ate(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const Pte={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Rte=Ue.INFO,Mte={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Nte=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),i=Mte[e];if(i)console[i](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nV{constructor(e){this.name=e,this._logLevel=Rte,this._logHandler=Nte,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Pte[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const Dte=(n,e)=>e.some(t=>n instanceof t);let aD,lD;function Lte(){return aD||(aD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ote(){return lD||(lD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sV=new WeakMap,dA=new WeakMap,iV=new WeakMap,cE=new WeakMap,GI=new WeakMap;function Fte(n){const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(La(n.result)),i()},o=()=>{s(n.error),i()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&sV.set(t,n)}).catch(()=>{}),GI.set(e,n),e}function jte(n){if(dA.has(n))return;const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});dA.set(n,e)}let fA={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dA.get(n);if(e==="objectStoreNames")return n.objectStoreNames||iV.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return La(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Bte(n){fA=n(fA)}function Hte(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(uE(this),e,...t);return iV.set(s,e.sort?e.sort():[e]),La(s)}:Ote().includes(n)?function(...e){return n.apply(uE(this),e),La(sV.get(this))}:function(...e){return La(n.apply(uE(this),e))}}function Vte(n){return typeof n=="function"?Hte(n):(n instanceof IDBTransaction&&jte(n),Dte(n,Lte())?new Proxy(n,fA):n)}function La(n){if(n instanceof IDBRequest)return Fte(n);if(cE.has(n))return cE.get(n);const e=Vte(n);return e!==n&&(cE.set(n,e),GI.set(e,n)),e}const uE=n=>GI.get(n);function Ute(n,e,{blocked:t,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(n,e),a=La(o);return s&&o.addEventListener("upgradeneeded",l=>{s(La(o.result),l.oldVersion,l.newVersion,La(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const $te=["get","getKey","getAll","getAllKeys","count"],zte=["put","add","delete","clear"],hE=new Map;function cD(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hE.get(e))return hE.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,i=zte.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(i||$te.includes(t)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return hE.set(e,r),r}Bte(n=>({...n,get:(e,t,s)=>cD(e,t)||n.get(e,t,s),has:(e,t)=>!!cD(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wte{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Gte(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Gte(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pA="@firebase/app",uD="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new nV("@firebase/app"),Yte="@firebase/app-compat",Kte="@firebase/analytics-compat",qte="@firebase/analytics",Xte="@firebase/app-check-compat",Qte="@firebase/app-check",Jte="@firebase/auth",Zte="@firebase/auth-compat",ene="@firebase/database",tne="@firebase/data-connect",nne="@firebase/database-compat",sne="@firebase/functions",ine="@firebase/functions-compat",rne="@firebase/installations",one="@firebase/installations-compat",ane="@firebase/messaging",lne="@firebase/messaging-compat",cne="@firebase/performance",une="@firebase/performance-compat",hne="@firebase/remote-config",dne="@firebase/remote-config-compat",fne="@firebase/storage",pne="@firebase/storage-compat",mne="@firebase/firestore",gne="@firebase/ai",yne="@firebase/firestore-compat",vne="firebase",wne="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="[DEFAULT]",bne={[pA]:"fire-core",[Yte]:"fire-core-compat",[qte]:"fire-analytics",[Kte]:"fire-analytics-compat",[Qte]:"fire-app-check",[Xte]:"fire-app-check-compat",[Jte]:"fire-auth",[Zte]:"fire-auth-compat",[ene]:"fire-rtdb",[tne]:"fire-data-connect",[nne]:"fire-rtdb-compat",[sne]:"fire-fn",[ine]:"fire-fn-compat",[rne]:"fire-iid",[one]:"fire-iid-compat",[ane]:"fire-fcm",[lne]:"fire-fcm-compat",[cne]:"fire-perf",[une]:"fire-perf-compat",[hne]:"fire-rc",[dne]:"fire-rc-compat",[fne]:"fire-gcs",[pne]:"fire-gcs-compat",[mne]:"fire-fst",[yne]:"fire-fst-compat",[gne]:"fire-vertex","fire-js":"fire-js",[vne]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new Map,xne=new Map,gA=new Map;function hD(n,e){try{n.container.addComponent(e)}catch(t){uo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Om(n){const e=n.name;if(gA.has(e))return uo.debug(`There were multiple attempts to register component ${e}.`),!1;gA.set(e,n);for(const t of Pb.values())hD(t,n);for(const t of xne.values())hD(t,n);return!0}function rV(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function oV(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ne={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oa=new eV("app","Firebase",_ne);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sne{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new wf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=wne;function lV(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:mA,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw Oa.create("bad-app-name",{appName:String(i)});if(t||(t=K3()),!t)throw Oa.create("no-options");const r=Pb.get(i);if(r){if(Ib(t,r.options)&&Ib(s,r.config))return r;throw Oa.create("duplicate-app",{appName:i})}const o=new Ite(i);for(const l of gA.values())o.addComponent(l);const a=new Sne(t,s,o);return Pb.set(i,a),a}function cV(n=mA){const e=Pb.get(n);if(!e&&n===mA&&K3())return lV();if(!e)throw Oa.create("no-app",{appName:n});return e}function Fa(n,e,t){let s=bne[n]??n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),r=e.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),uo.warn(o.join(" "));return}Om(new wf(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ene="firebase-heartbeat-database",Cne=1,Fm="firebase-heartbeat-store";let dE=null;function uV(){return dE||(dE=Ute(Ene,Cne,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Fm)}catch(t){console.warn(t)}}}}).catch(n=>{throw Oa.create("idb-open",{originalErrorMessage:n.message})})),dE}async function Ane(n){try{const t=(await uV()).transaction(Fm),s=await t.objectStore(Fm).get(hV(n));return await t.done,s}catch(e){if(e instanceof jf)uo.warn(e.message);else{const t=Oa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});uo.warn(t.message)}}}async function dD(n,e){try{const s=(await uV()).transaction(Fm,"readwrite");await s.objectStore(Fm).put(e,hV(n)),await s.done}catch(t){if(t instanceof jf)uo.warn(t.message);else{const s=Oa.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});uo.warn(s.message)}}}function hV(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tne=1024,kne=30;class Ine{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Rne(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fD();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>kne){const o=Mne(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){uo.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=fD(),{heartbeatsToSend:s,unsentEntries:i}=Pne(this._heartbeatsCache.heartbeats),r=Tb(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return uo.warn(t),""}}}function fD(){return new Date().toISOString().substring(0,10)}function Pne(n,e=Tne){const t=[];let s=n.slice();for(const i of n){const r=t.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),pD(t)>e){r.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),pD(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Rne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gte()?yte().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ane(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return dD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return dD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function pD(n){return Tb(JSON.stringify({version:2,heartbeats:n})).length}function Mne(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nne(n){Om(new wf("platform-logger",e=>new Wte(e),"PRIVATE")),Om(new wf("heartbeat",e=>new Ine(e),"PRIVATE")),Fa(pA,uD,n),Fa(pA,uD,"esm2020"),Fa("fire-js","")}Nne("");var Dne="firebase",Lne="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fa(Dne,Lne,"app");const mD="@firebase/database",gD="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dV="";function One(n){dV=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fne{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Wt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Lm(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jne{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return yo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Fne(e)}}catch{}return new jne},Al=fV("localStorage"),yA=fV("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new nV("@firebase/database"),Bne=function(){let n=1;return function(){return n++}}(),pV=function(n){const e=Cte(n),t=new Ete;t.update(e);const s=t.digest();return zI.encodeByteArray(s)},Dv=function(...n){let e="";for(let t=0;t<n.length;t++){const s=n[t];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Dv.apply(null,s):typeof s=="object"?e+=Wt(s):e+=s,e+=" "}return e};let Zc=null,yD=!0;const Hne=function(n,e){Y(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(gh.logLevel=Ue.VERBOSE,Zc=gh.log.bind(gh),e&&yA.set("logging_enabled",!0)):typeof n=="function"?Zc=n:(Zc=null,yA.remove("logging_enabled"))},gn=function(...n){if(yD===!0&&(yD=!1,Zc===null&&yA.get("logging_enabled")===!0&&Hne(!0)),Zc){const e=Dv.apply(null,n);Zc(e)}},Lv=function(n){return function(...e){gn(n,...e)}},vA=function(...n){const e="FIREBASE INTERNAL ERROR: "+Dv(...n);gh.error(e)},ho=function(...n){const e=`FIREBASE FATAL ERROR: ${Dv(...n)}`;throw gh.error(e),new Error(e)},qn=function(...n){const e="FIREBASE WARNING: "+Dv(...n);gh.warn(e)},Vne=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&qn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},mV=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Une=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},bf="[MIN_NAME]",uu="[MAX_NAME]",Bf=function(n,e){if(n===e)return 0;if(n===bf||e===uu)return-1;if(e===bf||n===uu)return 1;{const t=vD(n),s=vD(e);return t!==null?s!==null?t-s===0?n.length-e.length:t-s:-1:s!==null?1:n<e?-1:1}},$ne=function(n,e){return n===e?0:n<e?-1:1},tp=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Wt(e))},YI=function(n){if(typeof n!="object"||n===null)return Wt(n);const e=[];for(const s in n)e.push(s);e.sort();let t="{";for(let s=0;s<e.length;s++)s!==0&&(t+=","),t+=Wt(e[s]),t+=":",t+=YI(n[e[s]]);return t+="}",t},gV=function(n,e){const t=n.length;if(t<=e)return[n];const s=[];for(let i=0;i<t;i+=e)i+e>t?s.push(n.substring(i,t)):s.push(n.substring(i,i+e));return s};function Qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const yV=function(n){Y(!mV(n),"Invalid JSON number");const e=11,t=52,s=(1<<e-1)-1;let i,r,o,a,l;n===0?(r=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),s),r=a+s,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(r=0,o=Math.round(n/Math.pow(2,1-s-t))));const c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},zne=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Wne=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Gne(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const s=new Error(n+" at "+e._path.toString()+": "+t);return s.code=n.toUpperCase(),s}const Yne=new RegExp("^-?(0*)\\d{1,10}$"),Kne=-2147483648,qne=2147483647,vD=function(n){if(Yne.test(n)){const e=Number(n);if(e>=Kne&&e<=qne)return e}return null},Hf=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw qn("Exception was thrown by user callback.",t),e},Math.floor(0))}},Xne=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},em=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qne{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,oV(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)==null||t.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){qn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jne{constructor(e,t,s){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(gn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qn(e)}}class yh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}yh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="5",vV="v",wV="s",bV="r",xV="f",_V=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,SV="ls",EV="p",wA="ac",CV="websocket",AV="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,t,s,i,r=!1,o="",a=!1,l=!1,c=null){this.secure=t,this.namespace=s,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Al.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Al.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Zne(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function kV(n,e,t){Y(typeof e=="string","typeof type must == string"),Y(typeof t=="object","typeof params must == object");let s;if(e===CV)s=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===AV)s=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Zne(n)&&(t.ns=n.namespace);const i=[];return Qn(t,(r,o)=>{i.push(r+"="+o)}),s+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ese{constructor(){this.counters_={}}incrementCounter(e,t=1){yo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return rte(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE={},pE={};function qI(n){const e=n.toString();return fE[e]||(fE[e]=new ese),fE[e]}function tse(n,e){const t=n.toString();return pE[t]||(pE[t]=e()),pE[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nse{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<s.length;++i)s[i]&&Hf(()=>{this.onMessage_(s[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="start",sse="close",ise="pLPCommand",rse="pRTLPCB",IV="id",PV="pw",RV="ser",ose="cb",ase="seg",lse="ts",cse="d",use="dframe",MV=1870,NV=30,hse=MV-NV,dse=25e3,fse=3e4;class ih{constructor(e,t,s,i,r,o,a){this.connId=e,this.repoInfo=t,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lv(e),this.stats_=qI(t),this.urlFn=l=>(this.appCheckToken&&(l[wA]=this.appCheckToken),kV(t,AV,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nse(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(fse)),Une(()=>{if(this.isClosed_)return;this.scriptTagHolder=new XI((...r)=>{const[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===wD)this.id=a,this.password=l;else if(o===sse)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[wD]="t",s[RV]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[ose]=this.scriptTagHolder.uniqueCallbackIdentifier),s[vV]=KI,this.transportSessionId&&(s[wV]=this.transportSessionId),this.lastSessionId&&(s[SV]=this.lastSessionId),this.applicationId&&(s[EV]=this.applicationId),this.appCheckToken&&(s[wA]=this.appCheckToken),typeof location<"u"&&location.hostname&&_V.test(location.hostname)&&(s[bV]=xV);const i=this.urlFn(s);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ih.forceAllow_=!0}static forceDisallow(){ih.forceDisallow_=!0}static isAvailable(){return ih.forceAllow_?!0:!ih.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!zne()&&!Wne()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Wt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=z3(t),i=gV(s,hse);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const s={};s[use]="t",s[IV]=e,s[PV]=t,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Wt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class XI{constructor(e,t,s,i){this.onDisconnect=s,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Bne(),window[ise+this.uniqueCallbackIdentifier]=e,window[rse+this.uniqueCallbackIdentifier]=t,this.myIFrame=XI.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){gn("frame writing exception"),a.stack&&gn(a.stack),gn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||gn("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[IV]=this.myID,e[PV]=this.myPW,e[RV]=this.currentSerial;let t=this.urlFn(e),s="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+NV+s.length<=MV;){const o=this.pendingSegs.shift();s=s+"&"+ase+i+"="+o.seg+"&"+lse+i+"="+o.ts+"&"+cse+i+"="+o.d,i++}return t=t+s,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,s){this.pendingSegs.push({seg:e,ts:t,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const s=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(s,Math.floor(dse)),r=()=>{clearTimeout(i),s()};this.addTag(e,r)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const i=s.readyState;(!i||i==="loaded"||i==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),t())},s.onerror=()=>{gn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pse=16384,mse=45e3;let Rb=null;typeof MozWebSocket<"u"?Rb=MozWebSocket:typeof WebSocket<"u"&&(Rb=WebSocket);class mi{constructor(e,t,s,i,r,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lv(this.connId),this.stats_=qI(t),this.connURL=mi.connectionURL_(t,o,a,i,s),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,s,i,r){const o={};return o[vV]=KI,typeof location<"u"&&location.hostname&&_V.test(location.hostname)&&(o[bV]=xV),t&&(o[wV]=t),s&&(o[SV]=s),i&&(o[wA]=i),r&&(o[EV]=r),kV(e,CV,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Al.set("previous_websocket_failure",!0);try{let s;Z3(),this.mySock=new Rb(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){mi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(t);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Rb!==null&&!mi.forceDisallow_}static previouslyFailed(){return Al.isInMemoryStorage||Al.get("previous_websocket_failure")===!0}markConnectionHealthy(){Al.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const s=Lm(t);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Y(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const s=this.extractFrameCount_(t);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const t=Wt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=gV(t,pse);s.length>1&&this.sendString_(String(s.length));for(let i=0;i<s.length;i++)this.sendString_(s[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(mse))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}mi.responsesRequiredToBeHealthy=2;mi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{static get ALL_TRANSPORTS(){return[ih,mi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=mi&&mi.isAvailable();let s=t&&!mi.previouslyFailed();if(e.webSocketOnly&&(t||qn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[mi];else{const i=this.transports_=[];for(const r of jm.ALL_TRANSPORTS)r&&r.isAvailable()&&i.push(r);jm.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}jm.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gse=6e4,yse=5e3,vse=10*1024,wse=100*1024,mE="t",bD="d",bse="s",xD="r",xse="e",_D="o",SD="a",ED="n",CD="p",_se="h";class Sse{constructor(e,t,s,i,r,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=s,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lv("c:"+this.id+":"),this.transportManager_=new jm(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,s)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=em(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>wse?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>vse?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(mE in e){const t=e[mE];t===SD?this.upgradeIfSecondaryHealthy_():t===xD?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===_D&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=tp("t",e),s=tp("d",e);if(t==="c")this.onSecondaryControl_(s);else if(t==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:CD,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:SD,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ED,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=tp("t",e),s=tp("d",e);t==="c"?this.onControl_(s):t==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=tp(mE,e);if(bD in e){const s=e[bD];if(t===_se){const i={...s};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===ED){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===bse?this.onConnectionShutdown_(s):t===xD?this.onReset_(s):t===xse?vA("Server Error: "+s):t===_D?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vA("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,s=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),KI!==s&&qn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,s),em(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(gse))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):em(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(yse))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:CD,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Al.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{put(e,t,s,i){}merge(e,t,s,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,s){}onDisconnectMerge(e,t,s){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.allowedEvents_=e,this.listeners_={},Y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let i=0;i<s.length;i++)s[i].callback.apply(s[i].context,t)}}on(e,t,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:s});const i=this.getInitialEvent(e);i&&t.apply(s,i)}off(e,t,s){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===t&&(!s||s===i[r].context)){i.splice(r,1);return}}validateEventType_(e){Y(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb extends LV{static getInstance(){return new Mb}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!J3()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Y(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=32,TD=768;class Ve{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let s=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[s]=this.pieces_[i],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ne(){return new Ve("")}function we(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Wa(n){return n.pieces_.length-n.pieceNum_}function $e(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ve(n.pieces_,e)}function OV(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Ese(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function FV(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function jV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ve(e,0)}function Rt(n,e){const t=[];for(let s=n.pieceNum_;s<n.pieces_.length;s++)t.push(n.pieces_[s]);if(e instanceof Ve)for(let s=e.pieceNum_;s<e.pieces_.length;s++)t.push(e.pieces_[s]);else{const s=e.split("/");for(let i=0;i<s.length;i++)s[i].length>0&&t.push(s[i])}return new Ve(t,0)}function xe(n){return n.pieceNum_>=n.pieces_.length}function zn(n,e){const t=we(n),s=we(e);if(t===null)return e;if(t===s)return zn($e(n),$e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function QI(n,e){if(Wa(n)!==Wa(e))return!1;for(let t=n.pieceNum_,s=e.pieceNum_;t<=n.pieces_.length;t++,s++)if(n.pieces_[t]!==e.pieces_[s])return!1;return!0}function gi(n,e){let t=n.pieceNum_,s=e.pieceNum_;if(Wa(n)>Wa(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[s])return!1;++t,++s}return!0}class Cse{constructor(e,t){this.errorPrefix_=t,this.parts_=FV(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=BS(this.parts_[s]);BV(this)}}function Ase(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=BS(e),BV(n)}function Tse(n){const e=n.parts_.pop();n.byteLength_-=BS(e),n.parts_.length>0&&(n.byteLength_-=1)}function BV(n){if(n.byteLength_>TD)throw new Error(n.errorPrefix_+"has a key path longer than "+TD+" bytes ("+n.byteLength_+").");if(n.parts_.length>AD)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+AD+") or object contains a cycle "+ml(n))}function ml(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI extends LV{static getInstance(){return new JI}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return Y(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=1e3,kse=60*5*1e3,kD=30*1e3,Ise=1.3,Pse=3e4,Rse="server_kill",ID=3;class so extends DV{constructor(e,t,s,i,r,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=s,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=so.nextPersistentConnectionId_++,this.log_=Lv("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=np,this.maxReconnectDelay_=kse,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Z3())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");JI.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Mb.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,s){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(Wt(r)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),s&&(this.requestCBHash_[i]=s)}get(e){this.initConnection_();const t=new jS,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?t.resolve(a):t.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,s,i){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:s};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(s)})}sendListen_(e){const t=e.query,s=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+s+" for "+i);const r={p:s},o="q";e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,a=>{const l=a.d,c=a.s;so.warnOnListenWarnings_(l,t),(this.listens.get(s)&&this.listens.get(s).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(s,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&yo(e,"w")){const s=vf(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const i='".indexOn": "'+t._queryParams.getIndex().toString()+'"',r=t._path.toString();qn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||_te(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=kD)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=xte(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(t,s,i=>{const r=i.s,o=i.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,s=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,s)})}unlisten(e,t){const s=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+i),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,i)&&this.connected_&&this.sendUnlisten_(s,i,e._queryObject,t)}sendUnlisten_(e,t,s,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e},o="n";i&&(r.q=s,r.t=i),this.sendRequest(o,r)}onDisconnectPut(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:s})}onDisconnectMerge(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:s})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,s,i){const r={p:t,d:s};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,t,s,i){this.putInternal("p",e,t,s,i)}merge(e,t,s,i){this.putInternal("m",e,t,s,i)}putInternal(e,t,s,i,r){this.initConnection_();const o={p:t,d:s};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,s,r=>{this.log_(t+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(r.s,r.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Wt(e));const t=e.r,s=this.requestCBHash_[t];s&&(delete this.requestCBHash_[t],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):vA("Unrecognized action received from server: "+Wt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=np,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=np,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Pse&&(this.reconnectDelay_=np),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ise)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+so.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},c=function(d){Y(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?gn("getToken() completed but was canceled"):(gn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new Sse(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,s,p=>{qn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(Rse)},r))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&qn(d),l())}}}interrupt(e){gn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){gn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],rD(this.interruptReasons_)&&(this.reconnectDelay_=np,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let s;t?s=t.map(r=>YI(r)).join("$"):s="default";const i=this.removeListen_(e,s);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const s=new Ve(e).toString();let i;if(this.listens.has(s)){const r=this.listens.get(s);i=r.get(t),r.delete(t),r.size===0&&this.listens.delete(s)}else i=void 0;return i}onAuthRevoked_(e,t){gn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ID&&(this.reconnectDelay_=kD,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){gn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ID&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+dV.replace(/\./g,"-")]=1,J3()?e["framework.cordova"]=1:mte()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Mb.getInstance().currentlyOnline();return rD(this.interruptReasons_)&&e}}so.nextPersistentConnectionId_=0;so.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new be(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const s=new be(bf,e),i=new be(bf,t);return this.compare(s,i)!==0}minPost(){return be.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ew;class HV extends HS{static get __EMPTY_NODE(){return Ew}static set __EMPTY_NODE(e){Ew=e}compare(e,t){return Bf(e.name,t.name)}isDefinedOn(e){throw Ff("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return be.MIN}maxPost(){return new be(uu,Ew)}makePost(e,t){return Y(typeof e=="string","KeyIndex indexValue must always be a string."),new be(e,Ew)}toString(){return".key"}}const vh=new HV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t,s,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?s(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class zt{constructor(e,t,s,i,r){this.key=e,this.value=t,this.color=s??zt.RED,this.left=i??Wn.EMPTY_NODE,this.right=r??Wn.EMPTY_NODE}copy(e,t,s,i,r){return new zt(e??this.key,t??this.value,s??this.color,i??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let i=this;const r=s(e,i.key);return r<0?i=i.copy(null,null,null,i.left.insert(e,t,s),null):r===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,s)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let s,i;if(s=this,t(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),t(e,s.key)===0){if(s.right.isEmpty())return Wn.EMPTY_NODE;i=s.right.min_(),s=s.copy(i.key,i.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}zt.RED=!0;zt.BLACK=!1;class Mse{copy(e,t,s,i,r){return this}insert(e,t,s){return new zt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Wn{constructor(e,t=Wn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Wn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,zt.BLACK,null,null))}remove(e){return new Wn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,zt.BLACK,null,null))}get(e){let t,s=this.root_;for(;!s.isEmpty();){if(t=this.comparator_(e,s.key),t===0)return s.value;t<0?s=s.left:t>0&&(s=s.right)}return null}getPredecessorKey(e){let t,s=this.root_,i=null;for(;!s.isEmpty();)if(t=this.comparator_(e,s.key),t===0){if(s.left.isEmpty())return i?i.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else t<0?s=s.left:t>0&&(i=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Cw(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Cw(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Cw(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Cw(this.root_,null,this.comparator_,!0,e)}}Wn.EMPTY_NODE=new Mse;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nse(n,e){return Bf(n.name,e.name)}function ZI(n,e){return Bf(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bA;function Dse(n){bA=n}const VV=function(n){return typeof n=="number"?"number:"+yV(n):"string:"+n},UV=function(n){if(n.isLeafNode()){const e=n.val();Y(typeof e=="string"||typeof e=="number"||typeof e=="object"&&yo(e,".sv"),"Priority must be a string or number.")}else Y(n===bA||n.isEmpty(),"priority of unexpected type.");Y(n===bA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PD;class Ut{static set __childrenNodeConstructor(e){PD=e}static get __childrenNodeConstructor(){return PD}constructor(e,t=Ut.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),UV(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ut(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ut.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return xe(e)?this:we(e)===".priority"?this.priorityNode_:Ut.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Ut.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const s=we(e);return s===null?t:t.isEmpty()&&s!==".priority"?this:(Y(s!==".priority"||Wa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Ut.__childrenNodeConstructor.EMPTY_NODE.updateChild($e(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+VV(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=yV(this.value_):e+=this.value_,this.lazyHash_=pV(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ut.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ut.__childrenNodeConstructor?-1:(Y(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,s=typeof this.value_,i=Ut.VALUE_TYPE_ORDER.indexOf(t),r=Ut.VALUE_TYPE_ORDER.indexOf(s);return Y(i>=0,"Unknown leaf type: "+t),Y(r>=0,"Unknown leaf type: "+s),i===r?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Ut.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $V,zV;function Lse(n){$V=n}function Ose(n){zV=n}class Fse extends HS{compare(e,t){const s=e.node.getPriority(),i=t.node.getPriority(),r=s.compareTo(i);return r===0?Bf(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return be.MIN}maxPost(){return new be(uu,new Ut("[PRIORITY-POST]",zV))}makePost(e,t){const s=$V(e);return new be(t,new Ut("[PRIORITY-POST]",s))}toString(){return".priority"}}const dt=new Fse;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jse=Math.log(2);class Bse{constructor(e){const t=r=>parseInt(Math.log(r)/jse,10),s=r=>parseInt(Array(r+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const i=s(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Nb=function(n,e,t,s){n.sort(e);const i=function(l,c){const u=c-l;let d,f;if(u===0)return null;if(u===1)return d=n[l],f=t?t(d):d,new zt(f,d.node,zt.BLACK,null,null);{const p=parseInt(u/2,10)+l,y=i(l,p),g=i(p+1,c);return d=n[p],f=t?t(d):d,new zt(f,d.node,zt.BLACK,y,g)}},r=function(l){let c=null,u=null,d=n.length;const f=function(y,g){const S=d-y,w=d;d-=y;const _=i(S+1,w),v=n[S],m=t?t(v):v;p(new zt(m,v.node,g,null,_))},p=function(y){c?(c.left=y,c=y):(u=y,c=y)};for(let y=0;y<l.count;++y){const g=l.nextBitIsOne(),S=Math.pow(2,l.count-(y+1));g?f(S,zt.BLACK):(f(S,zt.BLACK),f(S,zt.RED))}return u},o=new Bse(n.length),a=r(o);return new Wn(s||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gE;const Nu={};class eo{static get Default(){return Y(Nu&&dt,"ChildrenNode.ts has not been loaded"),gE=gE||new eo({".priority":Nu},{".priority":dt}),gE}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=vf(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Wn?t:null}hasIndex(e){return yo(this.indexSet_,e.toString())}addIndex(e,t){Y(e!==vh,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let i=!1;const r=t.getIterator(be.Wrap);let o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),s.push(o),o=r.getNext();let a;i?a=Nb(s,e.getCompare()):a=Nu;const l=e.toString(),c={...this.indexSet_};c[l]=e;const u={...this.indexes_};return u[l]=a,new eo(u,c)}addToIndexes(e,t){const s=kb(this.indexes_,(i,r)=>{const o=vf(this.indexSet_,r);if(Y(o,"Missing index implementation for "+r),i===Nu)if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(be.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Nb(a,o.getCompare())}else return Nu;else{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new be(e.name,a))),l.insert(e,e.node)}});return new eo(s,this.indexSet_)}removeFromIndexes(e,t){const s=kb(this.indexes_,i=>{if(i===Nu)return i;{const r=t.get(e.name);return r?i.remove(new be(e.name,r)):i}});return new eo(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sp;class re{static get EMPTY_NODE(){return sp||(sp=new re(new Wn(ZI),null,eo.Default))}constructor(e,t,s){this.children_=e,this.priorityNode_=t,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&UV(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||sp}updatePriority(e){return this.children_.isEmpty()?this:new re(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?sp:t}}getChild(e){const t=we(e);return t===null?this:this.getImmediateChild(t).getChild($e(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(Y(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const s=new be(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(s,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(s,this.children_));const o=i.isEmpty()?sp:this.priorityNode_;return new re(i,o,r)}}updateChild(e,t){const s=we(e);if(s===null)return t;{Y(we(e)!==".priority"||Wa(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(s).updateChild($e(e),t);return this.updateImmediateChild(s,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let s=0,i=0,r=!0;if(this.forEachChild(dt,(o,a)=>{t[o]=a.val(e),s++,r&&re.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):r=!1}),!e&&r&&i<2*s){const o=[];for(const a in t)o[a]=t[a];return o}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+VV(this.getPriority().val())+":"),this.forEachChild(dt,(t,s)=>{const i=s.hash();i!==""&&(e+=":"+t+":"+i)}),this.lazyHash_=e===""?"":pV(e)}return this.lazyHash_}getPredecessorChildName(e,t,s){const i=this.resolveIndex_(s);if(i){const r=i.getPredecessorKey(new be(e,t));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new be(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new be(t,this.children_.get(t)):null}forEachChild(e,t){const s=this.resolveIndex_(e);return s?s.inorderTraversal(i=>t(i.name,i.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,be.Wrap);let r=i.peek();for(;r!=null&&t.compare(r,e)<0;)i.getNext(),r=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,be.Wrap);let r=i.peek();for(;r!=null&&t.compare(r,e)>0;)i.getNext(),r=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ov?-1:0}withIndex(e){if(e===vh||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new re(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===vh||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const s=this.getIterator(dt),i=t.getIterator(dt);let r=s.getNext(),o=i.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=s.getNext(),o=i.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===vh?null:this.indexMap_.get(e.toString())}}re.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Hse extends re{constructor(){super(new Wn(ZI),re.EMPTY_NODE,eo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return re.EMPTY_NODE}isEmpty(){return!1}}const Ov=new Hse;Object.defineProperties(be,{MIN:{value:new be(bf,re.EMPTY_NODE)},MAX:{value:new be(uu,Ov)}});HV.__EMPTY_NODE=re.EMPTY_NODE;Ut.__childrenNodeConstructor=re;Dse(Ov);Ose(Ov);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vse=!0;function nn(n,e=null){if(n===null)return re.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),Y(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Ut(t,nn(e))}if(!(n instanceof Array)&&Vse){const t=[];let s=!1;if(Qn(n,(o,a)=>{if(o.substring(0,1)!=="."){const l=nn(a);l.isEmpty()||(s=s||!l.getPriority().isEmpty(),t.push(new be(o,l)))}}),t.length===0)return re.EMPTY_NODE;const r=Nb(t,Nse,o=>o.name,ZI);if(s){const o=Nb(t,dt.getCompare());return new re(r,nn(e),new eo({".priority":o},{".priority":dt}))}else return new re(r,nn(e),eo.Default)}else{let t=re.EMPTY_NODE;return Qn(n,(s,i)=>{if(yo(n,s)&&s.substring(0,1)!=="."){const r=nn(i);(r.isLeafNode()||!r.isEmpty())&&(t=t.updateImmediateChild(s,r))}}),t.updatePriority(nn(e))}}Lse(nn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Use extends HS{constructor(e){super(),this.indexPath_=e,Y(!xe(e)&&we(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const s=this.extractChild(e.node),i=this.extractChild(t.node),r=s.compareTo(i);return r===0?Bf(e.name,t.name):r}makePost(e,t){const s=nn(e),i=re.EMPTY_NODE.updateChild(this.indexPath_,s);return new be(t,i)}maxPost(){const e=re.EMPTY_NODE.updateChild(this.indexPath_,Ov);return new be(uu,e)}toString(){return FV(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $se extends HS{compare(e,t){const s=e.node.compareTo(t.node);return s===0?Bf(e.name,t.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return be.MIN}maxPost(){return be.MAX}makePost(e,t){const s=nn(e);return new be(t,s)}toString(){return".value"}}const zse=new $se;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(n){return{type:"value",snapshotNode:n}}function xf(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Bm(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Hm(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Wse(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.index_=e}updateChild(e,t,s,i,r,o){Y(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(s.getChild(i))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(t)?o.trackChildChange(Bm(t,a)):Y(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(xf(t,s)):o.trackChildChange(Hm(t,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(t,s).withIndex(this.index_)}updateFullNode(e,t,s){return s!=null&&(e.isLeafNode()||e.forEachChild(dt,(i,r)=>{t.hasChild(i)||s.trackChildChange(Bm(i,r))}),t.isLeafNode()||t.forEachChild(dt,(i,r)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(r)||s.trackChildChange(Hm(i,r,o))}else s.trackChildChange(xf(i,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?re.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this.indexedFilter_=new eP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Vm.getStartPost_(e),this.endPost_=Vm.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&s}updateChild(e,t,s,i,r,o){return this.matches(new be(t,s))||(s=re.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,s,i,r,o)}updateFullNode(e,t,s){t.isLeafNode()&&(t=re.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(re.EMPTY_NODE);const r=this;return t.forEachChild(dt,(o,a)=>{r.matches(new be(o,a))||(i=i.updateImmediateChild(o,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,s)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gse{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=t=>{const s=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Vm(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,s,i,r,o){return this.rangedFilter_.matches(new be(t,s))||(s=re.EMPTY_NODE),e.getImmediateChild(t).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,s,i,r,o):this.fullLimitUpdateChild_(e,t,s,r,o)}updateFullNode(e,t,s){let i;if(t.isLeafNode()||t.isEmpty())i=re.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=re.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(re.EMPTY_NODE);let r;this.reverse_?r=i.getReverseIterator(this.index_):r=i.getIterator(this.index_);let o=0;for(;r.hasNext();){const a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,re.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,s)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,s,i,r){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,p)=>d(p,f)}else o=this.index_.getCompare();const a=e;Y(a.numChildren()===this.limit_,"");const l=new be(t,s),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let f=i.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,l);if(u&&!s.isEmpty()&&p>=0)return r!=null&&r.trackChildChange(Hm(t,s,d)),a.updateImmediateChild(t,s);{r!=null&&r.trackChildChange(Bm(t,d));const g=a.updateImmediateChild(t,re.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(r!=null&&r.trackChildChange(xf(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}}else return s.isEmpty()?e:u&&o(c,l)>=0?(r!=null&&(r.trackChildChange(Bm(c.name,c.node)),r.trackChildChange(xf(t,s))),a.updateImmediateChild(t,s).updateImmediateChild(c.name,re.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=dt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bf}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===dt}copy(){const e=new tP;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Yse(n){return n.loadsAllData()?new eP(n.getIndex()):n.hasLimit()?new Gse(n):new Vm(n)}function RD(n){const e={};if(n.isDefault())return e;let t;if(n.index_===dt?t="$priority":n.index_===zse?t="$value":n.index_===vh?t="$key":(Y(n.index_ instanceof Use,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Wt(t),n.startSet_){const s=n.startAfterSet_?"startAfter":"startAt";e[s]=Wt(n.indexStartValue_),n.startNameSet_&&(e[s]+=","+Wt(n.indexStartName_))}if(n.endSet_){const s=n.endBeforeSet_?"endBefore":"endAt";e[s]=Wt(n.indexEndValue_),n.endNameSet_&&(e[s]+=","+Wt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function MD(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==dt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db extends DV{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(Y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,s,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=s,this.appCheckTokenProvider_=i,this.log_=Lv("p:rest:"),this.listens_={}}listen(e,t,s,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=Db.getListenId_(e,s),a={};this.listens_[o]=a;const l=RD(e._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(r,d,!1,s),vf(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,t){const s=Db.getListenId_(e,t);delete this.listens_[s]}get(e){const t=RD(e._queryParams),s=e._path.toString(),i=new jS;return this.restRequest_(s+".json",t,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(s,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},s){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ste(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Lm(a.responseText)}catch{qn("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&qn("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kse{constructor(){this.rootNode_=re.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(){return{value:null,children:new Map}}function GV(n,e,t){if(xe(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const s=we(e);n.children.has(s)||n.children.set(s,Lb());const i=n.children.get(s);e=$e(e),GV(i,e,t)}}function xA(n,e,t){n.value!==null?t(e,n.value):qse(n,(s,i)=>{const r=new Ve(e.toString()+"/"+s);xA(i,r,t)})}function qse(n,e){n.children.forEach((t,s)=>{e(s,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xse{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&Qn(this.last_,(s,i)=>{t[s]=t[s]-i}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=10*1e3,Qse=30*1e3,Jse=5*60*1e3;class Zse{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Xse(e);const s=ND+(Qse-ND)*Math.random();em(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),t={};let s=!1;Qn(e,(i,r)=>{r>0&&yo(this.statsToReport_,i)&&(t[i]=r,s=!0)}),s&&this.server_.reportStats(t),em(this.reportStats_.bind(this),Math.floor(Math.random()*2*Jse))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(yi||(yi={}));function YV(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function nP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function sP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,t,s){this.path=e,this.affectedTree=t,this.revert=s,this.type=yi.ACK_USER_WRITE,this.source=YV()}operationForChild(e){if(xe(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ve(e));return new Ob(Ne(),t,this.revert)}}else return Y(we(this.path)===e,"operationForChild called for unrelated child."),new Ob($e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t){this.source=e,this.path=t,this.type=yi.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new Um(this.source,Ne()):new Um(this.source,$e(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t,s){this.source=e,this.path=t,this.snap=s,this.type=yi.OVERWRITE}operationForChild(e){return xe(this.path)?new hu(this.source,Ne(),this.snap.getImmediateChild(e)):new hu(this.source,$e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,t,s){this.source=e,this.path=t,this.children=s,this.type=yi.MERGE}operationForChild(e){if(xe(this.path)){const t=this.children.subtree(new Ve(e));return t.isEmpty()?null:t.value?new hu(this.source,Ne(),t.value):new $m(this.source,Ne(),t)}else return Y(we(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $m(this.source,$e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t,s){this.node_=e,this.fullyInitialized_=t,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xe(e))return this.isFullyInitialized()&&!this.filtered_;const t=we(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function tie(n,e,t,s){const i=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(Wse(o.childName,o.snapshotNode))}),ip(n,i,"child_removed",e,s,t),ip(n,i,"child_added",e,s,t),ip(n,i,"child_moved",r,s,t),ip(n,i,"child_changed",e,s,t),ip(n,i,"value",e,s,t),i}function ip(n,e,t,s,i,r){const o=s.filter(a=>a.type===t);o.sort((a,l)=>sie(n,a,l)),o.forEach(a=>{const l=nie(n,a,r);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function nie(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function sie(n,e,t){if(e.childName==null||t.childName==null)throw Ff("Should only compare child_ events.");const s=new be(e.childName,e.snapshotNode),i=new be(t.childName,t.snapshotNode);return n.index_.compare(s,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(n,e){return{eventCache:n,serverCache:e}}function tm(n,e,t,s){return VS(new du(e,t,s),n.serverCache)}function KV(n,e,t,s){return VS(n.eventCache,new du(e,t,s))}function _A(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function fu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yE;const iie=()=>(yE||(yE=new Wn($ne)),yE);class qe{static fromObject(e){let t=new qe(null);return Qn(e,(s,i)=>{t=t.set(new Ve(s),i)}),t}constructor(e,t=iie()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ne(),value:this.value};if(xe(e))return null;{const s=we(e),i=this.children.get(s);if(i!==null){const r=i.findRootMostMatchingPathAndValue($e(e),t);return r!=null?{path:Rt(new Ve(s),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xe(e))return this;{const t=we(e),s=this.children.get(t);return s!==null?s.subtree($e(e)):new qe(null)}}set(e,t){if(xe(e))return new qe(t,this.children);{const s=we(e),r=(this.children.get(s)||new qe(null)).set($e(e),t),o=this.children.insert(s,r);return new qe(this.value,o)}}remove(e){if(xe(e))return this.children.isEmpty()?new qe(null):new qe(null,this.children);{const t=we(e),s=this.children.get(t);if(s){const i=s.remove($e(e));let r;return i.isEmpty()?r=this.children.remove(t):r=this.children.insert(t,i),this.value===null&&r.isEmpty()?new qe(null):new qe(this.value,r)}else return this}}get(e){if(xe(e))return this.value;{const t=we(e),s=this.children.get(t);return s?s.get($e(e)):null}}setTree(e,t){if(xe(e))return t;{const s=we(e),r=(this.children.get(s)||new qe(null)).setTree($e(e),t);let o;return r.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,r),new qe(this.value,o)}}fold(e){return this.fold_(Ne(),e)}fold_(e,t){const s={};return this.children.inorderTraversal((i,r)=>{s[i]=r.fold_(Rt(e,i),t)}),t(e,this.value,s)}findOnPath(e,t){return this.findOnPath_(e,Ne(),t)}findOnPath_(e,t,s){const i=this.value?s(t,this.value):!1;if(i)return i;if(xe(e))return null;{const r=we(e),o=this.children.get(r);return o?o.findOnPath_($e(e),Rt(t,r),s):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ne(),t)}foreachOnPath_(e,t,s){if(xe(e))return this;{this.value&&s(t,this.value);const i=we(e),r=this.children.get(i);return r?r.foreachOnPath_($e(e),Rt(t,i),s):new qe(null)}}foreach(e){this.foreach_(Ne(),e)}foreach_(e,t){this.children.inorderTraversal((s,i)=>{i.foreach_(Rt(e,s),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,s)=>{s.value&&e(t,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.writeTree_=e}static empty(){return new xi(new qe(null))}}function nm(n,e,t){if(xe(e))return new xi(new qe(t));{const s=n.writeTree_.findRootMostValueAndPath(e);if(s!=null){const i=s.path;let r=s.value;const o=zn(i,e);return r=r.updateChild(o,t),new xi(n.writeTree_.set(i,r))}else{const i=new qe(t),r=n.writeTree_.setTree(e,i);return new xi(r)}}}function DD(n,e,t){let s=n;return Qn(t,(i,r)=>{s=nm(s,Rt(e,i),r)}),s}function LD(n,e){if(xe(e))return xi.empty();{const t=n.writeTree_.setTree(e,new qe(null));return new xi(t)}}function SA(n,e){return Cu(n,e)!=null}function Cu(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(zn(t.path,e)):null}function OD(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(dt,(s,i)=>{e.push(new be(s,i))}):n.writeTree_.children.inorderTraversal((s,i)=>{i.value!=null&&e.push(new be(s,i.value))}),e}function ja(n,e){if(xe(e))return n;{const t=Cu(n,e);return t!=null?new xi(new qe(t)):new xi(n.writeTree_.subtree(e))}}function EA(n){return n.writeTree_.isEmpty()}function _f(n,e){return qV(Ne(),n.writeTree_,e)}function qV(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let s=null;return e.children.inorderTraversal((i,r)=>{i===".priority"?(Y(r.value!==null,"Priority writes must always be leaf nodes"),s=r.value):t=qV(Rt(n,i),r,t)}),!t.getChild(n).isEmpty()&&s!==null&&(t=t.updateChild(Rt(n,".priority"),s)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(n,e){return ZV(e,n)}function rie(n,e,t,s,i){Y(s>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:s,visible:i}),i&&(n.visibleWrites=nm(n.visibleWrites,e,t)),n.lastWriteId=s}function oie(n,e){for(let t=0;t<n.allWrites.length;t++){const s=n.allWrites[t];if(s.writeId===e)return s}return null}function aie(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);Y(t>=0,"removeWrite called with nonexistent writeId.");const s=n.allWrites[t];n.allWrites.splice(t,1);let i=s.visible,r=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&lie(a,s.path)?i=!1:gi(s.path,a.path)&&(r=!0)),o--}if(i){if(r)return cie(n),!0;if(s.snap)n.visibleWrites=LD(n.visibleWrites,s.path);else{const a=s.children;Qn(a,l=>{n.visibleWrites=LD(n.visibleWrites,Rt(s.path,l))})}return!0}else return!1}function lie(n,e){if(n.snap)return gi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&gi(Rt(n.path,t),e))return!0;return!1}function cie(n){n.visibleWrites=XV(n.allWrites,uie,Ne()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function uie(n){return n.visible}function XV(n,e,t){let s=xi.empty();for(let i=0;i<n.length;++i){const r=n[i];if(e(r)){const o=r.path;let a;if(r.snap)gi(t,o)?(a=zn(t,o),s=nm(s,a,r.snap)):gi(o,t)&&(a=zn(o,t),s=nm(s,Ne(),r.snap.getChild(a)));else if(r.children){if(gi(t,o))a=zn(t,o),s=DD(s,a,r.children);else if(gi(o,t))if(a=zn(o,t),xe(a))s=DD(s,Ne(),r.children);else{const l=vf(r.children,we(a));if(l){const c=l.getChild($e(a));s=nm(s,Ne(),c)}}}else throw Ff("WriteRecord should have .snap or .children")}}return s}function QV(n,e,t,s,i){if(!s&&!i){const r=Cu(n.visibleWrites,e);if(r!=null)return r;{const o=ja(n.visibleWrites,e);if(EA(o))return t;if(t==null&&!SA(o,Ne()))return null;{const a=t||re.EMPTY_NODE;return _f(o,a)}}}else{const r=ja(n.visibleWrites,e);if(!i&&EA(r))return t;if(!i&&t==null&&!SA(r,Ne()))return null;{const o=function(c){return(c.visible||i)&&(!s||!~s.indexOf(c.writeId))&&(gi(c.path,e)||gi(e,c.path))},a=XV(n.allWrites,o,e),l=t||re.EMPTY_NODE;return _f(a,l)}}}function hie(n,e,t){let s=re.EMPTY_NODE;const i=Cu(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(dt,(r,o)=>{s=s.updateImmediateChild(r,o)}),s;if(t){const r=ja(n.visibleWrites,e);return t.forEachChild(dt,(o,a)=>{const l=_f(ja(r,new Ve(o)),a);s=s.updateImmediateChild(o,l)}),OD(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const r=ja(n.visibleWrites,e);return OD(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function die(n,e,t,s,i){Y(s||i,"Either existingEventSnap or existingServerSnap must exist");const r=Rt(e,t);if(SA(n.visibleWrites,r))return null;{const o=ja(n.visibleWrites,r);return EA(o)?i.getChild(t):_f(o,i.getChild(t))}}function fie(n,e,t,s){const i=Rt(e,t),r=Cu(n.visibleWrites,i);if(r!=null)return r;if(s.isCompleteForChild(t)){const o=ja(n.visibleWrites,i);return _f(o,s.getNode().getImmediateChild(t))}else return null}function pie(n,e){return Cu(n.visibleWrites,e)}function mie(n,e,t,s,i,r,o){let a;const l=ja(n.visibleWrites,e),c=Cu(l,Ne());if(c!=null)a=c;else if(t!=null)a=_f(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),f=r?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let p=f.getNext();for(;p&&u.length<i;)d(p,s)!==0&&u.push(p),p=f.getNext();return u}else return[]}function gie(){return{visibleWrites:xi.empty(),allWrites:[],lastWriteId:-1}}function Fb(n,e,t,s){return QV(n.writeTree,n.treePath,e,t,s)}function rP(n,e){return hie(n.writeTree,n.treePath,e)}function FD(n,e,t,s){return die(n.writeTree,n.treePath,e,t,s)}function jb(n,e){return pie(n.writeTree,Rt(n.treePath,e))}function yie(n,e,t,s,i,r){return mie(n.writeTree,n.treePath,e,t,s,i,r)}function oP(n,e,t){return fie(n.writeTree,n.treePath,e,t)}function JV(n,e){return ZV(Rt(n.treePath,e),n.writeTree)}function ZV(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vie{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,s=e.childName;Y(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Y(s!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(s);if(i){const r=i.type;if(t==="child_added"&&r==="child_removed")this.changeMap.set(s,Hm(s,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&r==="child_added")this.changeMap.delete(s);else if(t==="child_removed"&&r==="child_changed")this.changeMap.set(s,Bm(s,i.oldSnap));else if(t==="child_changed"&&r==="child_added")this.changeMap.set(s,xf(s,e.snapshotNode));else if(t==="child_changed"&&r==="child_changed")this.changeMap.set(s,Hm(s,e.snapshotNode,i.oldSnap));else throw Ff("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wie{getCompleteChild(e){return null}getChildAfterChild(e,t,s){return null}}const e4=new wie;class aP{constructor(e,t,s=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=s}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new du(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oP(this.writes_,e,s)}}getChildAfterChild(e,t,s){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:fu(this.viewCache_),r=yie(this.writes_,i,t,1,s,e);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bie(n){return{filter:n}}function xie(n,e){Y(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Y(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function _ie(n,e,t,s,i){const r=new vie;let o,a;if(t.type===yi.OVERWRITE){const c=t;c.source.fromUser?o=CA(n,e,c.path,c.snap,s,i,r):(Y(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!xe(c.path),o=Bb(n,e,c.path,c.snap,s,i,a,r))}else if(t.type===yi.MERGE){const c=t;c.source.fromUser?o=Eie(n,e,c.path,c.children,s,i,r):(Y(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=AA(n,e,c.path,c.children,s,i,a,r))}else if(t.type===yi.ACK_USER_WRITE){const c=t;c.revert?o=Tie(n,e,c.path,s,i,r):o=Cie(n,e,c.path,c.affectedTree,s,i,r)}else if(t.type===yi.LISTEN_COMPLETE)o=Aie(n,e,t.path,s,r);else throw Ff("Unknown operation type: "+t.type);const l=r.getChanges();return Sie(e,o,l),{viewCache:o,changes:l}}function Sie(n,e,t){const s=e.eventCache;if(s.isFullyInitialized()){const i=s.getNode().isLeafNode()||s.getNode().isEmpty(),r=_A(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!s.getNode().equals(r)||!s.getNode().getPriority().equals(r.getPriority()))&&t.push(WV(_A(e)))}}function t4(n,e,t,s,i,r){const o=e.eventCache;if(jb(s,t)!=null)return e;{let a,l;if(xe(t))if(Y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=fu(e),u=c instanceof re?c:re.EMPTY_NODE,d=rP(s,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,r)}else{const c=Fb(s,fu(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const c=we(t);if(c===".priority"){Y(Wa(t)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=FD(s,t,u,l);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{const u=$e(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=FD(s,t,o.getNode(),l);f!=null?d=o.getNode().getImmediateChild(c).updateChild(u,f):d=o.getNode().getImmediateChild(c)}else d=oP(s,c,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),c,d,u,i,r):a=o.getNode()}}return tm(e,a,o.isFullyInitialized()||xe(t),n.filter.filtersNodes())}}function Bb(n,e,t,s,i,r,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(xe(t))c=u.updateFullNode(l.getNode(),s,null);else if(u.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(t,s);c=u.updateFullNode(l.getNode(),p,null)}else{const p=we(t);if(!l.isCompleteForPath(t)&&Wa(t)>1)return e;const y=$e(t),S=l.getNode().getImmediateChild(p).updateChild(y,s);p===".priority"?c=u.updatePriority(l.getNode(),S):c=u.updateChild(l.getNode(),p,S,y,e4,null)}const d=KV(e,c,l.isFullyInitialized()||xe(t),u.filtersNodes()),f=new aP(i,d,r);return t4(n,d,t,i,f,a)}function CA(n,e,t,s,i,r,o){const a=e.eventCache;let l,c;const u=new aP(i,e,r);if(xe(t))c=n.filter.updateFullNode(e.eventCache.getNode(),s,o),l=tm(e,c,!0,n.filter.filtersNodes());else{const d=we(t);if(d===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),s),l=tm(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=$e(t),p=a.getNode().getImmediateChild(d);let y;if(xe(f))y=s;else{const g=u.getCompleteChild(d);g!=null?OV(f)===".priority"&&g.getChild(jV(f)).isEmpty()?y=g:y=g.updateChild(f,s):y=re.EMPTY_NODE}if(p.equals(y))l=e;else{const g=n.filter.updateChild(a.getNode(),d,y,f,u,o);l=tm(e,g,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function jD(n,e){return n.eventCache.isCompleteForChild(e)}function Eie(n,e,t,s,i,r,o){let a=e;return s.foreach((l,c)=>{const u=Rt(t,l);jD(e,we(u))&&(a=CA(n,a,u,c,i,r,o))}),s.foreach((l,c)=>{const u=Rt(t,l);jD(e,we(u))||(a=CA(n,a,u,c,i,r,o))}),a}function BD(n,e,t){return t.foreach((s,i)=>{e=e.updateChild(s,i)}),e}function AA(n,e,t,s,i,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;xe(t)?c=s:c=new qe(null).setTree(t,s);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){const p=e.serverCache.getNode().getImmediateChild(d),y=BD(n,p,f);l=Bb(n,l,new Ve(d),y,i,r,o,a)}}),c.children.inorderTraversal((d,f)=>{const p=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!p){const y=e.serverCache.getNode().getImmediateChild(d),g=BD(n,y,f);l=Bb(n,l,new Ve(d),g,i,r,o,a)}}),l}function Cie(n,e,t,s,i,r,o){if(jb(i,t)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(xe(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Bb(n,e,t,l.getNode().getChild(t),i,r,a,o);if(xe(t)){let c=new qe(null);return l.getNode().forEachChild(vh,(u,d)=>{c=c.set(new Ve(u),d)}),AA(n,e,t,c,i,r,a,o)}else return e}else{let c=new qe(null);return s.foreach((u,d)=>{const f=Rt(t,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),AA(n,e,t,c,i,r,a,o)}}function Aie(n,e,t,s,i){const r=e.serverCache,o=KV(e,r.getNode(),r.isFullyInitialized()||xe(t),r.isFiltered());return t4(n,o,t,s,e4,i)}function Tie(n,e,t,s,i,r){let o;if(jb(s,t)!=null)return e;{const a=new aP(s,e,i),l=e.eventCache.getNode();let c;if(xe(t)||we(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Fb(s,fu(e));else{const d=e.serverCache.getNode();Y(d instanceof re,"serverChildren would be complete if leaf node"),u=rP(s,d)}u=u,c=n.filter.updateFullNode(l,u,r)}else{const u=we(t);let d=oP(s,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=n.filter.updateChild(l,u,d,$e(t),a,r):e.eventCache.getNode().hasChild(u)?c=n.filter.updateChild(l,u,re.EMPTY_NODE,$e(t),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Fb(s,fu(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||jb(s,Ne())!=null,tm(e,c,o,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kie{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,i=new eP(s.getIndex()),r=Yse(s);this.processor_=bie(r);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(re.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(re.EMPTY_NODE,a.getNode(),null),u=new du(l,o.isFullyInitialized(),i.filtersNodes()),d=new du(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=VS(d,u),this.eventGenerator_=new eie(this.query_)}get query(){return this.query_}}function Iie(n){return n.viewCache_.serverCache.getNode()}function Pie(n,e){const t=fu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!xe(e)&&!t.getImmediateChild(we(e)).isEmpty())?t.getChild(e):null}function HD(n){return n.eventRegistrations_.length===0}function Rie(n,e){n.eventRegistrations_.push(e)}function VD(n,e,t){const s=[];if(t){Y(e==null,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(t,i);o&&s.push(o)})}if(e){let i=[];for(let r=0;r<n.eventRegistrations_.length;++r){const o=n.eventRegistrations_[r];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(r+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return s}function UD(n,e,t,s){e.type===yi.MERGE&&e.source.queryId!==null&&(Y(fu(n.viewCache_),"We should always have a full cache before handling merges"),Y(_A(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,r=_ie(n.processor_,i,e,t,s);return xie(n.processor_,r.viewCache),Y(r.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=r.viewCache,n4(n,r.changes,r.viewCache.eventCache.getNode(),null)}function Mie(n,e){const t=n.viewCache_.eventCache,s=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(dt,(r,o)=>{s.push(xf(r,o))}),t.isFullyInitialized()&&s.push(WV(t.getNode())),n4(n,s,t.getNode(),e)}function n4(n,e,t,s){const i=s?[s]:n.eventRegistrations_;return tie(n.eventGenerator_,e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hb;class Nie{constructor(){this.views=new Map}}function Die(n){Y(!Hb,"__referenceConstructor has already been defined"),Hb=n}function Lie(){return Y(Hb,"Reference.ts has not been loaded"),Hb}function Oie(n){return n.views.size===0}function lP(n,e,t,s){const i=e.source.queryId;if(i!==null){const r=n.views.get(i);return Y(r!=null,"SyncTree gave us an op for an invalid query."),UD(r,e,t,s)}else{let r=[];for(const o of n.views.values())r=r.concat(UD(o,e,t,s));return r}}function Fie(n,e,t,s,i){const r=e._queryIdentifier,o=n.views.get(r);if(!o){let a=Fb(t,i?s:null),l=!1;a?l=!0:s instanceof re?(a=rP(t,s),l=!1):(a=re.EMPTY_NODE,l=!1);const c=VS(new du(a,l,!1),new du(s,i,!1));return new kie(e,c)}return o}function jie(n,e,t,s,i,r){const o=Fie(n,e,s,i,r);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),Rie(o,t),Mie(o,t)}function Bie(n,e,t,s){const i=e._queryIdentifier,r=[];let o=[];const a=Ga(n);if(i==="default")for(const[l,c]of n.views.entries())o=o.concat(VD(c,t,s)),HD(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(VD(l,t,s)),HD(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!Ga(n)&&r.push(new(Lie())(e._repo,e._path)),{removed:r,events:o}}function s4(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function wh(n,e){let t=null;for(const s of n.views.values())t=t||Pie(s,e);return t}function i4(n,e){if(e._queryParams.loadsAllData())return US(n);{const s=e._queryIdentifier;return n.views.get(s)}}function r4(n,e){return i4(n,e)!=null}function Ga(n){return US(n)!=null}function US(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vb;function Hie(n){Y(!Vb,"__referenceConstructor has already been defined"),Vb=n}function Vie(){return Y(Vb,"Reference.ts has not been loaded"),Vb}let Uie=1;class $D{constructor(e){this.listenProvider_=e,this.syncPointTree_=new qe(null),this.pendingWriteTree_=gie(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function o4(n,e,t,s,i){return rie(n.pendingWriteTree_,e,t,s,i),i?Fv(n,new hu(YV(),e,t)):[]}function Tl(n,e,t=!1){const s=oie(n.pendingWriteTree_,e);if(aie(n.pendingWriteTree_,e)){let r=new qe(null);return s.snap!=null?r=r.set(Ne(),!0):Qn(s.children,o=>{r=r.set(new Ve(o),!0)}),Fv(n,new Ob(s.path,r,t))}else return[]}function $S(n,e,t){return Fv(n,new hu(nP(),e,t))}function $ie(n,e,t){const s=qe.fromObject(t);return Fv(n,new $m(nP(),e,s))}function zie(n,e){return Fv(n,new Um(nP(),e))}function Wie(n,e,t){const s=uP(n,t);if(s){const i=hP(s),r=i.path,o=i.queryId,a=zn(r,e),l=new Um(sP(o),a);return dP(n,r,l)}else return[]}function TA(n,e,t,s,i=!1){const r=e._path,o=n.syncPointTree_.get(r);let a=[];if(o&&(e._queryIdentifier==="default"||r4(o,e))){const l=Bie(o,e,t,s);Oie(o)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const c=l.removed;if(a=l.events,!i){const u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(r,(f,p)=>Ga(p));if(u&&!d){const f=n.syncPointTree_.subtree(r);if(!f.isEmpty()){const p=Kie(f);for(let y=0;y<p.length;++y){const g=p[y],S=g.query,w=c4(n,g);n.listenProvider_.startListening(sm(S),Ub(n,S),w.hashFn,w.onComplete)}}}!d&&c.length>0&&!s&&(u?n.listenProvider_.stopListening(sm(e),null):c.forEach(f=>{const p=n.queryToTagMap.get(zS(f));n.listenProvider_.stopListening(sm(f),p)}))}qie(n,c)}return a}function Gie(n,e,t,s){const i=uP(n,s);if(i!=null){const r=hP(i),o=r.path,a=r.queryId,l=zn(o,e),c=new hu(sP(a),l,t);return dP(n,o,c)}else return[]}function Yie(n,e,t,s){const i=uP(n,s);if(i){const r=hP(i),o=r.path,a=r.queryId,l=zn(o,e),c=qe.fromObject(t),u=new $m(sP(a),l,c);return dP(n,o,u)}else return[]}function zD(n,e,t,s=!1){const i=e._path;let r=null,o=!1;n.syncPointTree_.foreachOnPath(i,(f,p)=>{const y=zn(f,i);r=r||wh(p,y),o=o||Ga(p)});let a=n.syncPointTree_.get(i);a?(o=o||Ga(a),r=r||wh(a,Ne())):(a=new Nie,n.syncPointTree_=n.syncPointTree_.set(i,a));let l;r!=null?l=!0:(l=!1,r=re.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((p,y)=>{const g=wh(y,Ne());g&&(r=r.updateImmediateChild(p,g))}));const c=r4(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=zS(e);Y(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");const p=Xie();n.queryToTagMap.set(f,p),n.tagToQueryMap.set(p,f)}const u=iP(n.pendingWriteTree_,i);let d=jie(a,e,t,u,r,l);if(!c&&!o&&!s){const f=i4(a,e);d=d.concat(Qie(n,e,f))}return d}function cP(n,e,t){const i=n.pendingWriteTree_,r=n.syncPointTree_.findOnPath(e,(o,a)=>{const l=zn(o,e),c=wh(a,l);if(c)return c});return QV(i,e,r,t,!0)}function Fv(n,e){return a4(e,n.syncPointTree_,null,iP(n.pendingWriteTree_,Ne()))}function a4(n,e,t,s){if(xe(n.path))return l4(n,e,t,s);{const i=e.get(Ne());t==null&&i!=null&&(t=wh(i,Ne()));let r=[];const o=we(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=JV(s,o);r=r.concat(a4(a,l,c,u))}return i&&(r=r.concat(lP(i,n,s,t))),r}}function l4(n,e,t,s){const i=e.get(Ne());t==null&&i!=null&&(t=wh(i,Ne()));let r=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=JV(s,o),u=n.operationForChild(o);u&&(r=r.concat(l4(u,a,l,c)))}),i&&(r=r.concat(lP(i,n,s,t))),r}function c4(n,e){const t=e.query,s=Ub(n,t);return{hashFn:()=>(Iie(e)||re.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return s?Wie(n,t._path,s):zie(n,t._path);{const r=Gne(i,t);return TA(n,t,null,r)}}}}function Ub(n,e){const t=zS(e);return n.queryToTagMap.get(t)}function zS(n){return n._path.toString()+"$"+n._queryIdentifier}function uP(n,e){return n.tagToQueryMap.get(e)}function hP(n){const e=n.indexOf("$");return Y(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ve(n.substr(0,e))}}function dP(n,e,t){const s=n.syncPointTree_.get(e);Y(s,"Missing sync point for query tag that we're tracking");const i=iP(n.pendingWriteTree_,e);return lP(s,t,i,null)}function Kie(n){return n.fold((e,t,s)=>{if(t&&Ga(t))return[US(t)];{let i=[];return t&&(i=s4(t)),Qn(s,(r,o)=>{i=i.concat(o)}),i}})}function sm(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(Vie())(n._repo,n._path):n}function qie(n,e){for(let t=0;t<e.length;++t){const s=e[t];if(!s._queryParams.loadsAllData()){const i=zS(s),r=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(r)}}}function Xie(){return Uie++}function Qie(n,e,t){const s=e._path,i=Ub(n,e),r=c4(n,t),o=n.listenProvider_.startListening(sm(e),i,r.hashFn,r.onComplete),a=n.syncPointTree_.subtree(s);if(i)Y(!Ga(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!xe(c)&&u&&Ga(u))return[US(u).query];{let f=[];return u&&(f=f.concat(s4(u).map(p=>p.query))),Qn(d,(p,y)=>{f=f.concat(y)}),f}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(sm(u),Ub(n,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new fP(t)}node(){return this.node_}}class pP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Rt(this.path_,e);return new pP(this.syncTree_,t)}node(){return cP(this.syncTree_,this.path_)}}const Jie=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},WD=function(n,e,t){if(!n||typeof n!="object")return n;if(Y(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Zie(n[".sv"],e,t);if(typeof n[".sv"]=="object")return ere(n[".sv"],e);Y(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Zie=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:Y(!1,"Unexpected server value: "+n)}},ere=function(n,e,t){n.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const s=n.increment;typeof s!="number"&&Y(!1,"Unexpected increment value: "+s);const i=e.node();if(Y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return s;const o=i.getValue();return typeof o!="number"?s:o+s},tre=function(n,e,t,s){return mP(e,new pP(t,n),s)},u4=function(n,e,t){return mP(n,new fP(e),t)};function mP(n,e,t){const s=n.getPriority().val(),i=WD(s,e.getImmediateChild(".priority"),t);let r;if(n.isLeafNode()){const o=n,a=WD(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Ut(a,nn(i)):n}else{const o=n;return r=o,i!==o.getPriority().val()&&(r=r.updatePriority(new Ut(i))),o.forEachChild(dt,(a,l)=>{const c=mP(l,e.getImmediateChild(a),t);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e="",t=null,s={children:{},childCount:0}){this.name=e,this.parent=t,this.node=s}}function yP(n,e){let t=e instanceof Ve?e:new Ve(e),s=n,i=we(t);for(;i!==null;){const r=vf(s.node.children,i)||{children:{},childCount:0};s=new gP(i,s,r),t=$e(t),i=we(t)}return s}function Vf(n){return n.node.value}function h4(n,e){n.node.value=e,kA(n)}function d4(n){return n.node.childCount>0}function nre(n){return Vf(n)===void 0&&!d4(n)}function WS(n,e){Qn(n.node.children,(t,s)=>{e(new gP(t,n,s))})}function f4(n,e,t,s){t&&!s&&e(n),WS(n,i=>{f4(i,e,!0,s)}),t&&s&&e(n)}function sre(n,e,t){let s=t?n:n.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function jv(n){return new Ve(n.parent===null?n.name:jv(n.parent)+"/"+n.name)}function kA(n){n.parent!==null&&ire(n.parent,n.name,n)}function ire(n,e,t){const s=nre(t),i=yo(n.node.children,e);s&&i?(delete n.node.children[e],n.node.childCount--,kA(n)):!s&&!i&&(n.node.children[e]=t.node,n.node.childCount++,kA(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rre=/[\[\].#$\/\u0000-\u001F\u007F]/,ore=/[\[\].#$\u0000-\u001F\u007F]/,vE=10*1024*1024,p4=function(n){return typeof n=="string"&&n.length!==0&&!rre.test(n)},m4=function(n){return typeof n=="string"&&n.length!==0&&!ore.test(n)},are=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),m4(n)},g4=function(n,e,t,s){s&&e===void 0||vP(WI(n,"value"),e,t)},vP=function(n,e,t){const s=t instanceof Ve?new Cse(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ml(s));if(typeof e=="function")throw new Error(n+"contains a function "+ml(s)+" with contents = "+e.toString());if(mV(e))throw new Error(n+"contains "+e.toString()+" "+ml(s));if(typeof e=="string"&&e.length>vE/3&&BS(e)>vE)throw new Error(n+"contains a string greater than "+vE+" utf8 bytes "+ml(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,r=!1;if(Qn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!p4(o)))throw new Error(n+" contains an invalid key ("+o+") "+ml(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Ase(s,o),vP(n,a,s),Tse(s)}),i&&r)throw new Error(n+' contains ".value" child '+ml(s)+" in addition to actual children.")}},y4=function(n,e,t,s){if(!(s&&t===void 0)&&!m4(t))throw new Error(WI(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},lre=function(n,e,t,s){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),y4(n,e,t,s)},v4=function(n,e){if(we(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},cre=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!p4(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!are(t))throw new Error(WI(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ure{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wP(n,e){let t=null;for(let s=0;s<e.length;s++){const i=e[s],r=i.getPath();t!==null&&!QI(r,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:r}),t.events.push(i)}t&&n.eventLists_.push(t)}function w4(n,e,t){wP(n,t),b4(n,s=>QI(s,e))}function fo(n,e,t){wP(n,t),b4(n,s=>gi(s,e)||gi(e,s))}function b4(n,e){n.recursionDepth_++;let t=!0;for(let s=0;s<n.eventLists_.length;s++){const i=n.eventLists_[s];if(i){const r=i.path;e(r)?(hre(n.eventLists_[s]),n.eventLists_[s]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function hre(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const s=t.getEventRunner();Zc&&gn("event: "+t.toString()),Hf(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dre="repo_interrupt",fre=25;class pre{constructor(e,t,s,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=s,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ure,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lb(),this.transactionQueueTree_=new gP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mre(n,e,t){if(n.stats_=qI(n.repoInfo_),n.forceRestClient_||Xne())n.server_=new Db(n.repoInfo_,(s,i,r,o)=>{GD(n,s,i,r,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>YD(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Wt(t)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}n.persistentConnection_=new so(n.repoInfo_,e,(s,i,r,o)=>{GD(n,s,i,r,o)},s=>{YD(n,s)},s=>{gre(n,s)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(s=>{n.server_.refreshAuthToken(s)}),n.appCheckProvider_.addTokenChangeListener(s=>{n.server_.refreshAppCheckToken(s.token)}),n.statsReporter_=tse(n.repoInfo_,()=>new Zse(n.stats_,n.server_)),n.infoData_=new Kse,n.infoSyncTree_=new $D({startListening:(s,i,r,o)=>{let a=[];const l=n.infoData_.getNode(s._path);return l.isEmpty()||(a=$S(n.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),xP(n,"connected",!1),n.serverSyncTree_=new $D({startListening:(s,i,r,o)=>(n.server_.listen(s,r,i,(a,l)=>{const c=o(a,l);fo(n.eventQueue_,s._path,c)}),[]),stopListening:(s,i)=>{n.server_.unlisten(s,i)}})}function x4(n){const t=n.infoData_.getNode(new Ve(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function bP(n){return Jie({timestamp:x4(n)})}function GD(n,e,t,s,i){n.dataUpdateCount++;const r=new Ve(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(s){const l=kb(t,c=>nn(c));o=Yie(n.serverSyncTree_,r,l,i)}else{const l=nn(t);o=Gie(n.serverSyncTree_,r,l,i)}else if(s){const l=kb(t,c=>nn(c));o=$ie(n.serverSyncTree_,r,l)}else{const l=nn(t);o=$S(n.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=GS(n,r)),fo(n.eventQueue_,a,o)}function YD(n,e){xP(n,"connected",e),e===!1&&vre(n)}function gre(n,e){Qn(e,(t,s)=>{xP(n,t,s)})}function xP(n,e,t){const s=new Ve("/.info/"+e),i=nn(t);n.infoData_.updateSnapshot(s,i);const r=$S(n.infoSyncTree_,s,i);fo(n.eventQueue_,s,r)}function _4(n){return n.nextWriteId_++}function yre(n,e,t,s,i){_P(n,"set",{path:e.toString(),value:t,priority:s});const r=bP(n),o=nn(t,s),a=cP(n.serverSyncTree_,e),l=u4(o,a,r),c=_4(n),u=o4(n.serverSyncTree_,e,l,c,!0);wP(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(f,p)=>{const y=f==="ok";y||qn("set at "+e+" failed: "+f);const g=Tl(n.serverSyncTree_,c,!y);fo(n.eventQueue_,e,g),xre(n,i,f,p)});const d=T4(n,e);GS(n,d),fo(n.eventQueue_,d,[])}function vre(n){_P(n,"onDisconnectEvents");const e=bP(n),t=Lb();xA(n.onDisconnect_,Ne(),(i,r)=>{const o=tre(i,r,n.serverSyncTree_,e);GV(t,i,o)});let s=[];xA(t,Ne(),(i,r)=>{s=s.concat($S(n.serverSyncTree_,i,r));const o=T4(n,i);GS(n,o)}),n.onDisconnect_=Lb(),fo(n.eventQueue_,Ne(),s)}function wre(n,e,t){let s;we(e._path)===".info"?s=zD(n.infoSyncTree_,e,t):s=zD(n.serverSyncTree_,e,t),w4(n.eventQueue_,e._path,s)}function KD(n,e,t){let s;we(e._path)===".info"?s=TA(n.infoSyncTree_,e,t):s=TA(n.serverSyncTree_,e,t),w4(n.eventQueue_,e._path,s)}function bre(n){n.persistentConnection_&&n.persistentConnection_.interrupt(dre)}function _P(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),gn(t,...e)}function xre(n,e,t,s){e&&Hf(()=>{if(t==="ok")e(null);else{const i=(t||"error").toUpperCase();let r=i;s&&(r+=": "+s);const o=new Error(r);o.code=i,e(o)}})}function S4(n,e,t){return cP(n.serverSyncTree_,e,t)||re.EMPTY_NODE}function SP(n,e=n.transactionQueueTree_){if(e||YS(n,e),Vf(e)){const t=C4(n,e);Y(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&_re(n,jv(e),t)}else d4(e)&&WS(e,t=>{SP(n,t)})}function _re(n,e,t){const s=t.map(c=>c.currentWriteId),i=S4(n,e,s);let r=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];Y(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=zn(e,u.path);r=r.updateChild(d,u.currentOutputSnapshotRaw)}const a=r.val(!0),l=e;n.server_.put(l.toString(),a,c=>{_P(n,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(Tl(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&d.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();YS(n,yP(n.transactionQueueTree_,e)),SP(n,n.transactionQueueTree_),fo(n.eventQueue_,e,u);for(let f=0;f<d.length;f++)Hf(d[f])}else{if(c==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{qn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}GS(n,e)}},o)}function GS(n,e){const t=E4(n,e),s=jv(t),i=C4(n,t);return Sre(n,i,s),s}function Sre(n,e,t){if(e.length===0)return;const s=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=zn(t,l.path);let u=!1,d;if(Y(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(Tl(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=fre)u=!0,d="maxretry",i=i.concat(Tl(n.serverSyncTree_,l.currentWriteId,!0));else{const f=S4(n,l.path,o);l.currentInputSnapshot=f;const p=e[a].update(f.val());if(p!==void 0){vP("transaction failed: Data returned ",p,l.path);let y=nn(p);typeof p=="object"&&p!=null&&yo(p,".priority")||(y=y.updatePriority(f.getPriority()));const S=l.currentWriteId,w=bP(n),_=u4(y,f,w);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=_,l.currentWriteId=_4(n),o.splice(o.indexOf(S),1),i=i.concat(o4(n.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),i=i.concat(Tl(n.serverSyncTree_,S,!0))}else u=!0,d="nodata",i=i.concat(Tl(n.serverSyncTree_,l.currentWriteId,!0))}fo(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?s.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):s.push(()=>e[a].onComplete(new Error(d),!1,null))))}YS(n,n.transactionQueueTree_);for(let a=0;a<s.length;a++)Hf(s[a]);SP(n,n.transactionQueueTree_)}function E4(n,e){let t,s=n.transactionQueueTree_;for(t=we(e);t!==null&&Vf(s)===void 0;)s=yP(s,t),e=$e(e),t=we(e);return s}function C4(n,e){const t=[];return A4(n,e,t),t.sort((s,i)=>s.order-i.order),t}function A4(n,e,t){const s=Vf(e);if(s)for(let i=0;i<s.length;i++)t.push(s[i]);WS(e,i=>{A4(n,i,t)})}function YS(n,e){const t=Vf(e);if(t){let s=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[s]=t[i],s++);t.length=s,h4(e,t.length>0?t:void 0)}WS(e,s=>{YS(n,s)})}function T4(n,e){const t=jv(E4(n,e)),s=yP(n.transactionQueueTree_,e);return sre(s,i=>{wE(n,i)}),wE(n,s),f4(s,i=>{wE(n,i)}),t}function wE(n,e){const t=Vf(e);if(t){const s=[];let i=[],r=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(Y(r===o-1,"All SENT items should be at beginning of queue."),r=o,t[o].status=3,t[o].abortReason="set"):(Y(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Tl(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&s.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?h4(e,void 0):t.length=r+1,fo(n.eventQueue_,jv(e),i);for(let o=0;o<s.length;o++)Hf(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ere(n){let e="";const t=n.split("/");for(let s=0;s<t.length;s++)if(t[s].length>0){let i=t[s];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Cre(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const s=t.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):qn(`Invalid query segment '${t}' in query '${n}'`)}return e}const qD=function(n,e){const t=Are(n),s=t.namespace;t.domain==="firebase.com"&&ho(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&t.domain!=="localhost"&&ho("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||Vne();const i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new TV(t.host,t.secure,s,i,e,"",s!==t.subdomain),path:new Ve(t.pathString)}},Are=function(n){let e="",t="",s="",i="",r="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=Ere(n.substring(u,d)));const f=Cre(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")t="localhost";else if(p.split(".").length<=2)t=p;else{const y=e.indexOf(".");s=e.substring(0,y).toLowerCase(),t=e.substring(y+1),r=s}"ns"in f&&(r=f.ns)}return{host:e,port:l,domain:t,subdomain:s,secure:o,scheme:a,pathString:i,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Tre=function(){let n=0;const e=[];return function(t){const s=t===n;n=t;let i;const r=new Array(8);for(i=7;i>=0;i--)r[i]=XD.charAt(t%64),t=Math.floor(t/64);Y(t===0,"Cannot push at time == 0");let o=r.join("");if(s){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=XD.charAt(e[i]);return Y(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,t,s,i){this.eventType=e,this.eventRegistration=t,this.snapshot=s,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Wt(this.snapshot.exportVal())}}class I4{constructor(e,t,s){this.eventRegistration=e,this.error=t,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kre{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t,s,i){this._repo=e,this._path=t,this._queryParams=s,this._orderByCalled=i}get key(){return xe(this._path)?null:OV(this._path)}get ref(){return new vo(this._repo,this._path)}get _queryIdentifier(){const e=MD(this._queryParams),t=YI(e);return t==="{}"?"default":t}get _queryObject(){return MD(this._queryParams)}isEqual(e){if(e=lr(e),!(e instanceof EP))return!1;const t=this._repo===e._repo,s=QI(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&s&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ese(this._path)}}class vo extends EP{constructor(e,t){super(e,t,new tP,!1)}get parent(){const e=jV(this._path);return e===null?null:new vo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class zm{constructor(e,t,s){this._node=e,this.ref=t,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ve(e),s=Sf(this.ref,e);return new zm(this._node.getChild(t),s,dt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,i)=>e(new zm(i,Sf(this.ref,s),dt)))}hasChild(e){const t=new Ve(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function s0(n,e){return n=lr(n),n._checkNotDeleted("ref"),e!==void 0?Sf(n._root,e):n._root}function Sf(n,e){return n=lr(n),we(n._path)===null?lre("child","path",e,!1):y4("child","path",e,!1),new vo(n._repo,Rt(n._path,e))}function IA(n,e){n=lr(n),v4("push",n._path),g4("push",e,n._path,!0);const t=x4(n._repo),s=Tre(t),i=Sf(n,s),r=Sf(n,s);let o;return e!=null?o=Ire(r,e).then(()=>r):o=Promise.resolve(r),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Ire(n,e){n=lr(n),v4("set",n._path),g4("set",e,n._path,!1);const t=new jS;return yre(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}class CP{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const s=t._queryParams.getIndex();return new k4("value",this,new zm(e.snapshotNode,new vo(t._repo,t._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new I4(this,e,t):null}matches(e){return e instanceof CP?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class AP{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new I4(this,e,t):null}createEvent(e,t){Y(e.childName!=null,"Child events should have a childName.");const s=Sf(new vo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new k4(e.type,this,new zm(e.snapshotNode,s,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof AP?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Pre(n,e,t,s,i){let r;if(typeof s=="object"&&(r=void 0,i=s),typeof s=="function"&&(r=s),i&&i.onlyOnce){const l=t,c=(u,d)=>{KD(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new kre(t,r||void 0),a=e==="value"?new CP(o):new AP(e,o);return wre(n._repo,n,a),()=>KD(n._repo,n,a)}function Rre(n,e,t,s){return Pre(n,"value",e,t,s)}Die(vo);Hie(vo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mre="FIREBASE_DATABASE_EMULATOR_HOST",PA={};let Nre=!1;function Dre(n,e,t,s){const i=e.lastIndexOf(":"),r=e.substring(0,i),o=Nv(r);n.repoInfo_=new TV(e,o,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),s&&(n.authTokenProvider_=s)}function Lre(n,e,t,s,i){let r=s||n.options.databaseURL;r===void 0&&(n.options.projectId||ho("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gn("Using default host for project ",n.options.projectId),r=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=qD(r,i),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[Mre]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=qD(r,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new yh(yh.OWNER):new Jne(n.name,n.options,e);cre("Invalid Firebase Database URL",o),xe(o.path)||ho("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Fre(a,n,u,new Qne(n,t));return new jre(d,n)}function Ore(n,e){const t=PA[e];(!t||t[n.key]!==n)&&ho(`Database ${e}(${n.repoInfo_}) has already been deleted.`),bre(n),delete t[n.key]}function Fre(n,e,t,s){let i=PA[e.name];i||(i={},PA[e.name]=i);let r=i[n.toURLString()];return r&&ho("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new pre(n,Nre,t,s),i[n.toURLString()]=r,r}class jre{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(mre(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vo(this._repo,Ne())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ore(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ho("Cannot call "+e+" on a deleted database.")}}function Bre(n=cV(),e){const t=rV(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const s=Y3("database");s&&Hre(t,...s)}return t}function Hre(n,e,t,s={}){n=lr(n),n._checkNotDeleted("useEmulator");const i=`${e}:${t}`,r=n._repoInternal;if(n._instanceStarted){if(i===n._repoInternal.repoInfo_.host&&Ib(s,r.repoInfo_.emulatorOptions))return;ho("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(r.repoInfo_.nodeAdmin)s.mockUserToken&&ho('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new yh(yh.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:X3(s.mockUserToken,n.app.options.projectId);o=new yh(a)}Nv(e)&&(q3(e),Q3("Database",!0)),Dre(r,i,s,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vre(n){One(aV),Om(new wf("database",(e,{instanceIdentifier:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return Lre(s,i,r,t)},"PUBLIC").setMultipleInstances(!0)),Fa(mD,gD,n),Fa(mD,gD,"esm2020")}so.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};so.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};Vre();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4="firebasestorage.googleapis.com",R4="storageBucket",Ure=2*60*1e3,$re=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt extends jf{constructor(e,t,s=0){super(bE(e),`Firebase Storage: ${t} (${bE(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pt||(pt={}));function bE(n){return"storage/"+n}function TP(){const n="An unknown error occurred, please check the error payload for server response.";return new mt(pt.UNKNOWN,n)}function zre(n){return new mt(pt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Wre(n){return new mt(pt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Gre(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mt(pt.UNAUTHENTICATED,n)}function Yre(){return new mt(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Kre(n){return new mt(pt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function qre(){return new mt(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Xre(){return new mt(pt.CANCELED,"User canceled the upload/download.")}function Qre(n){return new mt(pt.INVALID_URL,"Invalid URL '"+n+"'.")}function Jre(n){return new mt(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Zre(){return new mt(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+R4+"' property when initializing the app?")}function eoe(){return new mt(pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function toe(){return new mt(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function noe(n){return new mt(pt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function RA(n){return new mt(pt.INVALID_ARGUMENT,n)}function M4(){return new mt(pt.APP_DELETED,"The Firebase app was deleted.")}function soe(n){return new mt(pt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function im(n,e){return new mt(pt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function rp(n){throw new mt(pt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=vs.makeFromUrl(e,t)}catch{return new vs(e,"")}if(s.path==="")return s;throw Jre(e)}static makeFromUrl(e,t){let s=null;const i="([A-Za-z0-9.\\-_]+)";function r(m){m.path.charAt(m.path.length-1)==="/"&&(m.path_=m.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(m){m.path_=decodeURIComponent(m.path)}const u="v[A-Za-z0-9_]+",d=t.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),y={bucket:1,path:3},g=t===P4?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",w=new RegExp(`^https?://${g}/${i}/${S}`,"i"),v=[{regex:a,indices:l,postModify:r},{regex:p,indices:y,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let m=0;m<v.length;m++){const x=v[m],A=x.regex.exec(e);if(A){const k=A[x.indices.bucket];let P=A[x.indices.path];P||(P=""),s=new vs(k,P),x.postModify(s);break}}if(s==null)throw Qre(e);return s}}class ioe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function roe(n,e,t){let s=1,i=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...S){c||(c=!0,e.apply(null,S))}function d(S){i=setTimeout(()=>{i=null,n(p,l())},S)}function f(){r&&clearTimeout(r)}function p(S,...w){if(c){f();return}if(S){f(),u.call(null,S,...w);return}if(l()||o){f(),u.call(null,S,...w);return}s<64&&(s*=2);let v;a===1?(a=2,v=0):v=(s+Math.random())*1e3,d(v)}let y=!1;function g(S){y||(y=!0,f(),!c&&(i!==null?(S||(a=2),clearTimeout(i),d(0)):S||(a=1)))}return d(0),r=setTimeout(()=>{o=!0,g(!0)},t),g}function ooe(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aoe(n){return n!==void 0}function loe(n){return typeof n=="object"&&!Array.isArray(n)}function kP(n){return typeof n=="string"||n instanceof String}function QD(n){return IP()&&n instanceof Blob}function IP(){return typeof Blob<"u"}function JD(n,e,t,s){if(s<e)throw RA(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw RA(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function N4(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const i=e(s)+"="+e(n[s]);t=t+i+"&"}return t=t.slice(0,-1),t}var eu;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(eu||(eu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function coe(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,r=e.indexOf(n)!==-1;return t||i||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uoe{constructor(e,t,s,i,r,o,a,l,c,u,d,f=!0,p=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,g)=>{this.resolve_=y,this.reject_=g,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new Aw(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===eu.NO_ERROR,l=r.getStatus();if(!a||coe(l,this.additionalRetryCodes_)&&this.retry){const u=r.getErrorCode()===eu.ABORT;s(!1,new Aw(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;s(!0,new Aw(c,r))})},t=(s,i)=>{const r=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());aoe(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=TP();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?M4():Xre();o(l)}else{const l=qre();o(l)}};this.canceled_?t(!1,new Aw(!1,null,!0)):this.backoffId_=roe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ooe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Aw{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function hoe(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function doe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function foe(n,e){e&&(n["X-Firebase-GMPID"]=e)}function poe(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function moe(n,e,t,s,i,r,o=!0,a=!1){const l=N4(n.urlParams),c=n.url+l,u=Object.assign({},n.headers);return foe(u,e),hoe(u,t),doe(u,r),poe(u,s),new uoe(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function goe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function yoe(...n){const e=goe();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(IP())return new Blob(n);throw new mt(pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function voe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function woe(n){if(typeof atob>"u")throw noe("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xE{constructor(e,t){this.data=e,this.contentType=t||null}}function boe(n,e){switch(n){case Zi.RAW:return new xE(D4(e));case Zi.BASE64:case Zi.BASE64URL:return new xE(L4(n,e));case Zi.DATA_URL:return new xE(_oe(e),Soe(e))}throw TP()}function D4(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const r=s,o=n.charCodeAt(++t);s=65536|(r&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function xoe(n){let e;try{e=decodeURIComponent(n)}catch{throw im(Zi.DATA_URL,"Malformed data URL.")}return D4(e)}function L4(n,e){switch(n){case Zi.BASE64:{const i=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(i||r)throw im(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Zi.BASE64URL:{const i=e.indexOf("+")!==-1,r=e.indexOf("/")!==-1;if(i||r)throw im(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=woe(e)}catch(i){throw i.message.includes("polyfill")?i:im(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return s}class O4{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw im(Zi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=Eoe(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function _oe(n){const e=new O4(n);return e.base64?L4(Zi.BASE64,e.rest):xoe(e.rest)}function Soe(n){return new O4(n).contentType}function Eoe(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t){let s=0,i="";QD(e)?(this.data_=e,s=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(QD(this.data_)){const s=this.data_,i=voe(s,e,t);return i===null?null:new Mo(i)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Mo(s,!0)}}static getBlob(...e){if(IP()){const t=e.map(s=>s instanceof Mo?s.data_:s);return new Mo(yoe.apply(null,t))}else{const t=e.map(o=>kP(o)?boe(Zi.RAW,o).data:o.data_);let s=0;t.forEach(o=>{s+=o.byteLength});const i=new Uint8Array(s);let r=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[r++]=o[a]}),new Mo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(n){let e;try{e=JSON.parse(n)}catch{return null}return loe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Coe(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Aoe(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function j4(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Toe(n,e){return e}class xn{constructor(e,t,s,i){this.server=e,this.local=t||e,this.writable=!!s,this.xform=i||Toe}}let Tw=null;function koe(n){return!kP(n)||n.length<2?n:j4(n)}function B4(){if(Tw)return Tw;const n=[];n.push(new xn("bucket")),n.push(new xn("generation")),n.push(new xn("metageneration")),n.push(new xn("name","fullPath",!0));function e(r,o){return koe(o)}const t=new xn("name");t.xform=e,n.push(t);function s(r,o){return o!==void 0?Number(o):o}const i=new xn("size");return i.xform=s,n.push(i),n.push(new xn("timeCreated")),n.push(new xn("updated")),n.push(new xn("md5Hash",null,!0)),n.push(new xn("cacheControl",null,!0)),n.push(new xn("contentDisposition",null,!0)),n.push(new xn("contentEncoding",null,!0)),n.push(new xn("contentLanguage",null,!0)),n.push(new xn("contentType",null,!0)),n.push(new xn("metadata","customMetadata",!0)),Tw=n,Tw}function Ioe(n,e){function t(){const s=n.bucket,i=n.fullPath,r=new vs(s,i);return e._makeStorageReference(r)}Object.defineProperty(n,"ref",{get:t})}function Poe(n,e,t){const s={};s.type="file";const i=t.length;for(let r=0;r<i;r++){const o=t[r];s[o.local]=o.xform(s,e[o.server])}return Ioe(s,n),s}function H4(n,e,t){const s=F4(e);return s===null?null:Poe(n,s,t)}function Roe(n,e,t,s){const i=F4(e);if(i===null||!kP(i.downloadTokens))return null;const r=i.downloadTokens;if(r.length===0)return null;const o=encodeURIComponent;return r.split(",").map(c=>{const u=n.bucket,d=n.fullPath,f="/b/"+o(u)+"/o/"+o(d),p=PP(f,t,s),y=N4({alt:"media",token:c});return p+y})[0]}function Moe(n,e){const t={},s=e.length;for(let i=0;i<s;i++){const r=e[i];r.writable&&(t[r.server]=n[r.local])}return JSON.stringify(t)}class V4{constructor(e,t,s,i){this.url=e,this.method=t,this.handler=s,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(n){if(!n)throw TP()}function Noe(n,e){function t(s,i){const r=H4(n,i,e);return U4(r!==null),r}return t}function Doe(n,e){function t(s,i){const r=H4(n,i,e);return U4(r!==null),Roe(r,i,n.host,n._protocol)}return t}function $4(n){function e(t,s){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Yre():i=Gre():t.getStatus()===402?i=Wre(n.bucket):t.getStatus()===403?i=Kre(n.path):i=s,i.status=t.getStatus(),i.serverResponse=s.serverResponse,i}return e}function Loe(n){const e=$4(n);function t(s,i){let r=e(s,i);return s.getStatus()===404&&(r=zre(n.path)),r.serverResponse=i.serverResponse,r}return t}function Ooe(n,e,t){const s=e.fullServerUrl(),i=PP(s,n.host,n._protocol),r="GET",o=n.maxOperationRetryTime,a=new V4(i,r,Doe(n,t),o);return a.errorHandler=Loe(e),a}function Foe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function joe(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=Foe(null,e)),s}function Boe(n,e,t,s,i){const r=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let m=0;m<2;m++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=joe(e,s,i),u=Moe(c,t),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=Mo.getBlob(d,s,f);if(p===null)throw eoe();const y={name:c.fullPath},g=PP(r,n.host,n._protocol),S="POST",w=n.maxUploadRetryTime,_=new V4(g,S,Noe(n,t),w);return _.urlParams=y,_.headers=o,_.body=p.uploadData(),_.errorHandler=$4(e),_}class Hoe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=eu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=eu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=eu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,i,r){if(this.sent_)throw rp("cannot .send() more than once");if(Nv(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Voe extends Hoe{initXhr(){this.xhr_.responseType="text"}}function z4(){return new Voe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t){this._service=e,t instanceof vs?this._location=t:this._location=vs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pu(e,t)}get root(){const e=new vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return j4(this._location.path)}get storage(){return this._service}get parent(){const e=Coe(this._location.path);if(e===null)return null;const t=new vs(this._location.bucket,e);return new pu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw soe(e)}}function Uoe(n,e,t){n._throwIfRoot("uploadBytes");const s=Boe(n.storage,n._location,B4(),new Mo(e,!0),t);return n.storage.makeRequestWithTokens(s,z4).then(i=>({metadata:i,ref:n}))}function $oe(n){n._throwIfRoot("getDownloadURL");const e=Ooe(n.storage,n._location,B4());return n.storage.makeRequestWithTokens(e,z4).then(t=>{if(t===null)throw toe();return t})}function zoe(n,e){const t=Aoe(n._location.path,e),s=new vs(n._location.bucket,t);return new pu(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Woe(n){return/^[A-Za-z]+:\/\//.test(n)}function Goe(n,e){return new pu(n,e)}function W4(n,e){if(n instanceof RP){const t=n;if(t._bucket==null)throw Zre();const s=new pu(t,t._bucket);return e!=null?W4(s,e):s}else return e!==void 0?zoe(n,e):n}function Yoe(n,e){if(e&&Woe(e)){if(n instanceof RP)return Goe(n,e);throw RA("To use ref(service, url), the first argument must be a Storage instance.")}else return W4(n,e)}function ZD(n,e){const t=e==null?void 0:e[R4];return t==null?null:vs.makeFromBucketSpec(t,n)}function Koe(n,e,t,s={}){n.host=`${e}:${t}`;const i=Nv(e);i&&(q3(`https://${n.host}/b`),Q3("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:r}=s;r&&(n._overrideAuthToken=typeof r=="string"?r:X3(r,n.app.options.projectId))}class RP{constructor(e,t,s,i,r,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=i,this._firebaseVersion=r,this._isUsingEmulator=o,this._bucket=null,this._host=P4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ure,this._maxUploadRetryTime=$re,this._requests=new Set,i!=null?this._bucket=vs.makeFromBucketSpec(i,this._host):this._bucket=ZD(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vs.makeFromBucketSpec(this._url,e):this._bucket=ZD(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(oV(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pu(this,e)}_makeRequest(e,t,s,i,r=!0){if(this._deleted)return new ioe(M4());{const o=moe(e,this._appId,s,i,t,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,i).getPromise()}}const eL="@firebase/storage",tL="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="storage";function qoe(n,e,t){return n=lr(n),Uoe(n,e,t)}function Xoe(n){return n=lr(n),$oe(n)}function Qoe(n,e){return n=lr(n),Yoe(n,e)}function Joe(n=cV(),e){n=lr(n);const s=rV(n,G4).getImmediate({identifier:e}),i=Y3("storage");return i&&Zoe(s,...i),s}function Zoe(n,e,t,s={}){Koe(n,e,t,s)}function eae(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new RP(t,s,i,e,aV)}function tae(){Om(new wf(G4,eae,"PUBLIC").setMultipleInstances(!0)),Fa(eL,tL,""),Fa(eL,tL,"esm2020")}tae();const nae={apiKey:"AIzaSyBXTl7FMbEzyQCZ44BOO5c47CxnawnORf4",authDomain:"kingdom-pages.firebaseapp.com",databaseURL:"https://kingdom-pages-default-rtdb.firebaseio.com",projectId:"kingdom-pages",storageBucket:"kingdom-pages.firebasestorage.app",messagingSenderId:"141311626464",appId:"1:141311626464:web:8a4c6f2e11c06d132d9485",measurementId:"G-1WQS82ZSYQ"},Y4=lV(nae),i0=Bre(Y4),sae=Joe(Y4),_E=({icon:n,title:e,content:t,href:s,delay:i})=>b.jsxs(Ae.div,{className:"flex items-start space-x-4 p-6 bg-card rounded-xl shadow-lg glassmorphism aurora-card",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:i},children:[b.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-primary to-secondary text-primary-foreground rounded-full flex items-center justify-center",children:te.createElement(n,{size:24})}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-foreground",children:e}),s?b.jsx("a",{href:s,className:"text-primary hover:underline break-all",children:t}):b.jsx("p",{className:"text-foreground/80 break-all",children:t})]})]}),iae=()=>{const{toast:n}=$I(),[e,t]=E.useState({name:"",email:"",subject:"",message:""}),[s,i]=E.useState(!1),r=a=>{const{name:l,value:c}=a.target;t(u=>({...u,[l]:c}))},o=async a=>{a.preventDefault(),i(!0);try{const l=s0(i0,"contactSubmissions");await IA(l,{...e,timestamp:new Date().toISOString()}),n({title:"Message Sent",description:"Your message was successfully submitted! 🎉",variant:"default"}),t({name:"",email:"",subject:"",message:""})}catch(l){console.error("Error saving message:",l),n({title:"Submission Failed",description:"Something went wrong. Please try again.",variant:"destructive"})}finally{i(!1)}};return b.jsxs("div",{className:"space-y-16 relative overflow-hidden",children:[b.jsx("div",{className:"absolute w-32 h-32 bg-purple-300/30 rounded-full blur-2xl top-10 left-10 rotate-12 z-0"}),b.jsx("div",{className:"absolute w-24 h-24 bg-purple-400/20 rounded-full blur-xl bottom-20 right-16 rotate-45 z-0"}),b.jsx("div",{className:"absolute w-16 h-16 bg-purple-500/25 rounded-full blur-md top-1/2 left-1/3 rotate-[-30deg] z-0"}),b.jsxs("section",{id:"contact",className:"text-center py-12 md:py-16 bg-gradient-to-br from-purple-100/30 via-blue-100/20 to-transparent rounded-xl shadow-inner scroll-mt-20 relative z-10",children:[b.jsx(Ae.h1,{className:"text-5xl md:text-6xl font-extrabold mb-6 gradient-text",initial:{opacity:0,y:-30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7,ease:"easeOut"},children:"Get In Touch"}),b.jsx(Ae.p,{className:"text-lg md:text-xl text-foreground/90 max-w-2xl mx-auto",initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7,delay:.2,ease:"easeOut"},children:"We would love to hear from you! Whether you have a question, feedback, or just want to say hello, feel free to reach out."})]}),b.jsx("section",{className:"container mx-auto",children:b.jsxs("div",{className:"grid md:grid-cols-2 gap-10 items-start",children:[b.jsxs(Ae.div,{className:"space-y-6",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},children:[b.jsx("h2",{className:"text-3xl font-bold mb-6 gradient-text",children:"Contact Information"}),b.jsx(_E,{icon:Uj,title:"Email Us",content:"admin@kingdompages.digital",href:"mailto:admin@kingdompages.digital",delay:.1}),b.jsx(_E,{icon:n9,title:"Message Us",content:b.jsxs("span",{children:["on Kingschat ",b.jsx("em",{children:"- @Kingdompages"})]}),delay:.2}),b.jsx(_E,{icon:K7,title:"Other Sites",content:b.jsx("a",{href:"https://loveworldsonsofministry.org",target:"_blank",rel:"noopener noreferrer",children:"Loveworld Sons Of Ministry"}),delay:.3})]}),b.jsxs(Ae.div,{className:"p-6 md:p-8 bg-card/90 rounded-xl shadow-2xl glassmorphism aurora-card",initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8,delay:.2},children:[b.jsx("h2",{className:"text-3xl font-bold mb-8 text-center gradient-text",children:"Send Us a Message"}),b.jsxs("form",{onSubmit:o,className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx(Zr,{htmlFor:"name",className:"text-foreground/80",children:"Full Name"}),b.jsx(Jp,{id:"name",name:"name",type:"text",placeholder:"Hannah Smith",required:!0,value:e.name,onChange:r,className:"bg-background/70"})]}),b.jsxs("div",{children:[b.jsx(Zr,{htmlFor:"email",className:"text-foreground/80",children:"Email Address"}),b.jsx(Jp,{id:"email",name:"email",type:"email",placeholder:"you@example.com",required:!0,value:e.email,onChange:r,className:"bg-background/70"})]}),b.jsxs("div",{children:[b.jsx(Zr,{htmlFor:"subject",className:"text-foreground/80",children:"Subject"}),b.jsx(Jp,{id:"subject",name:"subject",type:"text",placeholder:"Question about books",required:!0,value:e.subject,onChange:r,className:"bg-background/70"})]}),b.jsxs("div",{children:[b.jsx(Zr,{htmlFor:"message",className:"text-foreground/80",children:"Message"}),b.jsx(V3,{id:"message",name:"message",placeholder:"Your message here...",required:!0,rows:5,value:e.message,onChange:r,className:"bg-background/70"})]}),b.jsx(Un,{type:"submit",size:"lg",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-primary-foreground shadow-lg group",disabled:s,children:s?"Submitting...":b.jsxs(b.Fragment,{children:["Submit Message ",b.jsx(r9,{size:18,className:"ml-2 transition-transform duration-300 group-hover:translate-x-1"})]})})]})]})]})})]})};var rae=typeof Element<"u",oae=typeof Map=="function",aae=typeof Set=="function",lae=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function r0(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;var t,s,i;if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(s=t;s--!==0;)if(!r0(n[s],e[s]))return!1;return!0}var r;if(oae&&n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(r=n.entries();!(s=r.next()).done;)if(!e.has(s.value[0]))return!1;for(r=n.entries();!(s=r.next()).done;)if(!r0(s.value[1],e.get(s.value[0])))return!1;return!0}if(aae&&n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(r=n.entries();!(s=r.next()).done;)if(!e.has(s.value[0]))return!1;return!0}if(lae&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){if(t=n.length,t!=e.length)return!1;for(s=t;s--!==0;)if(n[s]!==e[s])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf&&typeof n.valueOf=="function"&&typeof e.valueOf=="function")return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString&&typeof n.toString=="function"&&typeof e.toString=="function")return n.toString()===e.toString();if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[s]))return!1;if(rae&&n instanceof Element)return!1;for(s=t;s--!==0;)if(!((i[s]==="_owner"||i[s]==="__v"||i[s]==="__o")&&n.$$typeof)&&!r0(n[i[s]],e[i[s]]))return!1;return!0}return n!==n&&e!==e}var cae=function(e,t){try{return r0(e,t)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};const uae=Af(cae);var hae=function(n,e,t,s,i,r,o,a){if(!n){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[t,s,i,r,o,a],u=0;l=new Error(e.replace(/%s/g,function(){return c[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},dae=hae;const nL=Af(dae);var fae=function(e,t,s,i){var r=s?s.call(i,e,t):void 0;if(r!==void 0)return!!r;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var u=o[c];if(!l(u))return!1;var d=e[u],f=t[u];if(r=s?s.call(i,d,f,u):void 0,r===!1||r===void 0&&d!==f)return!1}return!0};const pae=Af(fae);var K4=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(K4||{}),SE={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},sL=Object.values(K4),MP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},mae=Object.entries(MP).reduce((n,[e,t])=>(n[t]=e,n),{}),vi="data-rh",bh={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},xh=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const s=n[t];if(Object.prototype.hasOwnProperty.call(s,e))return s[e]}return null},gae=n=>{let e=xh(n,"title");const t=xh(n,bh.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const s=xh(n,bh.DEFAULT_TITLE);return e||s||void 0},yae=n=>xh(n,bh.ON_CHANGE_CLIENT_STATE)||(()=>{}),EE=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,s)=>({...t,...s}),{}),vae=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,s)=>{if(!t.length){const i=Object.keys(s);for(let r=0;r<i.length;r+=1){const a=i[r].toLowerCase();if(n.indexOf(a)!==-1&&s[a])return t.concat(s)}}return t},[]),wae=n=>console&&typeof console.warn=="function"&&console.warn(n),op=(n,e,t)=>{const s={};return t.filter(i=>Array.isArray(i[n])?!0:(typeof i[n]<"u"&&wae(`Helmet: ${n} should be of type "Array". Instead found type "${typeof i[n]}"`),!1)).map(i=>i[n]).reverse().reduce((i,r)=>{const o={};r.filter(l=>{let c;const u=Object.keys(l);for(let f=0;f<u.length;f+=1){const p=u[f],y=p.toLowerCase();e.indexOf(y)!==-1&&!(c==="rel"&&l[c].toLowerCase()==="canonical")&&!(y==="rel"&&l[y].toLowerCase()==="stylesheet")&&(c=y),e.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(c=p)}if(!c||!l[c])return!1;const d=l[c].toLowerCase();return s[c]||(s[c]={}),o[c]||(o[c]={}),s[c][d]?!1:(o[c][d]=!0,!0)}).reverse().forEach(l=>i.push(l));const a=Object.keys(o);for(let l=0;l<a.length;l+=1){const c=a[l],u={...s[c],...o[c]};s[c]=u}return i},[]).reverse()},bae=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},xae=n=>({baseTag:vae(["href"],n),bodyAttributes:EE("bodyAttributes",n),defer:xh(n,bh.DEFER),encode:xh(n,bh.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:EE("htmlAttributes",n),linkTags:op("link",["rel","href"],n),metaTags:op("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:op("noscript",["innerHTML"],n),onChangeClientState:yae(n),scriptTags:op("script",["src","innerHTML"],n),styleTags:op("style",["cssText"],n),title:gae(n),titleAttributes:EE("titleAttributes",n),prioritizeSeoTags:bae(n,bh.PRIORITIZE_SEO_TAGS)}),q4=n=>Array.isArray(n)?n.join(""):n,_ae=(n,e)=>{const t=Object.keys(n);for(let s=0;s<t.length;s+=1)if(e[t[s]]&&e[t[s]].includes(n[t[s]]))return!0;return!1},CE=(n,e)=>Array.isArray(n)?n.reduce((t,s)=>(_ae(s,e)?t.priority.push(s):t.default.push(s),t),{priority:[],default:[]}):{default:n,priority:[]},iL=(n,e)=>({...n,[e]:void 0}),Sae=["noscript","script","style"],MA=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),X4=n=>Object.keys(n).reduce((e,t)=>{const s=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${s}`:s},""),Eae=(n,e,t,s)=>{const i=X4(t),r=q4(e);return i?`<${n} ${vi}="true" ${i}>${MA(r,s)}</${n}>`:`<${n} ${vi}="true">${MA(r,s)}</${n}>`},Cae=(n,e,t=!0)=>e.reduce((s,i)=>{const r=i,o=Object.keys(r).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,u)=>{const d=typeof r[u]>"u"?u:`${u}="${MA(r[u],t)}"`;return c?`${c} ${d}`:d},""),a=r.innerHTML||r.cssText||"",l=Sae.indexOf(n)===-1;return`${s}<${n} ${vi}="true" ${o}${l?"/>":`>${a}</${n}>`}`},""),Q4=(n,e={})=>Object.keys(n).reduce((t,s)=>{const i=MP[s];return t[i||s]=n[s],t},e),Aae=(n,e,t)=>{const s={key:e,[vi]:!0},i=Q4(t,s);return[te.createElement("title",i,e)]},o0=(n,e)=>e.map((t,s)=>{const i={key:s,[vi]:!0};return Object.keys(t).forEach(r=>{const a=MP[r]||r;if(a==="innerHTML"||a==="cssText"){const l=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:l}}else i[a]=t[r]}),te.createElement(n,i)}),Is=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>Aae(n,e.title,e.titleAttributes),toString:()=>Eae(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Q4(e),toString:()=>X4(e)};default:return{toComponent:()=>o0(n,e),toString:()=>Cae(n,e,t)}}},Tae=({metaTags:n,linkTags:e,scriptTags:t,encode:s})=>{const i=CE(n,SE.meta),r=CE(e,SE.link),o=CE(t,SE.script);return{priorityMethods:{toComponent:()=>[...o0("meta",i.priority),...o0("link",r.priority),...o0("script",o.priority)],toString:()=>`${Is("meta",i.priority,s)} ${Is("link",r.priority,s)} ${Is("script",o.priority,s)}`},metaTags:i.default,linkTags:r.default,scriptTags:o.default}},kae=n=>{const{baseTag:e,bodyAttributes:t,encode:s=!0,htmlAttributes:i,noscriptTags:r,styleTags:o,title:a="",titleAttributes:l,prioritizeSeoTags:c}=n;let{linkTags:u,metaTags:d,scriptTags:f}=n,p={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:p,linkTags:u,metaTags:d,scriptTags:f}=Tae(n)),{priority:p,base:Is("base",e,s),bodyAttributes:Is("bodyAttributes",t,s),htmlAttributes:Is("htmlAttributes",i,s),link:Is("link",u,s),meta:Is("meta",d,s),noscript:Is("noscript",r,s),script:Is("script",f,s),style:Is("style",o,s),title:Is("title",{title:a,titleAttributes:l},s)}},NA=kae,kw=[],J4=!!(typeof window<"u"&&window.document&&window.document.createElement),DA=class{constructor(n,e){V(this,"instances",[]);V(this,"canUseDOM",J4);V(this,"context");V(this,"value",{setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?kw:this.instances,add:n=>{(this.canUseDOM?kw:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?kw:this.instances).indexOf(n);(this.canUseDOM?kw:this.instances).splice(e,1)}}});this.context=n,this.canUseDOM=e||!1,e||(n.helmet=NA({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Iae={},Z4=te.createContext(Iae),Ch,eU=(Ch=class extends E.Component{constructor(t){super(t);V(this,"helmetData");this.helmetData=new DA(this.props.context||{},Ch.canUseDOM)}render(){return te.createElement(Z4.Provider,{value:this.helmetData.value},this.props.children)}},V(Ch,"canUseDOM",J4),Ch),Du=(n,e)=>{const t=document.head||document.querySelector("head"),s=t.querySelectorAll(`${n}[${vi}]`),i=[].slice.call(s),r=[];let o;return e&&e.length&&e.forEach(a=>{const l=document.createElement(n);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(c==="innerHTML")l.innerHTML=a.innerHTML;else if(c==="cssText")l.styleSheet?l.styleSheet.cssText=a.cssText:l.appendChild(document.createTextNode(a.cssText));else{const u=c,d=typeof a[u]>"u"?"":a[u];l.setAttribute(c,d)}l.setAttribute(vi,"true"),i.some((c,u)=>(o=u,l.isEqualNode(c)))?i.splice(o,1):r.push(l)}),i.forEach(a=>{var l;return(l=a.parentNode)==null?void 0:l.removeChild(a)}),r.forEach(a=>t.appendChild(a)),{oldTags:i,newTags:r}},LA=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const s=t.getAttribute(vi),i=s?s.split(","):[],r=[...i],o=Object.keys(e);for(const a of o){const l=e[a]||"";t.getAttribute(a)!==l&&t.setAttribute(a,l),i.indexOf(a)===-1&&i.push(a);const c=r.indexOf(a);c!==-1&&r.splice(c,1)}for(let a=r.length-1;a>=0;a-=1)t.removeAttribute(r[a]);i.length===r.length?t.removeAttribute(vi):t.getAttribute(vi)!==o.join(",")&&t.setAttribute(vi,o.join(","))},Pae=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=q4(n)),LA("title",e)},rL=(n,e)=>{const{baseTag:t,bodyAttributes:s,htmlAttributes:i,linkTags:r,metaTags:o,noscriptTags:a,onChangeClientState:l,scriptTags:c,styleTags:u,title:d,titleAttributes:f}=n;LA("body",s),LA("html",i),Pae(d,f);const p={baseTag:Du("base",t),linkTags:Du("link",r),metaTags:Du("meta",o),noscriptTags:Du("noscript",a),scriptTags:Du("script",c),styleTags:Du("style",u)},y={},g={};Object.keys(p).forEach(S=>{const{newTags:w,oldTags:_}=p[S];w.length&&(y[S]=w),_.length&&(g[S]=p[S].oldTags)}),e&&e(),l(n,y,g)},ap=null,Rae=n=>{ap&&cancelAnimationFrame(ap),n.defer?ap=requestAnimationFrame(()=>{rL(n,()=>{ap=null})}):(rL(n),ap=null)},Mae=Rae,oL=class extends E.Component{constructor(){super(...arguments);V(this,"rendered",!1)}shouldComponentUpdate(e){return!pae(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let s=null;const i=xae(e.get().map(r=>{const o={...r.props};return delete o.context,o}));eU.canUseDOM?Mae(i):NA&&(s=NA(i)),t(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},OE,OA=(OE=class extends E.Component{shouldComponentUpdate(n){return!uae(iL(this.props,"helmetData"),iL(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,s){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,s)}]}}mapObjectTypeChildren(n,e,t,s){switch(n.type){case"title":return{...e,[n.type]:s,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(s=>{t={...t,[s]:n[s]}}),t}warnOnInvalidChildren(n,e){return nL(sL.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${sL.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),nL(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return te.Children.forEach(n,s=>{if(!s||!s.props)return;const{children:i,...r}=s.props,o=Object.keys(r).reduce((l,c)=>(l[mae[c]||c]=r[c],l),{});let{type:a}=s;switch(typeof a=="symbol"?a=a.toString():this.warnOnInvalidChildren(s,i),a){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(s,t,o,i);break;default:e=this.mapObjectTypeChildren(s,e,o,i);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:s}=e;if(n&&(t=this.mapChildrenToProps(n,t)),s&&!(s instanceof DA)){const i=s;s=new DA(i.context,!0),delete t.helmetData}return s?te.createElement(oL,{...t,context:s.value}):te.createElement(Z4.Consumer,null,i=>te.createElement(oL,{...t,context:i}))}},V(OE,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),OE);const Nae="modulepreload",Dae=function(n){return"/"+n},aL={},Lae=function(e,t,s){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=Dae(r),r in aL)return;aL[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===r&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Nae,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},In=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FA=[.001,0,0,.001,0,0],AE=1.35,fs={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Qi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},tU="pdfjs_internal_editor_",le={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Ce={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},nU={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},cn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},rm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},gt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Lu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Bv={ERRORS:0,WARNINGS:1,INFOS:5},Wm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Iw={moveTo:0,lineTo:1,curveTo:2,closePath:3},sU={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let KS=Bv.WARNINGS;function Oae(n){Number.isInteger(n)&&(KS=n)}function Fae(){return KS}function qS(n){KS>=Bv.INFOS&&console.log(`Info: ${n}`)}function ce(n){KS>=Bv.WARNINGS&&console.log(`Warning: ${n}`)}function Fe(n){throw new Error(n)}function At(n,e){n||Fe(e)}function jae(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function NP(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=$ae(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return jae(s)?s:null}function DP(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&NP(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function _e(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Au=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class lL extends Au{constructor(e,t){super(e,"PasswordException"),this.code=t}}class TE extends Au{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class $b extends Au{constructor(e){super(e,"InvalidPDFException")}}class Gm extends Au{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class Bae extends Au{constructor(e){super(e,"FormatError")}}class po extends Au{constructor(e){super(e,"AbortException")}}function iU(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Fe("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Hv(n){typeof n!="string"&&Fe("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function Hae(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Vae(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Uae(){try{return new Function(""),!0}catch{return!1}}class Yt{static get isLittleEndian(){return _e(this,"isLittleEndian",Vae())}static get isEvalSupported(){return _e(this,"isEvalSupported",Uae())}static get isOffscreenCanvasSupported(){return _e(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return _e(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return _e(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return _e(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const kE=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ah,a0,Jm,jA;class se{static makeHexColor(e,t,s){return`#${kE[e]}${kE[t]}${kE[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,s=0){const i=e[s],r=e[s+1];e[s]=i*t[0]+r*t[2]+t[4],e[s+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],r=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<6;u+=2){const d=e[s+u],f=e[s+u+1];e[s+u]=d*i+f*o+l,e[s+u+1]=d*r+f*a+c}}static applyInverseTransform(e,t){const s=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,s){const i=t[0],r=t[1],o=t[2],a=t[3],l=t[4],c=t[5],u=e[0],d=e[1],f=e[2],p=e[3];let y=i*u+l,g=y,S=i*f+l,w=S,_=a*d+c,v=_,m=a*p+c,x=m;if(r!==0||o!==0){const A=r*u,k=r*f,P=o*d,R=o*p;y+=P,w+=P,S+=R,g+=R,_+=A,x+=A,m+=k,v+=k}s[0]=Math.min(s[0],y,S,g,w),s[1]=Math.min(s[1],_,m,v,x),s[2]=Math.max(s[2],y,S,g,w),s[3]=Math.max(s[3],_,m,v,x)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],r=e[2],o=e[3],a=s**2+i**2,l=s*r+i*o,c=r**2+o**2,u=(a+c)/2,d=Math.sqrt(u**2-(a*c-l**2));t[0]=Math.sqrt(u+d||1),t[1]=Math.sqrt(u-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[s,r,i,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,r){r[0]=Math.min(r[0],e,s),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,s),r[3]=Math.max(r[3],t,i)}static bezierBoundingBox(e,t,s,i,r,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l),I(this,Jm,jA).call(this,e,s,r,a,t,i,o,l,3*(-e+3*(s-r)+a),6*(e-2*s+r),3*(s-e),c),I(this,Jm,jA).call(this,e,s,r,a,t,i,o,l,3*(-t+3*(i-o)+l),6*(t-2*i+o),3*(i-t),c)}}Ah=new WeakSet,a0=function(e,t,s,i,r,o,a,l,c,u){if(c<=0||c>=1)return;const d=1-c,f=c*c,p=f*c,y=d*(d*(d*e+3*c*t)+3*f*s)+p*i,g=d*(d*(d*r+3*c*o)+3*f*a)+p*l;u[0]=Math.min(u[0],y),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],y),u[3]=Math.max(u[3],g)},Jm=new WeakSet,jA=function(e,t,s,i,r,o,a,l,c,u,d,f){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&I(this,Ah,a0).call(this,e,t,s,i,r,o,a,l,-d/u,f);return}const p=u**2-4*d*c;if(p<0)return;const y=Math.sqrt(p),g=2*c;I(this,Ah,a0).call(this,e,t,s,i,r,o,a,l,(-u+y)/g,f),I(this,Ah,a0).call(this,e,t,s,i,r,o,a,l,(-u-y)/g,f)},C(se,Ah),C(se,Jm);function $ae(n){return decodeURIComponent(escape(n))}let IE=null,cL=null;function rU(n){return IE||(IE=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,cL=new Map([["ﬅ","ſt"]])),n.replaceAll(IE,(e,t,s)=>t?t.normalize("NFKC"):cL.get(s))}function LP(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),iU(n)}const OP="pdfjs_internal_id_";function zae(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...r]=t;if(!n(s)&&!Number.isInteger(s)||!e(i))return!1;const o=r.length;let a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of r)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function pn(n,e,t){return Math.min(Math.max(n,e),t)}function oU(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(iU(n))}function Wae(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Hv(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const ur="http://www.w3.org/2000/svg",wl=class wl{};V(wl,"CSS",96),V(wl,"PDF",72),V(wl,"PDF_TO_CSS_UNITS",wl.CSS/wl.PDF);let mo=wl;async function Uf(n,e="text"){if(wp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class Vv{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,d,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,d=0,f=0,p=1;break;case 90:u=0,d=1,f=1,p=0;break;case 270:u=0,d=-1,f=-1,p=0;break;case 0:u=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let y,g,S,w;u===0?(y=Math.abs(c-e[1])*s+r,g=Math.abs(l-e[0])*s+o,S=(e[3]-e[1])*s,w=(e[2]-e[0])*s):(y=Math.abs(l-e[0])*s+r,g=Math.abs(c-e[1])*s+o,S=(e[2]-e[0])*s,w=(e[3]-e[1])*s),this.transform=[u*s,d*s,f*s,p*s,y-u*s*l-f*s*c,g-d*s*l-p*s*c],this.width=S,this.height=w}get rawDims(){const e=this.viewBox;return _e(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Vv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const s=[e,t];return se.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];se.applyTransform(t,this.transform);const s=[e[2],e[3]];return se.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return se.applyInverseTransform(s,this.transform),s}}class XS extends Au{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Uv(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function QS(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function aU(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function lU(n,e="document.pdf"){if(typeof n!="string")return e;if(Uv(n))return ce('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const i=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},r=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(r.test(o))return i(o);if(s.searchParams.size>0){const a=Array.from(s.searchParams.values()).reverse();for(const c of a)if(r.test(c))return i(c);const l=Array.from(s.searchParams.keys()).reverse();for(const c of l)if(r.test(c))return i(c)}if(s.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(l)return i(l[0])}return e}class uL{constructor(){V(this,"started",Object.create(null));V(this,"times",[])}time(e){e in this.started&&ce(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ce(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function wp(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Ys(n){n.preventDefault()}function wt(n){n.preventDefault(),n.stopPropagation()}function Gae(n){console.log("Deprecated API usage: "+n)}var Zm;class JS{static toDateObject(e){if(!e||typeof e!="string")return null;h(this,Zm)||T(this,Zm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=h(this,Zm).exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(o+=u,a+=d):c==="+"&&(o-=u,a-=d),new Date(Date.UTC(s,i,r,o,a,l))}}Zm=new WeakMap,C(JS,Zm,void 0);function cU(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new Vv({viewBox:r,userUnit:1,scale:e,rotation:t})}function FP(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ce(`Not a valid color format: "${n}"`),[0,0,0])}function Yae(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,FP(s))}e.remove()}function it(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform();return[e,t,s,i,r,o]}function Ti(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[e,t,s,i,r,o]}function Ya(n,e,t=!1,s=!0){if(e instanceof Vv){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:o}=n,a=Yt.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${r}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Ci{constructor(){const{pixelRatio:e}=Ci;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,r=-1){let o=1/0,a=1/0,l=1/0;s=Ci.capPixels(s,r),s>0&&(o=Math.sqrt(s/(e*t))),i!==-1&&(a=i/e,l=i/t);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const zb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var No,kl,Ps,Do,eg,Th,tg,Qb,uU,Jb,hU,Zb,dU,Il,bp,kh,l0;const pr=class pr{constructor(e){C(this,Jb);C(this,Zb);C(this,Il);C(this,kh);C(this,No,null);C(this,kl,null);C(this,Ps,void 0);C(this,Do,null);C(this,eg,null);C(this,Th,null);T(this,Ps,e),h(pr,tg)||T(pr,tg,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=T(this,No,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=h(this,Ps)._uiManager._signal;e.addEventListener("contextmenu",Ys,{signal:t}),e.addEventListener("pointerdown",I(pr,Qb,uU),{signal:t});const s=T(this,Do,document.createElement("div"));s.className="buttons",e.append(s);const i=h(this,Ps).toolbarPosition;if(i){const{style:r}=e,o=h(this,Ps)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return h(this,No)}hide(){var e;h(this,No).classList.add("hidden"),(e=h(this,kl))==null||e.hideDropdown()}show(){var e;h(this,No).classList.remove("hidden"),(e=h(this,eg))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=h(this,Ps),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",h(pr,tg)[e]),I(this,Il,bp).call(this,s),s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),h(this,Do).append(s)}async addAltText(e){const t=await e.render();I(this,Il,bp).call(this,t),h(this,Do).append(t,h(this,kh,l0)),T(this,eg,e)}addColorPicker(e){T(this,kl,e);const t=e.renderButton();I(this,Il,bp).call(this,t),h(this,Do).append(t,h(this,kh,l0))}async addEditSignatureButton(e){const t=T(this,Th,await e.renderEditButton(h(this,Ps)));I(this,Il,bp).call(this,t),h(this,Do).append(t,h(this,kh,l0))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){h(this,Th)&&(h(this,Th).title=e)}remove(){var e;h(this,No).remove(),(e=h(this,kl))==null||e.destroy(),T(this,kl,null)}};No=new WeakMap,kl=new WeakMap,Ps=new WeakMap,Do=new WeakMap,eg=new WeakMap,Th=new WeakMap,tg=new WeakMap,Qb=new WeakSet,uU=function(e){e.stopPropagation()},Jb=new WeakSet,hU=function(e){h(this,Ps)._focusEventsAllowed=!1,wt(e)},Zb=new WeakSet,dU=function(e){h(this,Ps)._focusEventsAllowed=!0,wt(e)},Il=new WeakSet,bp=function(e){const t=h(this,Ps)._uiManager._signal;e.addEventListener("focusin",I(this,Jb,hU).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",I(this,Zb,dU).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ys,{signal:t})},kh=new WeakSet,l0=function(){const e=document.createElement("div");return e.className="divider",e},C(pr,Qb),C(pr,tg,null);let BA=pr;var ng,Pl,Rl,ex,fU,tx,pU,nx,mU;class Kae{constructor(e){C(this,ex);C(this,tx);C(this,nx);C(this,ng,null);C(this,Pl,null);C(this,Rl,void 0);T(this,Rl,e)}show(e,t,s){const[i,r]=I(this,tx,pU).call(this,t,s),{style:o}=h(this,Pl)||T(this,Pl,I(this,ex,fU).call(this));e.append(h(this,Pl)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){h(this,Pl).remove()}}ng=new WeakMap,Pl=new WeakMap,Rl=new WeakMap,ex=new WeakSet,fU=function(){const e=T(this,Pl,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Ys,{signal:h(this,Rl)._signal});const t=T(this,ng,document.createElement("div"));return t.className="buttons",e.append(t),I(this,nx,mU).call(this),e},tx=new WeakSet,pU=function(e,t){let s=0,i=0;for(const r of e){const o=r.y+r.height;if(o<s)continue;const a=r.x+(t?r.width:0);if(o>s){i=a,s=o;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,s]},nx=new WeakSet,mU=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=h(this,Rl)._signal;e.addEventListener("contextmenu",Ys,{signal:s}),e.addEventListener("click",()=>{h(this,Rl).highlightSelection("floating_button")},{signal:s}),h(this,ng).append(e)};function gU(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var sx;class qae{constructor(){C(this,sx,0)}get id(){return`${tU}${bn(this,sx)._++}`}}sx=new WeakMap;var Ih,sg,hn,Ph,c0;const QP=class QP{constructor(){C(this,Ph);C(this,Ih,LP());C(this,sg,0);C(this,hn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return _e(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return I(this,Ph,c0).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return I(this,Ph,c0).call(this,e,e)}async getFromBlob(e,t){const s=await t;return I(this,Ph,c0).call(this,e,s)}async getFromId(e){h(this,hn)||T(this,hn,new Map);const t=h(this,hn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){h(this,hn)||T(this,hn,new Map);let s=h(this,hn).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${h(this,Ih)}_${bn(this,sg)._++}`,refCounter:1,isSvg:!1},h(this,hn).set(e,s),h(this,hn).set(s.id,s),s}getSvgUrl(e){const t=h(this,hn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;h(this,hn)||T(this,hn,new Map);const t=h(this,hn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${h(this,Ih)}_`)}};Ih=new WeakMap,sg=new WeakMap,hn=new WeakMap,Ph=new WeakSet,c0=async function(e,t){h(this,hn)||T(this,hn,new Map);let s=h(this,hn).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${h(this,Ih)}_${bn(this,sg)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await Uf(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=QP._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,c()},o.onload=async()=>{const d=s.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=u});o.readAsDataURL(i),await l}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){ce(i),s=null}return h(this,hn).set(e,s),s&&h(this,hn).set(s.id,s),s};let HA=QP;var yt,Lo,ig,st;class Xae{constructor(e=128){C(this,yt,[]);C(this,Lo,!1);C(this,ig,void 0);C(this,st,-1);T(this,ig,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),h(this,Lo))return;const l={cmd:e,undo:t,post:s,type:r};if(h(this,st)===-1){h(this,yt).length>0&&(h(this,yt).length=0),T(this,st,0),h(this,yt).push(l);return}if(o&&h(this,yt)[h(this,st)].type===r){a&&(l.undo=h(this,yt)[h(this,st)].undo),h(this,yt)[h(this,st)]=l;return}const c=h(this,st)+1;c===h(this,ig)?h(this,yt).splice(0,1):(T(this,st,c),c<h(this,yt).length&&h(this,yt).splice(c)),h(this,yt).push(l)}undo(){if(h(this,st)===-1)return;T(this,Lo,!0);const{undo:e,post:t}=h(this,yt)[h(this,st)];e(),t==null||t(),T(this,Lo,!1),T(this,st,h(this,st)-1)}redo(){if(h(this,st)<h(this,yt).length-1){T(this,st,h(this,st)+1),T(this,Lo,!0);const{cmd:e,post:t}=h(this,yt)[h(this,st)];e(),t==null||t(),T(this,Lo,!1)}}hasSomethingToUndo(){return h(this,st)!==-1}hasSomethingToRedo(){return h(this,st)<h(this,yt).length-1}cleanType(e){if(h(this,st)!==-1){for(let t=h(this,st);t>=0;t--)if(h(this,yt)[t].type!==e){h(this,yt).splice(t+1,h(this,st)-t),T(this,st,t);return}h(this,yt).length=0,T(this,st,-1)}}destroy(){T(this,yt,null)}}yt=new WeakMap,Lo=new WeakMap,ig=new WeakMap,st=new WeakMap;var ix,yU;class $v{constructor(e){C(this,ix);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Yt.platform;for(const[s,i,r={}]of e)for(const o of s){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(I(this,ix,yU).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:a=null}}=s;a&&!a(e,t)||(i.bind(e,...o,t)(),r||wt(t))}}ix=new WeakSet,yU=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const rx=class rx{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Yae(e),_e(this,"_colors",e)}convert(e){const t=FP(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,o)=>r===t[o]))return rx._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?se.makeHexColor(...t):e}};V(rx,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let VA=rx;var Rh,Zn,kt,Kt,Mh,yr,Nh,Rs,Oo,Fo,Dh,Ml,Ri,Zs,Nl,rg,og,Lh,ag,Mi,jo,Oh,Bo,Ni,ox,Ho,lg,Vo,Dl,Ll,Uo,cg,Nt,De,vr,$o,Ol,ug,hg,zo,Di,wr,dg,fg,Ms,Fh,u0,pg,UA,ax,vU,lx,wU,jh,h0,cx,bU,ux,xU,hx,_U,mg,$A,dx,SU,gg,zA,yg,WA,fx,EU,qt,_n,ei,hr,px,CU,mx,AU,vg,GA,gx,TU,Fl,xp,wg,YA;const oh=class oh{constructor(e,t,s,i,r,o,a,l,c,u,d,f,p,y,g){C(this,Fh);C(this,pg);C(this,ax);C(this,lx);C(this,jh);C(this,cx);C(this,ux);C(this,hx);C(this,mg);C(this,dx);C(this,gg);C(this,yg);C(this,fx);C(this,qt);C(this,ei);C(this,px);C(this,mx);C(this,vg);C(this,gx);C(this,Fl);C(this,wg);C(this,Rh,new AbortController);C(this,Zn,null);C(this,kt,new Map);C(this,Kt,new Map);C(this,Mh,null);C(this,yr,null);C(this,Nh,null);C(this,Rs,new Xae);C(this,Oo,null);C(this,Fo,null);C(this,Dh,0);C(this,Ml,new Set);C(this,Ri,null);C(this,Zs,null);C(this,Nl,new Set);V(this,"_editorUndoBar",null);C(this,rg,!1);C(this,og,!1);C(this,Lh,!1);C(this,ag,null);C(this,Mi,null);C(this,jo,null);C(this,Oh,null);C(this,Bo,!1);C(this,Ni,null);C(this,ox,new qae);C(this,Ho,!1);C(this,lg,!1);C(this,Vo,null);C(this,Dl,null);C(this,Ll,null);C(this,Uo,null);C(this,cg,null);C(this,Nt,le.NONE);C(this,De,new Set);C(this,vr,null);C(this,$o,null);C(this,Ol,null);C(this,ug,null);C(this,hg,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});C(this,zo,[0,0]);C(this,Di,null);C(this,wr,null);C(this,dg,null);C(this,fg,null);C(this,Ms,null);const S=this._signal=h(this,Rh).signal;T(this,wr,e),T(this,dg,t),T(this,fg,s),T(this,Mh,i),T(this,$o,r),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:S}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),o._on("setpreference",this.onSetPreference.bind(this),{signal:S}),o._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:S}),I(this,cx,bU).call(this),I(this,fx,EU).call(this),I(this,mg,$A).call(this),T(this,yr,a.annotationStorage),T(this,ag,a.filterFactory),T(this,Ol,l),T(this,Oh,c||null),T(this,rg,u),T(this,og,d),T(this,Lh,f),T(this,cg,p||null),this.viewParameters={realScale:mo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=g!==!1}static get _keyboardManager(){const e=oh.prototype,t=o=>h(o,wr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return _e(this,"_keyboardManager",new $v([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,wr).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,wr).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i,r,o,a,l;(e=h(this,Ms))==null||e.resolve(),T(this,Ms,null),(t=h(this,Rh))==null||t.abort(),T(this,Rh,null),this._signal=null;for(const c of h(this,Kt).values())c.destroy();h(this,Kt).clear(),h(this,kt).clear(),h(this,Nl).clear(),(s=h(this,Uo))==null||s.clear(),T(this,Zn,null),h(this,De).clear(),h(this,Rs).destroy(),(i=h(this,Mh))==null||i.destroy(),(r=h(this,$o))==null||r.destroy(),(o=h(this,Ni))==null||o.hide(),T(this,Ni,null),(a=h(this,Ll))==null||a.destroy(),T(this,Ll,null),h(this,Mi)&&(clearTimeout(h(this,Mi)),T(this,Mi,null)),h(this,Di)&&(clearTimeout(h(this,Di)),T(this,Di,null)),(l=this._editorUndoBar)==null||l.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return h(this,cg)}get useNewAltTextFlow(){return h(this,og)}get useNewAltTextWhenAddingImage(){return h(this,Lh)}get hcmFilter(){return _e(this,"hcmFilter",h(this,Ol)?h(this,ag).addHCMFilter(h(this,Ol).foreground,h(this,Ol).background):"none")}get direction(){return _e(this,"direction",getComputedStyle(h(this,wr)).direction)}get highlightColors(){return _e(this,"highlightColors",h(this,Oh)?new Map(h(this,Oh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return _e(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),T(this,Fo,e)}setMainHighlightColorPicker(e){T(this,Ll,e)}editAltText(e,t=!1){var s;(s=h(this,Mh))==null||s.editAltText(this,e,t)}getSignature(e){var t;(t=h(this,$o))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return h(this,$o)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":T(this,Lh,t);break}}onPageChanging({pageNumber:e}){T(this,Dh,e-1)}focusMainContainer(){h(this,wr).focus()}findParent(e,t){for(const s of h(this,Kt).values()){const{x:i,y:r,width:o,height:a}=s.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=r&&t<=r+a)return s}return null}disableUserSelect(e=!1){h(this,dg).classList.toggle("noUserSelect",e)}addShouldRescale(e){h(this,Nl).add(e)}removeShouldRescale(e){h(this,Nl).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*mo.PDF_TO_CSS_UNITS;for(const s of h(this,Nl))s.onScaleChanging();(t=h(this,Fo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o}=t,a=t.toString(),c=I(this,Fh,u0).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;t.empty();const d=I(this,pg,UA).call(this,c),f=h(this,Nt)===le.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(le.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&h(this,yr)&&!h(this,yr).has(e.id)&&h(this,yr).setValue(e.id,e)}a11yAlert(e,t=null){const s=h(this,fg);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,h(this,Bo)&&(T(this,Bo,!1),I(this,jh,h0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of h(this,De))if(t.div.contains(e)){T(this,Dl,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!h(this,Dl))return;const[e,t]=h(this,Dl);T(this,Dl,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){I(this,mg,$A).call(this),I(this,gg,zA).call(this)}removeEditListeners(){I(this,dx,SU).call(this),I(this,yg,WA).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of h(this,Zs))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of h(this,Zs))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=h(this,Zn))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of h(this,De)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of h(this,Zs))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){ce(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const l of s){const c=await i.deserialize(l);if(!c)return;r.push(c)}const o=()=>{for(const l of r)I(this,vg,GA).call(this,l);I(this,wg,YA).call(this,r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){ce(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),h(this,Nt)!==le.NONE&&!this.isEditorHandlingKeyboard&&oh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,h(this,Bo)&&(T(this,Bo,!1),I(this,jh,h0).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(I(this,ux,xU).call(this),I(this,gg,zA).call(this),I(this,qt,_n).call(this,{isEditing:h(this,Nt)!==le.NONE,isEmpty:I(this,Fl,xp).call(this),hasSomethingToUndo:h(this,Rs).hasSomethingToUndo(),hasSomethingToRedo:h(this,Rs).hasSomethingToRedo(),hasSelectedEditor:!1})):(I(this,hx,_U).call(this),I(this,yg,WA).call(this),I(this,qt,_n).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!h(this,Zs)){T(this,Zs,e);for(const t of h(this,Zs))I(this,ei,hr).call(this,t.defaultPropertiesToUpdate)}}getId(){return h(this,ox).id}get currentLayer(){return h(this,Kt).get(h(this,Dh))}getLayer(e){return h(this,Kt).get(e)}get currentPageIndex(){return h(this,Dh)}addLayer(e){h(this,Kt).set(e.pageIndex,e),h(this,Ho)?e.enable():e.disable()}removeLayer(e){h(this,Kt).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1){var r,o,a;if(h(this,Nt)!==e&&!(h(this,Ms)&&(await h(this,Ms).promise,!h(this,Ms)))){if(T(this,Ms,Promise.withResolvers()),(r=h(this,Fo))==null||r.commitOrRemove(),T(this,Nt,e),e===le.NONE){this.setEditingState(!1),I(this,mx,AU).call(this),(o=this._editorUndoBar)==null||o.hide(),h(this,Ms).resolve();return}e===le.SIGNATURE&&await((a=h(this,$o))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await I(this,px,CU).call(this),this.unselectAll();for(const l of h(this,Kt).values())l.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),h(this,Ms).resolve();return}for(const l of h(this,kt).values())l.annotationElementId===t||l.id===t?(this.setSelected(l),i&&l.enterInEditMode()):l.unselect();h(this,Ms).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==h(this,Nt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var s;if(h(this,Zs)){switch(e){case Ce.CREATE:this.currentLayer.addNewEditor(t);return;case Ce.HIGHLIGHT_DEFAULT_COLOR:(s=h(this,Ll))==null||s.updateColor(t);break;case Ce.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(h(this,ug)||T(this,ug,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of h(this,De))i.updateParams(e,t);for(const i of h(this,Zs))i.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const o of h(this,kt).values())o.editorType===e&&o.show(t);(((r=h(this,ug))==null?void 0:r.get(Ce.HIGHLIGHT_SHOW_ALL))??!0)!==t&&I(this,ei,hr).call(this,[[Ce.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(h(this,lg)!==e){T(this,lg,e);for(const t of h(this,Kt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of h(this,kt).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return h(this,kt).get(e)}addEditor(e){h(this,kt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(h(this,Mi)&&clearTimeout(h(this,Mi)),T(this,Mi,setTimeout(()=>{this.focusMainContainer(),T(this,Mi,null)},0))),h(this,kt).delete(e.id),e.annotationElementId&&((t=h(this,Uo))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!h(this,Ml).has(e.annotationElementId))&&((s=h(this,yr))==null||s.remove(e.id))}addDeletedAnnotationElement(e){h(this,Ml).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return h(this,Ml).has(e)}removeDeletedAnnotationElement(e){h(this,Ml).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){h(this,Zn)!==e&&(T(this,Zn,e),e&&I(this,ei,hr).call(this,e.propertiesToUpdate))}updateUI(e){h(this,gx,TU)===e&&I(this,ei,hr).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){I(this,ei,hr).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(h(this,De).has(e)){h(this,De).delete(e),e.unselect(),I(this,qt,_n).call(this,{hasSelectedEditor:this.hasSelection});return}h(this,De).add(e),e.select(),I(this,ei,hr).call(this,e.propertiesToUpdate),I(this,qt,_n).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=h(this,Fo))==null||t.commitOrRemove();for(const s of h(this,De))s!==e&&s.unselect();h(this,De).clear(),h(this,De).add(e),e.select(),I(this,ei,hr).call(this,e.propertiesToUpdate),I(this,qt,_n).call(this,{hasSelectedEditor:!0})}isSelected(e){return h(this,De).has(e)}get firstSelectedEditor(){return h(this,De).values().next().value}unselect(e){e.unselect(),h(this,De).delete(e),I(this,qt,_n).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return h(this,De).size!==0}get isEnterHandled(){return h(this,De).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;h(this,Rs).undo(),I(this,qt,_n).call(this,{hasSomethingToUndo:h(this,Rs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:I(this,Fl,xp).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){h(this,Rs).redo(),I(this,qt,_n).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:h(this,Rs).hasSomethingToRedo(),isEmpty:I(this,Fl,xp).call(this)})}addCommands(e){h(this,Rs).add(e),I(this,qt,_n).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:I(this,Fl,xp).call(this)})}cleanUndoStack(e){h(this,Rs).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...h(this,De)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const o of t)I(this,vg,GA).call(this,o)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=h(this,Zn))==null||e.commitOrRemove()}hasSomethingToControl(){return h(this,Zn)||this.hasSelection}selectAll(){for(const e of h(this,De))e.commit();I(this,wg,YA).call(this,h(this,kt).values())}unselectAll(){var e;if(!(h(this,Zn)&&(h(this,Zn).commitOrRemove(),h(this,Nt)!==le.NONE))&&!((e=h(this,Fo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of h(this,De))t.unselect();h(this,De).clear(),I(this,qt,_n).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;h(this,zo)[0]+=e,h(this,zo)[1]+=t;const[i,r]=h(this,zo),o=[...h(this,De)],a=1e3;h(this,Di)&&clearTimeout(h(this,Di)),T(this,Di,setTimeout(()=>{T(this,Di,null),h(this,zo)[0]=h(this,zo)[1]=0,this.addCommands({cmd:()=>{for(const l of o)h(this,kt).has(l.id)&&(l.translateInPage(i,r),l.translationDone())},undo:()=>{for(const l of o)h(this,kt).has(l.id)&&(l.translateInPage(-i,-r),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),T(this,Ri,new Map);for(const e of h(this,De))h(this,Ri).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!h(this,Ri))return!1;this.disableUserSelect(!1);const e=h(this,Ri);T(this,Ri,null);let t=!1;for(const[{x:i,y:r,pageIndex:o},a]of e)a.newX=i,a.newY=r,a.newPageIndex=o,t||(t=i!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const s=(i,r,o,a)=>{if(h(this,kt).has(i.id)){const l=h(this,Kt).get(a);l?i._setParentAndPosition(l,r,o):(i.pageIndex=a,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:a}]of e)s(i,r,o,a)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:a}]of e)s(i,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(h(this,Ri))for(const s of h(this,Ri).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||h(this,De).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return h(this,Zn)===e}getActive(){return h(this,Zn)}getMode(){return h(this,Nt)}get imageManager(){return _e(this,"imageManager",new HA)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,d,f)=>({x:(u-i)/o,y:1-(c+d-s)/r,width:f/o,height:d/r});break;case"180":a=(c,u,d,f)=>({x:1-(c+d-s)/r,y:1-(u+f-i)/o,width:d/r,height:f/o});break;case"270":a=(c,u,d,f)=>({x:1-(u+f-i)/o,y:(c-s)/r,width:f/o,height:d/r});break;default:a=(c,u,d,f)=>({x:(c-s)/r,y:(u-i)/o,width:d/r,height:f/o});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const d=t.getRangeAt(c);if(!d.collapsed)for(const{x:f,y:p,width:y,height:g}of d.getClientRects())y===0||g===0||l.push(a(f,p,y,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(h(this,Nh)||T(this,Nh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=h(this,Nh))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=h(this,Nh))==null?void 0:i.get(e.data.id);if(!t)return;const s=h(this,yr).getRawValue(t);s&&(h(this,Nt)===le.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var r;const i=(r=h(this,Uo))==null?void 0:r.get(e);i&&(i.setCanvas(t,s),h(this,Uo).delete(e))}addMissingCanvas(e,t){(h(this,Uo)||T(this,Uo,new Map)).set(e,t)}};Rh=new WeakMap,Zn=new WeakMap,kt=new WeakMap,Kt=new WeakMap,Mh=new WeakMap,yr=new WeakMap,Nh=new WeakMap,Rs=new WeakMap,Oo=new WeakMap,Fo=new WeakMap,Dh=new WeakMap,Ml=new WeakMap,Ri=new WeakMap,Zs=new WeakMap,Nl=new WeakMap,rg=new WeakMap,og=new WeakMap,Lh=new WeakMap,ag=new WeakMap,Mi=new WeakMap,jo=new WeakMap,Oh=new WeakMap,Bo=new WeakMap,Ni=new WeakMap,ox=new WeakMap,Ho=new WeakMap,lg=new WeakMap,Vo=new WeakMap,Dl=new WeakMap,Ll=new WeakMap,Uo=new WeakMap,cg=new WeakMap,Nt=new WeakMap,De=new WeakMap,vr=new WeakMap,$o=new WeakMap,Ol=new WeakMap,ug=new WeakMap,hg=new WeakMap,zo=new WeakMap,Di=new WeakMap,wr=new WeakMap,dg=new WeakMap,fg=new WeakMap,Ms=new WeakMap,Fh=new WeakSet,u0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},pg=new WeakSet,UA=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of h(this,Kt).values())if(s.hasTextLayer(e))return s;return null},ax=new WeakSet,vU=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=I(this,Fh,u0).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(h(this,Ni)||T(this,Ni,new Kae(this)),h(this,Ni).show(s,i,this.direction==="ltr"))},lx=new WeakSet,wU=function(){var r,o,a;const e=document.getSelection();if(!e||e.isCollapsed){h(this,vr)&&((r=h(this,Ni))==null||r.hide(),T(this,vr,null),I(this,qt,_n).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===h(this,vr))return;const i=I(this,Fh,u0).call(this,e).closest(".textLayer");if(!i){h(this,vr)&&((o=h(this,Ni))==null||o.hide(),T(this,vr,null),I(this,qt,_n).call(this,{hasSelectedText:!1}));return}if((a=h(this,Ni))==null||a.hide(),T(this,vr,t),I(this,qt,_n).call(this,{hasSelectedText:!0}),!(h(this,Nt)!==le.HIGHLIGHT&&h(this,Nt)!==le.NONE)&&(h(this,Nt)===le.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),T(this,Bo,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=h(this,Nt)===le.HIGHLIGHT?I(this,pg,UA).call(this,i):null;l==null||l.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&I(this,jh,h0).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}},jh=new WeakSet,h0=function(e=""){h(this,Nt)===le.HIGHLIGHT?this.highlightSelection(e):h(this,rg)&&I(this,ax,vU).call(this)},cx=new WeakSet,bU=function(){document.addEventListener("selectionchange",I(this,lx,wU).bind(this),{signal:this._signal})},ux=new WeakSet,xU=function(){if(h(this,jo))return;T(this,jo,new AbortController);const e=this.combinedSignal(h(this,jo));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},hx=new WeakSet,_U=function(){var e;(e=h(this,jo))==null||e.abort(),T(this,jo,null)},mg=new WeakSet,$A=function(){if(h(this,Vo))return;T(this,Vo,new AbortController);const e=this.combinedSignal(h(this,Vo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},dx=new WeakSet,SU=function(){var e;(e=h(this,Vo))==null||e.abort(),T(this,Vo,null)},gg=new WeakSet,zA=function(){if(h(this,Oo))return;T(this,Oo,new AbortController);const e=this.combinedSignal(h(this,Oo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},yg=new WeakSet,WA=function(){var e;(e=h(this,Oo))==null||e.abort(),T(this,Oo,null)},fx=new WeakSet,EU=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},qt=new WeakSet,_n=function(e){Object.entries(e).some(([s,i])=>h(this,hg)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(h(this,hg),e)}),h(this,Nt)===le.HIGHLIGHT&&e.hasSelectedEditor===!1&&I(this,ei,hr).call(this,[[Ce.HIGHLIGHT_FREE,!0]]))},ei=new WeakSet,hr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},px=new WeakSet,CU=async function(){if(!h(this,Ho)){T(this,Ho,!0);const e=[];for(const t of h(this,Kt).values())e.push(t.enable());await Promise.all(e);for(const t of h(this,kt).values())t.enable()}},mx=new WeakSet,AU=function(){if(this.unselectAll(),h(this,Ho)){T(this,Ho,!1);for(const e of h(this,Kt).values())e.disable();for(const e of h(this,kt).values())e.disable()}},vg=new WeakSet,GA=function(e){const t=h(this,Kt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},gx=new WeakSet,TU=function(){let e=null;for(e of h(this,De));return e},Fl=new WeakSet,xp=function(){if(h(this,kt).size===0)return!0;if(h(this,kt).size===1)for(const e of h(this,kt).values())return e.isEmpty();return!1},wg=new WeakSet,YA=function(e){for(const t of h(this,De))t.unselect();h(this,De).clear();for(const t of e)t.isEmpty()||(h(this,De).add(t),t.select());I(this,qt,_n).call(this,{hasSelectedEditor:this.hasSelection})},V(oh,"TRANSLATE_SMALL",1),V(oh,"TRANSLATE_BIG",10);let Ka=oh;var Dt,Li,ti,Bh,Oi,es,Hh,Fi,Fn,br,jl,ji,Wo,Bl,_p,Vh,d0;const Sn=class Sn{constructor(e){C(this,Bl);C(this,Vh);C(this,Dt,null);C(this,Li,!1);C(this,ti,null);C(this,Bh,null);C(this,Oi,null);C(this,es,null);C(this,Hh,!1);C(this,Fi,null);C(this,Fn,null);C(this,br,null);C(this,jl,null);C(this,ji,!1);T(this,Fn,e),T(this,ji,e._uiManager.useNewAltTextFlow),h(Sn,Wo)||T(Sn,Wo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Sn._l10n??(Sn._l10n=e)}async render(){const e=T(this,ti,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=T(this,Bh,document.createElement("span"));e.append(t),h(this,ji)?(e.classList.add("new"),e.setAttribute("data-l10n-id",h(Sn,Wo).missing),t.setAttribute("data-l10n-id",h(Sn,Wo)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=h(this,Fn)._uiManager._signal;e.addEventListener("contextmenu",Ys,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),h(this,Fn)._uiManager.editAltText(h(this,Fn)),h(this,ji)&&h(this,Fn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:h(this,Bl,_p)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(T(this,Hh,!0),i(r))},{signal:s}),await I(this,Vh,d0).call(this),e}finish(){h(this,ti)&&(h(this,ti).focus({focusVisible:h(this,Hh)}),T(this,Hh,!1))}isEmpty(){return h(this,ji)?h(this,Dt)===null:!h(this,Dt)&&!h(this,Li)}hasData(){return h(this,ji)?h(this,Dt)!==null||!!h(this,br):this.isEmpty()}get guessedText(){return h(this,br)}async setGuessedText(e){h(this,Dt)===null&&(T(this,br,e),T(this,jl,await Sn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),I(this,Vh,d0).call(this))}toggleAltTextBadge(e=!1){var t;if(!h(this,ji)||h(this,Dt)){(t=h(this,Fi))==null||t.remove(),T(this,Fi,null);return}if(!h(this,Fi)){const s=T(this,Fi,document.createElement("div"));s.className="noAltTextBadge",h(this,Fn).div.append(s)}h(this,Fi).classList.toggle("hidden",!e)}serialize(e){let t=h(this,Dt);return!e&&h(this,br)===t&&(t=h(this,jl)),{altText:t,decorative:h(this,Li),guessedText:h(this,br),textWithDisclaimer:h(this,jl)}}get data(){return{altText:h(this,Dt),decorative:h(this,Li)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(T(this,br,s),T(this,jl,i)),!(h(this,Dt)===e&&h(this,Li)===t)&&(r||(T(this,Dt,e),T(this,Li,t)),I(this,Vh,d0).call(this))}toggle(e=!1){h(this,ti)&&(!e&&h(this,es)&&(clearTimeout(h(this,es)),T(this,es,null)),h(this,ti).disabled=!e)}shown(){h(this,Fn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:h(this,Bl,_p)}})}destroy(){var e,t;(e=h(this,ti))==null||e.remove(),T(this,ti,null),T(this,Bh,null),T(this,Oi,null),(t=h(this,Fi))==null||t.remove(),T(this,Fi,null)}};Dt=new WeakMap,Li=new WeakMap,ti=new WeakMap,Bh=new WeakMap,Oi=new WeakMap,es=new WeakMap,Hh=new WeakMap,Fi=new WeakMap,Fn=new WeakMap,br=new WeakMap,jl=new WeakMap,ji=new WeakMap,Wo=new WeakMap,Bl=new WeakSet,_p=function(){return h(this,Dt)&&"added"||h(this,Dt)===null&&this.guessedText&&"review"||"missing"},Vh=new WeakSet,d0=async function(){var i,r,o;const e=h(this,ti);if(!e)return;if(h(this,ji)){if(e.classList.toggle("done",!!h(this,Dt)),e.setAttribute("data-l10n-id",h(Sn,Wo)[h(this,Bl,_p)]),(i=h(this,Bh))==null||i.setAttribute("data-l10n-id",h(Sn,Wo)[`${h(this,Bl,_p)}-label`]),!h(this,Dt)){(r=h(this,Oi))==null||r.remove();return}}else{if(!h(this,Dt)&&!h(this,Li)){e.classList.remove("done"),(o=h(this,Oi))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=h(this,Oi);if(!t){T(this,Oi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${h(this,Fn).id}`;const a=100,l=h(this,Fn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(h(this,es)),T(this,es,null)},{once:!0}),e.addEventListener("mouseenter",()=>{T(this,es,setTimeout(()=>{T(this,es,null),h(this,Oi).classList.add("show"),h(this,Fn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;h(this,es)&&(clearTimeout(h(this,es)),T(this,es,null)),(c=h(this,Oi))==null||c.classList.remove("show")},{signal:l})}h(this,Li)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=h(this,Dt)),t.parentNode||e.append(t);const s=h(this,Fn).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},C(Sn,Wo,null),V(Sn,"_l10n",null);let Wb=Sn;var Uh,Hl,bg,xg,_g,Sg,Eg,xr,Vl,_r,Ul,Sr,yx,kU,vx,IU,wx,PU;const JP=class JP{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){C(this,yx);C(this,vx);C(this,wx);C(this,Uh,void 0);C(this,Hl,!1);C(this,bg,null);C(this,xg,void 0);C(this,_g,void 0);C(this,Sg,void 0);C(this,Eg,void 0);C(this,xr,null);C(this,Vl,void 0);C(this,_r,null);C(this,Ul,void 0);C(this,Sr,null);T(this,Uh,e),T(this,bg,s),T(this,xg,t),T(this,_g,i),T(this,Sg,r),T(this,Eg,o),T(this,Ul,new AbortController),T(this,Vl,AbortSignal.any([a,h(this,Ul).signal])),e.addEventListener("touchstart",I(this,yx,kU).bind(this),{passive:!1,signal:h(this,Vl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ci.pixelRatio}destroy(){var e,t;(e=h(this,Ul))==null||e.abort(),T(this,Ul,null),(t=h(this,xr))==null||t.abort(),T(this,xr,null)}};Uh=new WeakMap,Hl=new WeakMap,bg=new WeakMap,xg=new WeakMap,_g=new WeakMap,Sg=new WeakMap,Eg=new WeakMap,xr=new WeakMap,Vl=new WeakMap,_r=new WeakMap,Ul=new WeakMap,Sr=new WeakMap,yx=new WeakSet,kU=function(e){var i,r,o;if((i=h(this,xg))!=null&&i.call(this))return;if(e.touches.length===1){if(h(this,xr))return;const a=T(this,xr,new AbortController),l=AbortSignal.any([h(this,Vl),a.signal]),c=h(this,Uh),u={capture:!0,signal:l,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=h(this,xr))==null||p.abort(),T(this,xr,null))};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(wt(f),d(f))},u),c.addEventListener("pointerup",d,u),c.addEventListener("pointercancel",d,u);return}if(!h(this,Sr)){T(this,Sr,new AbortController);const a=AbortSignal.any([h(this,Vl),h(this,Sr).signal]),l=h(this,Uh),c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",I(this,vx,IU).bind(this),c);const u=I(this,wx,PU).bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",wt,c),l.addEventListener("pointermove",wt,c),l.addEventListener("pointercancel",wt,c),l.addEventListener("pointerup",wt,c),(r=h(this,_g))==null||r.call(this)}if(wt(e),e.touches.length!==2||(o=h(this,bg))!=null&&o.call(this)){T(this,_r,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),T(this,_r,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},vx=new WeakSet,IU=function(e){var m;if(!h(this,_r)||e.touches.length!==2)return;wt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:o,screenY:a}=s,l=h(this,_r),{touch0X:c,touch0Y:u,touch1X:d,touch1Y:f}=l,p=d-c,y=f-u,g=o-i,S=a-r,w=Math.hypot(g,S)||1,_=Math.hypot(p,y)||1;if(!h(this,Hl)&&Math.abs(_-w)<=JP.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,!h(this,Hl)){T(this,Hl,!0);return}const v=[(i+o)/2,(r+a)/2];(m=h(this,Sg))==null||m.call(this,v,_,w)},wx=new WeakSet,PU=function(e){var t;e.touches.length>=2||(h(this,Sr)&&(h(this,Sr).abort(),T(this,Sr,null),(t=h(this,Eg))==null||t.call(this)),h(this,_r)&&(wt(e),T(this,_r,null),T(this,Hl,!1)))};let Ym=JP;var $l,ni,Ze,$h,Go,Cg,zl,Xt,Wl,Er,Yo,Ag,Gl,ts,Tg,Yl,Cr,Bi,zh,Wh,Ns,Kl,kg,bx,Ig,KA,Pg,qA,Gh,f0,xx,RU,_x,MU,Rg,XA,Yh,p0,Mg,QA,Sx,NU,Ex,DU,Cx,LU,Ng,JA,Ax,OU,Dg,ZA,Tx,FU,kx,jU,Ix,BU,Lg,eT,ql,Sp;const ge=class ge{constructor(e){C(this,Ig);C(this,Gh);C(this,xx);C(this,_x);C(this,Rg);C(this,Yh);C(this,Mg);C(this,Sx);C(this,Ex);C(this,Cx);C(this,Ng);C(this,Ax);C(this,Dg);C(this,Tx);C(this,kx);C(this,Ix);C(this,Lg);C(this,ql);C(this,$l,null);C(this,ni,null);C(this,Ze,null);C(this,$h,!1);C(this,Go,null);C(this,Cg,"");C(this,zl,!1);C(this,Xt,null);C(this,Wl,null);C(this,Er,null);C(this,Yo,null);C(this,Ag,"");C(this,Gl,!1);C(this,ts,null);C(this,Tg,!1);C(this,Yl,!1);C(this,Cr,!1);C(this,Bi,null);C(this,zh,0);C(this,Wh,0);C(this,Ns,null);C(this,Kl,null);V(this,"isSelected",!1);V(this,"_isCopy",!1);V(this,"_editToolbar",null);V(this,"_initialOptions",Object.create(null));V(this,"_initialData",null);V(this,"_isVisible",!0);V(this,"_uiManager",null);V(this,"_focusEventsAllowed",!0);C(this,kg,!1);C(this,bx,ge._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ge.prototype._resizeWithKeyboard,t=Ka.TRANSLATE_SMALL,s=Ka.TRANSLATE_BIG;return _e(this,"_resizerKeyboardManager",new $v([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],ge.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return _e(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Qae({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ge._l10n??(ge._l10n=e),ge._l10nResizer||(ge._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ge._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ge._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Fe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return h(this,kg)}set _isDraggable(e){var t;T(this,kg,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=h(this,bx)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):I(this,ql,Sp).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(h(this,Gl)?T(this,Gl,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}translate(e,t){I(this,Ig,KA).call(this,this.parentDimensions,e,t)}translateInPage(e,t){h(this,ts)||T(this,ts,[this.x,this.y,this.width,this.height]),I(this,Ig,KA).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){h(this,ts)||T(this,ts,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:u}=s;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!h(this,ts)&&(h(this,ts)[0]!==this.x||h(this,ts)[1]!==this.y)}get _hasBeenResized(){return!!h(this,ts)&&(h(this,ts)[2]!==this.width||h(this,ts)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=ge,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=s,l*=i,r*=s,o*=i,this._mustFixPosition)switch(e){case 0:r=pn(r,0,s-a),o=pn(o,0,i-l);break;case 90:r=pn(r,0,s-l),o=pn(o,a,i);break;case 180:r=pn(r,a,s),o=pn(o,l,i);break;case 270:r=pn(r,l,s),o=pn(o,0,i-a);break}this.x=r/=s,this.y=o/=i;const[c,u]=this.getBaseTranslation();r+=c,o+=u,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return I(s=ge,Pg,qA).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return I(s=ge,Pg,qA).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/s).toFixed(2)}%`,h(this,zl)||(r.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,i=s.endsWith("%"),r=!h(this,zl)&&t.endsWith("%");if(i&&r)return;const[o,a]=this.parentDimensions;i||(e.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!h(this,zl)&&!r&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=h(this,Ze))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||h(this,Yl))return this._editToolbar;this._editToolbar=new BA(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=h(this,Ze))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return h(this,Ze)||(Wb.initialize(ge._l10n),T(this,Ze,new Wb(this)),h(this,$l)&&(h(this,Ze).data=h(this,$l),T(this,$l,null))),h(this,Ze)}get altTextData(){var e;return(e=h(this,Ze))==null?void 0:e.data}set altTextData(e){h(this,Ze)&&(h(this,Ze).data=e)}get guessedAltText(){var e;return(e=h(this,Ze))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=h(this,Ze))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=h(this,Ze))==null?void 0:t.serialize(e)}hasAltText(){return!!h(this,Ze)&&!h(this,Ze).isEmpty()}hasAltTextData(){var e;return((e=h(this,Ze))==null?void 0:e.hasData())??!1}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=h(this,$h)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),I(this,Dg,ZA).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),gU(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(h(this,Kl)||T(this,Kl,new Ym({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:I(this,Sx,NU).bind(this),onPinching:I(this,Ex,DU).bind(this),onPinchEnd:I(this,Cx,LU).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(T(this,Gl,!0),this._isDraggable){I(this,Ax,OU).call(this,e);return}I(this,Ng,JA).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){h(this,Bi)&&clearTimeout(h(this,Bi)),T(this,Bi,setTimeout(()=>{var e;T(this,Bi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/i,u=t/i,d=this.x*r,f=this.y*o,p=this.width*r,y=this.height*o;switch(s){case 0:return[d+c+a,o-f-u-y+l,d+c+p+a,o-f-u+l];case 90:return[d+u+a,o-f+c+l,d+u+y+a,o-f+c+p+l];case 180:return[d-c-p+a,o-f+u+l,d-c+a,o-f+u+y+l];case 270:return[d-u-y+a,o-f-c-p+l,d-u+a,o-f-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,o]=e,a=r-s,l=o-i;switch(this.rotation){case 0:return[s,t-o,a,l];case 90:return[s,t-i,l,a];case 180:return[r,t-i,a,l];case 270:return[r,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),T(this,Yl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),T(this,Yl,!1),!0):!1}isInEditMode(){return h(this,Yl)}shouldGetKeyboardEvents(){return h(this,Cr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&i>0&&e<r&&s>0}rebuild(){I(this,Dg,ZA).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Fe("An editor must be serializable")}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId});i.rotation=e.rotation,T(i,$l,e.accessibilityData),i._isCopy=e.isCopy||!1;const[r,o]=i.pageDimensions,[a,l,c,u]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/r,i.y=l/o,i.width=c/r,i.height=u/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=h(this,Yo))==null||e.abort(),T(this,Yo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),h(this,Bi)&&(clearTimeout(h(this,Bi)),T(this,Bi,null)),I(this,ql,Sp).call(this),this.removeEditToolbar(),h(this,Ns)){for(const s of h(this,Ns).values())clearTimeout(s);T(this,Ns,null)}this.parent=null,(t=h(this,Kl))==null||t.destroy(),T(this,Kl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(I(this,xx,RU).call(this),h(this,Xt).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),T(this,Er,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=h(this,Xt).children;if(!h(this,ni)){T(this,ni,Array.from(t));const o=I(this,Tx,FU).bind(this),a=I(this,kx,jU).bind(this),l=this._uiManager._signal;for(const c of h(this,ni)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",I(this,Ix,BU).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",ge._l10nResizer[u])}}const s=h(this,ni)[0];let i=0;for(const o of t){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(h(this,ni).length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)h(this,Xt).append(h(this,Xt).firstChild);else if(r>i)for(let a=0;a<r-i;a++)h(this,Xt).firstChild.before(h(this,Xt).lastChild);let o=0;for(const a of t){const c=h(this,ni)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",ge._l10nResizer[c])}}I(this,Lg,eT).call(this,0),T(this,Cr,!0),h(this,Xt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){h(this,Cr)&&I(this,Mg,QA).call(this,h(this,Ag),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){I(this,ql,Sp).call(this),this.div.focus()}select(){var e,t,s;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=h(this,Ze))==null||s.toggleAltTextBadge(!1)}}unselect(){var e,t,s,i,r;this.isSelected&&(this.isSelected=!1,(e=h(this,Xt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=h(this,Ze))==null||r.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return h(this,Tg)}set isEditing(e){T(this,Tg,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){T(this,zl,!0);const s=e/t,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){h(this,Ns)||T(this,Ns,new Map);const{action:s}=e;let i=h(this,Ns).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),h(this,Ns).delete(s),h(this,Ns).size===0&&T(this,Ns,null)},ge._telemetryTimeout),h(this,Ns).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),T(this,$h,!1)}disable(){this.div&&(this.div.tabIndex=-1),T(this,$h,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};$l=new WeakMap,ni=new WeakMap,Ze=new WeakMap,$h=new WeakMap,Go=new WeakMap,Cg=new WeakMap,zl=new WeakMap,Xt=new WeakMap,Wl=new WeakMap,Er=new WeakMap,Yo=new WeakMap,Ag=new WeakMap,Gl=new WeakMap,ts=new WeakMap,Tg=new WeakMap,Yl=new WeakMap,Cr=new WeakMap,Bi=new WeakMap,zh=new WeakMap,Wh=new WeakMap,Ns=new WeakMap,Kl=new WeakMap,kg=new WeakMap,bx=new WeakMap,Ig=new WeakSet,KA=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Pg=new WeakSet,qA=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Gh=new WeakSet,f0=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},xx=new WeakSet,RU=function(){if(h(this,Xt))return;T(this,Xt,document.createElement("div")),h(this,Xt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");h(this,Xt).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",I(this,_x,MU).bind(this,s),{signal:t}),i.addEventListener("contextmenu",Ys,{signal:t}),i.tabIndex=-1}this.div.prepend(h(this,Xt))},_x=new WeakSet,MU=function(e,t){var u;t.preventDefault();const{isMac:s}=Yt.platform;if(t.button!==0||t.ctrlKey&&s)return;(u=h(this,Ze))==null||u.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,T(this,Wl,[t.screenX,t.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",I(this,Mg,QA).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",wt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ys,{signal:o}),T(this,Er,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=h(this,Ze))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,I(this,Yh,p0).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},Rg=new WeakSet,XA=function(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t;const[r,o]=this.parentDimensions;this.setDims(r*s,o*i),this.fixAndSetPosition(),this._onResized()},Yh=new WeakSet,p0=function(){if(!h(this,Er))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=h(this,Er);T(this,Er,null);const r=this.x,o=this.y,a=this.width,l=this.height;r===e&&o===t&&a===s&&l===i||this.addCommands({cmd:I(this,Rg,XA).bind(this,r,o,a,l),undo:I(this,Rg,XA).bind(this,e,t,s,i),mustExec:!0})},Mg=new WeakSet,QA=function(e,t){const[s,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,c=ge.MIN_SIZE/s,u=ge.MIN_SIZE/i,d=I(this,Gh,f0).call(this,this.rotation),f=(L,B)=>[d[0]*L+d[2]*B,d[1]*L+d[3]*B],p=I(this,Gh,f0).call(this,360-this.rotation),y=(L,B)=>[p[0]*L+p[2]*B,p[1]*L+p[3]*B];let g,S,w=!1,_=!1;switch(e){case"topLeft":w=!0,g=(L,B)=>[0,0],S=(L,B)=>[L,B];break;case"topMiddle":g=(L,B)=>[L/2,0],S=(L,B)=>[L/2,B];break;case"topRight":w=!0,g=(L,B)=>[L,0],S=(L,B)=>[0,B];break;case"middleRight":_=!0,g=(L,B)=>[L,B/2],S=(L,B)=>[0,B/2];break;case"bottomRight":w=!0,g=(L,B)=>[L,B],S=(L,B)=>[0,0];break;case"bottomMiddle":g=(L,B)=>[L/2,B],S=(L,B)=>[L/2,0];break;case"bottomLeft":w=!0,g=(L,B)=>[0,B],S=(L,B)=>[L,0];break;case"middleLeft":_=!0,g=(L,B)=>[0,B/2],S=(L,B)=>[L,B/2];break}const v=g(a,l),m=S(a,l);let x=f(...m);const A=ge._round(r+x[0]),k=ge._round(o+x[1]);let P=1,R=1,M,N;if(t.fromKeyboard)({deltaX:M,deltaY:N}=t);else{const{screenX:L,screenY:B}=t,[O,j]=h(this,Wl);[M,N]=this.screenToPageTranslation(L-O,B-j),h(this,Wl)[0]=L,h(this,Wl)[1]=B}if([M,N]=y(M/s,N/i),w){const L=Math.hypot(a,l);P=R=Math.max(Math.min(Math.hypot(m[0]-v[0]-M,m[1]-v[1]-N)/L,1/a,1/l),c/a,u/l)}else _?P=pn(Math.abs(m[0]-v[0]-M),c,1)/a:R=pn(Math.abs(m[1]-v[1]-N),u,1)/l;const F=ge._round(a*P),H=ge._round(l*R);x=f(...S(F,H));const D=A-x[0],$=k-x[1];h(this,ts)||T(this,ts,[this.x,this.y,this.width,this.height]),this.width=F,this.height=H,this.x=D,this.y=$,this.setDims(s*F,i*H),this.fixAndSetPosition(),this._onResizing()},Sx=new WeakSet,NU=function(){var e;T(this,Er,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=h(this,Ze))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Ex=new WeakSet,DU=function(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const o=I(this,Gh,f0).call(this,this.rotation),a=(A,k)=>[o[0]*A+o[2]*k,o[1]*A+o[3]*k],[l,c]=this.parentDimensions,u=this.x,d=this.y,f=this.width,p=this.height,y=ge.MIN_SIZE/l,g=ge.MIN_SIZE/c;r=Math.max(Math.min(r,1/f,1/p),y/f,g/p);const S=ge._round(f*r),w=ge._round(p*r);if(S===f&&w===p)return;h(this,ts)||T(this,ts,[u,d,f,p]);const _=a(f/2,p/2),v=ge._round(u+_[0]),m=ge._round(d+_[1]),x=a(S/2,w/2);this.x=v-x[0],this.y=m-x[1],this.width=S,this.height=w,this.setDims(l*S,c*w),this.fixAndSetPosition(),this._onResizing()},Cx=new WeakSet,LU=function(){var e;(e=h(this,Ze))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),I(this,Yh,p0).call(this)},Ng=new WeakSet,JA=function(e){const{isMac:t}=Yt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},Ax=new WeakSet,OU=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},a=c=>{i.abort(),T(this,Go,null),T(this,Gl,!1),this._uiManager.endDragSession()||I(this,Ng,JA).call(this,c),s&&this._onStopDragging()};t&&(T(this,zh,e.clientX),T(this,Wh,e.clientY),T(this,Go,e.pointerId),T(this,Cg,e.pointerType),window.addEventListener("pointermove",c=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:d,pointerId:f}=c;if(f!==h(this,Go)){wt(c);return}const[p,y]=this.screenToPageTranslation(u-h(this,zh),d-h(this,Wh));T(this,zh,u),T(this,Wh,d),this._uiManager.dragSelectedEditors(p,y)},o),window.addEventListener("touchmove",wt,o),window.addEventListener("pointerdown",c=>{c.pointerType===h(this,Cg)&&(h(this,Kl)||c.isPrimary)&&a(c),wt(c)},o));const l=c=>{if(!h(this,Go)||h(this,Go)===c.pointerId){a(c);return}wt(c)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})},Dg=new WeakSet,ZA=function(){if(h(this,Yo)||!this.div)return;T(this,Yo,new AbortController);const e=this._uiManager.combinedSignal(h(this,Yo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Tx=new WeakSet,FU=function(e){ge._resizerKeyboardManager.exec(this,e)},kx=new WeakSet,jU=function(e){var t;h(this,Cr)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==h(this,Xt)&&I(this,ql,Sp).call(this)},Ix=new WeakSet,BU=function(e){T(this,Ag,h(this,Cr)?e:"")},Lg=new WeakSet,eT=function(e){if(h(this,ni))for(const t of h(this,ni))t.tabIndex=e},ql=new WeakSet,Sp=function(){T(this,Cr,!1),I(this,Lg,eT).call(this,-1),I(this,Yh,p0).call(this)},C(ge,Pg),V(ge,"_l10n",null),V(ge,"_l10nResizer",null),V(ge,"_borderLineWidth",-1),V(ge,"_colorManager",new VA),V(ge,"_zIndex",1),V(ge,"_telemetryTimeout",1e3);let We=ge;class Qae extends We{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const hL=3285377520,Ts=4294901760,ki=65535;class HU{constructor(e){this.h1=e?e&4294967295:hL,this.h2=e?e&4294967295:hL}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let g=0,S=e.length;g<S;g++){const w=e.charCodeAt(g);w<=255?t[s++]=w:(t[s++]=w>>>8,t[s++]=w&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(t.buffer,0,i);let a=0,l=0,c=this.h1,u=this.h2;const d=3432918353,f=461845907,p=d&ki,y=f&ki;for(let g=0;g<i;g++)g&1?(a=o[g],a=a*d&Ts|a*p&ki,a=a<<15|a>>>17,a=a*f&Ts|a*y&ki,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[g],l=l*d&Ts|l*p&ki,l=l<<15|l>>>17,l=l*f&Ts|l*y&ki,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*d&Ts|a*p&ki,a=a<<15|a>>>17,a=a*f&Ts|a*y&ki,i&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ts|e*36045&ki,t=t*4283543511&Ts|((t<<16|e>>>16)*2950163797&Ts)>>>16,e^=t>>>1,e=e*444984403&Ts|e*60499&ki,t=t*3301882366&Ts|((t<<16|e>>>16)*3120437893&Ts)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const tT=Object.freeze({map:null,hash:"",transfer:void 0});var Xl,Ql,Qt,Px,VU;class jP{constructor(){C(this,Px);C(this,Xl,!1);C(this,Ql,null);C(this,Qt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=h(this,Qt).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return h(this,Qt).get(e)}remove(e){if(h(this,Qt).delete(e),h(this,Qt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of h(this,Qt).values())if(t instanceof We)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=h(this,Qt).get(e);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(t))s[r]!==o&&(i=!0,s[r]=o);else i=!0,h(this,Qt).set(e,t);i&&I(this,Px,VU).call(this),t instanceof We&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return h(this,Qt).has(e)}get size(){return h(this,Qt).size}resetModified(){h(this,Xl)&&(T(this,Xl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new UU(this)}get serializable(){if(h(this,Qt).size===0)return tT;const e=new Map,t=new HU,s=[],i=Object.create(null);let r=!1;for(const[o,a]of h(this,Qt)){const l=a instanceof We?a.serialize(!1,i):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:tT}get editorStats(){let e=null;const t=new Map;for(const s of h(this,Qt).values()){if(!(s instanceof We))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=e[r]||(e[r]=new Map);for(const[a,l]of Object.entries(i)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[s,i]of t)e[s]=i.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){T(this,Ql,null)}get modifiedIds(){if(h(this,Ql))return h(this,Ql);const e=[];for(const t of h(this,Qt).values())!(t instanceof We)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return T(this,Ql,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return h(this,Qt).entries()}}Xl=new WeakMap,Ql=new WeakMap,Qt=new WeakMap,Px=new WeakSet,VU=function(){h(this,Xl)||(T(this,Xl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Og;class UU extends jP{constructor(t){super();C(this,Og,void 0);const{map:s,hash:i,transfer:r}=t.serializable,o=structuredClone(s,r?{transfer:r}:null);T(this,Og,{map:o,hash:i,transfer:r})}get print(){Fe("Should not call PrintAnnotationStorage.print")}get serializable(){return h(this,Og)}get modifiedIds(){return _e(this,"modifiedIds",{ids:new Set,hash:""})}}Og=new WeakMap;var Kh;class Jae{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){C(this,Kh,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),h(this,Kh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||h(this,Kh).has(e.loadedName))){if(At(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=e,a=new FontFace(i,r,o);this.addNativeFontFace(a);try{await a.load(),h(this,Kh).add(i),s==null||s(e)}catch{ce(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Fe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw ce(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return _e(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return _e(this,"isSyncFontLoadingSupported",In||Yt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(At(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return _e(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(m,x){return m.charCodeAt(x)<<24|m.charCodeAt(x+1)<<16|m.charCodeAt(x+2)<<8|m.charCodeAt(x+3)&255}function i(m,x,A,k){const P=m.substring(0,x),R=m.substring(x+A);return P+k+R}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(m,x){if(++c>30){ce("Load test font never loaded."),x();return}if(l.font="30px "+m,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(u.bind(null,m,x))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const y=16,g=1482184792;let S=s(f,y);for(r=0,o=d.length-3;r<o;r+=4)S=S-g+s(d,r)|0;r<d.length&&(S=S-g+s(d+"XXX",r)|0),f=i(f,y,4,Hae(S));const w=`url(data:font/opentype;base64,${btoa(f)});`,_=`@font-face {font-family:"${d}";src:${w}}`;this.insertRule(_);const v=this._document.createElement("div");v.style.visibility="hidden",v.style.width=v.style.height="10px",v.style.position="absolute",v.style.top=v.style.left="0px";for(const m of[e.loadedName,d]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=m,v.append(x)}this._document.body.append(v),u(d,()=>{v.remove(),t.complete()})}}Kh=new WeakMap;class Zae{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${oU(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(o){ce(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}}function ele(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(In)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function tle(n){if(In&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Hv(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Pw(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const nT=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,nle=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",$U=zae.bind(null,nT,nle);var Ar,Rx;class sle{constructor(){C(this,Ar,new Map);C(this,Rx,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};h(this,Rx).then(()=>{for(const[i]of h(this,Ar))i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){ce("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}h(this,Ar).set(t,i)}removeEventListener(e,t){const s=h(this,Ar).get(t);s==null||s(),h(this,Ar).delete(t)}terminate(){for(const[,e]of h(this,Ar))e==null||e();h(this,Ar).clear()}}Ar=new WeakMap,Rx=new WeakMap;const Rw={DATA:1,ERROR:2},_t={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function dL(){}function Ln(n){if(n instanceof po||n instanceof $b||n instanceof lL||n instanceof Gm||n instanceof TE)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Fe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new po(n.message);case"InvalidPDFException":return new $b(n.message);case"PasswordException":return new lL(n.message,n.code);case"ResponseException":return new Gm(n.message,n.status,n.missing);case"UnknownErrorException":return new TE(n.message,n.details)}return new TE(n.message,n.toString())}var qh,Mx,zU,Nx,WU,Dx,GU,Xh,m0;class Ep{constructor(e,t,s){C(this,Mx);C(this,Nx);C(this,Dx);C(this,Xh);C(this,qh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",I(this,Mx,zU).bind(this),{signal:h(this,qh).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:r,data:t,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:_t.PULL,streamId:r,desiredSize:c.desiredSize}),u.promise},cancel:c=>{At(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:_t.CANCEL,streamId:r,reason:Ln(c)}),u.promise}},s)}destroy(){var e;(e=h(this,qh))==null||e.abort(),T(this,qh,null)}}qh=new WeakMap,Mx=new WeakSet,zU=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){I(this,Dx,GU).call(this,e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Rw.DATA)i.resolve(e.data);else if(e.callback===Rw.ERROR)i.reject(Ln(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:Rw.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:Rw.ERROR,callbackId:e.callbackId,reason:Ln(o)})});return}if(e.streamId){I(this,Nx,WU).call(this,e);return}t(e.data)},Nx=new WeakSet,WU=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:_t.ENQUEUE,streamId:t,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:_t.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){At(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:_t.ERROR,streamId:t,reason:Ln(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){r.postMessage({sourceName:s,targetName:i,stream:_t.START_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:_t.START_COMPLETE,streamId:t,reason:Ln(c)})})},Dx=new WeakSet,GU=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case _t.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Ln(e.reason));break;case _t.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Ln(e.reason));break;case _t.PULL:if(!a){r.postMessage({sourceName:s,targetName:i,stream:_t.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||dL).then(function(){r.postMessage({sourceName:s,targetName:i,stream:_t.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:_t.PULL_COMPLETE,streamId:t,reason:Ln(c)})});break;case _t.ENQUEUE:if(At(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case _t.CLOSE:if(At(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),I(this,Xh,m0).call(this,o,t);break;case _t.ERROR:At(o,"error should have stream controller"),o.controller.error(Ln(e.reason)),I(this,Xh,m0).call(this,o,t);break;case _t.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Ln(e.reason)),I(this,Xh,m0).call(this,o,t);break;case _t.CANCEL:if(!a)break;const l=Ln(e.reason);Promise.try(a.onCancel||dL,l).then(function(){r.postMessage({sourceName:s,targetName:i,stream:_t.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:s,targetName:i,stream:_t.CANCEL_COMPLETE,streamId:t,reason:Ln(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Xh=new WeakSet,m0=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var Fg;class YU{constructor({enableHWA:e=!1}){C(this,Fg,!1);T(this,Fg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!h(this,Fg)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Fe("Abstract method `_createCanvas` called.")}}Fg=new WeakMap;class ile extends YU{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class KU{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class fL extends KU{async _fetch(e){const t=await Uf(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Hv(t)}}class qU{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var Jl,Qh,Tr,kr,dn,Zl,ec,Lt,un,tc,Cp,Ko,Ou,Jh,g0,qo,Fu,Lx,XU,jg,sT,Xo,ju,nc,Ap,sc,Tp,Bg,iT,ic,kp;class rle extends qU{constructor({docId:t,ownerDocument:s=globalThis.document}){super();C(this,Lt);C(this,tc);C(this,Ko);C(this,Jh);C(this,qo);C(this,Lx);C(this,jg);C(this,Xo);C(this,nc);C(this,sc);C(this,Bg);C(this,ic);C(this,Jl,void 0);C(this,Qh,void 0);C(this,Tr,void 0);C(this,kr,void 0);C(this,dn,void 0);C(this,Zl,void 0);C(this,ec,0);T(this,kr,t),T(this,dn,s)}addFilter(t){if(!t)return"none";let s=h(this,Lt,un).get(t);if(s)return s;const[i,r,o]=I(this,Jh,g0).call(this,t),a=t.length===1?i:`${i}${r}${o}`;if(s=h(this,Lt,un).get(a),s)return h(this,Lt,un).set(t,s),s;const l=`g_${h(this,kr)}_transfer_map_${bn(this,ec)._++}`,c=I(this,qo,Fu).call(this,l);h(this,Lt,un).set(t,c),h(this,Lt,un).set(a,c);const u=I(this,Xo,ju).call(this,l);return I(this,sc,Tp).call(this,i,r,o,u),c}addHCMFilter(t,s){var y;const i=`${t}-${s}`,r="base";let o=h(this,tc,Cp).get(r);if((o==null?void 0:o.key)===i||(o?((y=o.filter)==null||y.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},h(this,tc,Cp).set(r,o)),!t||!s))return o.url;const a=I(this,ic,kp).call(this,t);t=se.makeHexColor(...a);const l=I(this,ic,kp).call(this,s);if(s=se.makeHexColor(...l),h(this,Ko,Ou).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const c=new Array(256);for(let g=0;g<=255;g++){const S=g/255;c[g]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const u=c.join(","),d=`g_${h(this,kr)}_hcm_filter`,f=o.filter=I(this,Xo,ju).call(this,d);I(this,sc,Tp).call(this,u,u,u,f),I(this,jg,sT).call(this,f);const p=(g,S)=>{const w=a[g]/255,_=l[g]/255,v=new Array(S+1);for(let m=0;m<=S;m++)v[m]=w+m/S*(_-w);return v.join(",")};return I(this,sc,Tp).call(this,p(0,5),p(1,5),p(2,5),f),o.url=I(this,qo,Fu).call(this,d),o.url}addAlphaFilter(t){let s=h(this,Lt,un).get(t);if(s)return s;const[i]=I(this,Jh,g0).call(this,[t]),r=`alpha_${i}`;if(s=h(this,Lt,un).get(r),s)return h(this,Lt,un).set(t,s),s;const o=`g_${h(this,kr)}_alpha_map_${bn(this,ec)._++}`,a=I(this,qo,Fu).call(this,o);h(this,Lt,un).set(t,a),h(this,Lt,un).set(r,a);const l=I(this,Xo,ju).call(this,o);return I(this,Bg,iT).call(this,i,l),a}addLuminosityFilter(t){let s=h(this,Lt,un).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=I(this,Jh,g0).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=h(this,Lt,un).get(r),s)return h(this,Lt,un).set(t,s),s;const o=`g_${h(this,kr)}_luminosity_map_${bn(this,ec)._++}`,a=I(this,qo,Fu).call(this,o);h(this,Lt,un).set(t,a),h(this,Lt,un).set(r,a);const l=I(this,Xo,ju).call(this,o);return I(this,Lx,XU).call(this,l),t&&I(this,Bg,iT).call(this,i,l),a}addHighlightHCMFilter(t,s,i,r,o){var _;const a=`${s}-${i}-${r}-${o}`;let l=h(this,tc,Cp).get(t);if((l==null?void 0:l.key)===a||(l?((_=l.filter)==null||_.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},h(this,tc,Cp).set(t,l)),!s||!i))return l.url;const[c,u]=[s,i].map(I(this,ic,kp).bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,y]=[r,o].map(I(this,ic,kp).bind(this));f<d&&([d,f,p,y]=[f,d,y,p]),h(this,Ko,Ou).style.color="";const g=(v,m,x)=>{const A=new Array(256),k=(f-d)/x,P=v/255,R=(m-v)/(255*x);let M=0;for(let N=0;N<=x;N++){const F=Math.round(d+N*k),H=P+N*R;for(let D=M;D<=F;D++)A[D]=H;M=F+1}for(let N=M;N<256;N++)A[N]=A[M-1];return A.join(",")},S=`g_${h(this,kr)}_hcm_${t}_filter`,w=l.filter=I(this,Xo,ju).call(this,S);return I(this,jg,sT).call(this,w),I(this,sc,Tp).call(this,g(p[0],y[0],5),g(p[1],y[1],5),g(p[2],y[2],5),w),l.url=I(this,qo,Fu).call(this,S),l.url}destroy(t=!1){var s,i,r,o;t&&((s=h(this,Zl))!=null&&s.size)||((i=h(this,Tr))==null||i.parentNode.parentNode.remove(),T(this,Tr,null),(r=h(this,Qh))==null||r.clear(),T(this,Qh,null),(o=h(this,Zl))==null||o.clear(),T(this,Zl,null),T(this,ec,0))}}Jl=new WeakMap,Qh=new WeakMap,Tr=new WeakMap,kr=new WeakMap,dn=new WeakMap,Zl=new WeakMap,ec=new WeakMap,Lt=new WeakSet,un=function(){return h(this,Qh)||T(this,Qh,new Map)},tc=new WeakSet,Cp=function(){return h(this,Zl)||T(this,Zl,new Map)},Ko=new WeakSet,Ou=function(){if(!h(this,Tr)){const t=h(this,dn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=h(this,dn).createElementNS(ur,"svg");i.setAttribute("width",0),i.setAttribute("height",0),T(this,Tr,h(this,dn).createElementNS(ur,"defs")),t.append(i),i.append(h(this,Tr)),h(this,dn).body.append(t)}return h(this,Tr)},Jh=new WeakSet,g0=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=c[f]/255;const d=u.join(",");return[d,d,d]}const[s,i,r]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=s[c]/255,a[c]=i[c]/255,l[c]=r[c]/255;return[o.join(","),a.join(","),l.join(",")]},qo=new WeakSet,Fu=function(t){if(h(this,Jl)===void 0){T(this,Jl,"");const s=h(this,dn).URL;s!==h(this,dn).baseURI&&(Uv(s)?ce('#createUrl: ignore "data:"-URL for performance reasons.'):T(this,Jl,DP(s,"")))}return`url(${h(this,Jl)}#${t})`},Lx=new WeakSet,XU=function(t){const s=h(this,dn).createElementNS(ur,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},jg=new WeakSet,sT=function(t){const s=h(this,dn).createElementNS(ur,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},Xo=new WeakSet,ju=function(t){const s=h(this,dn).createElementNS(ur,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),h(this,Ko,Ou).append(s),s},nc=new WeakSet,Ap=function(t,s,i){const r=h(this,dn).createElementNS(ur,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},sc=new WeakSet,Tp=function(t,s,i,r){const o=h(this,dn).createElementNS(ur,"feComponentTransfer");r.append(o),I(this,nc,Ap).call(this,o,"feFuncR",t),I(this,nc,Ap).call(this,o,"feFuncG",s),I(this,nc,Ap).call(this,o,"feFuncB",i)},Bg=new WeakSet,iT=function(t,s){const i=h(this,dn).createElementNS(ur,"feComponentTransfer");s.append(i),I(this,nc,Ap).call(this,i,"feFuncA",t)},ic=new WeakSet,kp=function(t){return h(this,Ko,Ou).style.color=t,FP(getComputedStyle(h(this,Ko,Ou)).getPropertyValue("color"))};class QU{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class pL extends QU{async _fetch(e){const t=await Uf(e,"arraybuffer");return new Uint8Array(t)}}class JU{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class mL extends JU{async _fetch(e){const t=await Uf(e,"arraybuffer");return new Uint8Array(t)}}In&&ce("Please use the `legacy` build in Node.js environments.");async function BP(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class ole extends qU{}class ale extends YU{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class lle extends KU{async _fetch(e){return BP(e)}}class cle extends QU{async _fetch(e){return BP(e)}}class ule extends JU{async _fetch(e){return BP(e)}}const tn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function rT(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class HP{isModifyingCurrentTransform(){return!1}getPattern(){Fe("Abstract method `getPattern` called.")}}class hle extends HP{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===tn.STROKE||i===tn.FILL){const o=t.current.getClippedPathBoundingBox(i,it(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=se.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),rT(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=e.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else rT(e,this._bbox),r=this._createGradient(e);return r}}function PE(n,e,t,s,i,r,o,a){const l=e.coords,c=e.colors,u=n.data,d=n.width*4;let f;l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=r,r=o,o=f),l[s+1]>l[i+1]&&(f=s,s=i,i=f,f=o,o=a,a=f),l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=r,r=o,o=f);const p=(l[t]+e.offsetX)*e.scaleX,y=(l[t+1]+e.offsetY)*e.scaleY,g=(l[s]+e.offsetX)*e.scaleX,S=(l[s+1]+e.offsetY)*e.scaleY,w=(l[i]+e.offsetX)*e.scaleX,_=(l[i+1]+e.offsetY)*e.scaleY;if(y>=_)return;const v=c[r],m=c[r+1],x=c[r+2],A=c[o],k=c[o+1],P=c[o+2],R=c[a],M=c[a+1],N=c[a+2],F=Math.round(y),H=Math.round(_);let D,$,L,B,O,j,z,W;for(let K=F;K<=H;K++){if(K<S){const G=K<y?0:(y-K)/(y-S);D=p-(p-g)*G,$=v-(v-A)*G,L=m-(m-k)*G,B=x-(x-P)*G}else{let G;K>_?G=1:S===_?G=0:G=(S-K)/(S-_),D=g-(g-w)*G,$=A-(A-R)*G,L=k-(k-M)*G,B=P-(P-N)*G}let Z;K<y?Z=0:K>_?Z=1:Z=(y-K)/(y-_),O=p-(p-w)*Z,j=v-(v-R)*Z,z=m-(m-M)*Z,W=x-(x-N)*Z;const de=Math.round(Math.min(D,O)),Me=Math.round(Math.max(D,O));let ue=d*K+de*4;for(let G=de;G<=Me;G++)Z=(D-G)/(D-O),Z<0?Z=0:Z>1&&(Z=1),u[ue++]=$-($-j)*Z|0,u[ue++]=L-(L-z)*Z|0,u[ue++]=B-(B-W)*Z|0,u[ue++]=255}}function dle(n,e,t){const s=e.coords,i=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(s.length/a)-1,c=a-1;for(r=0;r<l;r++){let u=r*a;for(let d=0;d<c;d++,u++)PE(n,t,s[u],s[u+1],s[u+a],i[u],i[u+1],i[u+a]),PE(n,t,s[u+a+1],s[u+1],s[u+a],i[u+a+1],i[u+1],i[u+a])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)PE(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class fle extends HP{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),p=c/d,y=u/f,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/p,scaleY:1/y},S=d+2*2,w=f+2*2,_=s.getCanvas("mesh",S,w),v=_.context,m=v.createImageData(d,f);if(t){const A=m.data;for(let k=0,P=A.length;k<P;k+=4)A[k]=t[0],A[k+1]=t[1],A[k+2]=t[2],A[k+3]=255}for(const A of this._figures)dle(m,A,g);return v.putImageData(m,2,2),{canvas:_.canvas,offsetX:a-2*p,offsetY:l-2*y,scaleX:p,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){rT(e,this._bbox);const r=new Float32Array(2);if(i===tn.SHADING)se.singularValueDecompose2dScale(it(e),r);else if(this.matrix){se.singularValueDecompose2dScale(this.matrix,r);const[a,l]=r;se.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=a,r[1]*=l}else se.singularValueDecompose2dScale(t.baseTransform,r);const o=this._createMeshCanvas(r,i===tn.SHADING?null:this._background,t.cachedCanvases);return i!==tn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class ple extends HP{getPattern(){return"hotpink"}}function mle(n){switch(n[0]){case"RadialAxial":return new hle(n);case"Mesh":return new fle(n);case"Dummy":return new ple}throw new Error(`Unknown IR type: ${n[0]}`)}const gL={COLORED:1,UNCOLORED:2},Ox=class Ox{constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),qS("TilingType: "+r);const u=t[0],d=t[1],f=t[2],p=t[3],y=f-u,g=p-d,S=new Float32Array(2);se.singularValueDecompose2dScale(this.matrix,S);const[w,_]=S;se.singularValueDecompose2dScale(this.baseTransform,S);const v=w*S[0],m=_*S[1];let x=y,A=g,k=!1,P=!1;const R=Math.ceil(l*v),M=Math.ceil(c*m),N=Math.ceil(y*v),F=Math.ceil(g*m);R>=N?x=l:k=!0,M>=F?A=c:P=!0;const H=this.getSizeAndScale(x,this.ctx.canvas.width,v),D=this.getSizeAndScale(A,this.ctx.canvas.height,m),$=e.cachedCanvases.getCanvas("pattern",H.size,D.size),L=$.context,B=a.createCanvasGraphics(L);if(B.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(B,i,o),L.translate(-H.scale*u,-D.scale*d),B.transform(H.scale,0,0,D.scale,0,0),L.save(),this.clipBbox(B,u,d,f,p),B.baseTransform=it(B.ctx),B.executeOperatorList(s),B.endDrawing(),L.restore(),k||P){const O=$.canvas;k&&(x=l),P&&(A=c);const j=this.getSizeAndScale(x,this.ctx.canvas.width,v),z=this.getSizeAndScale(A,this.ctx.canvas.height,m),W=j.size,K=z.size,Z=e.cachedCanvases.getCanvas("pattern-workaround",W,K),de=Z.context,Me=k?Math.floor(y/l):0,ue=P?Math.floor(g/c):0;for(let G=0;G<=Me;G++)for(let fe=0;fe<=ue;fe++)de.drawImage(O,W*G,K*fe,W,K,0,0,W,K);return{canvas:Z.canvas,scaleX:j.scale,scaleY:z.scale,offsetX:u,offsetY:d}}return{canvas:$.canvas,scaleX:H.scale,scaleY:D.scale,offsetX:u,offsetY:d}}getSizeAndScale(e,t,s){const i=Math.max(Ox.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const o=i-t,a=r-s;e.ctx.rect(t,s,o,a),se.axialAlignedBoundingBox([t,s,i,r],it(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case gL.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;i.fillStyle=r.fillColor=o,i.strokeStyle=r.strokeColor=a;break;case gL.UNCOLORED:i.fillStyle=i.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new Bae(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i){let r=s;i!==tn.SHADING&&(r=se.transform(r,t.baseTransform),this.matrix&&(r=se.transform(r,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};V(Ox,"MAX_PATTERN_SIZE",3e3);let oT=Ox;function gle({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Yt.isLittleEndian?4278190080:255,[l,c]=o?[r,a]:[a,r],u=s>>3,d=s&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let y=0;y<i;y++){for(const S=e+u;e<S;e++){const w=e<f?n[e]:255;t[p++]=w&128?c:l,t[p++]=w&64?c:l,t[p++]=w&32?c:l,t[p++]=w&16?c:l,t[p++]=w&8?c:l,t[p++]=w&4?c:l,t[p++]=w&2?c:l,t[p++]=w&1?c:l}if(d===0)continue;const g=e<f?n[e++]:255;for(let S=0;S<d;S++)t[p++]=g&1<<7-S?c:l}return{srcPos:e,destPos:p}}const yL=16,vL=100,yle=15,wL=10,Hn=16,RE=new DOMMatrix,ms=new Float32Array(2),rh=new Float32Array([1/0,1/0,-1/0,-1/0]);function vle(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,i,r,o,a){e.transform(t,s,i,r,o,a),this.__originalTransform(t,s,i,r,o,a)},n.setTransform=function(t,s,i,r,o,a){e.setTransform(t,s,i,r,o,a),this.__originalSetTransform(t,s,i,r,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,o,a){e.bezierCurveTo(t,s,i,r,o,a),this.__originalBezierCurveTo(t,s,i,r,o,a)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class wle{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Mw(n,e,t,s,i,r,o,a,l,c){const[u,d,f,p,y,g]=it(n);if(d===0&&f===0){const _=o*u+y,v=Math.round(_),m=a*p+g,x=Math.round(m),A=(o+l)*u+y,k=Math.abs(Math.round(A)-v)||1,P=(a+c)*p+g,R=Math.abs(Math.round(P)-x)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(p),v,x),n.drawImage(e,t,s,i,r,0,0,k,R),n.setTransform(u,d,f,p,y,g),[k,R]}if(u===0&&p===0){const _=a*f+y,v=Math.round(_),m=o*d+g,x=Math.round(m),A=(a+c)*f+y,k=Math.abs(Math.round(A)-v)||1,P=(o+l)*d+g,R=Math.abs(Math.round(P)-x)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,v,x),n.drawImage(e,t,s,i,r,0,0,R,k),n.setTransform(u,d,f,p,y,g),[R,k]}n.drawImage(e,t,s,i,r,o,a,l,c);const S=Math.hypot(u,d),w=Math.hypot(f,p);return[S*l,w*c]}class bL{constructor(e,t){V(this,"alphaIsShape",!1);V(this,"fontSize",0);V(this,"fontSizeScale",1);V(this,"textMatrix",null);V(this,"textMatrixScale",1);V(this,"fontMatrix",FA);V(this,"leading",0);V(this,"x",0);V(this,"y",0);V(this,"lineX",0);V(this,"lineY",0);V(this,"charSpacing",0);V(this,"wordSpacing",0);V(this,"textHScale",1);V(this,"textRenderingMode",cn.FILL);V(this,"textRise",0);V(this,"fillColor","#000000");V(this,"strokeColor","#000000");V(this,"patternFill",!1);V(this,"patternStroke",!1);V(this,"fillAlpha",1);V(this,"strokeAlpha",1);V(this,"lineWidth",1);V(this,"activeSMask",null);V(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=rh.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=tn.FILL,t=null){const s=this.minMax.slice();if(e===tn.STROKE){t||Fe("Stroke bounding box must include transform."),se.singularValueDecompose2dScale(t,ms);const i=ms[0]*this.lineWidth/2,r=ms[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const e=se.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(rh,0)}getClippedPathBoundingBox(e=tn.FILL,t=null){return se.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function xL(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%Hn,r=(t-i)/Hn,o=i===0?r:r+1,a=n.createImageData(s,Hn);let l=0,c;const u=e.data,d=a.data;let f,p,y,g;if(e.kind===rm.GRAYSCALE_1BPP){const S=u.byteLength,w=new Uint32Array(d.buffer,0,d.byteLength>>2),_=w.length,v=s+7>>3,m=4294967295,x=Yt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<r?Hn:i,c=0,p=0;p<y;p++){const A=S-l;let k=0;const P=A>v?s:A*8-7,R=P&-8;let M=0,N=0;for(;k<R;k+=8)N=u[l++],w[c++]=N&128?m:x,w[c++]=N&64?m:x,w[c++]=N&32?m:x,w[c++]=N&16?m:x,w[c++]=N&8?m:x,w[c++]=N&4?m:x,w[c++]=N&2?m:x,w[c++]=N&1?m:x;for(;k<P;k++)M===0&&(N=u[l++],M=128),w[c++]=N&M?m:x,M>>=1}for(;c<_;)w[c++]=0;n.putImageData(a,0,f*Hn)}}else if(e.kind===rm.RGBA_32BPP){for(p=0,g=s*Hn*4,f=0;f<r;f++)d.set(u.subarray(l,l+g)),l+=g,n.putImageData(a,0,p),p+=Hn;f<o&&(g=s*i*4,d.set(u.subarray(l,l+g)),n.putImageData(a,0,p))}else if(e.kind===rm.RGB_24BPP)for(y=Hn,g=s*y,f=0;f<o;f++){for(f>=r&&(y=i,g=s*y),c=0,p=g;p--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;n.putImageData(a,0,f*Hn)}else throw new Error(`bad image kind: ${e.kind}`)}function _L(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%Hn,r=(t-i)/Hn,o=i===0?r:r+1,a=n.createImageData(s,Hn);let l=0;const c=e.data,u=a.data;for(let d=0;d<o;d++){const f=d<r?Hn:i;({srcPos:l}=gle({src:c,srcPos:l,dest:u,width:s,height:f,nonBlackColor:0})),n.putImageData(a,0,d*Hn)}}function lp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Nw(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function SL(n,e){if(e)return!0;se.singularValueDecompose2dScale(n,ms);const t=Math.fround(Ci.pixelRatio*mo.PDF_TO_CSS_UNITS);return ms[0]<=t&&ms[1]<=t}const ble=["butt","round","square"],xle=["miter","round","bevel"],_le={},EL={};var Hg,aT,Vg,lT,Ug,cT;const ZP=class ZP{constructor(e,t,s,i,r,{optionalContentConfig:o,markedContentStack:a=null},l,c){C(this,Hg);C(this,Vg);C(this,Ug);this.ctx=e,this.current=new bL(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new wle(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...it(this.compositeCtx))}this.ctx.save(),Nw(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=it(this.ctx)}executeOperatorList(e,t,s,i){const r=e.argsArray,o=e.fnArray;let a=t||0;const l=r.length;if(l===a)return a;const c=l-a>wL&&typeof s=="function",u=c?Date.now()+yle:0;let d=0;const f=this.commonObjs,p=this.objs;let y;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,s),a;if(y=o[a],y!==Wm.dependency)this[y].apply(this,r[a]);else for(const g of r[a]){const S=g.startsWith("g_")?f:p;if(!S.has(g))return S.get(g,s),a}if(a++,a===l)return a;if(c&&++d>wL){if(Date.now()>u)return s(),a;d=0}}}endDrawing(){I(this,Hg,aT).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),I(this,Vg,lT).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=s,l=i,c="prescale1",u,d;for(;r>2&&a>1||o>2&&l>1;){let f=a,p=l;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/p),u=this.cachedCanvases.getCanvas(c,f,p),d=u.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,a,l,0,0,f,p),e=u.canvas,a=f,l=p,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:i}=e,r=this.current.fillColor,o=this.current.patternFill,a=it(t);let l,c,u,d;if((e.bitmap||e.data)&&e.count>1){const R=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(R),l||(l=new Map,this._cachedBitmapsMap.set(R,l));const M=l.get(c);if(M&&!o){const N=Math.round(Math.min(a[0],a[2])+a[4]),F=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:M,offsetX:N,offsetY:F}}u=M}u||(d=this.cachedCanvases.getCanvas("maskCanvas",s,i),_L(d.context,e));let f=se.transform(a,[1/s,0,0,-1/i,0,0]);f=se.transform(f,[1,0,0,1,0,-i]);const p=rh.slice();se.axialAlignedBoundingBox([0,0,s,i],f,p);const[y,g,S,w]=p,_=Math.round(S-y)||1,v=Math.round(w-g)||1,m=this.cachedCanvases.getCanvas("fillCanvas",_,v),x=m.context,A=y,k=g;x.translate(-A,-k),x.transform(...f),u||(u=this._scaleImage(d.canvas,Ti(x)),u=u.img,l&&o&&l.set(c,u)),x.imageSmoothingEnabled=SL(it(x),e.interpolate),Mw(x,u,0,0,u.width,u.height,0,0,s,i),x.globalCompositeOperation="source-in";const P=se.transform(Ti(x),[1,0,0,1,-A,-k]);return x.fillStyle=o?r.getPattern(t,this,P,tn.FILL):r,x.fillRect(0,0,s,i),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,m.canvas)),{canvas:m.canvas,offsetX:Math.round(A),offsetY:Math.round(k)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=ble[e]}setLineJoin(e){this.ctx.lineJoin=xle[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx;const r=this.ctx=i.context;r.setTransform(this.suspendedCtx.getTransform()),lp(this.suspendedCtx,r),vle(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],o=i[1],a=i[2]-r,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,s,a,l,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,o,a,l,c,u,d){let f=e.canvas,p=l-u,y=c-d;if(o)if(p<0||y<0||p+s>f.width||y+i>f.height){const S=this.cachedCanvases.getCanvas("maskExtension",s,i),w=S.context;w.drawImage(f,-p,-y),w.globalCompositeOperation="destination-atop",w.fillStyle=o,w.fillRect(0,0,s,i),w.globalCompositeOperation="source-over",f=S.canvas,p=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(p,y,s,i),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,y,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(l,c,s,i),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(f,p,y,s,i,l,c,s,i),t.restore()}save(){this.inSMaskMode&&lp(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&lp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,r,o){this.ctx.transform(e,t,s,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){let[i]=t;if(!s){i||(i=t[0]=new Path2D),this[e](i);return}if(!(i instanceof Path2D)){const r=t[0]=new Path2D;for(let o=0,a=i.length;o<a;)switch(i[o++]){case Iw.moveTo:r.moveTo(i[o++],i[o++]);break;case Iw.lineTo:r.lineTo(i[o++],i[o++]);break;case Iw.curveTo:r.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case Iw.closePath:r.closePath();break;default:ce(`Unrecognized drawing path operator: ${i[o-1]}`);break}i=r}se.axialAlignedBoundingBox(s,it(this.ctx),this.current.minMax),this[e](i)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const r=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,Ti(s),tn.STROKE),r){const o=new Path2D;o.addPath(e,s.getTransform().invertSelf().multiplySelf(r)),e=o}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(tn.STROKE,it(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const l=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=i.getPattern(s,this,Ti(s),tn.FILL),l){const c=new Path2D;c.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=c}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),o&&s.restore(),t&&this.consumePath(e,a)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=_le}eoClip(){this.pendingClip=EL}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const s=new Path2D,i=t.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:l,path:c}of e)s.addPath(c,new DOMMatrix(r).preMultiplySelf(i).translate(o,a).scale(l,-l));t.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||FA,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&ce("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((u=s.systemFontInfo)==null?void 0:u.css)||`"${r}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const l=s.italic?"italic":"normal";let c=t;t<yL?c=yL:t>vL&&(c=vL),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,i,r){const o=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,d=c&cn.FILL_STROKE_MASK,f=!!(c&cn.ADD_TO_PATH_FLAG),p=a.patternFill&&!l.missingFile,y=a.patternStroke&&!l.missingFile;let g;if((l.disableFontFace||f||p||y)&&(g=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||p||y){o.save(),o.translate(t,s),o.scale(u,-u);let S;if((d===cn.FILL||d===cn.FILL_STROKE)&&(i?(S=o.getTransform(),o.setTransform(...i),o.fill(I(this,Ug,cT).call(this,g,S,i))):o.fill(g)),d===cn.STROKE||d===cn.FILL_STROKE)if(r){S||(S=o.getTransform()),o.setTransform(...r);const{a:w,b:_,c:v,d:m}=S,x=se.inverseTransform(r),A=se.transform([w,_,v,m,0,0],x);se.singularValueDecompose2dScale(A,ms),o.lineWidth*=Math.max(ms[0],ms[1])/u,o.stroke(I(this,Ug,cT).call(this,g,S,r))}else o.lineWidth/=u,o.stroke(g);o.restore()}else(d===cn.FILL||d===cn.FILL_STROKE)&&o.fillText(e,t,s),(d===cn.STROKE||d===cn.FILL_STROKE)&&o.strokeText(e,t,s);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:it(o),x:t,y:s,fontSize:u,path:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return _e(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const r=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,d=e.length,f=s.vertical,p=f?1:-1,y=s.defaultVMetrics,g=i*t.fontMatrix[0],S=t.textRenderingMode===cn.FILL&&!s.disableFontFace&&!t.patternFill;r.save(),t.textMatrix&&r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),c>0?r.scale(u,-1):r.scale(u,1);let w,_;if(t.patternFill){r.save();const k=t.fillColor.getPattern(r,this,Ti(r),tn.FILL);w=it(r),r.restore(),r.fillStyle=k}if(t.patternStroke){r.save();const k=t.strokeColor.getPattern(r,this,Ti(r),tn.STROKE);_=it(r),r.restore(),r.strokeStyle=k}let v=t.lineWidth;const m=t.textMatrixScale;if(m===0||v===0){const k=t.textRenderingMode&cn.FILL_STROKE_MASK;(k===cn.STROKE||k===cn.FILL_STROKE)&&(v=this.getSinglePixelWidth())}else v/=m;if(o!==1&&(r.scale(o,o),v/=o),r.lineWidth=v,s.isInvalidPDFjsFont){const k=[];let P=0;for(const R of e)k.push(R.unicode),P+=R.width;r.fillText(k.join(""),0,0),t.x+=P*g*u,r.restore(),this.compose();return}let x=0,A;for(A=0;A<d;++A){const k=e[A];if(typeof k=="number"){x+=p*k*i/1e3;continue}let P=!1;const R=(k.isSpace?l:0)+a,M=k.fontChar,N=k.accent;let F,H,D=k.width;if(f){const L=k.vmetric||y,B=-(k.vmetric?L[1]:D*.5)*g,O=L[2]*g;D=L?-L[0]:D,F=B/o,H=(x+O)/o}else F=x/o,H=0;if(s.remeasure&&D>0){const L=r.measureText(M).width*1e3/i*o;if(D<L&&this.isFontSubpixelAAEnabled){const B=D/L;P=!0,r.save(),r.scale(B,1),F/=B}else D!==L&&(F+=(D-L)/2e3*i/o)}if(this.contentVisible&&(k.isInFont||s.missingFile)){if(S&&!N)r.fillText(M,F,H);else if(this.paintChar(M,F,H,w,_),N){const L=F+i*N.offset.x/o,B=H-i*N.offset.y/o;this.paintChar(N.fontChar,L,B,w,_)}}const $=f?D*g-R*c:D*g+R*c;x+=$,P&&r.restore()}f?t.y-=x:t.x+=x*u,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,i=s.font,r=s.fontSize,o=s.fontDirection,a=i.vertical?1:-1,l=s.charSpacing,c=s.wordSpacing,u=s.textHScale*o,d=s.fontMatrix||FA,f=e.length,p=s.textRenderingMode===cn.INVISIBLE;let y,g,S,w;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),s.textMatrix&&t.transform(...s.textMatrix),t.translate(s.x,s.y+s.textRise),t.scale(u,o),y=0;y<f;++y){if(g=e[y],typeof g=="number"){w=a*g*r/1e3,this.ctx.translate(w,0),s.x+=w*u;continue}const _=(g.isSpace?c:0)+l,v=i.charProcOperatorList[g.operatorListId];v?this.contentVisible&&(this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(v),this.restore()):ce(`Type3 character "${g.operatorListId}" is not available.`);const m=[g.width,0];se.applyTransform(m,d),S=m[0]*r+_,t.translate(S,0),s.x+=S*u}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,i,r,o){const a=new Path2D;a.rect(s,i,r-s,o-i),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=this.baseTransform||it(this.ctx),i={createCanvasGraphics:r=>new ZP(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new oT(e,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=mle(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,Ti(t),tn.SHADING);const i=Ti(t);if(i){const{width:r,height:o}=t.canvas,a=rh.slice();se.axialAlignedBoundingBox([0,0,r,o],i,a);const[l,c,u,d]=a;this.ctx.fillRect(l,c,u-l,d-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Fe("Should not call beginInlineImage")}beginImageData(){Fe("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=it(this.ctx),t)){se.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[s,i,r,o]=t,a=new Path2D;a.rect(s,i,r-s,o-i),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||qS("TODO: Support non-isolated groups."),e.knockout&&ce("Knockout groups not supported.");const s=it(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=rh.slice();se.axialAlignedBoundingBox(e.bbox,it(t),i);const r=[0,0,t.canvas.width,t.canvas.height];i=se.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),a=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-o,1),c=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,l,c),f=d.context;f.translate(-o,-a),f.transform(...s);let p=new Path2D;const[y,g,S,w]=e.bbox;if(p.rect(y,g,S-y,w-g),e.matrix){const _=new Path2D;_.addPath(p,new DOMMatrix(e.matrix)),p=_}f.clip(p),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),lp(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=it(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=rh.slice();se.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i,r),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,s,i,r){if(I(this,Hg,aT).call(this),Nw(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a,se.singularValueDecompose2dScale(it(this.ctx),ms);const{viewportScale:l}=this,c=Math.ceil(o*this.outputScaleX*l),u=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,u);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(e,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(ms[0],0,0,-ms[1],0,a*ms[1]),Nw(this.ctx)}else{Nw(this.ctx),this.endPath();const l=new Path2D;l.rect(t[0],t[1],o,a),this.ctx.clip(l)}}this.current=new bL(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),I(this,Vg,lT).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,i=this._createMaskCanvas(e),r=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,i.offsetX,i.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,i=0,r,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=it(a);a.transform(t,s,i,r,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,d=o.length;u<d;u+=2){const f=se.transform(l,[t,s,i,r,o[u],o[u+1]]);a.drawImage(c.canvas,f[4],f[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:o,width:a,height:l,transform:c}=r,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=u.context;d.save();const f=this.getObject(o,r);_L(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?s.getPattern(d,this,Ti(t),tn.FILL):s,d.fillRect(0,0,a,l),d.restore(),t.save(),t.transform(...c),t.scale(1,-1),Mw(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ce("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){ce("Dependent image isn't ready yet");return}const o=r.width,a=r.height,l=[];for(let c=0,u=i.length;c<u;c+=2)l.push({transform:[t,0,0,s,i[c],i[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,i=this.ctx;this.save();const{filter:r}=i;r!=="none"&&r!==""&&(i.filter="none"),i.scale(1/t,-1/s);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,s).context;xL(c,e),o=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(o,Ti(i));i.imageSmoothingEnabled=SL(it(i),e.interpolate),Mw(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const r=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",r,o).context;xL(l,e),i=this.applyTransferMapsToCanvas(l)}for(const r of t)s.save(),s.transform(...r.transform),s.scale(1,-1),Mw(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(s||(this.pendingClip===EL?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=it(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let o,a;if(s===0&&i===0){const l=Math.abs(t),c=Math.abs(r);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,d=c*e;o=u<1?1/u:1,a=d<1?1/d:1}}else{const l=Math.abs(t*r-s*i),c=Math.hypot(t,s),u=Math.hypot(i,r);if(e===0)o=u/l,a=c/l;else{const d=e*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(i||1)*r,s.stroke(e);return}const a=s.getLineDash();t&&s.save(),s.scale(r,o),RE.a=1/r,RE.d=1/o;const l=new Path2D;if(l.addPath(e,RE),a.length>0){const c=Math.max(r,o);s.setLineDash(a.map(u=>u/c)),s.lineDashOffset/=c}s.lineWidth=i||1,s.stroke(l),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Hg=new WeakSet,aT=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Vg=new WeakSet,lT=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Ug=new WeakSet,cT=function(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i};let _h=ZP;for(const n in Wm)_h.prototype[n]!==void 0&&(_h.prototype[Wm[n]]=_h.prototype[n]);var $g,zg;class Hs{static get workerPort(){return h(this,$g)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");T(this,$g,e)}static get workerSrc(){return h(this,zg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");T(this,zg,e)}}$g=new WeakMap,zg=new WeakMap,C(Hs,$g,null),C(Hs,zg,"");var Zh,Wg;class Sle{constructor({parsedData:e,rawData:t}){C(this,Zh,void 0);C(this,Wg,void 0);T(this,Zh,e),T(this,Wg,t)}getRaw(){return h(this,Wg)}get(e){return h(this,Zh).get(e)??null}[Symbol.iterator](){return h(this,Zh).entries()}}Zh=new WeakMap,Wg=new WeakMap;const Bu=Symbol("INTERNAL");var Gg,Yg,Kg,ed;class Ele{constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){C(this,Gg,!1);C(this,Yg,!1);C(this,Kg,!1);C(this,ed,!0);T(this,Gg,!!(e&fs.DISPLAY)),T(this,Yg,!!(e&fs.PRINT)),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(h(this,Kg))return h(this,ed);if(!h(this,ed))return!1;const{print:e,view:t}=this.usage;return h(this,Gg)?(t==null?void 0:t.viewState)!=="OFF":h(this,Yg)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Bu&&Fe("Internal method `_setVisible` called."),T(this,Kg,s),T(this,ed,t)}}Gg=new WeakMap,Yg=new WeakMap,Kg=new WeakMap,ed=new WeakMap;var Qo,Oe,td,nd,qg,uT;class Cle{constructor(e,t=fs.DISPLAY){C(this,qg);C(this,Qo,null);C(this,Oe,new Map);C(this,td,null);C(this,nd,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,T(this,nd,e.order);for(const s of e.groups)h(this,Oe).set(s.id,new Ele(t,s));if(e.baseState==="OFF")for(const s of h(this,Oe).values())s._setVisible(Bu,!1);for(const s of e.on)h(this,Oe).get(s)._setVisible(Bu,!0);for(const s of e.off)h(this,Oe).get(s)._setVisible(Bu,!1);T(this,td,this.getHash())}}isVisible(e){if(h(this,Oe).size===0)return!0;if(!e)return qS("Optional content group not defined."),!0;if(e.type==="OCG")return h(this,Oe).has(e.id)?h(this,Oe).get(e.id).visible:(ce(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return I(this,qg,uT).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!h(this,Oe).has(t))return ce(`Optional content group not found: ${t}`),!0;if(h(this,Oe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!h(this,Oe).has(t))return ce(`Optional content group not found: ${t}`),!0;if(!h(this,Oe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!h(this,Oe).has(t))return ce(`Optional content group not found: ${t}`),!0;if(!h(this,Oe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!h(this,Oe).has(t))return ce(`Optional content group not found: ${t}`),!0;if(h(this,Oe).get(t).visible)return!1}return!0}return ce(`Unknown optional content policy ${e.policy}.`),!0}return ce(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const i=h(this,Oe).get(e);if(!i){ce(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==e&&((r=h(this,Oe).get(a))==null||r._setVisible(Bu,!1,!0));i._setVisible(Bu,!!t,!0),T(this,Qo,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=h(this,Oe).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}T(this,Qo,null)}get hasInitialVisibility(){return h(this,td)===null||this.getHash()===h(this,td)}getOrder(){return h(this,Oe).size?h(this,nd)?h(this,nd).slice():[...h(this,Oe).keys()]:null}getGroup(e){return h(this,Oe).get(e)||null}getHash(){if(h(this,Qo)!==null)return h(this,Qo);const e=new HU;for(const[t,s]of h(this,Oe))e.update(`${t}:${s.visible}`);return T(this,Qo,e.hexdigest())}[Symbol.iterator](){return h(this,Oe).entries()}}Qo=new WeakMap,Oe=new WeakMap,td=new WeakMap,nd=new WeakMap,qg=new WeakSet,uT=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let o;if(Array.isArray(r))o=I(this,qg,uT).call(this,r);else if(h(this,Oe).has(r))o=h(this,Oe).get(r).visible;else return ce(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class Ale{constructor(e,{disableRange:t=!1,disableStream:s=!1}){At(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});At(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){At(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Tle(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new kle(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class Tle{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=QS(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class kle{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Ile(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),r(u)}if(t=o(n),t){const u=c(t);return r(u)}if(t=s("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),r(u)}function s(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(u,{fatal:!0}),p=Hv(d);d=f.decode(p),e=!1}catch{}}return d}function r(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function o(u){const d=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(u))!==null;){let[,g,S,w]=f;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[S,w]}const y=[];for(let g=0;g<d.length&&g in d;++g){let[S,w]=d[g];w=a(w),S&&(w=unescape(w),g===0&&(w=l(w))),y.push(w)}return y.join("")}function a(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){const d=u.indexOf("'");if(d===-1)return u;const f=u.slice(0,d),y=u.slice(d+1).replace(/^[^']*'/,"");return i(f,y)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,y){if(p==="q"||p==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,S){return String.fromCharCode(parseInt(S,16))}),i(f,y);try{y=atob(y)}catch{}return i(f,y)})}return""}function ZU(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function ZS(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function e$({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function t$(n){const e=n.get("Content-Disposition");if(e){let t=Ile(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(QS(t))return t}return null}function zv(n,e){return new Gm(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function n$(n){return n===200||n===206}function s$(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function i$(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ce(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Ple{constructor(e){V(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=ZU(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return At(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Rle(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new Mle(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Rle{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,s$(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=ZS(r.url),!n$(r.status))throw zv(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=e$({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=t$(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new po("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:i$(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class Mle{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const o=i.url;fetch(o,s$(r,this._withCredentials,this._abortController)).then(a=>{const l=ZS(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!n$(a.status))throw zv(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:i$(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const ME=200,NE=206;function Nle(n){const e=n.response;return typeof e!="string"?e:Hv(e).buffer}class Dle{constructor({url:e,httpHeaders:t,withCredentials:s}){V(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=ZU(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=NE):i.expectedStatus=ME,t.responseType="arraybuffer",At(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||ME;if(!(r===ME&&s.expectedStatus===NE)&&r!==s.expectedStatus){s.onError(i.status);return}const a=Nle(i);if(r===NE){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?s.onDone({begin:parseInt(c[1],10),chunk:a}):(ce('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Lle{constructor(e){this._source=e,this._manager=new Dle(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return At(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Ole(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new Fle(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Ole{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=ZS(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=e$({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=t$(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=zv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Fle{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=ZS((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=zv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const jle=/^[a-z][a-z0-9\-+.]+:/i;function Ble(n){if(jle.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class Hle{constructor(e){this.source=e,this.url=Ble(e.url),At(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return At(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Vle(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new Ule(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Vle{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=zv(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new po("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ule{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const cp=Symbol("INITIAL_DATA");var ns,Xg,hT;class r${constructor(){C(this,Xg);C(this,ns,Object.create(null))}get(e,t=null){if(t){const i=I(this,Xg,hT).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=h(this,ns)[e];if(!s||s.data===cp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=h(this,ns)[e];return!!t&&t.data!==cp}delete(e){const t=h(this,ns)[e];return!t||t.data===cp?!1:(delete h(this,ns)[e],!0)}resolve(e,t=null){const s=I(this,Xg,hT).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in h(this,ns)){const{data:s}=h(this,ns)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}T(this,ns,Object.create(null))}*[Symbol.iterator](){for(const e in h(this,ns)){const{data:t}=h(this,ns)[e];t!==cp&&(yield[e,t])}}}ns=new WeakMap,Xg=new WeakSet,hT=function(e){var t;return(t=h(this,ns))[e]||(t[e]={...Promise.withResolvers(),data:cp})};const $le=1e5,CL=30;var jL,Jo,jn,Qg,Jg,rc,Ir,Zg,ey,oc,sd,id,Zo,rd,ty,od,ac,ny,sy,tt,ad,lc,iy,ea,ld,Fx,o$,jx,a$,ry,dT,cd,y0,oy,fT,Bx,l$,Hx,c$;let Km=(tt=class{constructor({textContentSource:e,container:t,viewport:s}){C(this,Fx);C(this,jx);C(this,ry);C(this,Jo,Promise.withResolvers());C(this,jn,null);C(this,Qg,!1);C(this,Jg,!!((jL=globalThis.FontInspector)!=null&&jL.enabled));C(this,rc,null);C(this,Ir,null);C(this,Zg,0);C(this,ey,0);C(this,oc,null);C(this,sd,null);C(this,id,0);C(this,Zo,0);C(this,rd,Object.create(null));C(this,ty,[]);C(this,od,null);C(this,ac,[]);C(this,ny,new WeakMap);C(this,sy,null);var l;if(e instanceof ReadableStream)T(this,od,e);else if(typeof e=="object")T(this,od,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');T(this,jn,T(this,sd,t)),T(this,Zo,s.scale*Ci.pixelRatio),T(this,id,s.rotation),T(this,Ir,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:a}=s.rawDims;T(this,sy,[1,0,0,-1,-o,a+r]),T(this,ey,i),T(this,Zg,r),I(l=tt,Bx,l$).call(l),Ya(t,s),h(this,Jo).promise.finally(()=>{h(tt,ld).delete(this),T(this,Ir,null),T(this,rd,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Yt.platform;return _e(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{h(this,oc).read().then(({value:t,done:s})=>{if(s){h(this,Jo).resolve();return}h(this,rc)??T(this,rc,t.lang),Object.assign(h(this,rd),t.styles),I(this,Fx,o$).call(this,t.items),e()},h(this,Jo).reject)};return T(this,oc,h(this,od).getReader()),h(tt,ld).add(this),e(),h(this,Jo).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*Ci.pixelRatio,i=e.rotation;if(i!==h(this,id)&&(t==null||t(),T(this,id,i),Ya(h(this,sd),{rotation:i})),s!==h(this,Zo)){t==null||t(),T(this,Zo,s);const o={div:null,properties:null,ctx:I(r=tt,cd,y0).call(r,h(this,rc))};for(const a of h(this,ac))o.properties=h(this,ny).get(a),o.div=a,I(this,ry,dT).call(this,o)}}cancel(){var t;const e=new po("TextLayer task cancelled.");(t=h(this,oc))==null||t.cancel(e).catch(()=>{}),T(this,oc,null),h(this,Jo).reject(e)}get textDivs(){return h(this,ac)}get textContentItemsStr(){return h(this,ty)}static cleanup(){if(!(h(this,ld).size>0)){h(this,ad).clear();for(const{canvas:e}of h(this,lc).values())e.remove();h(this,lc).clear()}}},Jo=new WeakMap,jn=new WeakMap,Qg=new WeakMap,Jg=new WeakMap,rc=new WeakMap,Ir=new WeakMap,Zg=new WeakMap,ey=new WeakMap,oc=new WeakMap,sd=new WeakMap,id=new WeakMap,Zo=new WeakMap,rd=new WeakMap,ty=new WeakMap,od=new WeakMap,ac=new WeakMap,ny=new WeakMap,sy=new WeakMap,ad=new WeakMap,lc=new WeakMap,iy=new WeakMap,ea=new WeakMap,ld=new WeakMap,Fx=new WeakSet,o$=function(e){var i,r;if(h(this,Qg))return;(r=h(this,Ir)).ctx??(r.ctx=I(i=tt,cd,y0).call(i,h(this,rc)));const t=h(this,ac),s=h(this,ty);for(const o of e){if(t.length>$le){ce("Ignoring additional textDivs for performance reasons."),T(this,Qg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=h(this,jn);T(this,jn,document.createElement("span")),h(this,jn).classList.add("markedContent"),o.id!==null&&h(this,jn).setAttribute("id",`${o.id}`),a.append(h(this,jn))}else o.type==="endMarkedContent"&&T(this,jn,h(this,jn).parentNode);continue}s.push(o.str),I(this,jx,a$).call(this,o)}},jx=new WeakSet,a$=function(e){var g;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};h(this,ac).push(t);const i=se.transform(h(this,sy),e.transform);let r=Math.atan2(i[1],i[0]);const o=h(this,rd)[e.fontName];o.vertical&&(r+=Math.PI/2);let a=h(this,Jg)&&o.fontSubstitution||o.fontFamily;a=tt.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),c=l*I(g=tt,Hx,c$).call(g,a,o,h(this,rc));let u,d;r===0?(u=i[4],d=i[5]-c):(u=i[4]+c*Math.sin(r),d=i[5]-c*Math.cos(r));const f="calc(var(--total-scale-factor) *",p=t.style;h(this,jn)===h(this,sd)?(p.left=`${(100*u/h(this,ey)).toFixed(2)}%`,p.top=`${(100*d/h(this,Zg)).toFixed(2)}%`):(p.left=`${f}${u.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(h(tt,ea)*l).toFixed(2)}px)`,p.fontFamily=a,s.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,h(this,Jg)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);S!==w&&Math.max(S,w)/Math.min(S,w)>1.5&&(y=!0)}if(y&&(s.canvasWidth=o.vertical?e.height:e.width),h(this,ny).set(t,s),h(this,Ir).div=t,h(this,Ir).properties=s,I(this,ry,dT).call(this,h(this,Ir)),s.hasText&&h(this,jn).append(t),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),h(this,jn).append(S)}},ry=new WeakSet,dT=function(e){var a;const{div:t,properties:s,ctx:i}=e,{style:r}=t;let o="";if(h(tt,ea)>1&&(o=`scale(${1/h(tt,ea)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=r,{canvasWidth:c,fontSize:u}=s;I(a=tt,oy,fT).call(a,i,u*h(this,Zo),l);const{width:d}=i.measureText(t.textContent);d>0&&(o=`scaleX(${c*h(this,Zo)/d}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},cd=new WeakSet,y0=function(e=null){let t=h(this,lc).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),h(this,lc).set(e,t),h(this,iy).set(t,{size:0,family:""})}return t},oy=new WeakSet,fT=function(e,t,s){const i=h(this,iy).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},Bx=new WeakSet,l$=function(){if(h(this,ea)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),T(this,ea,e.getBoundingClientRect().height),e.remove()},Hx=new WeakSet,c$=function(e,t,s){const i=h(this,ad).get(e);if(i)return i;const r=I(this,cd,y0).call(this,s);r.canvas.width=r.canvas.height=CL,I(this,oy,fT).call(this,r,CL,e);const o=r.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let c=.8;return a?c=a/(a+l):(Yt.platform.isFirefox&&ce("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),h(this,ad).set(e,c),c},C(tt,cd),C(tt,oy),C(tt,Bx),C(tt,Hx),C(tt,ad,new Map),C(tt,lc,new Map),C(tt,iy,new WeakMap),C(tt,ea,null),C(tt,ld,new Set),tt);class qm{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var l;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(qm.shouldBuildText(a))(l=r==null?void 0:r.attributes)!=null&&l.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const c of r.children)i(c)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const zle=100;function VP(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new pT,{docId:t}=e,s=n.url?ele(n.url):null,i=n.data?tle(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof UP?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let u=n.worker instanceof Ef?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Uv(n.docBaseUrl)?n.docBaseUrl:null,p=Pw(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(In?lle:fL),S=Pw(n.iccUrl),w=Pw(n.standardFontDataUrl),_=n.StandardFontDataFactory||(In?cle:pL),v=Pw(n.wasmUrl),m=n.WasmFactory||(In?ule:mL),x=n.stopAtErrors!==!0,A=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!In,R=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!In&&(Yt.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,N=typeof n.disableFontFace=="boolean"?n.disableFontFace:In,F=n.fontExtraProperties===!0,H=n.enableXfa===!0,D=n.ownerDocument||globalThis.document,$=n.disableRange===!0,L=n.disableStream===!0,B=n.disableAutoFetch===!0,O=n.pdfBug===!0,j=n.CanvasFactory||(In?ale:ile),z=n.FilterFactory||(In?ole:rle),W=n.enableHWA===!0,K=n.useWasm!==!1,Z=l?l.length:n.length??NaN,de=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!In&&!N,Me=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===fL&&_===pL&&m===mL&&p&&w&&v&&wp(p,document.baseURI)&&wp(w,document.baseURI)&&wp(v,document.baseURI)),ue=null;Oae(d);const G={canvasFactory:new j({ownerDocument:D,enableHWA:W}),filterFactory:new z({docId:t,ownerDocument:D}),cMapReaderFactory:Me?null:new g({baseUrl:p,isCompressed:y}),standardFontDataFactory:Me?null:new _({baseUrl:w}),wasmFactory:Me?null:new m({baseUrl:v})};u||(u=Ef.create({verbosity:d,port:Hs.workerPort}),e._worker=u);const fe={docId:t,apiVersion:"5.3.93",data:i,password:a,disableAutoFetch:B,rangeChunkSize:c,length:Z,docBaseUrl:f,enableXfa:H,evaluatorOptions:{maxImageSize:A,disableFontFace:N,ignoreErrors:x,isEvalSupported:k,isOffscreenCanvasSupported:P,isImageDecoderSupported:R,canvasMaxAreaInBytes:M,fontExtraProperties:F,useSystemFonts:de,useWasm:K,useWorkerFetch:Me,cMapUrl:p,iccUrl:S,standardFontDataUrl:w,wasmUrl:v}},he={ownerDocument:D,pdfBug:O,styleElement:ue,loadingParams:{disableAutoFetch:B,enableXfa:H}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ne=u.messageHandler.sendWithPromise("GetDocRequest",fe,i?[i.buffer]:null);let oe;if(l)oe=new Ale(l,{disableRange:$,disableStream:L});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const ye=wp(s)?Ple:In?Hle:Lle;oe=new ye({url:s,length:Z,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:$,disableStream:L})}return ne.then(ye=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ae=new Ep(t,ye,u.port),Te=new Yle(ae,e,oe,he,G);e._transport=Te,ae.send("Ready",null)})}).catch(e._capability.reject),e}var Vx;const Ux=class Ux{constructor(){V(this,"_capability",Promise.withResolvers());V(this,"_transport",null);V(this,"_worker",null);V(this,"docId",`d${bn(Ux,Vx)._++}`);V(this,"destroyed",!1);V(this,"onPassword",null);V(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Vx=new WeakMap,C(Ux,Vx,0);let pT=Ux;var cc,ay,ly,cy,uy,BL;let UP=(BL=class{constructor(e,t,s=!1,i=null){C(this,cc,Promise.withResolvers());C(this,ay,[]);C(this,ly,[]);C(this,cy,[]);C(this,uy,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){h(this,uy).push(e)}addProgressListener(e){h(this,cy).push(e)}addProgressiveReadListener(e){h(this,ly).push(e)}addProgressiveDoneListener(e){h(this,ay).push(e)}onDataRange(e,t){for(const s of h(this,uy))s(e,t)}onDataProgress(e,t){h(this,cc).promise.then(()=>{for(const s of h(this,cy))s(e,t)})}onDataProgressiveRead(e){h(this,cc).promise.then(()=>{for(const t of h(this,ly))t(e)})}onDataProgressiveDone(){h(this,cc).promise.then(()=>{for(const e of h(this,ay))e()})}transportReady(){h(this,cc).resolve()}requestDataRange(e,t){Fe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},cc=new WeakMap,ay=new WeakMap,ly=new WeakMap,cy=new WeakMap,uy=new WeakMap,BL);class Wle{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return _e(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Pr,uc,Ip;class Gle{constructor(e,t,s,i=!1){C(this,uc);C(this,Pr,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new uL:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new r$,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new Vv({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return _e(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:i=Qi.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:d=!1}){var m,x;(m=this._stats)==null||m.time("Overall");const f=this._transport.getRenderingIntent(s,i,u,d),{renderingIntent:p,cacheKey:y}=f;T(this,Pr,!1),a||(a=this._transport.getOptionalContentConfig(p));let g=this._intentStates.get(y);g||(g=Object.create(null),this._intentStates.set(y,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const S=!!(p&fs.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(x=this._stats)==null||x.time("Page Request"),this._pumpOperatorList(f));const w=A=>{var k;g.renderTasks.delete(_),S&&T(this,Pr,!0),I(this,uc,Ip).call(this),A?(_.capability.reject(A),this._abortOperatorList({intentState:g,reason:A instanceof Error?A:new Error(A)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(k=globalThis.Stats)!=null&&k.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new mT({callback:w,params:{canvasContext:e,viewport:t,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||(g.renderTasks=new Set)).add(_);const v=_.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([A,k])=>{var P;if(this.destroyed){w();return}if((P=this._stats)==null||P.time("Rendering"),!(k.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:A,optionalContentConfig:k}),_.operatorListChanged()}).catch(w),v}getOperatorList({intent:e="display",annotationMode:t=Qi.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var c;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,s,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>qm.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){o.read().then(function({value:l,done:c}){if(c){s(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},i)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),T(this,Pr,!1),Promise.all(e)}cleanup(e=!1){T(this,Pr,!0);const t=I(this,uc,Ip).call(this);return e&&t&&this._stats&&(this._stats=new uL),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&I(this,uc,Ip).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:d,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();I(this,uc,Ip).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof XS){let i=zle;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new po(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Pr=new WeakMap,uc=new WeakSet,Ip=function(){if(!h(this,Pr)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),T(this,Pr,!1),!0};var ta,si,Rr,hc,$x,dc,fc,ud,v0,zx,u$,Wx,h$,pc,Pp,hd,w0;const Je=class Je{constructor({name:e=null,port:t=null,verbosity:s=Fae()}={}){C(this,ud);C(this,zx);C(this,Wx);C(this,pc);C(this,ta,Promise.withResolvers());C(this,si,null);C(this,Rr,null);C(this,hc,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(h(Je,fc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");h(Je,fc).set(t,this),I(this,zx,u$).call(this,t)}else I(this,Wx,h$).call(this)}get promise(){return h(this,ta).promise}get port(){return h(this,Rr)}get messageHandler(){return h(this,si)}destroy(){var e,t;this.destroyed=!0,(e=h(this,hc))==null||e.terminate(),T(this,hc,null),h(Je,fc).delete(h(this,Rr)),T(this,Rr,null),(t=h(this,si))==null||t.destroy(),T(this,si,null)}static create(e){const t=h(this,fc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Je(e)}static get workerSrc(){if(Hs.workerSrc)return Hs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return _e(this,"_setupFakeWorkerGlobal",(async()=>h(this,hd,w0)?h(this,hd,w0):(await Lae(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};ta=new WeakMap,si=new WeakMap,Rr=new WeakMap,hc=new WeakMap,$x=new WeakMap,dc=new WeakMap,fc=new WeakMap,ud=new WeakSet,v0=function(){h(this,ta).resolve(),h(this,si).send("configure",{verbosity:this.verbosity})},zx=new WeakSet,u$=function(e){T(this,Rr,e),T(this,si,new Ep("main","worker",e)),h(this,si).on("ready",()=>{}),I(this,ud,v0).call(this)},Wx=new WeakSet,h$=function(){if(h(Je,dc)||h(Je,hd,w0)){I(this,pc,Pp).call(this);return}let{workerSrc:e}=Je;try{Je._isSameOrigin(window.location,e)||(e=Je._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Ep("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?h(this,ta).reject(new Error("Worker was destroyed")):I(this,pc,Pp).call(this)},r=new AbortController;t.addEventListener("error",()=>{h(this,hc)||i()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}T(this,si,s),T(this,Rr,t),T(this,hc,t),I(this,ud,v0).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{I(this,pc,Pp).call(this)}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{qS("The worker has been disabled.")}I(this,pc,Pp).call(this)},pc=new WeakSet,Pp=function(){h(Je,dc)||(ce("Setting up fake worker."),T(Je,dc,!0)),Je._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){h(this,ta).reject(new Error("Worker was destroyed"));return}const t=new sle;T(this,Rr,t);const s=`fake${bn(Je,$x)._++}`,i=new Ep(s+"_worker",s,t);e.setup(i,t),T(this,si,new Ep(s,s+"_worker",t)),I(this,ud,v0).call(this)}).catch(e=>{h(this,ta).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},hd=new WeakSet,w0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},C(Je,hd),C(Je,$x,0),C(Je,dc,!1),C(Je,fc,new WeakMap),In&&(T(Je,dc,!0),Hs.workerSrc||(Hs.workerSrc="./pdf.worker.mjs")),Je._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},Je._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Je.fromPort=e=>{if(Gae("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Je.create(e)};let Ef=Je;var Mr,Hi,dd,fd,Nr,mc,Rp;class Yle{constructor(e,t,s,i,r){C(this,mc);C(this,Mr,new Map);C(this,Hi,new Map);C(this,dd,new Map);C(this,fd,new Map);C(this,Nr,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new r$,this.fontLoader=new Jae({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return _e(this,"annotationStorage",new jP)}getRenderingIntent(e,t=Qi.ENABLE,s=null,i=!1,r=!1){let o=fs.DISPLAY,a=tT;switch(e){case"any":o=fs.ANY;break;case"display":break;case"print":o=fs.PRINT;break;default:ce(`getRenderingIntent - invalid intent: ${e}`)}const l=o&fs.PRINT&&s instanceof UU?s:this.annotationStorage;switch(t){case Qi.DISABLE:o+=fs.ANNOTATIONS_DISABLE;break;case Qi.ENABLE:break;case Qi.ENABLE_FORMS:o+=fs.ANNOTATIONS_FORMS;break;case Qi.ENABLE_STORAGE:o+=fs.ANNOTATIONS_STORAGE,a=l.serializable;break;default:ce(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=fs.IS_EDITING),r&&(o+=fs.OPLIST);const{ids:c,hash:u}=l.modifiedIds,d=[o,a.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=h(this,Nr))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of h(this,Hi).values())e.push(i._destroy());h(this,Hi).clear(),h(this,dd).clear(),h(this,fd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),h(this,Mr).clear(),this.filterFactory.destroy(),Km.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new po("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{At(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}At(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(s,i)=>{At(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){i.close();return}At(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new Wle(s,this))}),e.on("DocException",s=>{t._capability.reject(Ln(s))}),e.on("PasswordRequest",s=>{T(this,Nr,Promise.withResolvers());try{if(!t.onPassword)throw Ln(s);const i=r=>{r instanceof Error?h(this,Nr).reject(r):h(this,Nr).resolve({password:r})};t.onPassword(i,s.code)}catch(i){h(this,Nr).reject(i)}return h(this,Nr).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;h(this,Hi).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const u=r.error;ce(`Error during font loading: ${u}`),this.commonObjs.resolve(s,u);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,d)=>globalThis.FontInspector.fontAdded(u,d):null,l=new Zae(r,a);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(s,l)});break;case"CopyLocalImage":const{imageRef:c}=r;At(c,"The imageRef must be defined.");for(const u of h(this,Hi).values())for(const[,d]of u.objs)if((d==null?void 0:d.ref)===c)return d.dataLen?(this.commonObjs.resolve(s,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,o])=>{var l;if(this.destroyed)return;const a=h(this,Hi).get(i);if(!a.objs.has(s)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&ce("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=h(this,dd).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&h(this,fd).set(r.refStr,e);const o=new Gle(t,r,this,this._params.pdfBug);return h(this,Hi).set(t,o),o});return h(this,dd).set(t,i),i}getPageIndex(e){return nT(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return I(this,mc,Rp).call(this,"GetFieldObjects")}hasJSActions(){return I(this,mc,Rp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return I(this,mc,Rp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return I(this,mc,Rp).call(this,"GetOptionalContentConfig").then(t=>new Cle(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=h(this,Mr).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new Sle(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return h(this,Mr).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of h(this,Hi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),h(this,Mr).clear(),this.filterFactory.destroy(!0),Km.cleanup()}}cachedPageNumber(e){if(!nT(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return h(this,fd).get(t)??null}}Mr=new WeakMap,Hi=new WeakMap,dd=new WeakMap,fd=new WeakMap,Nr=new WeakMap,mc=new WeakSet,Rp=function(e,t=null){const s=h(this,Mr).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return h(this,Mr).set(e,i),i};var na;class Kle{constructor(e){C(this,na,null);V(this,"onContinue",null);V(this,"onError",null);T(this,na,e)}get promise(){return h(this,na).capability.promise}cancel(e=0){h(this,na).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=h(this,na).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=h(this,na);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}na=new WeakMap;var sa,gc;const bl=class bl{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:f=null}){C(this,sa,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Kle(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(h(bl,gc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");h(bl,gc).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:o}=this.params;this.gfx=new _h(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var s,i,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),h(this,sa)&&(window.cancelAnimationFrame(h(this,sa)),T(this,sa,null)),h(bl,gc).delete(this._canvas),e||(e=new XS(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(r=(i=this.task).onError)==null||r.call(i,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?T(this,sa,window.requestAnimationFrame(()=>{T(this,sa,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),h(bl,gc).delete(this._canvas),this.callback())))}};sa=new WeakMap,gc=new WeakMap,C(bl,gc,new WeakSet);let mT=bl;const d$="5.3.93",f$="cbeef3233";function AL(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function up(n){return Math.max(0,Math.min(255,255*n))}class TL{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=up(e),[e,e,e]}static G_HTML([e]){const t=AL(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(up)}static RGB_HTML(e){return`#${e.map(AL).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[up(1-Math.min(1,e+i)),up(1-Math.min(1,s+i)),up(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,o=1-s,a=Math.min(i,r,o);return["CMYK",i,r,o,a]}}class qle{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Fe("Abstract method `_createSVG` called.")}}class Xm extends qle{_createSVG(e){return document.createElementNS(ur,e)}}class $P{static setupStorage(e,t,s,i,r){const o=i.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&r.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var d,f;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const a=r!=="richText",l=e.div;if(l.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=p}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),a&&qm.shouldBuildText(i.name)&&c.push(p)}return{textDivs:c}}const u=[[i,-1,o]];for(;u.length>0;){const[p,y,g]=u.at(-1);if(y+1===p.children.length){u.pop();continue}const S=p.children[++u.at(-1)[1]];if(S===null)continue;const{name:w}=S;if(w==="#text"){const v=document.createTextNode(S.value);c.push(v),g.append(v);continue}const _=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,w):document.createElement(w);if(g.append(_),S.attributes&&this.setAttributes({html:_,element:S,storage:t,intent:r,linkService:s}),((f=S.children)==null?void 0:f.length)>0)u.push([S,-1,_]);else if(S.value){const v=document.createTextNode(S.value);a&&qm.shouldBuildText(w)&&c.push(v),_.append(v)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Xle=9,mu=new WeakSet;class kL{static create(e){switch(e.data.annotationType){case gt.LINK:return new p$(e);case gt.TEXT:return new Qle(e);case gt.WIDGET:switch(e.data.fieldType){case"Tx":return new Jle(e);case"Btn":return e.data.radioButton?new y$(e):e.data.checkBox?new ece(e):new tce(e);case"Ch":return new nce(e);case"Sig":return new Zle(e)}return new Tu(e);case gt.POPUP:return new yT(e);case gt.FREETEXT:return new _$(e);case gt.LINE:return new ice(e);case gt.SQUARE:return new rce(e);case gt.CIRCLE:return new oce(e);case gt.POLYLINE:return new S$(e);case gt.CARET:return new lce(e);case gt.INK:return new zP(e);case gt.POLYGON:return new ace(e);case gt.HIGHLIGHT:return new E$(e);case gt.UNDERLINE:return new cce(e);case gt.SQUIGGLY:return new uce(e);case gt.STRIKEOUT:return new hce(e);case gt.STAMP:return new C$(e);case gt.FILEATTACHMENT:return new dce(e);default:return new xt(e)}}}var yc,pd,md,hy,gT;const eR=class eR{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){C(this,hy);C(this,yc,null);C(this,pd,!1);C(this,md,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return eR._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;h(this,yc)||T(this,yc,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&I(this,hy,gT).call(this,t),(s=h(this,md))==null||s.popup.updateEdited(e)}resetEdited(){var e;h(this,yc)&&(I(this,hy,gT).call(this,h(this,yc).rect),(e=h(this,md))==null||e.popup.resetEdited(),T(this,yc,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Tu||(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof yT){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,r),r}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(g>0||S>0){const _=`calc(${g}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;o.borderRadius=_}else if(this instanceof y$){const _=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=_}switch(t.borderStyle.style){case Lu.SOLID:o.borderStyle="solid";break;case Lu.DASHED:o.borderStyle="dashed";break;case Lu.BEVELED:ce("Unimplemented border style: beveled");break;case Lu.INSET:ce("Unimplemented border style: inset");break;case Lu.UNDERLINE:o.borderBottomStyle="solid";break}const w=t.borderColor||null;w?(T(this,pd,!0),o.borderColor=se.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):o.borderWidth=0}const c=se.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:d,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(c[0]-f)/u}%`,o.top=`${100*(c[1]-p)/d}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*a/u}%`,o.height=`${100*l/d}%`):this.setRotation(y,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;e%180!==0&&([r,o]=[o,r]),t.style.width=`${100*r/s}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],o=r[0],a=r.slice(1);i.target.style[s]=TL[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:TL[`${o}_rgb`](a)})};return _e(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const o=s[i];if(o){const a={detail:{[i]:r},target:e};o(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,S,w,_]=e.subarray(2,6);if(i===g&&r===S&&t===w&&s===_)return}const{style:o}=this.container;let a;if(h(this,pd)){const{borderColor:g,borderWidth:S}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const l=i-t,c=r-s,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=u.createElement("defs");d.append(f);const p=u.createElement("clipPath"),y=`clippath_${this.data.id}`;p.setAttribute("id",y),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let g=2,S=e.length;g<S;g+=8){const w=e[g],_=e[g+1],v=e[g+2],m=e[g+3],x=u.createElement("rect"),A=(v-t)/l,k=(r-_)/c,P=(w-v)/l,R=(_-m)/c;x.setAttribute("x",A),x.setAttribute("y",k),x.setAttribute("width",P),x.setAttribute("height",R),p.append(x),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${k}" width="${P}" height="${R}"/>`)}h(this,pd)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:e}=this,t=T(this,md,new yT({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Fe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:o,exportValues:a}of i){if(r===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!mu.has(c)){ce(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:l,domElement:c})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==t&&mu.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};yc=new WeakMap,pd=new WeakMap,md=new WeakMap,hy=new WeakSet,gT=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(o-e[3]+l)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)};let xt=eR;var Dr,gl,Gx,m$,Yx,g$;class p$ extends xt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});C(this,Dr);C(this,Gx);C(this,Yx);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(I(this,Gx,m$).call(this,i,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(I(this,Yx,g$).call(this,i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&I(this,Dr,gl).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),I(this,Dr,gl).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=i.get(r);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),I(this,Dr,gl).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),I(this,Dr,gl).call(this),!this._fieldObjects){ce('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var d;i==null||i();const{fields:r,refs:o,include:a}=s,l=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const y=this._fieldObjects[p]||[];for(const{id:g}of y)f.add(g)}for(const p of Object.values(this._fieldObjects))for(const y of p)f.has(y.id)===a&&l.push(y)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const c=this.annotationStorage,u=[];for(const f of l){const{id:p}=f;switch(u.push(p),f.type){case"text":{const g=f.defaultValue||"";c.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;c.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";c.setValue(p,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${p}"]`);if(y){if(!mu.has(y)){ce(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Dr=new WeakSet,gl=function(){this.container.setAttribute("data-internal-link","")},Gx=new WeakSet,m$=function(t,s,i=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},I(this,Dr,gl).call(this)},Yx=new WeakSet,g$=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),I(this,Dr,gl).call(this)};class Qle extends xt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Tu extends xt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Yt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var a;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(e,t,s,i){var r,o,a;for(const[l,c]of s)(c==="Action"||(r=this.data.actions)!=null&&r[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,i),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":se.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Xle,r=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(AE*i))||1,d=c/u;o=Math.min(i,l(d/AE))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/AE))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=se.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Jle extends Tu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),r.setValue(o.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",c??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),mu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const d=this.data.dateFormat||this.data.timeFormat;d&&(s.title=d),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(s,"value",p.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue??"";s.value=u.userValue=y,u.formattedValue=null});let f=p=>{const{formattedValue:y}=u;y!=null&&(p.target.value=y),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",y=>{var S;if(u.focused)return;const{target:g}=y;u.userValue&&(g.value=u.userValue),u.lastCommittedValue=g.value,u.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const g={value(S){u.userValue=S.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),S.target.value=u.userValue},formattedValue(S){const{formattedValue:w}=S.detail;u.formattedValue=w,w!=null&&S.target!==document.activeElement&&(S.target.value=w),e.setValue(t,{formattedValue:w})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var m;const{charLimit:w}=S.detail,{target:_}=S;if(w===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",w);let v=u.userValue;!v||v.length<=w||(v=v.slice(0,w),_.value=u.userValue=v,e.setValue(t,{value:v}),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(g,y)}),s.addEventListener("keydown",y=>{var w;u.commitKey=1;let g=-1;if(y.key==="Escape"?g=0:y.key==="Enter"&&!this.data.multiLine?g=2:y.key==="Tab"&&(u.commitKey=3),g===-1)return;const{value:S}=y.target;u.lastCommittedValue!==S&&(u.lastCommittedValue=S,u.userValue=S,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:g,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const p=f;f=null,s.addEventListener("blur",y=>{var S,w;if(!u.focused||!y.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(u.focused=!1);const{value:g}=y.target;u.userValue=g,u.lastCommittedValue!==g&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:u.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),p(y)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",y=>{var A;u.lastCommittedValue=null;const{data:g,target:S}=y,{value:w,selectionStart:_,selectionEnd:v}=S;let m=_,x=v;switch(y.inputType){case"deleteWordBackward":{const k=w.substring(0,_).match(/\w*[^\w]*$/);k&&(m-=k[0].length);break}case"deleteWordForward":{const k=w.substring(_).match(/^[^\w]*\w*/);k&&(x+=k[0].length);break}case"deleteContentBackward":_===v&&(m-=1);break;case"deleteContentForward":_===v&&(x+=1);break}y.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,change:g||"",willCommit:!1,selStart:m,selEnd:x}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(f&&s.addEventListener("blur",f),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Zle extends Tu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class ece extends Tu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return mu.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(s,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class y$ extends Tu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(mu.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s))e.setValue(c.id,{value:!1});e.setValue(s,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const f=u&&d.id===s;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class tce extends p${constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class nce extends Tu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");mu.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,s.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=u=>{const d=u?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=a(!1);const c=u=>{const d=u.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const d={value(f){o==null||o();const p=f.detail.value,y=new Set(Array.isArray(p)?p:[p]);for(const g of i.options)g.selected=y.has(g.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,y=f.detail.remove;p[y].selected=!1,i.remove(y),p.length>0&&Array.prototype.findIndex.call(p,S=>S.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:c(f)}),l=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(f){const{index:p,displayValue:y,exportValue:g}=f.detail.insert,S=i.children[p],w=document.createElement("option");w.textContent=y,w.value=g,S?S.before(w):i.append(w),e.setValue(t,{value:a(!0),items:c(f)}),l=a(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const y of p){const{displayValue:g,exportValue:S}=y,w=document.createElement("option");w.textContent=g,w.value=S,i.append(w)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(f)}),l=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const y of f.target.options)y.selected=p.has(y.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("input",u=>{var p;const d=a(!0),f=a(!1);e.setValue(t,{value:d}),u.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class yT extends xt{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:xt._hasPopupData(t)}),this.elements=s,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new sce({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${OP}${i}`).join(",")),this.container}}var gd,Kx,qx,yd,vd,ct,Lr,vc,dy,fy,wd,Or,ii,Fr,py,jr,my,wc,bc,bd,b0,gy,vT,Xx,v$,Qx,w$,Jx,b$,Zx,x$,xd,x0,_d,_0,yy,wT;class sce{constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d}){C(this,bd);C(this,gy);C(this,Xx);C(this,Qx);C(this,Jx);C(this,Zx);C(this,xd);C(this,_d);C(this,yy);C(this,gd,I(this,Jx,b$).bind(this));C(this,Kx,I(this,yy,wT).bind(this));C(this,qx,I(this,_d,_0).bind(this));C(this,yd,I(this,xd,x0).bind(this));C(this,vd,null);C(this,ct,null);C(this,Lr,null);C(this,vc,null);C(this,dy,null);C(this,fy,null);C(this,wd,null);C(this,Or,!1);C(this,ii,null);C(this,Fr,null);C(this,py,null);C(this,jr,null);C(this,my,null);C(this,wc,null);C(this,bc,!1);var f;T(this,ct,e),T(this,my,i),T(this,Lr,o),T(this,jr,a),T(this,fy,l),T(this,vd,t),T(this,py,c),T(this,wd,u),T(this,dy,s),T(this,vc,JS.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",h(this,yd)),p.addEventListener("mouseenter",h(this,qx)),p.addEventListener("mouseleave",h(this,Kx)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",h(this,gd));h(this,ct).hidden=!0,d&&I(this,xd,x0).call(this)}render(){if(h(this,ii))return;const e=T(this,ii,document.createElement("div"));if(e.className="popup",h(this,vd)){const r=e.style.outlineColor=se.makeHexColor(...h(this,vd));e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=h(this,my),e.append(t),h(this,vc)){const r=document.createElement("time");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:h(this,vc).valueOf()})),r.dateTime=h(this,vc).toISOString(),t.append(r)}const i=h(this,bd,b0);if(i)$P.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(h(this,Lr));e.append(r)}h(this,ct).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const a=i[r];s.append(document.createTextNode(a)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;h(this,wc)||T(this,wc,{contentsObj:h(this,Lr),richText:h(this,jr)}),e&&T(this,Fr,null),t&&(T(this,jr,I(this,Qx,w$).call(this,t)),T(this,Lr,null)),(s=h(this,ii))==null||s.remove(),T(this,ii,null)}resetEdited(){var e;h(this,wc)&&({contentsObj:bn(this,Lr)._,richText:bn(this,jr)._}=h(this,wc),T(this,wc,null),(e=h(this,ii))==null||e.remove(),T(this,ii,null),T(this,Fr,null))}forceHide(){T(this,bc,this.isVisible),h(this,bc)&&(h(this,ct).hidden=!0)}maybeShow(){h(this,bc)&&(h(this,ii)||I(this,_d,_0).call(this),T(this,bc,!1),h(this,ct).hidden=!1)}get isVisible(){return h(this,ct).hidden===!1}}gd=new WeakMap,Kx=new WeakMap,qx=new WeakMap,yd=new WeakMap,vd=new WeakMap,ct=new WeakMap,Lr=new WeakMap,vc=new WeakMap,dy=new WeakMap,fy=new WeakMap,wd=new WeakMap,Or=new WeakMap,ii=new WeakMap,Fr=new WeakMap,py=new WeakMap,jr=new WeakMap,my=new WeakMap,wc=new WeakMap,bc=new WeakMap,bd=new WeakSet,b0=function(){const e=h(this,jr),t=h(this,Lr);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&h(this,jr).html||null},gy=new WeakSet,vT=function(){var e,t,s;return((s=(t=(e=h(this,bd,b0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},Xx=new WeakSet,v$=function(){var e,t,s;return((s=(t=(e=h(this,bd,b0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},Qx=new WeakSet,w$=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:h(this,Xx,v$),fontSize:h(this,gy,vT)?`calc(${h(this,gy,vT)}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},Jx=new WeakSet,b$=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&h(this,Or))&&I(this,xd,x0).call(this)},Zx=new WeakSet,x$=function(){if(h(this,Fr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=h(this,fy);let o=!!h(this,wd),a=o?h(this,wd):h(this,py);for(const y of h(this,dy))if(!a||se.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const l=se.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),c=5,u=o?a[2]-a[0]+c:0,d=l[0]+u,f=l[1];T(this,Fr,[100*(d-i)/t,100*(f-r)/s]);const{style:p}=h(this,ct);p.left=`${h(this,Fr)[0]}%`,p.top=`${h(this,Fr)[1]}%`},xd=new WeakSet,x0=function(){T(this,Or,!h(this,Or)),h(this,Or)?(I(this,_d,_0).call(this),h(this,ct).addEventListener("click",h(this,yd)),h(this,ct).addEventListener("keydown",h(this,gd))):(I(this,yy,wT).call(this),h(this,ct).removeEventListener("click",h(this,yd)),h(this,ct).removeEventListener("keydown",h(this,gd)))},_d=new WeakSet,_0=function(){h(this,ii)||this.render(),this.isVisible?h(this,Or)&&h(this,ct).classList.add("focused"):(I(this,Zx,x$).call(this),h(this,ct).hidden=!1,h(this,ct).style.zIndex=parseInt(h(this,ct).style.zIndex)+1e3)},yy=new WeakSet,wT=function(){h(this,ct).classList.remove("focused"),!(h(this,Or)||!this.isVisible)&&(h(this,ct).hidden=!0,h(this,ct).style.zIndex=parseInt(h(this,ct).style.zIndex)-1e3)};class _$ extends xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=le.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var vy;class ice extends xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,vy,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=T(this,vy,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,vy)}addHighlightArea(){this.container.classList.add("highlightArea")}}vy=new WeakMap;var wy;class rce extends xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,wy,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,a=T(this,wy,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,wy)}addHighlightArea(){this.container.classList.add("highlightArea")}}wy=new WeakMap;var by;class oce extends xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,by,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,a=T(this,by,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",i/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,by)}addHighlightArea(){this.container.classList.add("highlightArea")}}by=new WeakMap;var xy;class S$ extends xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,xy,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r},width:o,height:a}=this;if(!s)return this.container;const l=this.svgFactory.create(o,a,!0);let c=[];for(let d=0,f=s.length;d<f;d+=2){const p=s[d]-t[0],y=t[3]-s[d+1];c.push(`${p},${y}`)}c=c.join(" ");const u=T(this,xy,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,xy)}addHighlightArea(){this.container.classList.add("highlightArea")}}xy=new WeakMap;class ace extends S${constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class lce extends xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var _y,xc,Sy,bT;class zP extends xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Sy);C(this,_y,null);C(this,xc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?le.HIGHLIGHT:le.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:a,width:l,height:c}=I(this,Sy,bT).call(this,s,t),u=this.svgFactory.create(l,c,!0),d=T(this,_y,this.svgFactory.createElement("svg:g"));u.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let f=0,p=i.length;f<p;f++){const y=this.svgFactory.createElement(this.svgElementName);h(this,xc).push(y),y.setAttribute("points",i[f].join(",")),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:i,rect:r}=t,o=h(this,_y);if(s>=0&&o.setAttribute("stroke-width",s||1),i)for(let a=0,l=h(this,xc).length;a<l;a++)h(this,xc)[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:l,height:c}=I(this,Sy,bT).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return h(this,xc)}addHighlightArea(){this.container.classList.add("highlightArea")}}_y=new WeakMap,xc=new WeakMap,Sy=new WeakSet,bT=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class E$ extends xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=le.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class cce extends xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class uce extends xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class hce extends xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class C$ extends xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=le.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ey,Cy,xT;class dce extends xt{constructor(t){var i;super(t,{isRenderable:!0});C(this,Cy);C(this,Ey,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",I(this,Cy,xT).bind(this)),T(this,Ey,i);const{isMac:r}=Yt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&I(this,Cy,xT).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return h(this,Ey)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ey=new WeakMap,Cy=new WeakSet,xT=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Ay,_c,ia,Ty,ky,_T,Iy,ST,Py;let WP=(Py=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:a}){C(this,ky);C(this,Iy);C(this,Ay,null);C(this,_c,null);C(this,ia,new Map);C(this,Ty,null);this.div=e,T(this,Ay,t),T(this,_c,s),T(this,Ty,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return h(this,ia).size>0}async render(e){var o;const{annotations:t}=e,s=this.div;Ya(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Xm,annotationStorage:e.annotationStorage||new jP,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===gt.POPUP;if(l){const d=i.get(a.id);if(!d)continue;r.elements=d}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const c=kL.create(r);if(!c.isRenderable)continue;if(!l&&a.popupRef){const d=i.get(a.popupRef);d?d.push(c):i.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),await I(this,ky,_T).call(this,u,a.id,r.elements),c._isEditable&&(h(this,ia).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}I(this,Iy,ST).call(this)}async addLinkAnnotations(e,t){const s={data:null,layer:this.div,linkService:t,svgFactory:new Xm,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=Py._defaultBorderStyle),s.data=i;const r=kL.create(s);if(!r.isRenderable)continue;const o=r.render();await I(this,ky,_T).call(this,o,i.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Ya(t,{rotation:e.rotation}),I(this,Iy,ST).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(h(this,ia).values())}getEditableAnnotation(e){return h(this,ia).get(e)}static get _defaultBorderStyle(){return _e(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Lu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Ay=new WeakMap,_c=new WeakMap,ia=new WeakMap,Ty=new WeakMap,ky=new WeakSet,_T=async function(e,t,s){var a,l;const i=e.firstChild||e,r=i.id=`${OP}${t}`,o=await((a=h(this,Ty))==null?void 0:a.getAriaAttributes(r));if(o)for(const[c,u]of o)i.setAttribute(c,u);s?s.at(-1).container.after(e):(this.div.append(e),(l=h(this,Ay))==null||l.moveElementInDOM(this.div,e,i,!1))},Iy=new WeakSet,ST=function(){var t;if(!h(this,_c))return;const e=this.div;for(const[s,i]of h(this,_c)){const r=e.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i);const a=h(this,ia).get(s);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,r.id,i),a._hasNoCanvas=!1):a.canvas=i)}h(this,_c).clear()},Py);const Dw=/\r\n?|\n/g;var ri,ss,Ry,Sc,is,e_,A$,t_,T$,n_,k$,Sd,S0,Ed,E0,Cd,C0,s_,I$,My,CT,i_,P$;const je=class je extends We{constructor(t){super({...t,name:"freeTextEditor"});C(this,e_);C(this,t_);C(this,n_);C(this,Sd);C(this,Cd);C(this,s_);C(this,i_);C(this,ri,void 0);C(this,ss,"");C(this,Ry,`${this.id}-editor`);C(this,Sc,null);C(this,is,void 0);T(this,ri,t.color||je._defaultColor||We._defaultLineColor),T(this,is,t.fontSize||je._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=je.prototype,s=o=>o.isEmpty(),i=Ka.TRANSLATE_SMALL,r=Ka.TRANSLATE_BIG;return _e(this,"_keyboardManager",new $v([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){We.initialize(t,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case Ce.FREETEXT_SIZE:je._defaultFontSize=s;break;case Ce.FREETEXT_COLOR:je._defaultColor=s;break}}updateParams(t,s){switch(t){case Ce.FREETEXT_SIZE:I(this,e_,A$).call(this,s);break;case Ce.FREETEXT_COLOR:I(this,t_,T$).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Ce.FREETEXT_SIZE,je._defaultFontSize],[Ce.FREETEXT_COLOR,je._defaultColor||We._defaultLineColor]]}get propertiesToUpdate(){return[[Ce.FREETEXT_SIZE,h(this,is)],[Ce.FREETEXT_COLOR,h(this,ri)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-je._internalPadding*t,-(je._internalPadding+h(this,is))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),T(this,Sc,new AbortController);const t=this._uiManager.combinedSignal(h(this,Sc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",h(this,Ry)),this._isDraggable=!0,(t=h(this,Sc))==null||t.abort(),T(this,Sc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=h(this,ss),s=T(this,ss,I(this,n_,k$).call(this).trimEnd());if(t===s)return;const i=r=>{if(T(this,ss,r),!r){this.remove();return}I(this,Cd,C0).call(this),this._uiManager.rebuild(this),I(this,Sd,S0).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),I(this,Sd,S0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){je._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",h(this,Ry)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${h(this,is)}px * var(--total-scale-factor))`,i.color=h(this,ri),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,d]=this.pageDimensions,[f,p]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=t+(a[0]-f)/u,g=s+this.height-(a[1]-p)/d;break;case 90:y=t+(a[0]-f)/u,g=s-(a[1]-p)/d,[l,c]=[c,-l];break;case 180:y=t-this.width+(a[0]-f)/u,g=s-(a[1]-p)/d,[l,c]=[-l,-c];break;case 270:y=t+(a[0]-f-this.height*d)/u,g=s+(a[1]-p-this.width*u)/d,[l,c]=[-c,l];break}this.setAt(y*r,g*o,l,c)}else this._moveAfterPaste(t,s);I(this,Cd,C0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,g,S;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=I(y=je,My,CT).call(y,s.getData("text")||"").replaceAll(Dw,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],d=[];if(l.nodeType===Node.TEXT_NODE){const w=l.parentElement;if(d.push(l.nodeValue.slice(c).replaceAll(Dw,"")),w!==this.editorDiv){let _=u;for(const v of this.editorDiv.childNodes){if(v===w){_=d;continue}_.push(I(g=je,Ed,E0).call(g,v))}}u.push(l.nodeValue.slice(0,c).replaceAll(Dw,""))}else if(l===this.editorDiv){let w=u,_=0;for(const v of this.editorDiv.childNodes)_++===c&&(w=d),w.push(I(S=je,Ed,E0).call(S,v))}T(this,ss,`${u.join(`
`)}${r}${d.join(`
`)}`),I(this,Cd,C0).call(this);const f=new Range;let p=Math.sumPrecise(u.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const _=w.nodeValue.length;if(p<=_){f.setStart(w,p),f.setEnd(w,p);break}p-=_}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,i){var a;let r=null;if(t instanceof _$){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:d,id:f,popupRef:p},textContent:y,textPosition:g,parent:{page:{pageNumber:S}}}=t;if(!y||y.length===0)return null;r=t={annotationType:le.FREETEXT,color:Array.from(c),fontSize:l,value:y.join(`
`),position:g,pageIndex:S-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(t,s,i);return T(o,is,t.fontSize),T(o,ri,se.makeHexColor(...t.color)),T(o,ss,I(a=je,My,CT).call(a,t.value)),o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=je._internalPadding*this.parentScale,i=this.getRect(s,s),r=We._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:h(this,ri)),o={annotationType:le.FREETEXT,color:r,fontSize:h(this,is),value:I(this,s_,I$).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!I(this,i_,P$).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${h(this,is)}px * var(--total-scale-factor))`,i.color=h(this,ri),s.replaceChildren();for(const o of h(this,ss).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const r=je._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:h(this,ss)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ri=new WeakMap,ss=new WeakMap,Ry=new WeakMap,Sc=new WeakMap,is=new WeakMap,e_=new WeakSet,A$=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-h(this,is))*this.parentScale),T(this,is,r),I(this,Sd,S0).call(this)},i=h(this,is);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},t_=new WeakSet,T$=function(t){const s=r=>{T(this,ri,this.editorDiv.style.color=r)},i=h(this,ri);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},n_=new WeakSet,k$=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(I(i=je,Ed,E0).call(i,r)),s=r);return t.join(`
`)},Sd=new WeakSet,S0=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},Ed=new WeakSet,E0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Dw,"")},Cd=new WeakSet,C0=function(){if(this.editorDiv.replaceChildren(),!!h(this,ss))for(const t of h(this,ss).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},s_=new WeakSet,I$=function(){return h(this,ss).replaceAll(" "," ")},My=new WeakSet,CT=function(t){return t.replaceAll(" "," ")},i_=new WeakSet,P$=function(t){const{value:s,fontSize:i,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((a,l)=>a!==r[l])||t.pageIndex!==o},C(je,Ed),C(je,My),V(je,"_freeTextDefaultContent",""),V(je,"_internalPadding",0),V(je,"_defaultColor",null),V(je,"_defaultFontSize",10),V(je,"_type","freetext"),V(je,"_editorType",le.FREETEXT);let ET=je;class q{toSVGPath(){Fe("Abstract method `toSVGPath` must be implemented.")}get box(){Fe("Abstract getter `box` must be implemented.")}serialize(e,t){Fe("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*i,o[a+1]=s+e[a+1]*r;return o}static _rescaleAndSwap(e,t,s,i,r,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*i,o[a+1]=s+e[a]*r;return o}static _translate(e,t,s,i){i||(i=new Float32Array(e.length));for(let r=0,o=e.length;r<o;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,o){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}V(q,"PRECISION",1e-4);var rs,oi,Ad,Td,Vi,ve,Ec,Cc,Ny,Dy,kd,Id,ra,Ly,r_,o_,Ac,Mp,a_,R$,l_,M$,c_,N$,u_,D$,h_,L$,d_,O$;const mr=class mr{constructor({x:e,y:t},s,i,r,o,a=0){C(this,Ac);C(this,a_);C(this,l_);C(this,c_);C(this,u_);C(this,h_);C(this,d_);C(this,rs,void 0);C(this,oi,[]);C(this,Ad,void 0);C(this,Td,void 0);C(this,Vi,[]);C(this,ve,new Float32Array(18));C(this,Ec,void 0);C(this,Cc,void 0);C(this,Ny,void 0);C(this,Dy,void 0);C(this,kd,void 0);C(this,Id,void 0);C(this,ra,[]);T(this,rs,s),T(this,Id,r*i),T(this,Td,o),h(this,ve).set([NaN,NaN,NaN,NaN,e,t],6),T(this,Ad,a),T(this,Dy,h(mr,Ly)*i),T(this,Ny,h(mr,o_)*i),T(this,kd,i),h(this,ra).push(e,t)}isEmpty(){return isNaN(h(this,ve)[8])}add({x:e,y:t}){var R;T(this,Ec,e),T(this,Cc,t);const[s,i,r,o]=h(this,rs);let[a,l,c,u]=h(this,ve).subarray(8,12);const d=e-c,f=t-u,p=Math.hypot(d,f);if(p<h(this,Ny))return!1;const y=p-h(this,Dy),g=y/p,S=g*d,w=g*f;let _=a,v=l;a=c,l=u,c+=S,u+=w,(R=h(this,ra))==null||R.push(e,t);const m=-w/y,x=S/y,A=m*h(this,Id),k=x*h(this,Id);return h(this,ve).set(h(this,ve).subarray(2,8),0),h(this,ve).set([c+A,u+k],4),h(this,ve).set(h(this,ve).subarray(14,18),12),h(this,ve).set([c-A,u-k],16),isNaN(h(this,ve)[6])?(h(this,Vi).length===0&&(h(this,ve).set([a+A,l+k],2),h(this,Vi).push(NaN,NaN,NaN,NaN,(a+A-s)/r,(l+k-i)/o),h(this,ve).set([a-A,l-k],14),h(this,oi).push(NaN,NaN,NaN,NaN,(a-A-s)/r,(l-k-i)/o)),h(this,ve).set([_,v,a,l,c,u],6),!this.isEmpty()):(h(this,ve).set([_,v,a,l,c,u],6),Math.abs(Math.atan2(v-l,_-a)-Math.atan2(w,S))<Math.PI/2?([a,l,c,u]=h(this,ve).subarray(2,6),h(this,Vi).push(NaN,NaN,NaN,NaN,((a+c)/2-s)/r,((l+u)/2-i)/o),[a,l,_,v]=h(this,ve).subarray(14,18),h(this,oi).push(NaN,NaN,NaN,NaN,((_+a)/2-s)/r,((v+l)/2-i)/o),!0):([_,v,a,l,c,u]=h(this,ve).subarray(0,6),h(this,Vi).push(((_+5*a)/6-s)/r,((v+5*l)/6-i)/o,((5*a+c)/6-s)/r,((5*l+u)/6-i)/o,((a+c)/2-s)/r,((l+u)/2-i)/o),[c,u,a,l,_,v]=h(this,ve).subarray(12,18),h(this,oi).push(((_+5*a)/6-s)/r,((v+5*l)/6-i)/o,((5*a+c)/6-s)/r,((5*l+u)/6-i)/o,((a+c)/2-s)/r,((l+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=h(this,Vi),t=h(this,oi);if(isNaN(h(this,ve)[6])&&!this.isEmpty())return I(this,a_,R$).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);I(this,c_,N$).call(this,s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return I(this,l_,M$).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,i,r,o){return new F$(e,t,s,i,r,o)}getOutlines(){var d;const e=h(this,Vi),t=h(this,oi),s=h(this,ve),[i,r,o,a]=h(this,rs),l=new Float32Array((((d=h(this,ra))==null?void 0:d.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(h(this,ra)[f]-i)/o,l[f+1]=(h(this,ra)[f+1]-r)/a;if(l[l.length-2]=(h(this,Ec)-i)/o,l[l.length-1]=(h(this,Cc)-r)/a,isNaN(s[6])&&!this.isEmpty())return I(this,u_,D$).call(this,l);const c=new Float32Array(h(this,Vi).length+24+h(this,oi).length);let u=e.length;for(let f=0;f<u;f+=2){if(isNaN(e[f])){c[f]=c[f+1]=NaN;continue}c[f]=e[f],c[f+1]=e[f+1]}u=I(this,d_,O$).call(this,c,u);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=t[f+p],c[u+1]=t[f+p+1],u+=2}return I(this,h_,L$).call(this,c,u),this.newFreeDrawOutline(c,l,h(this,rs),h(this,kd),h(this,Ad),h(this,Td))}};rs=new WeakMap,oi=new WeakMap,Ad=new WeakMap,Td=new WeakMap,Vi=new WeakMap,ve=new WeakMap,Ec=new WeakMap,Cc=new WeakMap,Ny=new WeakMap,Dy=new WeakMap,kd=new WeakMap,Id=new WeakMap,ra=new WeakMap,Ly=new WeakMap,r_=new WeakMap,o_=new WeakMap,Ac=new WeakSet,Mp=function(){const e=h(this,ve).subarray(4,6),t=h(this,ve).subarray(16,18),[s,i,r,o]=h(this,rs);return[(h(this,Ec)+(e[0]-t[0])/2-s)/r,(h(this,Cc)+(e[1]-t[1])/2-i)/o,(h(this,Ec)+(t[0]-e[0])/2-s)/r,(h(this,Cc)+(t[1]-e[1])/2-i)/o]},a_=new WeakSet,R$=function(){const[e,t,s,i]=h(this,rs),[r,o,a,l]=I(this,Ac,Mp).call(this);return`M${(h(this,ve)[2]-e)/s} ${(h(this,ve)[3]-t)/i} L${(h(this,ve)[4]-e)/s} ${(h(this,ve)[5]-t)/i} L${r} ${o} L${a} ${l} L${(h(this,ve)[16]-e)/s} ${(h(this,ve)[17]-t)/i} L${(h(this,ve)[14]-e)/s} ${(h(this,ve)[15]-t)/i} Z`},l_=new WeakSet,M$=function(e){const t=h(this,oi);e.push(`L${t[4]} ${t[5]} Z`)},c_=new WeakSet,N$=function(e){const[t,s,i,r]=h(this,rs),o=h(this,ve).subarray(4,6),a=h(this,ve).subarray(16,18),[l,c,u,d]=I(this,Ac,Mp).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-s)/r} L${l} ${c} L${u} ${d} L${(a[0]-t)/i} ${(a[1]-s)/r}`)},u_=new WeakSet,D$=function(e){const t=h(this,ve),[s,i,r,o]=h(this,rs),[a,l,c,u]=I(this,Ac,Mp).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/o],0),this.newFreeDrawOutline(d,e,h(this,rs),h(this,kd),h(this,Ad),h(this,Td))},h_=new WeakSet,L$=function(e,t){const s=h(this,oi);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},d_=new WeakSet,O$=function(e,t){const s=h(this,ve).subarray(4,6),i=h(this,ve).subarray(16,18),[r,o,a,l]=h(this,rs),[c,u,d,f]=I(this,Ac,Mp).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l],t),t+=24},C(mr,Ly,8),C(mr,r_,2),C(mr,o_,h(mr,Ly)+h(mr,r_));let Gb=mr;var Pd,Tc,Br,Oy,os,Fy,vt,f_,j$;class F$ extends q{constructor(t,s,i,r,o,a){super();C(this,f_);C(this,Pd,void 0);C(this,Tc,new Float32Array(4));C(this,Br,void 0);C(this,Oy,void 0);C(this,os,void 0);C(this,Fy,void 0);C(this,vt,void 0);T(this,vt,t),T(this,os,s),T(this,Pd,i),T(this,Fy,r),T(this,Br,o),T(this,Oy,a),this.lastPoint=[NaN,NaN],I(this,f_,j$).call(this,a);const[l,c,u,d]=h(this,Tc);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-l)/u,t[f+1]=(t[f+1]-c)/d;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-l)/u,s[f+1]=(s[f+1]-c)/d}toSVGPath(){const t=[`M${h(this,vt)[4]} ${h(this,vt)[5]}`];for(let s=6,i=h(this,vt).length;s<i;s+=6){if(isNaN(h(this,vt)[s])){t.push(`L${h(this,vt)[s+4]} ${h(this,vt)[s+5]}`);continue}t.push(`C${h(this,vt)[s]} ${h(this,vt)[s+1]} ${h(this,vt)[s+2]} ${h(this,vt)[s+3]} ${h(this,vt)[s+4]} ${h(this,vt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],o){const a=i-t,l=r-s;let c,u;switch(o){case 0:c=q._rescale(h(this,vt),t,r,a,-l),u=q._rescale(h(this,os),t,r,a,-l);break;case 90:c=q._rescaleAndSwap(h(this,vt),t,s,a,l),u=q._rescaleAndSwap(h(this,os),t,s,a,l);break;case 180:c=q._rescale(h(this,vt),i,s,-a,l),u=q._rescale(h(this,os),i,s,-a,l);break;case 270:c=q._rescaleAndSwap(h(this,vt),i,r,-a,-l),u=q._rescaleAndSwap(h(this,os),i,r,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return h(this,Tc)}newOutliner(t,s,i,r,o,a=0){return new Gb(t,s,i,r,o,a)}getNewOutline(t,s){const[i,r,o,a]=h(this,Tc),[l,c,u,d]=h(this,Pd),f=o*u,p=a*d,y=i*u+l,g=r*d+c,S=this.newOutliner({x:h(this,os)[0]*f+y,y:h(this,os)[1]*p+g},h(this,Pd),h(this,Fy),t,h(this,Oy),s??h(this,Br));for(let w=2;w<h(this,os).length;w+=2)S.add({x:h(this,os)[w]*f+y,y:h(this,os)[w+1]*p+g});return S.getOutlines()}}Pd=new WeakMap,Tc=new WeakMap,Br=new WeakMap,Oy=new WeakMap,os=new WeakMap,Fy=new WeakMap,vt=new WeakMap,f_=new WeakSet,j$=function(t){const s=h(this,vt);let i=s[4],r=s[5];const o=[i,r,i,r];let a=i,l=r;const c=t?Math.max:Math.min;for(let d=6,f=s.length;d<f;d+=6){const p=s[d+4],y=s[d+5];if(isNaN(s[d]))se.pointBoundingBox(p,y,o),l<y?(a=p,l=y):l===y&&(a=c(a,p));else{const g=[1/0,1/0,-1/0,-1/0];se.bezierBoundingBox(i,r,...s.slice(d,d+6),g),se.rectBoundingBox(...g,o),l<g[3]?(a=g[2],l=g[3]):l===g[3]&&(a=c(a,g[2]))}i=p,r=y}const u=h(this,Tc);u[0]=o[0]-h(this,Br),u[1]=o[1]-h(this,Br),u[2]=o[2]-o[0]+2*h(this,Br),u[3]=o[3]-o[1]+2*h(this,Br),this.lastPoint=[a,l]};var jy,By,oa,ai,p_,B$,Rd,A0,m_,H$,g_,V$,Hy,TT;class AT{constructor(e,t=0,s=0,i=!0){C(this,p_);C(this,Rd);C(this,m_);C(this,g_);C(this,Hy);C(this,jy,void 0);C(this,By,void 0);C(this,oa,[]);C(this,ai,[]);const r=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:y,y:g,width:S,height:w}of e){const _=Math.floor((y-t)/a)*a,v=Math.ceil((y+S+t)/a)*a,m=Math.floor((g-t)/a)*a,x=Math.ceil((g+w+t)/a)*a,A=[_,m,x,!0],k=[v,m,x,!1];h(this,oa).push(A,k),se.rectBoundingBox(_,m,v,x,r)}const l=r[2]-r[0]+2*s,c=r[3]-r[1]+2*s,u=r[0]-s,d=r[1]-s,f=h(this,oa).at(i?-1:-2),p=[f[0],f[2]];for(const y of h(this,oa)){const[g,S,w]=y;y[0]=(g-u)/l,y[1]=(S-d)/c,y[2]=(w-d)/c}T(this,jy,new Float32Array([u,d,l,c])),T(this,By,p)}getOutlines(){h(this,oa).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of h(this,oa))t[3]?(e.push(...I(this,Hy,TT).call(this,t)),I(this,m_,H$).call(this,t)):(I(this,g_,V$).call(this,t),e.push(...I(this,Hy,TT).call(this,t)));return I(this,p_,B$).call(this,e)}}jy=new WeakMap,By=new WeakMap,oa=new WeakMap,ai=new WeakMap,p_=new WeakSet,B$=function(e){const t=[],s=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),s.add(l),s.add(c)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[a,l,c,u,d]=o;s.delete(o);let f=a,p=l;for(r=[a,c],i.push(r);;){let y;if(s.has(u))y=u;else if(s.has(d))y=d;else break;s.delete(y),[a,l,c,u,d]=y,f!==a&&(r.push(f,p,a,p===l?l:c),f=a),p=p===l?c:l}r.push(f,p)}return new fce(i,h(this,jy),h(this,By))},Rd=new WeakSet,A0=function(e){const t=h(this,ai);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,o=t[r][0];if(o===e)return r;o<e?s=r+1:i=r-1}return i+1},m_=new WeakSet,H$=function([,e,t]){const s=I(this,Rd,A0).call(this,e);h(this,ai).splice(s,0,[e,t])},g_=new WeakSet,V$=function([,e,t]){const s=I(this,Rd,A0).call(this,e);for(let i=s;i<h(this,ai).length;i++){const[r,o]=h(this,ai)[i];if(r!==e)break;if(r===e&&o===t){h(this,ai).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=h(this,ai)[i];if(r!==e)break;if(r===e&&o===t){h(this,ai).splice(i,1);return}}},Hy=new WeakSet,TT=function(e){const[t,s,i]=e,r=[[t,s,i]],o=I(this,Rd,A0).call(this,i);for(let a=0;a<o;a++){const[l,c]=h(this,ai)[a];for(let u=0,d=r.length;u<d;u++){const[,f,p]=r[u];if(!(c<=f||p<=l)){if(f>=l){if(p>c)r[u][1]=c;else{if(d===1)return[];r.splice(u,1),u--,d--}continue}r[u][2]=l,p>c&&r.push([t,c,p])}}}return r};var Vy,Md;class fce extends q{constructor(t,s,i){super();C(this,Vy,void 0);C(this,Md,void 0);T(this,Md,t),T(this,Vy,s),this.lastPoint=i}toSVGPath(){const t=[];for(const s of h(this,Md)){let[i,r]=s;t.push(`M${i} ${r}`);for(let o=2;o<s.length;o+=2){const a=s[o],l=s[o+1];a===i?(t.push(`V${l}`),r=l):l===r&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],o){const a=[],l=i-t,c=r-s;for(const u of h(this,Md)){const d=new Array(u.length);for(let f=0;f<u.length;f+=2)d[f]=t+u[f]*l,d[f+1]=r-u[f+1]*c;a.push(d)}return a}get box(){return h(this,Vy)}get classNamesForOutlining(){return["highlightOutline"]}}Vy=new WeakMap,Md=new WeakMap;class kT extends Gb{newFreeDrawOutline(e,t,s,i,r,o){return new pce(e,t,s,i,r,o)}}class pce extends F${newOutliner(e,t,s,i,r,o=0){return new kT(e,t,s,i,r,o)}}var as,kc,Nd,It,Uy,Dd,Hr,$y,aa,li,Ld,zy,Wy,IT,Gy,PT,Yy,RT,Vr,yl,y_,U$,Ui,Ao;const On=class On{constructor({editor:e=null,uiManager:t=null}){C(this,Wy);C(this,Gy);C(this,Yy);C(this,Vr);C(this,y_);C(this,Ui);C(this,as,null);C(this,kc,null);C(this,Nd,void 0);C(this,It,null);C(this,Uy,!1);C(this,Dd,!1);C(this,Hr,null);C(this,$y,void 0);C(this,aa,null);C(this,li,null);C(this,Ld,void 0);var s,i;e?(T(this,Dd,!1),T(this,Ld,Ce.HIGHLIGHT_COLOR),T(this,Hr,e)):(T(this,Dd,!0),T(this,Ld,Ce.HIGHLIGHT_DEFAULT_COLOR)),T(this,li,(e==null?void 0:e._uiManager)||t),T(this,$y,h(this,li)._eventBus),T(this,Nd,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((i=h(this,li))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),h(On,zy)||T(On,zy,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return _e(this,"_keyboardManager",new $v([[["Escape","mac+Escape"],On.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],On.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],On.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],On.prototype._moveToPrevious],[["Home","mac+Home"],On.prototype._moveToBeginning],[["End","mac+End"],On.prototype._moveToEnd]]))}renderButton(){const e=T(this,as,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",h(this,Hr)&&(e.ariaControls=`${h(this,Hr).id}_colorpicker_dropdown`);const t=h(this,li)._signal;e.addEventListener("click",I(this,Vr,yl).bind(this),{signal:t}),e.addEventListener("keydown",I(this,Yy,RT).bind(this),{signal:t});const s=T(this,kc,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=h(this,Nd),e.append(s),e}renderMainDropdown(){const e=T(this,It,I(this,Wy,IT).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===h(this,as)){I(this,Vr,yl).call(this,e);return}const t=e.target.getAttribute("data-color");t&&I(this,Gy,PT).call(this,t,e)}_moveToNext(e){var t,s;if(!h(this,Ui,Ao)){I(this,Vr,yl).call(this,e);return}if(e.target===h(this,as)){(t=h(this,It).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=h(this,It))==null?void 0:t.firstChild)||e.target===h(this,as)){h(this,Ui,Ao)&&this._hideDropdownFromKeyboard();return}h(this,Ui,Ao)||I(this,Vr,yl).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!h(this,Ui,Ao)){I(this,Vr,yl).call(this,e);return}(t=h(this,It).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!h(this,Ui,Ao)){I(this,Vr,yl).call(this,e);return}(t=h(this,It).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=h(this,It))==null||e.classList.add("hidden"),h(this,as).ariaExpanded="false",(t=h(this,aa))==null||t.abort(),T(this,aa,null)}_hideDropdownFromKeyboard(){var e;if(!h(this,Dd)){if(!h(this,Ui,Ao)){(e=h(this,Hr))==null||e.unselect();return}this.hideDropdown(),h(this,as).focus({preventScroll:!0,focusVisible:h(this,Uy)})}}updateColor(e){if(h(this,kc)&&(h(this,kc).style.backgroundColor=e),!h(this,It))return;const t=h(this,li).highlightColors.values();for(const s of h(this,It).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=h(this,as))==null||e.remove(),T(this,as,null),T(this,kc,null),(t=h(this,It))==null||t.remove(),T(this,It,null)}};as=new WeakMap,kc=new WeakMap,Nd=new WeakMap,It=new WeakMap,Uy=new WeakMap,Dd=new WeakMap,Hr=new WeakMap,$y=new WeakMap,aa=new WeakMap,li=new WeakMap,Ld=new WeakMap,zy=new WeakMap,Wy=new WeakSet,IT=function(){const e=document.createElement("div"),t=h(this,li)._signal;e.addEventListener("contextmenu",Ys,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),h(this,Hr)&&(e.id=`${h(this,Hr).id}_colorpicker_dropdown`);for(const[s,i]of h(this,li).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",h(On,zy)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.ariaSelected=i===h(this,Nd),r.addEventListener("click",I(this,Gy,PT).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",I(this,Yy,RT).bind(this),{signal:t}),e},Gy=new WeakSet,PT=function(e,t){t.stopPropagation(),h(this,$y).dispatch("switchannotationeditorparams",{source:this,type:h(this,Ld),value:e})},Yy=new WeakSet,RT=function(e){On._keyboardManager.exec(this,e)},Vr=new WeakSet,yl=function(e){if(h(this,Ui,Ao)){this.hideDropdown();return}if(T(this,Uy,e.detail===0),h(this,aa)||(T(this,aa,new AbortController),window.addEventListener("pointerdown",I(this,y_,U$).bind(this),{signal:h(this,li).combinedSignal(h(this,aa))})),h(this,as).ariaExpanded="true",h(this,It)){h(this,It).classList.remove("hidden");return}const t=T(this,It,I(this,Wy,IT).call(this));h(this,as).append(t)},y_=new WeakSet,U$=function(e){var t;(t=h(this,It))!=null&&t.contains(e.target)||this.hideDropdown()},Ui=new WeakSet,Ao=function(){return h(this,It)&&!h(this,It).classList.contains("hidden")},C(On,zy,null);let Qm=On;var Od,Ky,Ur,Ic,qy,Bn,Xy,Qy,Pc,Ds,ls,Jt,Fd,$r,fn,jd,Ls,Jy,Zy,MT,Bd,T0,v_,$$,w_,z$,b_,W$,ev,NT,zr,vl,la,Hu,x_,G$,Hd,k0,Rc,Np,__,Y$,S_,K$,E_,q$,C_,X$,A_,Q$;const Ie=class Ie extends We{constructor(t){super({...t,name:"highlightEditor"});C(this,Zy);C(this,Bd);C(this,v_);C(this,w_);C(this,b_);C(this,ev);C(this,zr);C(this,x_);C(this,Hd);C(this,Rc);C(this,__);C(this,S_);C(this,A_);C(this,Od,null);C(this,Ky,0);C(this,Ur,void 0);C(this,Ic,null);C(this,qy,null);C(this,Bn,null);C(this,Xy,null);C(this,Qy,0);C(this,Pc,null);C(this,Ds,null);C(this,ls,null);C(this,Jt,!1);C(this,Fd,null);C(this,$r,void 0);C(this,fn,null);C(this,jd,"");C(this,Ls,void 0);C(this,Jy,"");this.color=t.color||Ie._defaultColor,T(this,Ls,t.thickness||Ie._defaultThickness),T(this,$r,t.opacity||Ie._defaultOpacity),T(this,Ur,t.boxes||null),T(this,Jy,t.methodOfCreation||""),T(this,jd,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(T(this,Jt,!0),I(this,Bd,T0).call(this,t),I(this,zr,vl).call(this)):h(this,Ur)&&(T(this,Od,t.anchorNode),T(this,Ky,t.anchorOffset),T(this,Xy,t.focusNode),T(this,Qy,t.focusOffset),I(this,Zy,MT).call(this),I(this,zr,vl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ie.prototype;return _e(this,"_keyboardManager",new $v([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:h(this,Jt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:h(this,Ls),methodOfCreation:h(this,Jy)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;We.initialize(t,s),Ie._defaultColor||(Ie._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case Ce.HIGHLIGHT_DEFAULT_COLOR:Ie._defaultColor=s;break;case Ce.HIGHLIGHT_THICKNESS:Ie._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return h(this,Fd)}updateParams(t,s){switch(t){case Ce.HIGHLIGHT_COLOR:I(this,v_,$$).call(this,s);break;case Ce.HIGHLIGHT_THICKNESS:I(this,w_,z$).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Ce.HIGHLIGHT_DEFAULT_COLOR,Ie._defaultColor],[Ce.HIGHLIGHT_THICKNESS,Ie._defaultThickness]]}get propertiesToUpdate(){return[[Ce.HIGHLIGHT_COLOR,this.color||Ie._defaultColor],[Ce.HIGHLIGHT_THICKNESS,h(this,Ls)||Ie._defaultThickness],[Ce.HIGHLIGHT_FREE,h(this,Jt)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",T(this,qy,new Qm({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(I(this,Rc,Np).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,I(this,Rc,Np).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){I(this,ev,NT).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,zr,vl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?I(this,ev,NT).call(this):t&&(I(this,zr,vl).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,o,a;const{drawLayer:s}=this.parent;let i;h(this,Jt)?(t=(t-this.rotation+360)%360,i=I(r=Ie,la,Hu).call(r,h(this,Ds).box,t)):i=I(o=Ie,la,Hu).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(h(this,ls),{bbox:i,root:{"data-main-rotation":t}}),s.updateProperties(h(this,fn),{bbox:I(a=Ie,la,Hu).call(a,h(this,Bn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();h(this,jd)&&(t.setAttribute("aria-label",h(this,jd)),t.setAttribute("role","mark")),h(this,Jt)?t.classList.add("free"):this.div.addEventListener("keydown",I(this,x_,G$).bind(this),{signal:this._uiManager._signal});const s=T(this,Pc,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=h(this,Ic);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),gU(this,h(this,Pc),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(h(this,fn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(h(this,fn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:I(this,Hd,k0).call(this,!0);break;case 1:case 3:I(this,Hd,k0).call(this,!1);break}}select(){var t;super.select(),h(this,fn)&&((t=this.parent)==null||t.drawLayer.updateProperties(h(this,fn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),h(this,fn)&&((t=this.parent)==null||t.drawLayer.updateProperties(h(this,fn),{rootClass:{selected:!1}}),h(this,Jt)||I(this,Hd,k0).call(this,!1))}get _mustFixPosition(){return!h(this,Jt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(h(this,ls),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(h(this,fn),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:i,x:r,y:o}){const{x:a,y:l,width:c,height:u}=i.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=y=>{d.abort(),I(this,C_,X$).call(this,t,y)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",wt,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Ys,{signal:f}),i.addEventListener("pointermove",I(this,E_,q$).bind(this,t),{signal:f}),this._freeHighlight=new kT({x:r,y:o},[a,l,c,u],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,i){var g,S,w,_;let r=null;if(t instanceof E$){const{data:{quadPoints:v,rect:m,rotation:x,id:A,color:k,opacity:P,popupRef:R},parent:{page:{pageNumber:M}}}=t;r=t={annotationType:le.HIGHLIGHT,color:Array.from(k),opacity:P,quadPoints:v,boxes:null,pageIndex:M-1,rect:m.slice(0),rotation:x,annotationElementId:A,id:A,deleted:!1,popupRef:R}}else if(t instanceof zP){const{data:{inkLists:v,rect:m,rotation:x,id:A,color:k,borderStyle:{rawWidth:P},popupRef:R},parent:{page:{pageNumber:M}}}=t;r=t={annotationType:le.HIGHLIGHT,color:Array.from(k),thickness:P,inkLists:v,boxes:null,pageIndex:M-1,rect:m.slice(0),rotation:x,annotationElementId:A,id:A,deleted:!1,popupRef:R}}const{color:o,quadPoints:a,inkLists:l,opacity:c}=t,u=await super.deserialize(t,s,i);u.color=se.makeHexColor(...o),T(u,$r,c||1),l&&T(u,Ls,t.thickness),u._initialData=r;const[d,f]=u.pageDimensions,[p,y]=u.pageTranslation;if(a){const v=T(u,Ur,[]);for(let m=0;m<a.length;m+=8)v.push({x:(a[m]-p)/d,y:1-(a[m+1]-y)/f,width:(a[m+2]-a[m])/d,height:(a[m+1]-a[m+5])/f});I(g=u,Zy,MT).call(g),I(S=u,zr,vl).call(S),u.rotate(u.rotation)}else if(l){T(u,Jt,!0);const v=l[0],m={x:v[0]-p,y:f-(v[1]-y)},x=new kT(m,[0,0,d,f],1,h(u,Ls)/2,!0,.001);for(let P=0,R=v.length;P<R;P+=2)m.x=v[P]-p,m.y=f-(v[P+1]-y),x.add(m);const{id:A,clipPathId:k}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);I(w=u,Bd,T0).call(w,{highlightOutlines:x.getOutlines(),highlightId:A,clipPathId:k}),I(_=u,zr,vl).call(_),u.rotate(u.parentRotation)}return u}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=We._colorManager.convert(this.color),r={annotationType:le.HIGHLIGHT,color:i,opacity:h(this,$r),thickness:h(this,Ls),quadPoints:I(this,__,Y$).call(this),outlines:I(this,S_,K$).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:I(this,Rc,Np).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!I(this,A_,Q$).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Od=new WeakMap,Ky=new WeakMap,Ur=new WeakMap,Ic=new WeakMap,qy=new WeakMap,Bn=new WeakMap,Xy=new WeakMap,Qy=new WeakMap,Pc=new WeakMap,Ds=new WeakMap,ls=new WeakMap,Jt=new WeakMap,Fd=new WeakMap,$r=new WeakMap,fn=new WeakMap,jd=new WeakMap,Ls=new WeakMap,Jy=new WeakMap,Zy=new WeakSet,MT=function(){const t=new AT(h(this,Ur),.001);T(this,Ds,t.getOutlines()),[this.x,this.y,this.width,this.height]=h(this,Ds).box;const s=new AT(h(this,Ur),.0025,.001,this._uiManager.direction==="ltr");T(this,Bn,s.getOutlines());const{lastPoint:i}=h(this,Bn);T(this,Fd,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Bd=new WeakSet,T0=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var d,f;T(this,Ds,t);const r=1.5;if(T(this,Bn,t.getNewOutline(h(this,Ls)/2+r,.0025)),s>=0)T(this,ls,s),T(this,Ic,i),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),T(this,fn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:h(this,Bn).box,path:{d:h(this,Bn).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(h(this,ls),{bbox:I(d=Ie,la,Hu).call(d,h(this,Ds).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(h(this,fn),{bbox:I(f=Ie,la,Hu).call(f,h(this,Bn).box,p),path:{d:h(this,Bn).toSVGPath()}})}const[o,a,l,c]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[p,y]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*y/p,this.height=c*p/y;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[p,y]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*y/p,this.height=c*p/y;break}}const{lastPoint:u}=h(this,Bn);T(this,Fd,[(u[0]-o)/l,(u[1]-a)/c])},v_=new WeakSet,$$=function(t){const s=(o,a)=>{var l,c;this.color=o,T(this,$r,a),(l=this.parent)==null||l.drawLayer.updateProperties(h(this,ls),{root:{fill:o,"fill-opacity":a}}),(c=h(this,qy))==null||c.updateColor(o)},i=this.color,r=h(this,$r);this.addCommands({cmd:s.bind(this,t,Ie._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},w_=new WeakSet,z$=function(t){const s=h(this,Ls),i=r=>{T(this,Ls,r),I(this,b_,W$).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},b_=new WeakSet,W$=function(t){if(!h(this,Jt))return;I(this,Bd,T0).call(this,{highlightOutlines:h(this,Ds).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},ev=new WeakSet,NT=function(){h(this,ls)===null||!this.parent||(this.parent.drawLayer.remove(h(this,ls)),T(this,ls,null),this.parent.drawLayer.remove(h(this,fn)),T(this,fn,null))},zr=new WeakSet,vl=function(t=this.parent){h(this,ls)===null&&({id:bn(this,ls)._,clipPathId:bn(this,Ic)._}=t.drawLayer.draw({bbox:h(this,Ds).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":h(this,$r)},rootClass:{highlight:!0,free:h(this,Jt)},path:{d:h(this,Ds).toSVGPath()}},!1,!0),T(this,fn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:h(this,Jt)},bbox:h(this,Bn).box,path:{d:h(this,Bn).toSVGPath()}},h(this,Jt))),h(this,Pc)&&(h(this,Pc).style.clipPath=h(this,Ic)))},la=new WeakSet,Hu=function([t,s,i,r],o){switch(o){case 90:return[1-s-r,t,r,i];case 180:return[1-t-i,1-s-r,i,r];case 270:return[s,1-t-i,r,i]}return[t,s,i,r]},x_=new WeakSet,G$=function(t){Ie._keyboardManager.exec(this,t)},Hd=new WeakSet,k0=function(t){if(!h(this,Od))return;const s=window.getSelection();t?s.setPosition(h(this,Od),h(this,Ky)):s.setPosition(h(this,Xy),h(this,Qy))},Rc=new WeakSet,Np=function(){return h(this,Jt)?this.rotation:0},__=new WeakSet,Y$=function(){if(h(this,Jt))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,o=h(this,Ur),a=new Float32Array(o.length*8);let l=0;for(const{x:c,y:u,width:d,height:f}of o){const p=c*t+i,y=(1-u)*s+r;a[l]=a[l+4]=p,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=p+d*t,a[l+5]=a[l+7]=y-f*s,l+=8}return a},S_=new WeakSet,K$=function(t){return h(this,Ds).serialize(t,I(this,Rc,Np).call(this))},E_=new WeakSet,q$=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},C_=new WeakSet,X$=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},A_=new WeakSet,Q$=function(t){const{color:s}=this._initialData;return t.color.some((i,r)=>i!==s[r])},C(Ie,la),C(Ie,E_),C(Ie,C_),V(Ie,"_defaultColor",null),V(Ie,"_defaultOpacity",1),V(Ie,"_defaultThickness",12),V(Ie,"_type","highlight"),V(Ie,"_editorType",le.HIGHLIGHT),V(Ie,"_freeHighlightId",-1),V(Ie,"_freeHighlight",null),V(Ie,"_freeHighlightClipId","");let Yb=Ie;var Mc;class J${constructor(){C(this,Mc,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){h(this,Mc)[e]=t}toSVGProperties(){const e=h(this,Mc);return T(this,Mc,Object.create(null)),{root:e}}reset(){T(this,Mc,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Fe("Not implemented")}}Mc=new WeakMap;var cs,Vd,Ot,Nc,Dc,ca,ua,ha,Lc,tv,DT,nv,LT,sv,OT,Oc,Dp,T_,Z$,Ud,I0,Fc,Lp,da,Vu;const J=class J extends We{constructor(t){super(t);C(this,tv);C(this,nv);C(this,sv);C(this,Oc);C(this,T_);C(this,Ud);C(this,Fc);C(this,da);C(this,cs,null);C(this,Vd,void 0);V(this,"_drawId",null);T(this,Vd,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(I(this,tv,DT).call(this,t),I(this,Oc,Dp).call(this))}static _mergeSVGProperties(t,s){const i=new Set(Object.keys(t));for(const[r,o]of Object.entries(s))i.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){Fe("Not implemented")}static get typesMap(){Fe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(h(J,Ot).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,s[r]]);return t}_updateProperty(t,s,i){const r=this._drawingOptions,o=r[s],a=l=>{var u;r.updateProperty(s,l);const c=h(this,cs).updateProperty(s,l);c&&I(this,Fc,Lp).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties(h(this,cs).getPathResizingSVGProperties(I(this,Ud,I0).call(this)),{bbox:I(this,da,Vu).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties(h(this,cs).getPathResizedSVGProperties(I(this,Ud,I0).call(this)),{bbox:I(this,da,Vu).call(this)}))}_onTranslating(t,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:I(this,da,Vu).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties(h(this,cs).getPathTranslatedSVGProperties(I(this,Ud,I0).call(this),this.parentDimensions),{bbox:I(this,da,Vu).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,h(this,Vd)&&(T(this,Vd,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){I(this,sv,OT).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,Oc,Dp).call(this),I(this,Fc,Lp).call(this,h(this,cs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),I(this,sv,OT).call(this)):t&&(this._uiManager.addShouldRescale(this),I(this,Oc,Dp).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties({bbox:I(this,da,Vu).call(this)},h(this,cs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&I(this,Fc,Lp).call(this,h(this,cs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),i}static createDrawerInstance(t,s,i,r,o){Fe("Not implemented")}static startDrawing(t,s,i,r){var S;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=r;if(h(J,ua)&&h(J,ua)!==u)return;const{viewport:{rotation:d}}=t,{width:f,height:p}=o.getBoundingClientRect(),y=T(J,Nc,new AbortController),g=t.combinedSignal(y);if(h(J,ca)||T(J,ca,c),h(J,ua)??T(J,ua,u),window.addEventListener("pointerup",w=>{var _;h(J,ca)===w.pointerId?this._endDraw(w):(_=h(J,ha))==null||_.delete(w.pointerId)},{signal:g}),window.addEventListener("pointercancel",w=>{var _;h(J,ca)===w.pointerId?this._currentParent.endDrawingSession():(_=h(J,ha))==null||_.delete(w.pointerId)},{signal:g}),window.addEventListener("pointerdown",w=>{h(J,ua)===w.pointerType&&((h(J,ha)||T(J,ha,new Set)).add(w.pointerId),h(J,Ot).isCancellable()&&(h(J,Ot).removeLastElement(),h(J,Ot).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Ys,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",w=>{w.timeStamp===h(J,Lc)&&wt(w)},{signal:g}),t.toggleDrawing(),(S=s._editorUndoBar)==null||S.hide(),h(J,Ot)){t.drawLayer.updateProperties(this._currentDrawId,h(J,Ot).startNew(a,l,f,p,d));return}s.updateUIForDefaultProperties(this),T(J,Ot,this.createDrawerInstance(a,l,f,p,d)),T(J,Dc,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(h(J,Dc).toSVGProperties(),h(J,Ot).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(T(J,Lc,-1),!h(J,Ot))return;const{offsetX:s,offsetY:i,pointerId:r}=t;if(h(J,ca)===r){if(((o=h(J,ha))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,h(J,Ot).add(s,i)),T(J,Lc,t.timeStamp),wt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,T(J,Ot,null),T(J,Dc,null),T(J,ua,null),T(J,Lc,NaN)),h(J,Nc)&&(h(J,Nc).abort(),T(J,Nc,null),T(J,ca,NaN),T(J,ha,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,h(J,Ot).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=h(J,Ot),r=this._currentDrawId,o=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Ce.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Ce.DRAW_STEP),!h(J,Ot).isEmpty()){const{pageDimensions:[i,r],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:h(J,Ot).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:h(J,Dc),mustBeCommitted:!t});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,i,r,o,a){Fe("Not implemented")}static async deserialize(t,s,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}=s.viewport,c=this.deserializeDraw(a,l,r,o,this._INNER_MARGIN,t),u=await super.deserialize(t,s,i);return u.createDrawingOptions(t),I(d=u,tv,DT).call(d,{drawOutlines:c}),I(f=u,Oc,Dp).call(f),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[s,i]=this.pageTranslation,[r,o]=this.pageDimensions;return h(this,cs).serialize([s,i,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};cs=new WeakMap,Vd=new WeakMap,Ot=new WeakMap,Nc=new WeakMap,Dc=new WeakMap,ca=new WeakMap,ua=new WeakMap,ha=new WeakMap,Lc=new WeakMap,tv=new WeakSet,DT=function({drawOutlines:t,drawId:s,drawingOptions:i}){T(this,cs,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=I(this,nv,LT).call(this,t,this.parent),I(this,Fc,Lp).call(this,t.box)},nv=new WeakSet,LT=function(t,s){const{id:i}=s.drawLayer.draw(J._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},sv=new WeakSet,OT=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Oc=new WeakSet,Dp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=I(this,nv,LT).call(this,h(this,cs),t)}},T_=new WeakSet,Z$=function([t,s,i,r]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[s,1-t,i*(a/o),r*(o/a)];case 180:return[1-t,1-s,i,r];case 270:return[1-s,t,i*(a/o),r*(o/a)];default:return[t,s,i,r]}},Ud=new WeakSet,I0=function(){const{x:t,y:s,width:i,height:r,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-s,t,i*(o/a),r*(a/o)];case 180:return[1-t,1-s,i,r];case 270:return[s,1-t,i*(o/a),r*(a/o)];default:return[t,s,i,r]}},Fc=new WeakSet,Lp=function(t){if([this.x,this.y,this.width,this.height]=I(this,T_,Z$).call(this,t),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},da=new WeakSet,Vu=function(){const{x:t,y:s,width:i,height:r,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-s-r,t,r,i];case 2:return[1-t-i,1-s-r,i,r];case 3:return[s,1-t-i,r,i];case 4:return[t,s-i*(l/c),r*(c/l),i*(l/c)];case 5:return[1-s,t,i*(l/c),r*(c/l)];case 6:return[1-t-r*(c/l),1-s,r*(c/l),i*(l/c)];case 7:return[s-i*(l/c),1-t-r*(c/l),i*(l/c),r*(c/l)];case 8:return[t-i,s-r,i,r];case 9:return[1-s,t-i,r,i];case 10:return[1-t,1-s,i,r];case 11:return[s-r,1-t,r,i];case 12:return[t-r*(c/l),s,r*(c/l),i*(l/c)];case 13:return[1-s-i*(l/c),t-r*(c/l),i*(l/c),r*(c/l)];case 14:return[1-t,1-s-i*(l/c),r*(c/l),i*(l/c)];case 15:return[s,1-t,i*(l/c),r*(c/l)];default:return[t,s,i,r]}},V(J,"_currentDrawId",-1),V(J,"_currentParent",null),C(J,Ot,null),C(J,Nc,null),C(J,Dc,null),C(J,ca,NaN),C(J,ua,null),C(J,ha,null),C(J,Lc,NaN),V(J,"_INNER_MARGIN",3);let Kb=J;var $i,Ft,jt,jc,$d,En,Zt,Os,Bc,Hc,Vc,zd,P0;class mce{constructor(e,t,s,i,r,o){C(this,zd);C(this,$i,new Float64Array(6));C(this,Ft,void 0);C(this,jt,void 0);C(this,jc,void 0);C(this,$d,void 0);C(this,En,void 0);C(this,Zt,"");C(this,Os,0);C(this,Bc,new Wv);C(this,Hc,void 0);C(this,Vc,void 0);T(this,Hc,s),T(this,Vc,i),T(this,jc,r),T(this,$d,o),[e,t]=I(this,zd,P0).call(this,e,t);const a=T(this,Ft,[NaN,NaN,NaN,NaN,e,t]);T(this,En,[e,t]),T(this,jt,[{line:a,points:h(this,En)}]),h(this,$i).set(a,0)}updateProperty(e,t){e==="stroke-width"&&T(this,$d,t)}isEmpty(){return!h(this,jt)||h(this,jt).length===0}isCancellable(){return h(this,En).length<=10}add(e,t){[e,t]=I(this,zd,P0).call(this,e,t);const[s,i,r,o]=h(this,$i).subarray(2,6),a=e-r,l=t-o;return Math.hypot(h(this,Hc)*a,h(this,Vc)*l)<=2?null:(h(this,En).push(e,t),isNaN(s)?(h(this,$i).set([r,o,e,t],2),h(this,Ft).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(h(this,$i)[0])&&h(this,Ft).splice(6,6),h(this,$i).set([s,i,r,o,e,t],0),h(this,Ft).push(...q.createBezierPoints(s,i,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(h(this,En).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){T(this,Hc,s),T(this,Vc,i),T(this,jc,r),[e,t]=I(this,zd,P0).call(this,e,t);const o=T(this,Ft,[NaN,NaN,NaN,NaN,e,t]);T(this,En,[e,t]);const a=h(this,jt).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),h(this,jt).push({line:o,points:h(this,En)}),h(this,$i).set(o,0),T(this,Os,0),this.toSVGPath(),null}getLastElement(){return h(this,jt).at(-1)}setLastElement(e){return h(this,jt)?(h(this,jt).push(e),T(this,Ft,e.line),T(this,En,e.points),T(this,Os,0),{path:{d:this.toSVGPath()}}):h(this,Bc).setLastElement(e)}removeLastElement(){if(!h(this,jt))return h(this,Bc).removeLastElement();h(this,jt).pop(),T(this,Zt,"");for(let e=0,t=h(this,jt).length;e<t;e++){const{line:s,points:i}=h(this,jt)[e];T(this,Ft,s),T(this,En,i),T(this,Os,0),this.toSVGPath()}return{path:{d:h(this,Zt)}}}toSVGPath(){const e=q.svgRound(h(this,Ft)[4]),t=q.svgRound(h(this,Ft)[5]);if(h(this,En).length===2)return T(this,Zt,`${h(this,Zt)} M ${e} ${t} Z`),h(this,Zt);if(h(this,En).length<=6){const i=h(this,Zt).lastIndexOf("M");T(this,Zt,`${h(this,Zt).slice(0,i)} M ${e} ${t}`),T(this,Os,6)}if(h(this,En).length===4){const i=q.svgRound(h(this,Ft)[10]),r=q.svgRound(h(this,Ft)[11]);return T(this,Zt,`${h(this,Zt)} L ${i} ${r}`),T(this,Os,12),h(this,Zt)}const s=[];h(this,Os)===0&&(s.push(`M ${e} ${t}`),T(this,Os,6));for(let i=h(this,Os),r=h(this,Ft).length;i<r;i+=6){const[o,a,l,c,u,d]=h(this,Ft).slice(i,i+6).map(q.svgRound);s.push(`C${o} ${a} ${l} ${c} ${u} ${d}`)}return T(this,Zt,h(this,Zt)+s.join(" ")),T(this,Os,h(this,Ft).length),h(this,Zt)}getOutlines(e,t,s,i){const r=h(this,jt).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),h(this,Bc).build(h(this,jt),e,t,s,h(this,jc),h(this,$d),i),T(this,$i,null),T(this,Ft,null),T(this,jt,null),T(this,Zt,null),h(this,Bc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}$i=new WeakMap,Ft=new WeakMap,jt=new WeakMap,jc=new WeakMap,$d=new WeakMap,En=new WeakMap,Zt=new WeakMap,Os=new WeakMap,Bc=new WeakMap,Hc=new WeakMap,Vc=new WeakMap,zd=new WeakSet,P0=function(e,t){return q._normalizePoint(e,t,h(this,Hc),h(this,Vc),h(this,jc))};var Cn,iv,rv,us,zi,Wi,Wd,Gd,Uc,ci,dr,k_,ez,I_,tz,P_,nz;class Wv extends q{constructor(){super(...arguments);C(this,ci);C(this,k_);C(this,I_);C(this,P_);C(this,Cn,void 0);C(this,iv,0);C(this,rv,void 0);C(this,us,void 0);C(this,zi,void 0);C(this,Wi,void 0);C(this,Wd,void 0);C(this,Gd,void 0);C(this,Uc,void 0)}build(t,s,i,r,o,a,l){T(this,zi,s),T(this,Wi,i),T(this,Wd,r),T(this,Gd,o),T(this,Uc,a),T(this,rv,l??0),T(this,us,t),I(this,I_,tz).call(this)}get thickness(){return h(this,Uc)}setLastElement(t){return h(this,us).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return h(this,us).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of h(this,us)){if(t.push(`M${q.svgRound(s[4])} ${q.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${q.svgRound(s[10])} ${q.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[o,a,l,c,u,d]=s.subarray(i,i+6).map(q.svgRound);t.push(`C${o} ${a} ${l} ${c} ${u} ${d}`)}}return t.join("")}serialize([t,s,i,r],o){const a=[],l=[],[c,u,d,f]=I(this,k_,ez).call(this);let p,y,g,S,w,_,v,m,x;switch(h(this,Gd)){case 0:x=q._rescale,p=t,y=s+r,g=i,S=-r,w=t+c*i,_=s+(1-u-f)*r,v=t+(c+d)*i,m=s+(1-u)*r;break;case 90:x=q._rescaleAndSwap,p=t,y=s,g=i,S=r,w=t+u*i,_=s+c*r,v=t+(u+f)*i,m=s+(c+d)*r;break;case 180:x=q._rescale,p=t+i,y=s,g=-i,S=r,w=t+(1-c-d)*i,_=s+u*r,v=t+(1-c)*i,m=s+(u+f)*r;break;case 270:x=q._rescaleAndSwap,p=t+i,y=s+r,g=-i,S=-r,w=t+(1-u-f)*i,_=s+(1-c-d)*r,v=t+(1-u)*i,m=s+(1-c)*r;break}for(const{line:A,points:k}of h(this,us))a.push(x(A,p,y,g,S,o?new Array(A.length):null)),l.push(x(k,p,y,g,S,o?new Array(k.length):null));return{lines:a,points:l,rect:[w,_,v,m]}}static deserialize(t,s,i,r,o,{paths:{lines:a,points:l},rotation:c,thickness:u}){const d=[];let f,p,y,g,S;switch(c){case 0:S=q._rescale,f=-t/i,p=s/r+1,y=1/i,g=-1/r;break;case 90:S=q._rescaleAndSwap,f=-s/r,p=-t/i,y=1/r,g=1/i;break;case 180:S=q._rescale,f=t/i+1,p=-s/r,y=-1/i,g=1/r;break;case 270:S=q._rescaleAndSwap,f=s/r+1,p=t/i+1,y=-1/r,g=-1/i;break}if(!a){a=[];for(const _ of l){const v=_.length;if(v===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(v===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}const m=new Float32Array(3*(v-2));a.push(m);let[x,A,k,P]=_.subarray(0,4);m.set([NaN,NaN,NaN,NaN,x,A],0);for(let R=4;R<v;R+=2){const M=_[R],N=_[R+1];m.set(q.createBezierPoints(x,A,k,P,M,N),(R-2)*3),[x,A,k,P]=[k,P,M,N]}}}for(let _=0,v=a.length;_<v;_++)d.push({line:S(a[_].map(m=>m??NaN),f,p,y,g),points:S(l[_].map(m=>m??NaN),f,p,y,g)});const w=new this.prototype.constructor;return w.build(d,i,r,1,c,u,o),w}get box(){return h(this,Cn)}updateProperty(t,s){return t==="stroke-width"?I(this,P_,nz).call(this,s):null}updateParentDimensions([t,s],i){const[r,o]=I(this,ci,dr).call(this);T(this,zi,t),T(this,Wi,s),T(this,Wd,i);const[a,l]=I(this,ci,dr).call(this),c=a-r,u=l-o,d=h(this,Cn);return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateRotation(t){return T(this,iv,t),{path:{transform:this.rotationTransform}}}get viewBox(){return h(this,Cn).map(q.svgRound).join(" ")}get defaultProperties(){const[t,s]=h(this,Cn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(t)} ${q.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=h(this,Cn);let i=0,r=0,o=0,a=0,l=0,c=0;switch(h(this,iv)){case 90:r=s/t,o=-t/s,l=t;break;case 180:i=-1,a=-1,l=t,c=s;break;case 270:r=-s/t,o=t/s,c=s;break;default:return""}return`matrix(${i} ${r} ${o} ${a} ${q.svgRound(l)} ${q.svgRound(c)})`}getPathResizingSVGProperties([t,s,i,r]){const[o,a]=I(this,ci,dr).call(this),[l,c,u,d]=h(this,Cn);if(Math.abs(u-o)<=q.PRECISION||Math.abs(d-a)<=q.PRECISION){const S=t+i/2-(l+u/2),w=s+r/2-(c+d/2);return{path:{"transform-origin":`${q.svgRound(t)} ${q.svgRound(s)}`,transform:`${this.rotationTransform} translate(${S} ${w})`}}}const f=(i-2*o)/(u-2*o),p=(r-2*a)/(d-2*a),y=u/i,g=d/r;return{path:{"transform-origin":`${q.svgRound(l)} ${q.svgRound(c)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${q.svgRound(o)} ${q.svgRound(a)}) scale(${f} ${p}) translate(${q.svgRound(-o)} ${q.svgRound(-a)})`}}}getPathResizedSVGProperties([t,s,i,r]){const[o,a]=I(this,ci,dr).call(this),l=h(this,Cn),[c,u,d,f]=l;if(l[0]=t,l[1]=s,l[2]=i,l[3]=r,Math.abs(d-o)<=q.PRECISION||Math.abs(f-a)<=q.PRECISION){const w=t+i/2-(c+d/2),_=s+r/2-(u+f/2);for(const{line:v,points:m}of h(this,us))q._translate(v,w,_,v),q._translate(m,w,_,m);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(t)} ${q.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*o)/(d-2*o),y=(r-2*a)/(f-2*a),g=-p*(c+o)+t+o,S=-y*(u+a)+s+a;if(p!==1||y!==1||g!==0||S!==0)for(const{line:w,points:_}of h(this,us))q._rescale(w,g,S,p,y,w),q._rescale(_,g,S,p,y,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(t)} ${q.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],i){const[r,o]=i,a=h(this,Cn),l=t-a[0],c=s-a[1];if(h(this,zi)===r&&h(this,Wi)===o)for(const{line:u,points:d}of h(this,us))q._translate(u,l,c,u),q._translate(d,l,c,d);else{const u=h(this,zi)/r,d=h(this,Wi)/o;T(this,zi,r),T(this,Wi,o);for(const{line:f,points:p}of h(this,us))q._rescale(f,l,c,u,d,f),q._rescale(p,l,c,u,d,p);a[2]*=u,a[3]*=d}return a[0]=t,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${q.svgRound(t)} ${q.svgRound(s)}`}}}get defaultSVGProperties(){const t=h(this,Cn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${q.svgRound(t[0])} ${q.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Cn=new WeakMap,iv=new WeakMap,rv=new WeakMap,us=new WeakMap,zi=new WeakMap,Wi=new WeakMap,Wd=new WeakMap,Gd=new WeakMap,Uc=new WeakMap,ci=new WeakSet,dr=function(t=h(this,Uc)){const s=h(this,rv)+t/2*h(this,Wd);return h(this,Gd)%180===0?[s/h(this,zi),s/h(this,Wi)]:[s/h(this,Wi),s/h(this,zi)]},k_=new WeakSet,ez=function(){const[t,s,i,r]=h(this,Cn),[o,a]=I(this,ci,dr).call(this,0);return[t+o,s+a,i-2*o,r-2*a]},I_=new WeakSet,tz=function(){const t=T(this,Cn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of h(this,us)){if(r.length<=12){for(let l=4,c=r.length;l<c;l+=6)se.pointBoundingBox(r[l],r[l+1],t);continue}let o=r[4],a=r[5];for(let l=6,c=r.length;l<c;l+=6){const[u,d,f,p,y,g]=r.subarray(l,l+6);se.bezierBoundingBox(o,a,u,d,f,p,y,g,t),o=y,a=g}}const[s,i]=I(this,ci,dr).call(this);t[0]=pn(t[0]-s,0,1),t[1]=pn(t[1]-i,0,1),t[2]=pn(t[2]+s,0,1),t[3]=pn(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},P_=new WeakSet,nz=function(t){const[s,i]=I(this,ci,dr).call(this);T(this,Uc,t);const[r,o]=I(this,ci,dr).call(this),[a,l]=[r-s,o-i],c=h(this,Cn);return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c};class e1 extends J${constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:We._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new e1(this._viewParameters);return e.updateAll(this),e}}var R_,sz;const ah=class ah extends Kb{constructor(t){super({...t,name:"inkEditor"});C(this,R_);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){We.initialize(t,s),this._defaultDrawingOptions=new e1(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return _e(this,"typesMap",new Map([[Ce.INK_THICKNESS,"stroke-width"],[Ce.INK_COLOR,"stroke"],[Ce.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,i,r,o){return new mce(t,s,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,i,r,o,a){return Wv.deserialize(t,s,i,r,o,a)}static async deserialize(t,s,i){let r=null;if(t instanceof zP){const{data:{inkLists:a,rect:l,rotation:c,id:u,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:y},parent:{page:{pageNumber:g}}}=t;r=t={annotationType:le.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:g-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:y}}const o=await super.deserialize(t,s,i);return o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:i}){this._drawingOptions=ah.getDefaultDrawingOptions({stroke:se.makeHexColor(...t),"stroke-width":s,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,c={annotationType:le.INK,color:We._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(c.isCopy=!0,c):this.annotationElementId&&!I(this,R_,sz).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const{points:s,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};R_=new WeakSet,sz=function(t){const{color:s,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,l)=>a!==s[l])||t.thickness!==i||t.opacity!==r||t.pageIndex!==o},V(ah,"_type","ink"),V(ah,"_editorType",le.INK),V(ah,"_defaultDrawingOptions",null);let FT=ah;class jT extends Wv{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Lw=8,hp=3;var $c,ov,BT,ui,M_,iz,N_,rz,av,HT,Yd,R0,D_,oz,L_,az,O_,lz,lv,VT,cv,UT,F_,cz;class Et{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},r,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const d=200,f=u.font=`${s} ${i} ${d}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:S,fontBoundingBoxAscent:w,fontBoundingBoxDescent:_,width:v}=u.measureText(e),m=1.5,x=Math.ceil(Math.max(Math.abs(p)+Math.abs(y)||0,v)*m),A=Math.ceil(Math.max(Math.abs(g)+Math.abs(S)||d,Math.abs(w)+Math.abs(_)||d)*m);c=new OffscreenCanvas(x,A),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=f,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,x,A),u.fillStyle="black",u.fillText(e,x*(m-1)/2,A*(3-m)/2);const k=I(this,lv,VT).call(this,u.getImageData(0,0,x,A).data),P=I(this,O_,lz).call(this,k),R=I(this,cv,UT).call(this,P),M=I(this,av,HT).call(this,k,x,A,R);return this.processDrawnLines({lines:{curves:M,width:x,height:A},pageWidth:r,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,r){const[o,a,l]=I(this,F_,cz).call(this,e),[c,u]=I(this,L_,az).call(this,o,a,l,Math.hypot(a,l)*h(this,$c).sigmaSFactor,h(this,$c).sigmaR,h(this,$c).kernelSize),d=I(this,cv,UT).call(this,u),f=I(this,av,HT).call(this,c,a,l,d);return this.processDrawnLines({lines:{curves:f,width:a,height:l},pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:o,areContours:a}){i%180!==0&&([t,s]=[s,t]);const{curves:l,width:c,height:u}=e,d=e.thickness??0,f=[],p=Math.min(t/c,s/u),y=p/t,g=p/s,S=[];for(const{points:_}of l){const v=o?I(this,D_,oz).call(this,_):_;if(!v)continue;S.push(v);const m=v.length,x=new Float32Array(m),A=new Float32Array(3*(m===2?2:m-2));if(f.push({line:A,points:x}),m===2){x[0]=v[0]*y,x[1]=v[1]*g,A.set([NaN,NaN,NaN,NaN,x[0],x[1]],0);continue}let[k,P,R,M]=v;k*=y,P*=g,R*=y,M*=g,x.set([k,P,R,M],0),A.set([NaN,NaN,NaN,NaN,k,P],0);for(let N=4;N<m;N+=2){const F=x[N]=v[N]*y,H=x[N+1]=v[N+1]*g;A.set(q.createBezierPoints(k,P,R,M,F,H),(N-2)*3),[k,P,R,M]=[R,M,F,H]}}if(f.length===0)return null;const w=a?new jT:new Wv;return w.build(f,t,s,1,i,a?0:d,r),{outline:w,newCurves:S,areContours:a,thickness:d,width:c,height:u}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:r}){let o=1/0,a=-1/0,l=0;for(const v of e){l+=v.length;for(let m=2,x=v.length;m<x;m++){const A=v[m]-v[m-2];o=Math.min(o,A),a=Math.max(a,A)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const u=e.length,d=Lw+hp*u,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=r,f[p++]=t?0:1,f[p++]=Math.max(0,Math.floor(s??0)),f[p++]=u,f[p++]=c.BYTES_PER_ELEMENT;for(const v of e)f[p++]=v.length-2,f[p++]=v[0],f[p++]=v[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(f);const S=c.prototype.constructor;for(const v of e){const m=new S(v.length-2);for(let x=2,A=v.length;x<A;x++)m[x-2]=v[x]-v[x-2];g.write(m)}g.close();const w=await new Response(y.readable).arrayBuffer(),_=new Uint8Array(w);return oU(_)}static async decompressSignature(e){try{const t=Wae(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const v of s)o||(o=new Uint8Array(new Uint32Array(v.buffer,0,4)[0])),o.set(v,a),a+=v.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],d=l[3],f=l[4]===0,p=l[5],y=l[6],g=l[7],S=[],w=(Lw+hp*y)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(g){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(o.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(o.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(o.buffer,w);break}a=0;for(let v=0;v<y;v++){const m=l[hp*v+Lw],x=new Float32Array(m+2);S.push(x);for(let A=0;A<hp-1;A++)x[A]=l[hp*v+Lw+A+1];for(let A=0;A<m;A++)x[A+2]=x[A]+_[a++]}return{areContours:f,thickness:p,outlines:S,width:u,height:d}}catch(t){return ce(`decompressSignature: ${t}`),null}}}$c=new WeakMap,ov=new WeakSet,BT=function(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i},ui=new WeakMap,M_=new WeakSet,iz=function(e,t,s,i,r,o,a){const l=I(this,ov,BT).call(this,s,i,r,o);for(let c=0;c<8;c++){const u=(-c+l-a+16)%8,d=h(this,ui)[2*u],f=h(this,ui)[2*u+1];if(e[(s+d)*t+(i+f)]!==0)return u}return-1},N_=new WeakSet,rz=function(e,t,s,i,r,o,a){const l=I(this,ov,BT).call(this,s,i,r,o);for(let c=0;c<8;c++){const u=(c+l+a+16)%8,d=h(this,ui)[2*u],f=h(this,ui)[2*u+1];if(e[(s+d)*t+(i+f)]!==0)return u}return-1},av=new WeakSet,HT=function(e,t,s,i){const r=e.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=e[u]<=i?1:0;for(let u=1;u<s-1;u++)o[u*t]=o[u*t+t-1]=0;for(let u=0;u<t;u++)o[u]=o[t*s-1-u]=0;let a=1,l;const c=[];for(let u=1;u<s-1;u++){l=1;for(let d=1;d<t-1;d++){const f=u*t+d,p=o[f];if(p===0)continue;let y=u,g=d;if(p===1&&o[f-1]===0)a+=1,g-=1;else if(p>=1&&o[f+1]===0)a+=1,g+=1,p>1&&(l=p);else{p!==1&&(l=Math.abs(p));continue}const S=[d,u],w=g===d+1,_={isHole:w,points:S,id:a,parent:0};c.push(_);let v;for(const N of c)if(N.id===l){v=N;break}v?v.isHole?_.parent=w?v.parent:l:_.parent=w?l:v.parent:_.parent=w?l:0;const m=I(this,M_,iz).call(this,o,t,u,d,y,g,0);if(m===-1){o[f]=-a,o[f]!==1&&(l=Math.abs(o[f]));continue}let x=h(this,ui)[2*m],A=h(this,ui)[2*m+1];const k=u+x,P=d+A;y=k,g=P;let R=u,M=d;for(;;){const N=I(this,N_,rz).call(this,o,t,R,M,y,g,1);x=h(this,ui)[2*N],A=h(this,ui)[2*N+1];const F=R+x,H=M+A;S.push(H,F);const D=R*t+M;if(o[D+1]===0?o[D]=-a:o[D]===1&&(o[D]=a),F===u&&H===d&&R===k&&M===P){o[f]!==1&&(l=Math.abs(o[f]));break}else y=R,g=M,R=F,M=H}}}return c},Yd=new WeakSet,R0=function(e,t,s,i){if(s-t<=4){for(let k=t;k<s-2;k+=2)i.push(e[k],e[k+1]);return}const r=e[t],o=e[t+1],a=e[s-4]-r,l=e[s-3]-o,c=Math.hypot(a,l),u=a/c,d=l/c,f=u*o-d*r,p=l/a,y=1/c,g=Math.atan(p),S=Math.cos(g),w=Math.sin(g),_=y*(Math.abs(S)+Math.abs(w)),v=y*(1-_+_**2),m=Math.max(Math.atan(Math.abs(w+S)*v),Math.atan(Math.abs(w-S)*v));let x=0,A=t;for(let k=t+2;k<s-2;k+=2){const P=Math.abs(f-u*e[k+1]+d*e[k]);P>x&&(A=k,x=P)}x>(c*m)**2?(I(this,Yd,R0).call(this,e,t,A+2,i),I(this,Yd,R0).call(this,e,A,s,i)):i.push(r,o)},D_=new WeakSet,oz=function(e){const t=[],s=e.length;return I(this,Yd,R0).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},L_=new WeakSet,az=function(e,t,s,i,r,o){const a=new Float32Array(o**2),l=-2*i**2,c=o>>1;for(let g=0;g<o;g++){const S=(g-c)**2;for(let w=0;w<o;w++)a[g*o+w]=Math.exp((S+(w-c)**2)/l)}const u=new Float32Array(256),d=-2*r**2;for(let g=0;g<256;g++)u[g]=Math.exp(g**2/d);const f=e.length,p=new Uint8Array(f),y=new Uint32Array(256);for(let g=0;g<s;g++)for(let S=0;S<t;S++){const w=g*t+S,_=e[w];let v=0,m=0;for(let A=0;A<o;A++){const k=g+A-c;if(!(k<0||k>=s))for(let P=0;P<o;P++){const R=S+P-c;if(R<0||R>=t)continue;const M=e[k*t+R],N=a[A*o+P]*u[Math.abs(M-_)];v+=M*N,m+=N}}const x=p[w]=Math.round(v/m);y[x]++}return[p,y]},O_=new WeakSet,lz=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},lv=new WeakSet,VT=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let a=0,l=s.length;a<l;a++){if(e[(a<<2)+3]===0){i=s[a]=255;continue}const u=s[a]=e[a<<2];u>i&&(i=u),u<r&&(r=u)}const o=255/(i-r);for(let a=0;a<t;a++)s[a]=(s[a]-r)*o;return s},cv=new WeakSet,UT=function(e){let t,s=-1/0,i=-1/0;const r=e.findIndex(l=>l!==0);let o=r,a=r;for(t=r;t<256;t++){const l=e[t];l>s&&(t-o>i&&(i=t-o,a=t-1),s=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},F_=new WeakSet,cz=function(e){const t=e,{width:s,height:i}=e,{maxDim:r}=h(this,$c);let o=s,a=i;if(s>r||i>r){let f=s,p=i,y=Math.log2(Math.max(s,i)/r);const g=Math.floor(y);y=y===g?g-1:g;for(let w=0;w<y;w++){o=Math.ceil(f/2),a=Math.ceil(p/2);const _=new OffscreenCanvas(o,a);_.getContext("2d").drawImage(e,0,0,f,p,0,0,o,a),f=o,p=a,e!==t&&e.close(),e=_.transferToImageBitmap()}const S=Math.min(r/o,r/a);o=Math.round(o*S),a=Math.round(a*S)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const u=c.getImageData(0,0,o,a).data;return[I(this,lv,VT).call(this,u),o,a]},C(Et,ov),C(Et,M_),C(Et,N_),C(Et,av),C(Et,Yd),C(Et,D_),C(Et,L_),C(Et,O_),C(Et,lv),C(Et,cv),C(Et,F_),C(Et,$c,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),C(Et,ui,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class GP extends J${constructor(){super(),super.updateProperties({fill:We._defaultLineColor,"stroke-width":0})}clone(){const e=new GP;return e.updateAll(this),e}}class YP extends e1{constructor(e){super(e),super.updateProperties({stroke:We._defaultLineColor,"stroke-width":1})}clone(){const e=new YP(this._viewParameters);return e.updateAll(this),e}}var fa,Gi,pa,zc;const Jn=class Jn extends Kb{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});C(this,fa,!1);C(this,Gi,null);C(this,pa,null);C(this,zc,null);this._willKeepAspectRatio=!0,T(this,pa,t.signatureData||null),T(this,Gi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){We.initialize(t,s),this._defaultDrawingOptions=new GP,this._defaultDrawnSignatureOptions=new YP(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return _e(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!h(this,Gi)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(h(this,pa)){const{lines:r,mustSmooth:o,areContours:a,description:l,uuid:c,heightInPage:u}=h(this,pa),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,y=Et.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:p,innerMargin:Jn._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(y,u,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){T(this,zc,t),this.addEditToolbar()}getUuid(){return h(this,zc)}get description(){return h(this,Gi)}set description(t){T(this,Gi,t),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:i,width:r,height:o}=h(this,pa),a=Math.max(r,o),l=Et.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:i,width:r,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,i,r){const{x:o,y:a}=this,{outline:l}=T(this,pa,t);T(this,fa,l instanceof jT),this.description=i,this.div.setAttribute("data-l10n-args",JSON.stringify({description:i}));let c;h(this,fa)?c=Jn.getDefaultDrawingOptions():(c=Jn._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[u,d]=this.parentDimensions,[,f]=this.pageDimensions;let p=s/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(u*this.width,d*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return Et.process(t,s,i,r,Jn._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:i,pageHeight:r},rotation:o}=this.parent.viewport;return Et.extractContoursFromText(t,s,i,r,o,Jn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return Et.processDrawnLines({lines:t,pageWidth:s,pageHeight:i,rotation:r,innerMargin:Jn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=Jn.getDefaultDrawingOptions():(this._drawingOptions=Jn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:le.SIGNATURE,isSignature:!0,areContours:h(this,fa),color:[0,0,0],thickness:h(this,fa)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.paths={lines:s,points:i},a.uuid=h(this,zc),a.isCopy=!0):a.lines=s,h(this,Gi)&&(a.accessibilityData={type:"Figure",alt:h(this,Gi)}),a}static deserializeDraw(t,s,i,r,o,a){return a.areContours?jT.deserialize(t,s,i,r,o,a):Wv.deserialize(t,s,i,r,o,a)}static async deserialize(t,s,i){var o;const r=await super.deserialize(t,s,i);return T(r,fa,t.areContours),T(r,Gi,((o=t.accessibilityData)==null?void 0:o.alt)||""),T(r,zc,t.uuid),r}};fa=new WeakMap,Gi=new WeakMap,pa=new WeakMap,zc=new WeakMap,V(Jn,"_type","signature"),V(Jn,"_editorType",le.SIGNATURE),V(Jn,"_defaultDrawingOptions",null);let $T=Jn;var et,Bt,ma,Wr,ga,Kd,Gr,Wc,Yi,hs,qd,Gc,Op,Yc,Fp,Xd,M0,Qd,N0,Jd,D0,uv,WT,Zd,L0,j_,uz;class zT extends We{constructor(t){super({...t,name:"stampEditor"});C(this,Gc);C(this,Yc);C(this,Xd);C(this,Qd);C(this,Jd);C(this,uv);C(this,Zd);C(this,j_);C(this,et,null);C(this,Bt,null);C(this,ma,null);C(this,Wr,null);C(this,ga,null);C(this,Kd,"");C(this,Gr,null);C(this,Wc,!1);C(this,Yi,null);C(this,hs,!1);C(this,qd,!1);T(this,Wr,t.bitmapUrl),T(this,ga,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){We.initialize(t,s)}static isHandlingMimeForPasting(t){return zb.includes(t)}static paste(t,s){s.pasteEditor({mode:le.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),s&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;h(this,Bt)&&(T(this,et,null),this._uiManager.imageManager.deleteId(h(this,Bt)),(t=h(this,Gr))==null||t.remove(),T(this,Gr,null),h(this,Yi)&&(clearTimeout(h(this,Yi)),T(this,Yi,null))),super.remove()}rebuild(){if(!this.parent){h(this,Bt)&&I(this,Xd,M0).call(this);return}super.rebuild(),this.div!==null&&(h(this,Bt)&&h(this,Gr)===null&&I(this,Xd,M0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(h(this,ma)||h(this,et)||h(this,Wr)||h(this,ga)||h(this,Bt)||h(this,Wc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),h(this,Wc)||(h(this,et)?I(this,Qd,N0).call(this):I(this,Xd,M0).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(T(this,Bt,i),r&&T(this,et,r),T(this,Wc,!1),I(this,Qd,N0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;h(this,Yi)!==null&&clearTimeout(h(this,Yi)),T(this,Yi,setTimeout(()=>{T(this,Yi,null),I(this,uv,WT).call(this)},200))}copyCanvas(t,s,i=!1){var p;t||(t=224);const{width:r,height:o}=h(this,et),a=new Ci;let l=h(this,et),c=r,u=o,d=null;if(s){if(r>s||o>s){const P=Math.min(s/r,s/o);c=Math.floor(r*P),u=Math.floor(o*P)}d=document.createElement("canvas");const y=d.width=Math.ceil(c*a.sx),g=d.height=Math.ceil(u*a.sy);h(this,hs)||(l=I(this,Jd,D0).call(this,y,g));const S=d.getContext("2d");S.filter=this._uiManager.hcmFilter;let w="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",_="#42414d");const v=15,m=v*a.sx,x=v*a.sy,A=new OffscreenCanvas(m*2,x*2),k=A.getContext("2d");k.fillStyle=w,k.fillRect(0,0,m*2,x*2),k.fillStyle=_,k.fillRect(0,0,m,x),k.fillRect(m,x,m,x),S.fillStyle=S.createPattern(A,"repeat"),S.fillRect(0,0,y,g),S.drawImage(l,0,0,l.width,l.height,0,0,y,g)}let f=null;if(i){let y,g;if(a.symmetric&&l.width<t&&l.height<t)y=l.width,g=l.height;else if(l=h(this,et),r>t||o>t){const _=Math.min(t/r,t/o);y=Math.floor(r*_),g=Math.floor(o*_),h(this,hs)||(l=I(this,Jd,D0).call(this,y,g))}const w=new OffscreenCanvas(y,g).getContext("2d",{willReadFrequently:!0});w.drawImage(l,0,0,l.width,l.height,0,0,y,g),f={width:y,height:g,data:w.getImageData(0,0,y,g).data}}return{canvas:d,width:c,height:u,imageData:f}}static async deserialize(t,s,i){var S;let r=null,o=!1;if(t instanceof C$){const{data:{rect:w,rotation:_,id:v,structParent:m,popupRef:x},container:A,parent:{page:{pageNumber:k}},canvas:P}=t;let R,M;P?(delete t.canvas,{id:R,bitmap:M}=i.imageManager.getFromCanvas(A.id,P),P.remove()):(o=!0,t._hasNoCanvas=!0);const N=((S=await s._structTree.getAriaAttributes(`${OP}${v}`))==null?void 0:S.get("aria-label"))||"";r=t={annotationType:le.STAMP,bitmapId:R,bitmap:M,pageIndex:k-1,rect:w.slice(0),rotation:_,annotationElementId:v,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:N},isSvg:!1,structParent:m,popupRef:x}}const a=await super.deserialize(t,s,i),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:d,isSvg:f,accessibilityData:p}=t;o?(i.addMissingCanvas(t.id,a),T(a,Wc,!0)):d&&i.imageManager.isValidId(d)?(T(a,Bt,d),c&&T(a,et,c)):T(a,Wr,u),T(a,hs,f);const[y,g]=a.pageDimensions;return a.width=(l[2]-l[0])/y,a.height=(l[3]-l[1])/g,p&&(a.altTextData=p),a._initialData=r,T(a,qd,!!r),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:le.STAMP,bitmapId:h(this,Bt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:h(this,hs),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=I(this,Zd,L0).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=I(this,j_,uz).call(this,i);if(l.isSame)return null;l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const a=h(this,hs)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(h(this,Bt)))s.stamps.set(h(this,Bt),{area:a,serialized:i}),i.bitmap=I(this,Zd,L0).call(this,!1);else if(h(this,hs)){const l=s.stamps.get(h(this,Bt));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=I(this,Zd,L0).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}et=new WeakMap,Bt=new WeakMap,ma=new WeakMap,Wr=new WeakMap,ga=new WeakMap,Kd=new WeakMap,Gr=new WeakMap,Wc=new WeakMap,Yi=new WeakMap,hs=new WeakMap,qd=new WeakMap,Gc=new WeakSet,Op=function(t,s=!1){if(!t){this.remove();return}T(this,et,t.bitmap),s||(T(this,Bt,t.id),T(this,hs,t.isSvg)),t.file&&T(this,Kd,t.file.name),I(this,Qd,N0).call(this)},Yc=new WeakSet,Fp=function(){if(T(this,ma,null),this._uiManager.enableWaiting(!1),!!h(this,Gr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&h(this,et)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&h(this,et)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Xd=new WeakSet,M0=function(){if(h(this,Bt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(h(this,Bt)).then(i=>I(this,Gc,Op).call(this,i,!0)).finally(()=>I(this,Yc,Fp).call(this));return}if(h(this,Wr)){const i=h(this,Wr);T(this,Wr,null),this._uiManager.enableWaiting(!0),T(this,ma,this._uiManager.imageManager.getFromUrl(i).then(r=>I(this,Gc,Op).call(this,r)).finally(()=>I(this,Yc,Fp).call(this)));return}if(h(this,ga)){const i=h(this,ga);T(this,ga,null),this._uiManager.enableWaiting(!0),T(this,ma,this._uiManager.imageManager.getFromFile(i).then(r=>I(this,Gc,Op).call(this,r)).finally(()=>I(this,Yc,Fp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=zb.join(",");const s=this._uiManager._signal;T(this,ma,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),I(this,Gc,Op).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>I(this,Yc,Fp).call(this))),t.click()},Qd=new WeakSet,N0=function(){var d;const{div:t}=this;let{width:s,height:i}=h(this,et);const[r,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*r,i=this.height*o;else if(s>a*r||i>a*o){const f=Math.min(a*r/s,a*o/i);s*=f,i*=f}const[l,c]=this.parentDimensions;this.setDims(s*l/r,i*c/o),this._uiManager.enableWaiting(!1);const u=T(this,Gr,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=s/r,this.height=i/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),I(this,uv,WT).call(this),h(this,qd)||(this.parent.addUndoableEditor(this),T(this,qd,!0)),this._reportTelemetry({action:"inserted_image"}),h(this,Kd)&&this.div.setAttribute("aria-description",h(this,Kd)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Jd=new WeakSet,D0=function(t,s){const{width:i,height:r}=h(this,et);let o=i,a=r,l=h(this,et);for(;o>2*t||a>2*s;){const c=o,u=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=d.transferToImageBitmap()}return l},uv=new WeakSet,WT=function(){const[t,s]=this.parentDimensions,{width:i,height:r}=this,o=new Ci,a=Math.ceil(i*t*o.sx),l=Math.ceil(r*s*o.sy),c=h(this,Gr);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const u=h(this,hs)?h(this,et):I(this,Jd,D0).call(this,a,l),d=c.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,a,l)},Zd=new WeakSet,L0=function(t){if(t){if(h(this,hs)){const r=this._uiManager.imageManager.getSvgUrl(h(this,Bt));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=h(this,et),s.getContext("2d").drawImage(h(this,et),0,0),s.toDataURL()}if(h(this,hs)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*mo.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*mo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(h(this,et),0,0,h(this,et).width,h(this,et).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(h(this,et))},j_=new WeakSet,uz=function(t){var a;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===s,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},V(zT,"_type","stamp"),V(zT,"_editorType",le.STAMP);var Kc,ef,Ki,ya,Yr,ds,va,tf,qc,hi,Kr,Ht,qr,wa,nf,ee,ba,B_,hz,Fs,Ii,hv,GT,dv,YT,sf,O0;const Qs=class Qs{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}){C(this,B_);C(this,Fs);C(this,hv);C(this,dv);C(this,sf);C(this,Kc,void 0);C(this,ef,!1);C(this,Ki,null);C(this,ya,null);C(this,Yr,null);C(this,ds,new Map);C(this,va,!1);C(this,tf,!1);C(this,qc,!1);C(this,hi,null);C(this,Kr,null);C(this,Ht,null);C(this,qr,null);C(this,wa,null);C(this,nf,-1);C(this,ee,void 0);const d=[...h(Qs,ba).values()];if(!Qs._initialized){Qs._initialized=!0;for(const f of d)f.initialize(u,e)}e.registerEditorTypes(d),T(this,ee,e),this.pageIndex=t,this.div=s,T(this,Kc,r),T(this,Ki,o),this.viewport=c,T(this,Ht,l),this.drawLayer=a,this._structTree=i,h(this,ee).addLayer(this)}get isEmpty(){return h(this,ds).size===0}get isInvisible(){return this.isEmpty&&h(this,ee).getMode()===le.NONE}updateToolbar(e){h(this,ee).updateToolbar(e)}updateMode(e=h(this,ee).getMode()){switch(I(this,sf,O0).call(this),e){case le.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case le.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case le.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of h(Qs,ba).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=h(this,Ht))==null?void 0:t.div)}setEditingState(e){h(this,ee).setEditingState(e)}addCommands(e){h(this,ee).addCommands(e)}cleanUndoStack(e){h(this,ee).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=h(this,Ki))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;T(this,qc,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(s=h(this,wa))==null||s.abort(),T(this,wa,null);const e=new Set;for(const i of h(this,ds).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(h(this,ee).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!h(this,Ki)){T(this,qc,!1);return}const t=h(this,Ki).getEditableAnnotations();for(const i of t){if(i.hide(),h(this,ee).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}T(this,qc,!1)}disable(){var i;if(T(this,tf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),h(this,Ht)&&!h(this,wa)){T(this,wa,new AbortController);const r=h(this,ee).combinedSignal(h(this,wa));h(this,Ht).div.addEventListener("pointerdown",o=>{const{clientX:l,clientY:c,timeStamp:u}=o,d=h(this,nf);if(u-d>500){T(this,nf,u);return}T(this,nf,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(l,c);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let y;const g=new RegExp(`^${tU}[0-9]+$`);for(const w of p)if(g.test(w.id)){y=w.id;break}if(!y)return;const S=h(this,ds).get(y);(S==null?void 0:S.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),S.dblclick())},{signal:r,capture:!0})}const e=new Map,t=new Map;for(const r of h(this,ds).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(h(this,Ki)){const r=h(this,Ki).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(h(this,ee).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(h(this,ee).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}I(this,sf,O0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of h(Qs,ba).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),T(this,tf,!1)}getEditableAnnotation(e){var t;return((t=h(this,Ki))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){h(this,ee).getActive()!==e&&h(this,ee).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=h(this,Ht))!=null&&e.div&&!h(this,qr)){T(this,qr,new AbortController);const t=h(this,ee).combinedSignal(h(this,qr));h(this,Ht).div.addEventListener("pointerdown",I(this,B_,hz).bind(this),{signal:t}),h(this,Ht).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=h(this,Ht))!=null&&e.div&&h(this,qr)&&(h(this,qr).abort(),T(this,qr,null),h(this,Ht).div.classList.remove("highlighting"))}enableClick(){if(h(this,ya))return;T(this,ya,new AbortController);const e=h(this,ee).combinedSignal(h(this,ya));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=h(this,ya))==null||e.abort(),T(this,ya,null)}attach(e){h(this,ds).set(e.id,e);const{annotationElementId:t}=e;t&&h(this,ee).isDeletedAnnotationElement(t)&&h(this,ee).removeDeletedAnnotationElement(e)}detach(e){var t;h(this,ds).delete(e.id),(t=h(this,Kc))==null||t.removePointerInTextLayer(e.contentDiv),!h(this,tf)&&e.annotationElementId&&h(this,ee).addDeletedAnnotationElement(e)}remove(e){this.detach(e),h(this,ee).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(h(this,ee).addDeletedAnnotationElement(e.annotationElementId),We.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),h(this,ee).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!h(this,qc)),h(this,ee).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!h(this,Yr)&&(e._focusEventsAllowed=!1,T(this,Yr,setTimeout(()=>{T(this,Yr,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:h(this,ee)._signal}),t.focus())},0))),e._structTreeParentId=(s=h(this,Kc))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return h(this,ee).getId()}combinedSignal(e){return h(this,ee).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=h(this,Fs,Ii))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await h(this,ee).updateMode(e.mode);const{offsetX:s,offsetY:i}=I(this,dv,YT).call(this),r=this.getNextId(),o=I(this,hv,GT).call(this,{parent:this,id:r,x:s,y:i,uiManager:h(this,ee),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=h(Qs,ba).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,h(this,ee)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=I(this,hv,GT).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:h(this,ee),isCentered:t,...s});return r&&this.add(r),r}addNewEditor(e={}){this.createAndAddNewEditor(I(this,dv,YT).call(this),!0,e)}setSelected(e){h(this,ee).setSelected(e)}toggleSelected(e){h(this,ee).toggleSelected(e)}unselect(e){h(this,ee).unselect(e)}pointerup(e){var i;const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!h(this,va)||(T(this,va,!1),(i=h(this,Fs,Ii))!=null&&i.isDrawer&&h(this,Fs,Ii).supportMultipleDrawings))return;if(!h(this,ef)){T(this,ef,!0);return}const s=h(this,ee).getMode();if(s===le.STAMP||s===le.SIGNATURE){h(this,ee).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(h(this,ee).getMode()===le.HIGHLIGHT&&this.enableTextSelection(),h(this,va)){T(this,va,!1);return}const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(T(this,va,!0),(i=h(this,Fs,Ii))!=null&&i.isDrawer){this.startDrawingSession(e);return}const s=h(this,ee).getActive();T(this,ef,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),h(this,hi)){h(this,Fs,Ii).startDrawing(this,h(this,ee),!1,e);return}h(this,ee).setCurrentDrawingSession(this),T(this,hi,new AbortController);const t=h(this,ee).combinedSignal(h(this,hi));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(T(this,Kr,null),this.commitOrRemove())},{signal:t}),h(this,Fs,Ii).startDrawing(this,h(this,ee),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&T(this,Kr,t);return}h(this,Kr)&&setTimeout(()=>{var t;(t=h(this,Kr))==null||t.focus(),T(this,Kr,null)},0)}endDrawingSession(e=!1){return h(this,hi)?(h(this,ee).setCurrentDrawingSession(null),h(this,hi).abort(),T(this,hi,null),T(this,Kr,null),h(this,Fs,Ii).endDrawing(e)):null}findNewParent(e,t,s){const i=h(this,ee).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return h(this,hi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){h(this,hi)&&h(this,Fs,Ii).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=h(this,ee).getActive())==null?void 0:e.parent)===this&&(h(this,ee).commitOrRemove(),h(this,ee).setActiveEditor(null)),h(this,Yr)&&(clearTimeout(h(this,Yr)),T(this,Yr,null));for(const s of h(this,ds).values())(t=h(this,Kc))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,h(this,ds).clear(),h(this,ee).removeLayer(this)}render({viewport:e}){this.viewport=e,Ya(this.div,e);for(const t of h(this,ee).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){h(this,ee).commitOrRemove(),I(this,sf,O0).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Ya(this.div,{rotation:s}),t!==s)for(const i of h(this,ds).values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return h(this,ee).viewParameters.realScale}};Kc=new WeakMap,ef=new WeakMap,Ki=new WeakMap,ya=new WeakMap,Yr=new WeakMap,ds=new WeakMap,va=new WeakMap,tf=new WeakMap,qc=new WeakMap,hi=new WeakMap,Kr=new WeakMap,Ht=new WeakMap,qr=new WeakMap,wa=new WeakMap,nf=new WeakMap,ee=new WeakMap,ba=new WeakMap,B_=new WeakSet,hz=function(e){h(this,ee).unselectAll();const{target:t}=e;if(t===h(this,Ht).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&h(this,Ht).div.contains(t)){const{isMac:s}=Yt.platform;if(e.button!==0||e.ctrlKey&&s)return;h(this,ee).showAllEditors("highlight",!0,!0),h(this,Ht).div.classList.add("free"),this.toggleDrawing(),Yb.startHighlighting(this,h(this,ee).direction==="ltr",{target:h(this,Ht).div,x:e.x,y:e.y}),h(this,Ht).div.addEventListener("pointerup",()=>{h(this,Ht).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:h(this,ee)._signal}),e.preventDefault()}},Fs=new WeakSet,Ii=function(){return h(Qs,ba).get(h(this,ee).getMode())},hv=new WeakSet,GT=function(e){const t=h(this,Fs,Ii);return t?new t.prototype.constructor(e):null},dv=new WeakSet,YT=function(){const{x:e,y:t,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+s),l=Math.min(window.innerHeight,t+i),c=(r+a)/2-e,u=(o+l)/2-t,[d,f]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:d,offsetY:f}},sf=new WeakSet,O0=function(){for(const e of h(this,ds).values())e.isEmpty()&&e.remove()},V(Qs,"_initialized",!1),C(Qs,ba,new Map([ET,FT,zT,Yb,$T].map(e=>[e._editorType,e])));let qb=Qs;var di,An,Xc,fv,H_,dz,pv,KT,V_,fz,mv,qT;const Tt=class Tt{constructor({pageIndex:e}){C(this,pv);C(this,V_);C(this,mv);C(this,di,null);C(this,An,new Map);C(this,Xc,new Map);this.pageIndex=e}setParent(e){if(!h(this,di)){T(this,di,e);return}if(h(this,di)!==e){if(h(this,An).size>0)for(const t of h(this,An).values())t.remove(),e.append(t);T(this,di,e)}}static get _svgFactory(){return _e(this,"_svgFactory",new Xm)}draw(e,t=!1,s=!1){const i=bn(Tt,fv)._++,r=I(this,pv,KT).call(this),o=Tt._svgFactory.createElement("defs");r.append(o);const a=Tt._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&h(this,Xc).set(i,a);const c=s?I(this,V_,fz).call(this,o,l):null,u=Tt._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(r,e),h(this,An).set(i,r),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,t){const s=bn(Tt,fv)._++,i=I(this,pv,KT).call(this),r=Tt._svgFactory.createElement("defs");i.append(r);const o=Tt._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const d=Tt._svgFactory.createElement("mask");r.append(d),l=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=Tt._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Tt._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const c=Tt._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,e),h(this,An).set(s,i),s}finalizeDraw(e,t){h(this,Xc).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:s,bbox:i,rootClass:r,path:o}=t,a=typeof e=="number"?h(this,An).get(e):e;if(a){if(s&&I(this,mv,qT).call(this,a,s),i&&I(l=Tt,H_,dz).call(l,a,i),r){const{classList:c}=a;for(const[u,d]of Object.entries(r))c.toggle(u,d)}if(o){const u=a.firstChild.firstChild;I(this,mv,qT).call(this,u,o)}}}updateParent(e,t){if(t===this)return;const s=h(this,An).get(e);s&&(h(t,di).append(s),h(this,An).delete(e),h(t,An).set(e,s))}remove(e){h(this,Xc).delete(e),h(this,di)!==null&&(h(this,An).get(e).remove(),h(this,An).delete(e))}destroy(){T(this,di,null);for(const e of h(this,An).values())e.remove();h(this,An).clear(),h(this,Xc).clear()}};di=new WeakMap,An=new WeakMap,Xc=new WeakMap,fv=new WeakMap,H_=new WeakSet,dz=function(e,[t,s,i,r]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},pv=new WeakSet,KT=function(){const e=Tt._svgFactory.create(1,1,!0);return h(this,di).append(e),e.setAttribute("aria-hidden",!0),e},V_=new WeakSet,fz=function(e,t){const s=Tt._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Tt._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},mv=new WeakSet,qT=function(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)},C(Tt,H_),C(Tt,fv,0);let Xb=Tt;globalThis._pdfjsTestingUtils={HighlightOutliner:AT};globalThis.pdfjsLib={AbortException:po,AnnotationEditorLayer:qb,AnnotationEditorParamsType:Ce,AnnotationEditorType:le,AnnotationEditorUIManager:Ka,AnnotationLayer:WP,AnnotationMode:Qi,AnnotationType:gt,build:f$,ColorPicker:Qm,createValidAbsoluteUrl:NP,DOMSVGFactory:Xm,DrawLayer:Xb,FeatureTest:Yt,fetchData:Uf,getDocument:VP,getFilenameFromUrl:aU,getPdfFilenameFromUrl:lU,getUuid:LP,getXfaPageViewport:cU,GlobalWorkerOptions:Hs,ImageKind:rm,InvalidPDFException:$b,isDataScheme:Uv,isPdfFile:QS,isValidExplicitDest:$U,MathClamp:pn,noContextMenu:Ys,normalizeUnicode:rU,OPS:Wm,OutputScale:Ci,PasswordResponses:sU,PDFDataRangeTransport:UP,PDFDateString:JS,PDFWorker:Ef,PermissionFlag:nU,PixelsPerInch:mo,RenderingCancelledException:XS,ResponseException:Gm,setLayerDimensions:Ya,shadow:_e,SignatureExtractor:Et,stopEvent:wt,SupportedImageMimeTypes:zb,TextLayer:Km,TouchManager:Ym,updateUrlHash:DP,Util:se,VerbosityLevel:Bv,version:d$,XfaLayer:$P};const gce=Object.freeze(Object.defineProperty({__proto__:null,AbortException:po,AnnotationEditorLayer:qb,AnnotationEditorParamsType:Ce,AnnotationEditorType:le,AnnotationEditorUIManager:Ka,AnnotationLayer:WP,AnnotationMode:Qi,AnnotationType:gt,ColorPicker:Qm,DOMSVGFactory:Xm,DrawLayer:Xb,FeatureTest:Yt,GlobalWorkerOptions:Hs,ImageKind:rm,InvalidPDFException:$b,MathClamp:pn,OPS:Wm,OutputScale:Ci,PDFDataRangeTransport:UP,PDFDateString:JS,PDFWorker:Ef,PasswordResponses:sU,PermissionFlag:nU,PixelsPerInch:mo,RenderingCancelledException:XS,ResponseException:Gm,SignatureExtractor:Et,SupportedImageMimeTypes:zb,TextLayer:Km,TouchManager:Ym,Util:se,VerbosityLevel:Bv,XfaLayer:$P,build:f$,createValidAbsoluteUrl:NP,fetchData:Uf,getDocument:VP,getFilenameFromUrl:aU,getPdfFilenameFromUrl:lU,getUuid:LP,getXfaPageViewport:cU,isDataScheme:Uv,isPdfFile:QS,isValidExplicitDest:$U,noContextMenu:Ys,normalizeUnicode:rU,setLayerDimensions:Ya,shadow:_e,stopEvent:wt,updateUrlHash:DP,version:d$},Symbol.toStringTag,{value:"Module"}));var IL=Object.prototype.hasOwnProperty;function PL(n,e,t){for(t of n.keys())if(Sh(t,e))return t}function Sh(n,e){var t,s,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&Sh(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(i=s,i&&typeof i=="object"&&(i=PL(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(i=s[0],i&&typeof i=="object"&&(i=PL(e,i),!i)||!Sh(s[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(IL.call(n,t)&&++s&&!IL.call(e,t)||!(t in e)||!Sh(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function Gv(n){let e=!1;return{promise:new Promise((s,i)=>{n.then(r=>!e&&s(r)).catch(r=>!e&&i(r))}),cancel(){e=!0}}}const yce=["onCopy","onCut","onPaste"],vce=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],wce=["onFocus","onBlur"],bce=["onInput","onInvalid","onReset","onSubmit"],xce=["onLoad","onError"],_ce=["onKeyDown","onKeyPress","onKeyUp"],Sce=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Ece=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Cce=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Ace=["onSelect"],Tce=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],kce=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Ice=["onScroll"],Pce=["onWheel"],Rce=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Mce=["onTransitionEnd"],Nce=["onToggle"],Dce=["onChange"],Lce=[...yce,...vce,...wce,...bce,...xce,..._ce,...Sce,...Ece,...Cce,...Ace,...Tce,...kce,...Ice,...Pce,...Rce,...Mce,...Dce,...Nce];function pz(n,e){const t={};for(const s of Lce){const i=n[s];i&&(e?t[s]=r=>i(r,e(s)):t[s]=i)}return t}var Oce=!0,DE="Invariant failed";function Be(n,e){if(!n){if(Oce)throw new Error(DE);var t=typeof e=="function"?e():e,s=t?"".concat(DE,": ").concat(t):DE;throw new Error(s)}}var Fce=function(){},jce=Fce;const yn=Af(jce),Bce=E.createContext(null),mz=Bce,Hce="noopener noreferrer nofollow";class Vce{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Be(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){Be(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Be(this.pdfDocument,"PDF document not loaded."),Be(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Be(Array.isArray(t),`"${t}" is not a valid destination array.`);const s=t[0];new Promise(i=>{Be(this.pdfDocument,"PDF document not loaded."),s instanceof Object?this.pdfDocument.getPageIndex(s).then(r=>{i(r)}).catch(()=>{Be(!1,`"${s}" is not a valid page reference.`)}):typeof s=="number"?i(s):Be(!1,`"${s}" is not a valid destination reference.`)}).then(i=>{const r=i+1;Be(this.pdfViewer,"PDF viewer is not initialized."),Be(r>=1&&r<=this.pagesCount,`"${r}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:r})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Be(this.pdfViewer,"PDF viewer is not initialized."),Be(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||Hce,e.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function Eh({children:n,type:e}){return b.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const Uce={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},RL=Uce;function $ce(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Cf(){return E.useReducer($ce,{value:void 0,error:void 0})}const t1=typeof window<"u",gz=t1&&window.location.protocol==="file:";function zce(n){return typeof n<"u"}function al(n){return zce(n)&&n!==null}function Wce(n){return typeof n=="string"}function Gce(n){return n instanceof ArrayBuffer}function Yce(n){return Be(t1,"isBlob can only be used in a browser environment"),n instanceof Blob}function XT(n){return Wce(n)&&/^data:/.test(n)}function ML(n){Be(XT(n),"Invalid data URI.");const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function Kce(){return t1&&window.devicePixelRatio||1}const yz="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function NL(){yn(!gz,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${yz}`)}function qce(){yn(!gz,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${yz}`)}function gu(n){n!=null&&n.cancel&&n.cancel()}function QT(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function Xce(n){return n.name==="RenderingCancelledException"}function Qce(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:r}=i.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:Jce}=gce,Zce=(n,e)=>{switch(e){case RL.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case RL.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function DL(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const eue=E.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:r,file:o,inputRef:a,imageResourcesPath:l,loading:c="Loading PDF…",noData:u="No PDF file specified.",onItemClick:d,onLoadError:f,onLoadProgress:p,onLoadSuccess:y,onPassword:g=Zce,onSourceError:S,onSourceSuccess:w,options:_,renderMode:v,rotate:m,scale:x,...A},k){const[P,R]=Cf(),{value:M,error:N}=P,[F,H]=Cf(),{value:D,error:$}=F,L=E.useRef(new Vce),B=E.useRef([]),O=E.useRef(void 0),j=E.useRef(void 0);o&&o!==O.current&&DL(o)&&(yn(!Sh(o,O.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),O.current=o),_&&_!==j.current&&(yn(!Sh(_,j.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),j.current=_);const z=E.useRef({scrollPageIntoView:ae=>{const{dest:Te,pageNumber:Ge,pageIndex:Qe=Ge-1}=ae;if(d){d({dest:Te,pageIndex:Qe,pageNumber:Ge});return}const Cs=B.current[Qe];if(Cs){Cs.scrollIntoView();return}yn(!1,`An internal link leading to page ${Ge} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});E.useImperativeHandle(k,()=>({linkService:L,pages:B,viewer:z}),[]);function W(){w&&w()}function K(){N&&(yn(!1,N.toString()),S&&S(N))}function Z(){R({type:"RESET"})}E.useEffect(Z,[o,R]);const de=E.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return XT(o)?{data:ML(o)}:(NL(),{url:o});if(o instanceof Jce)return{range:o};if(Gce(o))return{data:o};if(t1&&Yce(o))return{data:await Qce(o)};if(Be(typeof o=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),Be(DL(o),"Invalid parameter object: need either .data, .range or .url"),"url"in o&&typeof o.url=="string"){if(XT(o.url)){const{url:ae,...Te}=o;return{data:ML(ae),...Te}}NL()}return o},[o]);E.useEffect(()=>{const ae=Gv(de());return ae.promise.then(Te=>{R({type:"RESOLVE",value:Te})}).catch(Te=>{R({type:"REJECT",error:Te})}),()=>{gu(ae)}},[de,R]),E.useEffect(()=>{if(!(typeof M>"u")){if(M===!1){K();return}W()}},[M]);function Me(){D&&(y&&y(D),B.current=new Array(D.numPages),L.current.setDocument(D))}function ue(){$&&(yn(!1,$.toString()),f&&f($))}E.useEffect(function(){H({type:"RESET"})},[H,M]),E.useEffect(function(){if(!M)return;const Te=_?{...M,..._}:M,Ge=VP(Te);p&&(Ge.onProgress=p),g&&(Ge.onPassword=g);const Qe=Ge,Cs=Qe.promise.then(rl=>{H({type:"RESOLVE",value:rl})}).catch(rl=>{Qe.destroyed||H({type:"REJECT",error:rl})});return()=>{Cs.finally(()=>Qe.destroy())}},[_,H,M]),E.useEffect(()=>{if(!(typeof D>"u")){if(D===!1){ue();return}Me()}},[D]),E.useEffect(function(){L.current.setViewer(z.current),L.current.setExternalLinkRel(i),L.current.setExternalLinkTarget(r)},[i,r]);const G=E.useCallback((ae,Te)=>{B.current[ae]=Te},[]),fe=E.useCallback(ae=>{delete B.current[ae]},[]),he=E.useMemo(()=>({imageResourcesPath:l,linkService:L.current,onItemClick:d,pdf:D,registerPage:G,renderMode:v,rotate:m,scale:x,unregisterPage:fe}),[l,d,D,G,v,m,x,fe]),ne=E.useMemo(()=>pz(A,()=>D),[A,D]);function oe(){function ae(Ge){return!!(Ge!=null&&Ge.pdf)}if(!ae(he))throw new Error("pdf is undefined");const Te=typeof e=="function"?e(he):e;return b.jsx(mz.Provider,{value:he,children:Te})}function ye(){return o?D==null?b.jsx(Eh,{type:"loading",children:typeof c=="function"?c():c}):D===!1?b.jsx(Eh,{type:"error",children:typeof s=="function"?s():s}):oe():b.jsx(Eh,{type:"no-data",children:typeof u=="function"?u():u})}return b.jsx("div",{className:Rf("react-pdf__Document",t),ref:a,...ne,children:ye()})}),tue=eue;function vz(){return E.useContext(mz)}function wz(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(r){for(var o=0,a=t;o<a.length;o++){var l=a[o];typeof l=="function"?l(r):l&&(l.current=r)}}}const nue=E.createContext(null),bz=nue;function n1(){return E.useContext(bz)}function sue(){const n=vz(),e=n1();Be(e,"Unable to find Page context.");const t={...n,...e},{imageResourcesPath:s,linkService:i,onGetAnnotationsError:r,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:l,page:c,pdf:u,renderForms:d,rotate:f,scale:p=1}=t;Be(u,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),Be(c,"Attempted to load page annotations, but no page was specified."),Be(i,"Attempted to load page annotations, but no linkService was specified.");const[y,g]=Cf(),{value:S,error:w}=y,_=E.useRef(null);yn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function v(){S&&o&&o(S)}function m(){w&&(yn(!1,w.toString()),r&&r(w))}E.useEffect(function(){g({type:"RESET"})},[g,c]),E.useEffect(function(){if(!c)return;const R=Gv(c.getAnnotations()),M=R;return R.promise.then(N=>{g({type:"RESOLVE",value:N})}).catch(N=>{g({type:"REJECT",error:N})}),()=>{gu(M)}},[g,c]),E.useEffect(()=>{if(S!==void 0){if(S===!1){m();return}v()}},[S]);function x(){l&&l()}function A(P){yn(!1,`${P}`),a&&a(P)}const k=E.useMemo(()=>c.getViewport({scale:p,rotation:f}),[c,f,p]);return E.useEffect(function(){if(!u||!c||!i||!S)return;const{current:R}=_;if(!R)return;const M=k.clone({dontFlip:!0}),N={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:R,l10n:null,page:c,structTreeLayer:null,viewport:M},F={annotations:S,annotationStorage:u.annotationStorage,div:R,imageResourcesPath:s,linkService:i,page:c,renderForms:d,viewport:M};R.innerHTML="";try{new WP(N).render(F),x()}catch(H){A(H)}return()=>{}},[S,s,i,c,u,d,k]),b.jsx("div",{className:Rf("react-pdf__Page__annotations","annotationLayer"),ref:_})}const xz={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},iue=/^H(\d+)$/;function rue(n){return n in xz}function s1(n){return"children"in n}function _z(n){return s1(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function oue(n){const e={};if(s1(n)){const{role:t}=n,s=t.match(iue);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(rue(t)){const i=xz[t];i&&(e.role=i)}}return e}function Sz(n){const e={};if(s1(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),_z(n)){const[t]=n.children;if(t){const s=Sz(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function aue(n){return n?{...oue(n),...Sz(n)}:null}function Ez({className:n,node:e}){const t=E.useMemo(()=>aue(e),[e]),s=E.useMemo(()=>!s1(e)||_z(e)?null:e.children.map((i,r)=>b.jsx(Ez,{node:i},r)),[e]);return b.jsx("span",{className:n,...t,children:s})}function lue(){const n=n1();Be(n,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,i]=Cf(),{value:r,error:o}=s,{customTextRenderer:a,page:l}=n;function c(){r&&t&&t(r)}function u(){o&&(yn(!1,o.toString()),e&&e(o))}return E.useEffect(function(){i({type:"RESET"})},[i,l]),E.useEffect(function(){if(a||!l)return;const f=Gv(l.getStructTree()),p=f;return f.promise.then(y=>{i({type:"RESOLVE",value:y})}).catch(y=>{i({type:"REJECT",error:y})}),()=>gu(p)},[a,l,i]),E.useEffect(()=>{if(r!==void 0){if(r===!1){u();return}c()}},[r]),r?b.jsx(Ez,{className:"react-pdf__Page__structTree structTree",node:r}):null}const LL=Qi;function cue(n){const e=n1();Be(e,"Unable to find Page context.");const t={...e,...n},{_className:s,canvasBackground:i,devicePixelRatio:r=Kce(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:c,renderTextLayer:u,rotate:d,scale:f}=t,{canvasRef:p}=n;Be(l,"Attempted to render page canvas, but no page was specified.");const y=E.useRef(null);function g(){l&&a&&a(QT(l,f))}function S(m){Xce(m)||(yn(!1,m.toString()),o&&o(m))}const w=E.useMemo(()=>l.getViewport({scale:f*r,rotation:d}),[r,l,d,f]),_=E.useMemo(()=>l.getViewport({scale:f,rotation:d}),[l,d,f]);E.useEffect(function(){if(!l)return;l.cleanup();const{current:x}=y;if(!x)return;x.width=w.width,x.height=w.height,x.style.width=`${Math.floor(_.width)}px`,x.style.height=`${Math.floor(_.height)}px`,x.style.visibility="hidden";const A={annotationMode:c?LL.ENABLE_FORMS:LL.ENABLE,canvasContext:x.getContext("2d",{alpha:!1}),viewport:w};i&&(A.background=i);const k=l.render(A),P=k;return k.promise.then(()=>{x.style.visibility="",g()}).catch(S),()=>gu(P)},[i,l,c,w,_]);const v=E.useCallback(()=>{const{current:m}=y;m&&(m.width=0,m.height=0)},[]);return E.useEffect(()=>v,[v]),b.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:wz(p,y),style:{display:"block",userSelect:"none"},children:u?b.jsx(lue,{}):null})}function uue(n){return"str"in n}function hue(){const n=n1();Be(n,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:i,onRenderTextLayerSuccess:r,page:o,pageIndex:a,pageNumber:l,rotate:c,scale:u}=n;Be(o,"Attempted to load page text content, but no page was specified.");const[d,f]=Cf(),{value:p,error:y}=d,g=E.useRef(null);yn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){p&&s&&s(p)}function w(){y&&(yn(!1,y.toString()),t&&t(y))}E.useEffect(function(){f({type:"RESET"})},[o,f]),E.useEffect(function(){if(!o)return;const P=Gv(o.getTextContent()),R=P;return P.promise.then(M=>{f({type:"RESOLVE",value:M})}).catch(M=>{f({type:"REJECT",error:M})}),()=>gu(R)},[o,f]),E.useEffect(()=>{if(p!==void 0){if(p===!1){w();return}S()}},[p]);const _=E.useCallback(()=>{r&&r()},[r]),v=E.useCallback(k=>{yn(!1,k.toString()),i&&i(k)},[i]);function m(){const k=g.current;k&&k.classList.add("selecting")}function x(){const k=g.current;k&&k.classList.remove("selecting")}const A=E.useMemo(()=>o.getViewport({scale:u,rotation:c}),[o,c,u]);return E.useLayoutEffect(function(){if(!o||!p)return;const{current:P}=g;if(!P)return;P.innerHTML="";const R=o.streamTextContent({includeMarkedContent:!0}),M={container:P,textContentSource:R,viewport:A},N=new Km(M),F=N;return N.render().then(()=>{const H=document.createElement("div");H.className="endOfContent",P.append(H);const D=P.querySelectorAll('[role="presentation"]');if(e){let $=0;p.items.forEach((L,B)=>{if(!uue(L))return;const O=D[$];if(!O)return;const j=e({pageIndex:a,pageNumber:l,itemIndex:B,...L});O.innerHTML=j,$+=L.str&&L.hasEOL?2:1})}_()}).catch(v),()=>gu(F)},[e,v,_,o,a,l,p,A]),b.jsx("div",{className:Rf("react-pdf__Page__textContent","textLayer"),onMouseUp:x,onMouseDown:m,ref:g})}const OL=1;function due(n){const t={...vz(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:o,children:a,className:l,customRenderer:c,customTextRenderer:u,devicePixelRatio:d,error:f="Failed to load the page.",height:p,inputRef:y,loading:g="Loading page…",noData:S="No page specified.",onGetAnnotationsError:w,onGetAnnotationsSuccess:_,onGetStructTreeError:v,onGetStructTreeSuccess:m,onGetTextError:x,onGetTextSuccess:A,onLoadError:k,onLoadSuccess:P,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:M,onRenderError:N,onRenderSuccess:F,onRenderTextLayerError:H,onRenderTextLayerSuccess:D,pageIndex:$,pageNumber:L,pdf:B,registerPage:O,renderAnnotationLayer:j=!0,renderForms:z=!1,renderMode:W="canvas",renderTextLayer:K=!0,rotate:Z,scale:de=OL,unregisterPage:Me,width:ue,...G}=t,[fe,he]=Cf(),{value:ne,error:oe}=fe,ye=E.useRef(null);Be(B,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const ae=al(L)?L-1:$??null,Te=L??(al($)?$+1:null),Ge=Z??(ne?ne.rotate:null),Qe=E.useMemo(()=>{if(!ne)return null;let bo=1;const ku=de??OL;if(ue||p){const xo=ne.getViewport({scale:1,rotation:Ge});ue?bo=ue/xo.width:p&&(bo=p/xo.height)}return ku*bo},[p,ne,Ge,de,ue]);E.useEffect(function(){return()=>{al(ae)&&i&&Me&&Me(ae)}},[i,B,ae,Me]);function Cs(){if(P){if(!ne||!Qe)return;P(QT(ne,Qe))}if(i&&O){if(!al(ae)||!ye.current)return;O(ae,ye.current)}}function rl(){oe&&(yn(!1,oe.toString()),k&&k(oe))}E.useEffect(function(){he({type:"RESET"})},[he,B,ae]),E.useEffect(function(){if(!B||!Te)return;const ku=Gv(B.getPage(Te)),xo=ku;return ku.promise.then(r1=>{he({type:"RESOLVE",value:r1})}).catch(r1=>{he({type:"REJECT",error:r1})}),()=>gu(xo)},[he,B,Te]),E.useEffect(()=>{if(ne!==void 0){if(ne===!1){rl();return}Cs()}},[ne,Qe]);const wo=E.useMemo(()=>al(ae)&&Te&&al(Ge)&&al(Qe)?{_className:s,canvasBackground:r,customTextRenderer:u,devicePixelRatio:d,onGetAnnotationsError:w,onGetAnnotationsSuccess:_,onGetStructTreeError:v,onGetStructTreeSuccess:m,onGetTextError:x,onGetTextSuccess:A,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:M,onRenderError:N,onRenderSuccess:F,onRenderTextLayerError:H,onRenderTextLayerSuccess:D,page:ne,pageIndex:ae,pageNumber:Te,renderForms:z,renderTextLayer:K,rotate:Ge,scale:Qe}:null,[s,r,u,d,w,_,v,m,x,A,R,M,N,F,H,D,ne,ae,Te,z,K,Ge,Qe]),qz=E.useMemo(()=>pz(G,()=>ne&&(Qe?QT(ne,Qe):void 0)),[G,ne,Qe]),Kv=`${ae}@${Qe}/${Ge}`;function Xz(){switch(W){case"custom":return Be(c,'renderMode was set to "custom", but no customRenderer was passed.'),b.jsx(c,{},`${Kv}_custom`);case"none":return null;case"canvas":default:return b.jsx(cue,{canvasRef:o},`${Kv}_canvas`)}}function Qz(){return K?b.jsx(hue,{},`${Kv}_text`):null}function Jz(){return j?b.jsx(sue,{},`${Kv}_annotations`):null}function Zz(){function bo(xo){return!!(xo!=null&&xo.page)}if(!bo(wo))throw new Error("page is undefined");const ku=typeof a=="function"?a(wo):a;return b.jsxs(bz.Provider,{value:wo,children:[Xz(),Qz(),Jz(),ku]})}function eW(){return Te?B===null||ne===void 0||ne===null?b.jsx(Eh,{type:"loading",children:typeof g=="function"?g():g}):B===!1||ne===!1?b.jsx(Eh,{type:"error",children:typeof f=="function"?f():f}):Zz():b.jsx(Eh,{type:"no-data",children:typeof S=="function"?S():S})}return b.jsx("div",{className:Rf(s,l),"data-page-number":Te,ref:wz(y,ye),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Qe}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...qz,children:eW()})}qce();Hs.workerSrc="pdf.worker.mjs";var JT={exports:{}};(function(n,e){(function(t,s){s(e)})(iW,function(t){class s{constructor(m,x){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=x,this.nowDrawingDensity=this.createdDensity,this.render=m}setDensity(m){this.createdDensity=m,this.nowDrawingDensity=m}setDrawingDensity(m){this.nowDrawingDensity=m}setPosition(m){this.state.position=m}setAngle(m){this.state.angle=m}setArea(m){this.state.area=m}setHardDrawingAngle(m){this.state.hardDrawingAngle=m}setHardAngle(m){this.state.hardAngle=m,this.state.hardDrawingAngle=m}setOrientation(m){this.orientation=m}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends s{constructor(m,x,A){super(m,A),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=x}draw(m){const x=this.render.getContext(),A=this.render.convertToGlobal(this.state.position),k=this.render.getRect().pageWidth,P=this.render.getRect().height;x.save(),x.translate(A.x,A.y),x.beginPath();for(let R of this.state.area)R!==null&&(R=this.render.convertToGlobal(R),x.lineTo(R.x-A.x,R.y-A.y));x.rotate(this.state.angle),x.clip(),this.isLoad?x.drawImage(this.image,0,0,k,P):this.drawLoader(x,{x:0,y:0},k,P),x.restore()}simpleDraw(m){const x=this.render.getRect(),A=this.render.getContext(),k=x.pageWidth,P=x.height,R=m===1?x.left+x.pageWidth:x.left,M=x.top;this.isLoad?A.drawImage(this.image,R,M,k,P):this.drawLoader(A,{x:R,y:M},k,P)}drawLoader(m,x,A,k){m.beginPath(),m.strokeStyle="rgb(200, 200, 200)",m.fillStyle="rgb(255, 255, 255)",m.lineWidth=1,m.rect(x.x+1,x.y+1,A-1,k-1),m.stroke(),m.fill();const P={x:x.x+A/2,y:x.y+k/2};m.beginPath(),m.lineWidth=10,m.arc(P.x,P.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),m.stroke(),m.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class r{constructor(m,x){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=x,this.app=m,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let x=0;x<this.pages.length;x++)this.portraitSpread.push([x]);let m=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([m]),m++);for(let x=m;x<this.pages.length;x+=2)x<this.pages.length-1?this.landscapeSpread.push([x,x+1]):(this.landscapeSpread.push([x]),this.pages[x].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(m){const x=this.getSpread();for(let A=0;A<x.length;A++)if(m===x[A][0]||m===x[A][1])return A;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(m){if(m>=0&&m<this.pages.length)return this.pages[m];throw new Error("Invalid page number")}nextBy(m){const x=this.pages.indexOf(m);return x<this.pages.length-1?this.pages[x+1]:null}prevBy(m){const x=this.pages.indexOf(m);return x>0?this.pages[x-1]:null}getFlippingPage(m){const x=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return m===0?this.pages[x].newTemporaryCopy():this.pages[x-1];{const A=m===0?this.getSpread()[x+1]:this.getSpread()[x-1];return A.length===1||m===0?this.pages[A[0]]:this.pages[A[1]]}}getBottomPage(m){const x=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return m===0?this.pages[x+1]:this.pages[x-1];{const A=m===0?this.getSpread()[x+1]:this.getSpread()[x-1];return A.length===1?this.pages[A[0]]:m===0?this.pages[A[1]]:this.pages[A[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(m=null){if(m===null&&(m=this.currentPageIndex),m<0||m>=this.pages.length)return;const x=this.getSpreadIndexByPage(m);x!==null&&(this.currentSpreadIndex=x,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(m){if(!(m>=0&&m<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=m}showSpread(){const m=this.getSpread()[this.currentSpreadIndex];m.length===2?(this.render.setLeftPage(this.pages[m[0]]),this.render.setRightPage(this.pages[m[1]])):this.render.getOrientation()==="landscape"&&m[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[m[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[m[0]])),this.currentPageIndex=m[0],this.app.updatePageIndex(this.currentPageIndex)}}class o extends r{constructor(m,x,A){super(m,x),this.imagesHref=A}load(){for(const m of this.imagesHref){const x=new i(this.render,m,"soft");x.load(),this.pages.push(x)}this.createSpread()}}class a{static GetDistanceBetweenTwoPoint(m,x){return m===null||x===null?1/0:Math.sqrt(Math.pow(x.x-m.x,2)+Math.pow(x.y-m.y,2))}static GetSegmentLength(m){return a.GetDistanceBetweenTwoPoint(m[0],m[1])}static GetAngleBetweenTwoLine(m,x){const A=m[0].y-m[1].y,k=x[0].y-x[1].y,P=m[1].x-m[0].x,R=x[1].x-x[0].x;return Math.acos((A*k+P*R)/(Math.sqrt(A*A+P*P)*Math.sqrt(k*k+R*R)))}static PointInRect(m,x){return x===null?null:x.x>=m.left&&x.x<=m.width+m.left&&x.y>=m.top&&x.y<=m.top+m.height?x:null}static GetRotatedPoint(m,x,A){return{x:m.x*Math.cos(A)+m.y*Math.sin(A)+x.x,y:m.y*Math.cos(A)-m.x*Math.sin(A)+x.y}}static LimitPointToCircle(m,x,A){if(a.GetDistanceBetweenTwoPoint(m,A)<=x)return A;const k=m.x,P=m.y,R=A.x,M=A.y;let N=Math.sqrt(Math.pow(x,2)*Math.pow(k-R,2)/(Math.pow(k-R,2)+Math.pow(P-M,2)))+k;A.x<0&&(N*=-1);let F=(N-k)*(P-M)/(k-R)+P;return k-R+P===0&&(F=x),{x:N,y:F}}static GetIntersectBetweenTwoSegment(m,x,A){return a.PointInRect(m,a.GetIntersectBeetwenTwoLine(x,A))}static GetIntersectBeetwenTwoLine(m,x){const A=m[0].y-m[1].y,k=x[0].y-x[1].y,P=m[1].x-m[0].x,R=x[1].x-x[0].x,M=m[0].x*m[1].y-m[1].x*m[0].y,N=x[0].x*x[1].y-x[1].x*x[0].y,F=A*N-k*M,H=P*N-R*M,D=-(M*R-N*P)/(A*R-k*P),$=-(A*N-k*M)/(A*R-k*P);if(isFinite(D)&&isFinite($))return{x:D,y:$};if(Math.abs(F-H)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(m,x){const A=Math.abs(m.x-x.x),k=Math.abs(m.y-x.y),P=Math.max(A,k),R=[m];function M(N,F,H,D,$){return F>N?N+$*(H/D):F<N?N-$*(H/D):N}for(let N=1;N<=P;N+=1)R.push({x:M(m.x,x.x,A,P,N),y:M(m.y,x.y,k,P,N)});return R}}class l extends s{constructor(m,x,A){super(m,A),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=x,this.element.classList.add("stf__item"),this.element.classList.add("--"+A)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new l(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(m){const x=m||this.nowDrawingDensity,A=this.render.convertToGlobal(this.state.position),k=this.render.getRect().pageWidth,P=this.render.getRect().height;this.element.classList.remove("--simple");const R=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${k}px;
            height: ${P}px;
        `;x==="hard"?this.drawHard(R):this.drawSoft(A,R)}drawHard(m=""){const x=this.render.getRect().left+this.render.getRect().width/2,A=this.state.hardDrawingAngle,k=m+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${A}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${x}px, 0, 0) rotateY(${A}deg);`);this.element.style.cssText=k}drawSoft(m,x=""){let A="polygon( ";for(const P of this.state.area)if(P!==null){let R=this.render.getDirection()===1?{x:-P.x+this.state.position.x,y:P.y-this.state.position.y}:{x:P.x-this.state.position.x,y:P.y-this.state.position.y};R=a.GetRotatedPoint(R,{x:0,y:0},this.state.angle),A+=R.x+"px "+R.y+"px, "}A=A.slice(0,-2),A+=")";const k=x+`transform-origin: 0 0; clip-path: ${A}; -webkit-clip-path: ${A};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${m.x}px, ${m.y}px);`:`transform: translate3d(${m.x}px, ${m.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=k}simpleDraw(m){const x=this.render.getRect(),A=x.pageWidth,k=x.height,P=m===1?x.left+x.pageWidth:x.left,R=x.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${k}px; 
            left: ${P}px; 
            top: ${R}px; 
            width: ${A}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(m){super.setOrientation(m),this.element.classList.remove("--left","--right"),this.element.classList.add(m===1?"--right":"--left")}setDrawingDensity(m){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+m),super.setDrawingDensity(m)}}class c extends r{constructor(m,x,A,k){super(m,x),this.element=A,this.pagesElement=k}load(){for(const m of this.pagesElement){const x=new l(this.render,m,m.dataset.density==="hard"?"hard":"soft");x.load(),this.pages.push(x)}this.createSpread()}}class u{constructor(m,x,A,k){this.direction=m,this.corner=x,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(A,10),this.pageHeight=parseInt(k,10)}calc(m){try{return this.position=this.calcAngleAndPosition(m),this.calculateIntersectPoint(this.position),!0}catch{return!1}}getFlippingClipArea(){const m=[];let x=!1;return m.push(this.rect.topLeft),m.push(this.topIntersectPoint),this.sideIntersectPoint===null?x=!0:(m.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(x=!1)),m.push(this.bottomIntersectPoint),(x||this.corner==="bottom")&&m.push(this.rect.bottomLeft),m}getBottomClipArea(){const m=[];return m.push(this.topIntersectPoint),this.corner==="top"?m.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&m.push({x:this.pageWidth,y:0}),m.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?a.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&m.push(this.sideIntersectPoint):this.corner==="top"&&m.push({x:this.pageWidth,y:this.pageHeight}),m.push(this.bottomIntersectPoint),m.push(this.topIntersectPoint),m}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const m=a.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?m:Math.PI-m}calcAngleAndPosition(m){let x=m;if(this.updateAngleAndGeometry(x),x=this.corner==="top"?this.checkPositionAtCenterLine(x,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(x,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(x.x-this.pageWidth)<1&&Math.abs(x.y)<1)throw new Error("Point is too small");return x}updateAngleAndGeometry(m){this.angle=this.calculateAngle(m),this.rect=this.getPageRect(m)}calculateAngle(m){const x=this.pageWidth-m.x+1,A=this.corner==="bottom"?this.pageHeight-m.y:m.y;let k=2*Math.acos(x/Math.sqrt(A*A+x*x));A<0&&(k=-k);const P=Math.PI-k;if(!isFinite(k)||P>=0&&P<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(k=-k),k}getPageRect(m){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],m):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],m)}getRectFromBasePoint(m,x){return{topLeft:this.getRotatedPoint(m[0],x),topRight:this.getRotatedPoint(m[1],x),bottomLeft:this.getRotatedPoint(m[2],x),bottomRight:this.getRotatedPoint(m[3],x)}}getRotatedPoint(m,x){return{x:m.x*Math.cos(this.angle)+m.y*Math.sin(this.angle)+x.x,y:m.y*Math.cos(this.angle)-m.x*Math.sin(this.angle)+x.y}}calculateIntersectPoint(m){const x={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=a.GetIntersectBetweenTwoSegment(x,[m,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=a.GetIntersectBetweenTwoSegment(x,[m,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=a.GetIntersectBetweenTwoSegment(x,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=a.GetIntersectBetweenTwoSegment(x,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=a.GetIntersectBetweenTwoSegment(x,[m,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=a.GetIntersectBetweenTwoSegment(x,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(m,x,A){let k=m;const P=a.LimitPointToCircle(x,this.pageWidth,k);k!==P&&(k=P,this.updateAngleAndGeometry(k));const R=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let M=this.rect.bottomRight,N=this.rect.topLeft;if(this.corner==="bottom"&&(M=this.rect.topRight,N=this.rect.bottomLeft),M.x<=0){const F=a.LimitPointToCircle(A,R,N);F!==k&&(k=F,this.updateAngleAndGeometry(k))}return k}getSegmentToShadowLine(){const m=this.getShadowStartPoint();return[m,m!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class d{constructor(m,x){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=m,this.app=x}fold(m){this.setState("user_fold"),this.calc===null&&this.start(m),this.do(this.render.convertToPage(m))}flip(m){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(m)||(this.calc!==null&&this.render.finishAnimation(),!this.start(m)))return;const x=this.getBoundsRect();this.setState("flipping");const A=x.height/10,k=this.calc.getCorner()==="bottom"?x.height-A:A,P=this.calc.getCorner()==="bottom"?x.height:0;this.calc.calc({x:x.pageWidth-A,y:k}),this.animateFlippingTo({x:x.pageWidth-A,y:k},{x:-x.pageWidth,y:P},!0)}start(m){this.reset();const x=this.render.convertToBook(m),A=this.getBoundsRect(),k=this.getDirectionByPoint(x),P=x.y>=A.height/2?"bottom":"top";if(!this.checkDirection(k))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(k),this.bottomPage=this.app.getPageCollection().getBottomPage(k),this.render.getOrientation()==="landscape")if(k===1){const R=this.app.getPageCollection().nextBy(this.flippingPage);R!==null&&this.flippingPage.getDensity()!==R.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),R.setDrawingDensity("hard"))}else{const R=this.app.getPageCollection().prevBy(this.flippingPage);R!==null&&this.flippingPage.getDensity()!==R.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),R.setDrawingDensity("hard"))}return this.render.setDirection(k),this.calc=new u(k,P,A.pageWidth.toString(10),A.height.toString(10)),!0}catch{return!1}}do(m){if(this.calc!==null&&this.calc.calc(m)){const x=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*x)/100):this.flippingPage.setHardAngle(-90*(200-2*x)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),x,this.calc.getDirection())}}flipToPage(m,x){const A=this.app.getPageCollection().getCurrentSpreadIndex(),k=this.app.getPageCollection().getSpreadIndexByPage(m);try{k>A&&(this.app.getPageCollection().setCurrentSpreadIndex(k-1),this.flipNext(x)),k<A&&(this.app.getPageCollection().setCurrentSpreadIndex(k+1),this.flipPrev(x))}catch{}}flipNext(m){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:m==="top"?1:this.render.getRect().height-2})}flipPrev(m){this.flip({x:10,y:m==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const m=this.calc.getPosition(),x=this.getBoundsRect(),A=this.calc.getCorner()==="bottom"?x.height:0;m.x<=0?this.animateFlippingTo(m,{x:-x.pageWidth,y:A},!0):this.animateFlippingTo(m,{x:x.pageWidth,y:A},!1)}showCorner(m){if(!this.checkState("read","fold_corner"))return;const x=this.getBoundsRect(),A=x.pageWidth;if(this.isPointOnCorners(m))if(this.calc===null){if(!this.start(m))return;this.setState("fold_corner"),this.calc.calc({x:A-1,y:1});const k=50,P=this.calc.getCorner()==="bottom"?x.height-1:1,R=this.calc.getCorner()==="bottom"?x.height-k:k;this.animateFlippingTo({x:A-1,y:P},{x:A-k,y:R},!1,!1)}else this.do(this.render.convertToPage(m));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(m,x,A,k=!0){const P=a.GetCordsFromTwoPoint(m,x),R=[];for(const N of P)R.push(()=>this.do(N));const M=this.getAnimationDuration(P.length);this.render.startAnimation(R,M,()=>{this.calc&&(A&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),k&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(m){this.state!==m&&(this.app.updateState(m),this.state=m)}getDirectionByPoint(m){const x=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(m.x-x.pageWidth<=x.width/5)return 1}else if(m.x<x.width/2)return 1;return 0}getAnimationDuration(m){const x=this.app.getSettings().flippingTime;return m>=1e3?x:m/1e3*x}checkDirection(m){return m===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...m){for(const x of m)if(this.state===x)return!0;return!1}isPointOnCorners(m){const x=this.getBoundsRect(),A=x.pageWidth,k=Math.sqrt(Math.pow(A,2)+Math.pow(x.height,2))/5,P=this.render.convertToBook(m);return P.x>0&&P.y>0&&P.x<x.width&&P.y<x.height&&(P.x<k||P.x>x.width-k)&&(P.y<k||P.y>x.height-k)}}class f{constructor(m,x){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=x,this.app=m;const A=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=A.exec(window.navigator.userAgent)!==null}render(m){if(this.animation!==null){const x=Math.round((m-this.animation.startedAt)/this.animation.durationFrame);x<this.animation.frames.length?this.animation.frames[x]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=m,this.drawFrame()}start(){this.update();const m=x=>{this.render(x),requestAnimationFrame(m)};requestAnimationFrame(m)}startAnimation(m,x,A){this.finishAnimation(),this.animation={frames:m,duration:x,durationFrame:x/m.length,onAnimateEnd:A,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const m=this.calculateBoundsRect();this.orientation!==m&&(this.orientation=m,this.app.updateOrientation(m))}calculateBoundsRect(){let m="landscape";const x=this.getBlockWidth(),A=x/2,k=this.getBlockHeight()/2,P=this.setting.width/this.setting.height;let R=this.setting.width,M=this.setting.height,N=A-R;return this.setting.size==="stretch"?(x<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(m="portrait"),R=m==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,R>this.setting.maxWidth&&(R=this.setting.maxWidth),M=R/P,M>this.getBlockHeight()&&(M=this.getBlockHeight(),R=M*P),N=m==="portrait"?A-R/2-R:A-R):x<2*R&&this.app.getSettings().usePortrait&&(m="portrait",N=A-R/2-R),this.boundsRect={left:N,top:k-M/2,width:2*R,height:M,pageWidth:R},m}setShadowData(m,x,A,k){if(!this.app.getSettings().drawShadow)return;const P=100*this.getSettings().maxShadowOpacity;this.shadow={pos:m,angle:x,width:3*this.getRect().pageWidth/4*A/100,opacity:(100-A)*P/100/100,direction:k,progress:2*A}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(m){this.pageRect=m}setDirection(m){this.direction=m}setRightPage(m){m!==null&&m.setOrientation(1),this.rightPage=m}setLeftPage(m){m!==null&&m.setOrientation(0),this.leftPage=m}setBottomPage(m){m!==null&&m.setOrientation(this.direction===1?0:1),this.bottomPage=m}setFlippingPage(m){m!==null&&m.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=m}convertToBook(m){const x=this.getRect();return{x:m.x-x.left,y:m.y-x.top}}isSafari(){return this.safari}convertToPage(m,x){x||(x=this.direction);const A=this.getRect();return{x:x===0?m.x-A.left-A.width/2:A.width/2-m.x+A.left,y:m.y-A.top}}convertToGlobal(m,x){if(x||(x=this.direction),m==null)return null;const A=this.getRect();return{x:x===0?m.x+A.left+A.width/2:A.width/2-m.x+A.left,y:m.y+A.top}}convertRectToGlobal(m,x){return x||(x=this.direction),{topLeft:this.convertToGlobal(m.topLeft,x),topRight:this.convertToGlobal(m.topRight,x),bottomLeft:this.convertToGlobal(m.bottomLeft,x),bottomRight:this.convertToGlobal(m.bottomRight,x)}}}class p extends f{constructor(m,x,A){super(m,x),this.canvas=A,this.ctx=A.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const m=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(m.left+m.pageWidth,m.top,m.width,m.height),this.ctx.clip())}drawBookShadow(){const m=this.getRect();this.ctx.save(),this.ctx.beginPath();const x=m.width/20;this.ctx.rect(m.left,m.top,m.width,m.height);const A={x:m.left+m.width/2-x/2,y:0};this.ctx.translate(A.x,A.y);const k=this.ctx.createLinearGradient(0,0,x,0);k.addColorStop(0,"rgba(0, 0, 0, 0)"),k.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),k.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),k.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),k.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),k.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=k,this.ctx.fillRect(0,0,x,2*m.height),this.ctx.restore()}drawOuterShadow(){const m=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(m.left,m.top,m.width,m.height);const x=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(x.x,x.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const A=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),A.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),A.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),A.addColorStop(0,"rgba(0, 0, 0, 0)"),A.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=A,this.ctx.fillRect(0,0,this.shadow.width,2*m.height),this.ctx.restore()}drawInnerShadow(){const m=this.getRect();this.ctx.save(),this.ctx.beginPath();const x=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),A=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(A.topLeft.x,A.topLeft.y),this.ctx.lineTo(A.topRight.x,A.topRight.y),this.ctx.lineTo(A.bottomRight.x,A.bottomRight.y),this.ctx.lineTo(A.bottomLeft.x,A.bottomLeft.y),this.ctx.translate(x.x,x.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const k=3*this.shadow.width/4,P=this.ctx.createLinearGradient(0,0,k,0);this.shadow.direction===0?(this.ctx.translate(-k,-100),P.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),P.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),P.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),P.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),P.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),P.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),P.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),P.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=P,this.ctx.fillRect(0,0,k,2*m.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class y{constructor(m,x,A){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=P=>{if(this.checkTarget(P.target)){const R=this.getMousePos(P.clientX,P.clientY);this.app.startUserTouch(R),P.preventDefault()}},this.onTouchStart=P=>{if(this.checkTarget(P.target)&&P.changedTouches.length>0){const R=P.changedTouches[0],M=this.getMousePos(R.clientX,R.clientY);this.touchPoint={point:M,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(M)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||P.preventDefault()}},this.onMouseUp=P=>{const R=this.getMousePos(P.clientX,P.clientY);this.app.userStop(R)},this.onMouseMove=P=>{const R=this.getMousePos(P.clientX,P.clientY);this.app.userMove(R,!1)},this.onTouchMove=P=>{if(P.changedTouches.length>0){const R=P.changedTouches[0],M=this.getMousePos(R.clientX,R.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-M.x)>10||this.app.getState()!=="read")&&P.cancelable&&this.app.userMove(M,!0),this.app.getState()!=="read"&&P.preventDefault()):this.app.userMove(M,!0)}},this.onTouchEnd=P=>{if(P.changedTouches.length>0){const R=P.changedTouches[0],M=this.getMousePos(R.clientX,R.clientY);let N=!1;if(this.touchPoint!==null){const F=M.x-this.touchPoint.point.x,H=Math.abs(M.y-this.touchPoint.point.y);Math.abs(F)>this.swipeDistance&&H<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(F>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),N=!0),this.touchPoint=null}this.app.userStop(M,N)}},this.parentElement=m,m.classList.add("stf__parent"),m.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=m.querySelector(".stf__wrapper"),this.app=x;const k=this.app.getSettings().usePortrait?1:2;m.style.minWidth=A.minWidth*k+"px",m.style.minHeight=A.minHeight+"px",A.size==="fixed"&&(m.style.minWidth=A.width*k+"px",m.style.minHeight=A.height+"px"),A.autoSize&&(m.style.width="100%",m.style.maxWidth=2*A.maxWidth+"px"),m.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=A.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(m){this.wrapper.classList.remove("--portrait","--landscape"),m==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(m,x){const A=this.distElement.getBoundingClientRect();return{x:m-A.left,y:x-A.top}}checkTarget(m){return!this.app.getSettings().clickEventForward||!["a","button"].includes(m.tagName.toLowerCase())}}class g extends y{constructor(m,x,A,k){super(m,x,A),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=m.querySelector(".stf__block"),this.items=k;for(const P of k)this.distElement.appendChild(P);this.setHandlers()}clear(){for(const m of this.items)this.parentElement.appendChild(m)}updateItems(m){this.removeHandlers(),this.distElement.innerHTML="";for(const x of m)this.distElement.appendChild(x);this.items=m,this.setHandlers()}update(){this.app.getRender().update()}}class S extends y{constructor(m,x,A){super(m,x,A),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=m.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const m=getComputedStyle(this.canvas),x=parseInt(m.getPropertyValue("width"),10),A=parseInt(m.getPropertyValue("height"),10);this.canvas.width=x,this.canvas.height=A}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class w extends f{constructor(m,x,A){super(m,x),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=A,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const m=this.getRect(),x=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let A=(100-x)*(2.5*m.pageWidth)/100+20;A>m.pageWidth&&(A=m.pageWidth);let k=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${A}px;
            height: ${m.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*x/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${m.left+m.width/2}px;
            transform-origin: 0 0;
        `;k+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=k}drawHardOuterShadow(){const m=this.getRect();let x=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*m.pageWidth)/100+20;x>m.pageWidth&&(x=m.pageWidth);let A=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${x}px;
            height: ${m.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${m.left+m.width/2}px;
            transform-origin: 0 0;
        `;A+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=A}drawInnerShadow(){const m=this.getRect(),x=3*this.shadow.width/4,A=this.getDirection()===0?x:0,k=this.getDirection()===0?"to left":"to right",P=this.convertToGlobal(this.shadow.pos),R=this.shadow.angle+3*Math.PI/2,M=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let N="polygon( ";for(const H of M){let D=this.getDirection()===1?{x:-H.x+this.shadow.pos.x,y:H.y-this.shadow.pos.y}:{x:H.x-this.shadow.pos.x,y:H.y-this.shadow.pos.y};D=a.GetRotatedPoint(D,{x:A,y:100},R),N+=D.x+"px "+D.y+"px, "}N=N.slice(0,-2),N+=")";const F=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${x}px;
            height: ${2*m.height}px;
            background: linear-gradient(${k},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${A}px 100px;
            transform: translate3d(${P.x-A}px, ${P.y-100}px, 0) rotate(${R}rad);
            clip-path: ${N};
            -webkit-clip-path: ${N};
        `;this.innerShadow.style.cssText=F}drawOuterShadow(){const m=this.getRect(),x=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),A=this.shadow.angle+3*Math.PI/2,k=this.getDirection()===1?this.shadow.width:0,P=this.getDirection()===0?"to right":"to left",R=[{x:0,y:0},{x:m.pageWidth,y:0},{x:m.pageWidth,y:m.height},{x:0,y:m.height}];let M="polygon( ";for(const F of R)if(F!==null){let H=this.getDirection()===1?{x:-F.x+this.shadow.pos.x,y:F.y-this.shadow.pos.y}:{x:F.x-this.shadow.pos.x,y:F.y-this.shadow.pos.y};H=a.GetRotatedPoint(H,{x:k,y:100},A),M+=H.x+"px "+H.y+"px, "}M=M.slice(0,-2),M+=")";const N=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*m.height}px;
            background: linear-gradient(${P}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${k}px 100px;
            transform: translate3d(${x.x-k}px, ${x.y-100}px, 0) rotate(${A}rad);
            clip-path: ${M};
            -webkit-clip-path: ${M};
        `;this.outerShadow.style.cssText=N}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const m=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(m))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const m of this.app.getPageCollection().getPages())m!==this.leftPage&&m!==this.rightPage&&m!==this.flippingPage&&m!==this.bottomPage&&(m.getElement().style.cssText="display: none"),m.getTemporaryCopy()!==this.flippingPage&&m.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class _{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(m){const x=this._default;if(Object.assign(x,m),x.size!=="stretch"&&x.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(x.width<=0||x.height<=0)throw new Error("Invalid width or height");if(x.flippingTime<=0)throw new Error("Invalid flipping time");return x.size==="stretch"?(x.minWidth<=0&&(x.minWidth=100),x.maxWidth<x.minWidth&&(x.maxWidth=2e3),x.minHeight<=0&&(x.minHeight=100),x.maxHeight<x.minHeight&&(x.maxHeight=2e3)):(x.minWidth=x.width,x.maxWidth=x.width,x.minHeight=x.height,x.maxHeight=x.height),x}}(function(v,m){m===void 0&&(m={});var x=m.insertAt;if(v&&typeof document<"u"){var A=document.head||document.getElementsByTagName("head")[0],k=document.createElement("style");k.type="text/css",x==="top"&&A.firstChild?A.insertBefore(k,A.firstChild):A.appendChild(k),k.styleSheet?k.styleSheet.cssText=v:k.appendChild(document.createTextNode(v))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),t.PageFlip=class extends class{constructor(){this.events=new Map}on(v,m){return this.events.has(v)?this.events.get(v).push(m):this.events.set(v,[m]),this}off(v){this.events.delete(v)}trigger(v,m,x=null){if(this.events.has(v))for(const A of this.events.get(v))A({data:x,object:m})}}{constructor(v,m){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new _().getSettings(m),this.block=v}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(v){this.ui=new S(this.block,this,this.setting);const m=this.ui.getCanvas();this.render=new p(this,this.setting,m),this.flipController=new d(this.render,this),this.pages=new o(this,this.render,v),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(v){this.ui=new g(this.block,this,this.setting,v),this.render=new w(this,this.setting,this.ui.getDistElement()),this.flipController=new d(this.render,this),this.pages=new c(this,this.render,this.ui.getDistElement(),v),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(v){const m=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,v),this.pages.load(),this.pages.show(m),this.trigger("update",this,{page:m,mode:this.render.getOrientation()})}updateFromHtml(v){const m=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new c(this,this.render,this.ui.getDistElement(),v),this.pages.load(),this.ui.updateItems(v),this.render.reload(),this.pages.show(m),this.trigger("update",this,{page:m,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(v){this.pages.show(v)}flipNext(v="top"){this.flipController.flipNext(v)}flipPrev(v="top"){this.flipController.flipPrev(v)}flip(v,m="top"){this.flipController.flipToPage(v,m)}updateState(v){this.trigger("changeState",this,v)}updatePageIndex(v){this.trigger("flip",this,v)}updateOrientation(v){this.ui.setOrientationStyle(v),this.update(),this.trigger("changeOrientation",this,v)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(v){return this.pages.getPage(v)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(v){this.mousePosition=v,this.isUserTouch=!0,this.isUserMove=!1}userMove(v,m){this.isUserTouch||m||!this.setting.showPageCorners?this.isUserTouch&&a.GetDistanceBetweenTwoPoint(this.mousePosition,v)>5&&(this.isUserMove=!0,this.flipController.fold(v)):this.flipController.showCorner(v)}userStop(v,m=!1){this.isUserTouch&&(this.isUserTouch=!1,m||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(v)))}},Object.defineProperty(t,"__esModule",{value:!0})})})(JT,JT.exports);var fue=JT.exports;const pue=te.forwardRef((n,e)=>{const t=E.useRef(null),s=E.useRef([]),i=E.useRef(),[r,o]=E.useState([]);E.useImperativeHandle(e,()=>({pageFlip:()=>i.current}));const a=E.useCallback(()=>{i.current&&i.current.clear()},[]),l=E.useCallback(()=>{const c=i.current;c&&(c.off("flip"),c.off("changeOrientation"),c.off("changeState"),c.off("init"),c.off("update"))},[]);return E.useEffect(()=>{if(s.current=[],n.children){const c=te.Children.map(n.children,u=>te.cloneElement(u,{ref:d=>{d&&s.current.push(d)}}));(!n.renderOnlyPageLengthChange||r.length!==c.length)&&(c.length<r.length&&a(),o(c))}},[n.children]),E.useEffect(()=>{const c=()=>{const u=i.current;u&&(n.onFlip&&u.on("flip",d=>n.onFlip(d)),n.onChangeOrientation&&u.on("changeOrientation",d=>n.onChangeOrientation(d)),n.onChangeState&&u.on("changeState",d=>n.onChangeState(d)),n.onInit&&u.on("init",d=>n.onInit(d)),n.onUpdate&&u.on("update",d=>n.onUpdate(d)))};r.length>0&&s.current.length>0&&(l(),t.current&&!i.current&&(i.current=new fue.PageFlip(t.current,n)),i.current.getFlipController()?i.current.updateFromHtml(s.current):i.current.loadFromHTML(s.current),c())},[r]),te.createElement("div",{ref:t,className:n.className,style:n.style},r)}),mue=te.memo(pue);Hs.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/5.3.93/pdf.worker.min.mjs";const gue=({pdfUrl:n})=>{const[e,t]=E.useState(null);return b.jsx("div",{className:"w-full overflow-x-auto flex justify-center px-4",children:b.jsx(tue,{file:n,onLoadSuccess:({numPages:s})=>t(s),loading:b.jsx("p",{className:"text-muted-foreground text-center",children:"Loading PDF..."}),error:b.jsx("p",{className:"text-red-500 text-center",children:"Failed to load PDF file."}),children:e&&b.jsx(mue,{width:350,height:500,size:"stretch",responsive:"true",minWidth:315,maxWidth:1e3,minHeight:400,maxHeight:800,drawShadow:!0,flippingTime:700,useMouseEvents:!0,className:"shadow-xl rounded-lg",children:Array.from({length:e},(s,i)=>b.jsx("div",{className:"page bg-white p-4",children:b.jsx(due,{pageNumber:i+1,width:350,renderTextLayer:!1,renderAnnotationLayer:!1})},i))})})})},yue=({text:n})=>{const[e,t]=E.useState(!1),[s,i]=E.useState(!1),[r,o]=E.useState(null),[a,l]=E.useState([]);E.useEffect(()=>{const p=()=>{const g=speechSynthesis.getVoices().filter(S=>S.lang==="en-GB"&&(S.name==="Google UK English Female"||S.name==="Google UK English Male"));l(g),o(g[0])};speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=p),p()},[]);const c=()=>{speechSynthesis.cancel();const p=new SpeechSynthesisUtterance(n);p.voice=r,p.rate=.9,p.pitch=1,p.onend=()=>{t(!1),i(!1)},speechSynthesis.speak(p),t(!0),i(!1)},u=()=>{speechSynthesis.pause(),i(!0)},d=()=>{speechSynthesis.resume(),i(!1)},f=()=>{speechSynthesis.cancel(),t(!1),i(!1)};return b.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[b.jsx("div",{className:"flex gap-1",children:a.map(p=>b.jsx("button",{onClick:()=>o(p),className:`p-1 rounded-full border ${(r==null?void 0:r.name)===p.name?"border-primary":"border-muted"}`,title:p.name,children:p.name.includes("Female")?"👩":"👨"},p.name))}),e?b.jsxs(b.Fragment,{children:[s?b.jsx("button",{onClick:d,className:"p-1 text-green-600 hover:text-green-700",children:b.jsx(s9,{size:14})}):b.jsx("button",{onClick:u,className:"p-1 text-yellow-500 hover:text-yellow-600",children:b.jsx(t9,{size:14})}),b.jsx("button",{onClick:f,className:"p-1 text-red-600 hover:text-red-700",children:b.jsx(a9,{size:14})})]}):b.jsx("button",{onClick:c,className:"p-1 text-muted-foreground hover:text-primary",children:b.jsx(u9,{size:14})})]})},vue=n=>n?n.split(`
`).map((t,s)=>{let i=t;const r=/\*\*\*(.*?)\*\*\*/g;i=i.split(r).map((a,l)=>l%2===1?b.jsx("strong",{children:a},`b-${s}-${l}`):a);const o=/""(.*?)""/g;return i=i.flatMap((a,l)=>typeof a=="string"?a.split(o).map((c,u)=>u%2===1?b.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:c},`g-${s}-${l}-${u}`):c):a),b.jsx("p",{className:"mb-4",children:i},`p-${s}`)}):null,wue=()=>{const{itemId:n}=iG(),e=aF();$I();const[t,s]=E.useState(null),[i,r]=E.useState(0),[o,a]=E.useState([]),[l,c]=E.useState(0),[u,d]=E.useState([]);E.useState(""),E.useState(""),E.useState(!1),E.useEffect(()=>{window.scrollTo(0,0);const g=qZ(n);if(!g){e("/");return}if(s(g),g.type!=="PDF"&&g.content){const w=g.content.split(`
`),_=450,v=[];let m=[],x=0;w.forEach(A=>{const k=A.split(/\s+/);x+k.length>_&&(v.push(m.join(`
`)),m=[],x=0),m.push(A),x+=k.length}),m.length>0&&v.push(m.join(`
`)),a(v)}else a([]);const S=JSON.parse(localStorage.getItem(`comments_${n}`))||[];d(S),r(0)},[n,e]);const f=()=>{t&&t.type!=="PDF"&&i<o.length-1&&(c(1),r(i+1))},p=()=>{t&&t.type!=="PDF"&&i>0&&(c(-1),r(i-1))};if(!t)return b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)] text-center",children:[b.jsx(OA,{children:b.jsx("title",{children:"Loading... | Kingdom Pages"})}),b.jsx(Qw,{size:64,className:"text-primary mb-4 animate-pulse"}),b.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Loading Content..."}),b.jsx("p",{className:"text-muted-foreground",children:"Please wait while we fetch the material."}),b.jsx(Un,{asChild:!0,variant:"link",className:"mt-4",children:b.jsx(Us,{to:"/",children:"Back to Home"})})]});const y={initial:g=>({x:g>0?"100%":"-100%",opacity:0,scale:.9}),animate:{x:0,opacity:1,scale:1,transition:{type:"spring",stiffness:120,damping:20,duration:.5}},exit:g=>({x:g>0?"-100%":"100%",opacity:0,scale:.9,transition:{type:"spring",stiffness:120,damping:20,duration:.3}})};return b.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"text-lg leading-relaxed text-foreground/90 whitespace-pre-line max-w-none flex-grow pt-16",children:[b.jsxs(OA,{children:[b.jsxs("title",{children:[t.title," | Kingdom Pages"]}),b.jsx("meta",{name:"description",content:`Read "${t.title}" by ${t.author}. Part of the Kingdom Pages digital library.`}),b.jsx("meta",{property:"og:title",content:`${t.title} | Kingdom Pages`}),b.jsx("meta",{property:"og:description",content:`Read "${t.title}" by ${t.author}. Part of the Kingdom Pages digital library.`})]}),b.jsxs(NS,{className:"shadow-2xl overflow-hidden glassmorphism border-primary/20 relative z-10",children:[" ",b.jsxs(DS,{className:"bg-gradient-to-br from-primary/10 via-secondary/10 to-green-400/10 p-6 relative",children:[b.jsxs(Ae.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[b.jsxs("div",{className:"flex items-center space-x-2",children:[t.type==="PDF"?b.jsx(Hj,{className:"h-8 w-8 text-red-500"}):b.jsx(Qw,{className:"h-8 w-8 text-primary"}),b.jsx(LS,{className:"text-3xl md:text-4xl gradient-text mb-1",children:t.title})]}),b.jsxs(Dm,{className:"text-md text-muted-foreground ml-10",children:["By ",t.author," - ",t.type]})]}),b.jsx("div",{className:"absolute bottom-2 right-2",children:b.jsx(yue,{text:o[i]})})]}),b.jsx(OS,{className:"p-0 md:p-0 min-h-[500px] md:min-h-[70vh] flex flex-col justify-between relative overflow-hidden",children:t.type==="PDF"&&t.pdfUrl?b.jsx(gue,{pdfUrl:t.pdfUrl}):o.length>0?b.jsxs("div",{className:"p-6 md:p-8 flex-grow flex flex-col justify-between",children:[b.jsx(Im,{initial:!1,custom:l,mode:"wait",children:b.jsx(Ae.div,{custom:l,variants:y,initial:"initial",animate:"animate",exit:"exit",className:"text-lg leading-relaxed text-foreground/90 whitespace-pre-line max-w-none flex-grow",style:{perspective:"1000px"},children:vue(o[i])},i)}),b.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-border/50",children:[b.jsxs(Un,{onClick:p,disabled:i===0,variant:"outline",className:"group",children:[b.jsx(B7,{size:20,className:"mr-2 transition-transform duration-300 group-hover:-translate-x-1"})," Previous"]}),b.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",i+1," of ",o.length]}),b.jsxs(Un,{onClick:f,disabled:i===o.length-1,variant:"outline",className:"group",children:["Next ",b.jsx(Bj,{size:20,className:"ml-2 transition-transform duration-300 group-hover:translate-x-1"})]})]})]}):b.jsx("div",{className:"p-6 md:p-8 flex-grow flex items-center justify-center",children:b.jsx("p",{className:"text-muted-foreground text-xl",children:"Content not available for this item."})})})]}),b.jsxs(Ae.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"mt-8 flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-4 relative z-10",children:[b.jsx(Un,{asChild:!0,variant:"ghost",className:"group w-full sm:w-auto",children:b.jsxs(Us,{to:"/library",children:[b.jsx(Qw,{size:18,className:"mr-2 transition-transform duration-300 group-hover:rotate-[-5deg]"})," Back to Library"]})}),t.type==="PDF"&&t.pdfUrl&&b.jsx(Un,{asChild:!0,variant:"outline",className:"group w-full sm:w-auto border-accent text-accent hover:bg-accent/10 hover:text-accent",children:b.jsxs("a",{href:t.pdfUrl,target:"_blank",rel:"noopener noreferrer",children:["Open PDF in New Tab ",b.jsx(W7,{size:18,className:"ml-2 transition-transform duration-300 group-hover:scale-110"})]})}),b.jsx(Un,{asChild:!0,variant:"ghost",className:"group w-full sm:w-auto",children:b.jsxs(Us,{to:"/",children:[b.jsx(Vj,{size:18,className:"mr-2 transition-transform duration-300 group-hover:scale-110"})," Go Home"]})})]})]})},bue=()=>{const n={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};return b.jsxs("div",{className:"space-y-16 relative overflow-hidden",children:[b.jsxs("section",{className:"text-center py-16 md:py-24 relative z-10",children:[b.jsx("div",{className:""}),b.jsxs(Ae.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"container mx-auto px-4",children:[b.jsx(Ae.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring",stiffness:200,damping:20},className:"inline-block p-4 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-full text-primary mb-6",children:b.jsx(q7,{size:48,strokeWidth:1.5})}),b.jsx("h1",{className:"text-5xl md:text-7xl font-extrabold mb-6 leading-tight",children:b.jsx("span",{className:"gradient-text",children:"A Step Of Faith"})}),b.jsx("p",{className:"max-w-3xl mx-auto text-lg md:text-xl text-muted-foreground mb-10",children:b.jsx("em",{children:"I am ready to receive Jesus Christ as my Lord and Saviour, and start my walk of faith with Him."})})]}),b.jsxs(Ae.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7,delay:.2},className:"max-w-4xl mx-auto glassmorphism p-8 md:p-12 rounded-2xl shadow-xl aurora-card",children:[b.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-8",children:"The Steps Of Salvation"}),b.jsxs("div",{className:"space-y-6 text-lg text-foreground/90 leading-relaxed",children:[b.jsx("p",{children:"The Bible teaches that salvation is a gift from God, offered freely to all who believe in His Son, Jesus Christ. It's not something we can earn through good works, but something we receive through faith shown in our confession."}),b.jsx("blockquote",{className:"border-l-4 border-primary pl-6 py-2 italic text-muted-foreground",children:'"9 If you declare with your mouth, “Jesus is Lord,” and believe in your heart that God raised him from the dead, you will be saved. 10 For it is with your heart that you believe and are justified, and it is with your mouth that you profess your faith and are saved." - Romans 10: 9 - 10'}),b.jsx("p",{children:"If you feel a stirring in your heart and wish to accept this precious gift, you can express your faith through saying the following Prayer. Prayer is a means of communicating to God. He knows your heart, and it's the attitude of your heart that He cares about."}),b.jsxs("div",{className:"p-6 bg-muted/50 rounded-lg",children:[b.jsx("h3",{className:"font-semibold text-xl mb-2 text-primary",children:"Prayer of Salvation"}),b.jsx("p",{className:"italic",children:'"O Lord God, I believe with all my heart in Jesus Christ, Son of the living God. I believe He died for me and God raised Him from the dead. I believe He’s alive today. I confess with my mouth that Jesus Christ is the Lord of my life from this day. Through Him and in His Name, I have eternal life; I’m born again. Thank you Lord, for saving my soul! I’m now a child of God. Hallelujah!”'})]}),b.jsx("strong",{children:b.jsx("center",{children:"Congratulations! You are now a child of God. Welcome to this great family!"})})]})]})]}),b.jsxs("section",{className:"container mx-auto px-4 py-2",children:[b.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-12",children:"Your Next Steps"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{icon:b.jsx(_I,{className:"h-8 w-8 text-primary"}),title:'Read "Now That You Are Born Again"',description:b.jsxs(b.Fragment,{children:["Learn about the step you just took in depth by reading this informative book ",b.jsx("em",{children:"Now That You Are Born Again"})," by ",b.jsx("strong",{children:"Rev Dr Chris Oyakhilome"}),". You can access it"," ",b.jsx("a",{href:"https://nowthatyouarebornagain.org",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline hover:text-primary/80",children:"here"}),"."]}),bg:"bg-primary/10"},{icon:b.jsx($j,{className:"h-8 w-8 text-secondary"}),title:"Let us know",description:b.jsxs(b.Fragment,{children:["Send us an email on ",b.jsx("strong",{children:"admin@kingdompages.digital"})," or submit the form on our contact us page."]}),bg:"bg-secondary/10"},{icon:b.jsx(Wj,{className:"h-8 w-8 text-accent"}),title:"Find yourself connected to a church",description:b.jsxs(b.Fragment,{children:["Connect with a Bible believing local church to grow in your faith and fellowship. We recommend finding any local ",b.jsx("strong",{children:"Christ Embassy church"})," aka Believers' Loveworld."]}),bg:"bg-accent/10"}].map((e,t)=>b.jsx(Ae.div,{variants:n,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.5},transition:{delay:t*.2},children:b.jsxs(NS,{className:"p-6 text-center glassmorphism-card h-full flex flex-col items-center justify-center",children:[b.jsxs(DS,{className:"p-0 mb-4",children:[b.jsx("div",{className:`${e.bg} p-3 rounded-full inline-flex items-center justify-center mb-4`,children:e.icon}),b.jsx(LS,{className:"text-2xl",children:e.title})]}),b.jsx(OS,{className:"p-0 text-muted-foreground",children:b.jsx(Dm,{children:e.description})})]})},t))})]}),b.jsx("section",{className:"container mx-auto text-center py-16",children:b.jsxs(Ae.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.7},children:[b.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"We're Here For You"}),b.jsx("p",{className:"text-xl mb-8 max-w-2xl mx-auto text-muted-foreground",children:"Making this decision is a the biggest decision you could ever make. We would be honored to connect with you, pray for you, and help you find your next steps in this beautiful journey."}),b.jsx(Un,{size:"lg",asChild:!0,className:"group bg-gradient-to-r from-primary to-secondary text-primary-foreground hover:opacity-90 transition-opacity text-base px-6 py-6 sm:px-8 sm:py-7",children:b.jsxs(Us,{to:"/contact",children:["Reach Out to us",b.jsx(xI,{className:"ml-2 h-5 w-5 transition-transform group-hover:translate-x-1"})]})})]})})]})},xue=()=>b.jsxs(Ae.div,{className:"max-w-4xl mx-auto py-16",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[b.jsx("h1",{className:"text-4xl font-bold mb-6 gradient-text",children:"Terms of Service"}),b.jsxs("div",{className:"space-y-6 text-lg text-foreground/90 leading-relaxed",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Last Updated:"})," ",new Date().toLocaleDateString()]}),b.jsx("h2",{className:"text-2xl font-semibold pt-4",children:"1. Agreement to Terms"}),b.jsx("p",{children:"By using our website, Kingdom Pages, you agree to be bound by these Terms of Service. If you do not agree to these Terms, do not use the website."}),b.jsx("h2",{className:"text-2xl font-semibold pt-4",children:"2. Intellectual Property Rights"}),b.jsx("p",{children:"The Site and its original content, features, and functionality are owned by Kingdom Pages and are protected by international copyright, trademark, patent, trade secret, and other intellectual property or proprietary rights laws."}),b.jsx("h2",{className:"text-2xl font-semibold pt-4",children:"3. User Representations"}),b.jsx("p",{children:"By using the Site, you represent and warrant that:"}),b.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-4",children:[b.jsx("li",{children:"All information you submit will be true, accurate, current, and complete."}),b.jsx("li",{children:"You will maintain the accuracy of such information and promptly update such subscription information as necessary."}),b.jsx("li",{children:"You have the legal capacity and you agree to comply with these Terms of Service."})]}),b.jsx("h2",{className:"text-2xl font-semibold pt-4",children:"4. Prohibited Activities"}),b.jsx("p",{children:"You may not access or use the Site for any purpose other than that for which we make the Site available. The Site may not be used in connection with any commercial endeavors except those that are specifically endorsed or approved by us."})]})]}),_ue=()=>{const[n,e]=E.useState({name:"",message:""}),[t,s]=E.useState(null),[i,r]=E.useState([]),[o,a]=E.useState({}),[l,c]=E.useState(!1);E.useEffect(()=>{const y=s0(i0,"comments");Rre(y,g=>{const S=g.val(),w=S?Object.entries(S).map(([_,v])=>({id:_,...v})):[];r(w.reverse())})},[]);const u=y=>{const{name:g,value:S}=y.target;e(w=>({...w,[g]:S}))},d=async y=>{y.preventDefault();let g="";if(t){const w=Qoe(sae,`comments/${Date.now()}_${t.name}`);await qoe(w,t),g=await Xoe(w)}const S=s0(i0,"comments");await IA(S,{name:n.name,message:n.message,image:g,timestamp:new Date().toISOString()}),e({name:"",message:""}),s(null),c(!1)},f=(y,g)=>{const{name:S,value:w}=g.target;a(_=>({..._,[y]:{..._[y],[S]:w}}))},p=async(y,g)=>{var _,v;g.preventDefault();const S={name:((_=o[y])==null?void 0:_.name)||"",message:((v=o[y])==null?void 0:v.message)||"",timestamp:new Date().toISOString()},w=s0(i0,`comments/${y}/replies`);await IA(w,S),a(m=>({...m,[y]:{name:"",message:""}}))};return b.jsxs("div",{className:"relative overflow-hidden px-4 py-16 z-10",children:[b.jsx("div",{className:"absolute w-32 h-32 bg-purple-300/30 rounded-full blur-2xl top-10 left-10 rotate-12 z-0 pointer-events-none"}),b.jsx("div",{className:"absolute w-24 h-24 bg-purple-400/20 rounded-full blur-xl bottom-20 right-16 rotate-45 z-0 pointer-events-none"}),b.jsx("div",{className:"absolute w-16 h-16 bg-purple-500/25 rounded-full blur-md top-1/2 left-1/3 rotate-[-30deg] z-0 pointer-events-none"}),b.jsxs(Ae.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16 relative z-10",children:[b.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold mb-6 gradient-text",children:"Community"}),b.jsx("p",{className:"max-w-2xl mx-auto text-lg md:text-xl text-muted-foreground",children:"Share your thoughts, reflections and testimonies for everyone to see."})]}),b.jsx("div",{className:"max-w-4xl mx-auto relative z-10",children:i.length===0?b.jsx("p",{className:"text-muted-foreground",children:"No comments yet. Be the first to share!"}):b.jsx("div",{className:"flex flex-col gap-2 divide-y divide-muted/40",children:i.map(y=>{var g,S;return b.jsx(Ae.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.4},className:"pt-4",children:b.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border border-muted",children:[b.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold",children:[b.jsx($j,{size:18}),y.name]}),b.jsx("p",{className:"text-foreground/90",children:y.message}),y.image&&b.jsx("img",{src:y.image,alt:"Uploaded",className:"mt-2 rounded-lg w-40 h-40 object-cover border border-muted"}),b.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(y.timestamp).toLocaleString()}),y.replies&&b.jsx("div",{className:"mt-3 ml-3 space-y-3 border-l-2 border-muted pl-3",children:Object.values(y.replies).map((w,_)=>b.jsxs("div",{className:"p-2 bg-muted/30 rounded-md border border-muted/50",children:[b.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-accent",children:[b.jsx($7,{size:14}),w.name]}),b.jsx("p",{className:"text-sm text-foreground/80 leading-snug",children:w.message}),b.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(w.timestamp).toLocaleString()})]},_))}),b.jsxs("form",{onSubmit:w=>p(y.id,w),className:"mt-4 space-y-2",children:[b.jsx("input",{name:"name",placeholder:"Your name",value:((g=o[y.id])==null?void 0:g.name)||"",onChange:w=>f(y.id,w),className:"w-full p-2 rounded bg-background/70 border border-muted text-sm",required:!0}),b.jsx("textarea",{name:"message",placeholder:"Your reply...",value:((S=o[y.id])==null?void 0:S.message)||"",onChange:w=>f(y.id,w),rows:2,className:"w-full p-2 rounded bg-background/70 border border-muted text-sm",required:!0}),b.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white text-sm rounded hover:opacity-90",children:"Reply"})]})]})},y.id)})})}),b.jsx("button",{onClick:()=>c(!0),className:"fixed bottom-6 right-6 z-50 bg-primary text-white px-4 py-2 rounded-full shadow-lg hover:opacity-90",children:"+ Add a Comment"}),l&&b.jsxs("div",{className:"fixed bottom-6 right-6 z-50 w-[90vw] max-w-md bg-card/90 backdrop-blur-md p-6 rounded-xl shadow-xl glassmorphism aurora-card",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsx("h2",{className:"text-lg font-bold",children:"Leave a Comment"}),b.jsx("button",{onClick:()=>c(!1),className:"text-muted-foreground hover:text-primary text-sm",children:"Close"})]}),b.jsxs("form",{onSubmit:d,className:"space-y-4",children:[b.jsx("input",{name:"name",placeholder:"Your name",value:n.name,onChange:u,required:!0,className:"w-full p-2 rounded bg-background/70 border border-muted"}),b.jsx("textarea",{name:"message",placeholder:"Your message...",value:n.message,onChange:u,required:!0,rows:3,className:"w-full p-2 rounded bg-background/70 border border-muted"}),b.jsx("button",{type:"submit",className:"w-full py-2 px-4 rounded bg-gradient-to-r from-primary to-secondary text-white font-semibold hover:opacity-90 transition",children:"Submit Comment"})]})]})]})};var KP="ToastProvider",[qP,Sue,Eue]=Tv("Toast"),[Cz,ihe]=nl("Toast",[Eue]),[Cue,i1]=Cz(KP),Az=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:r=50,children:o}=n,[a,l]=E.useState(null),[c,u]=E.useState(0),d=E.useRef(!1),f=E.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${KP}\`. Expected non-empty \`string\`.`),b.jsx(qP.Provider,{scope:e,children:b.jsx(Cue,{scope:e,label:t,duration:s,swipeDirection:i,swipeThreshold:r,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:E.useCallback(()=>u(p=>p+1),[]),onToastRemove:E.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};Az.displayName=KP;var Tz="ToastViewport",Aue=["F8"],ZT="toast.viewportPause",ek="toast.viewportResume",kz=E.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=Aue,label:i="Notifications ({hotkey})",...r}=n,o=i1(Tz,t),a=Sue(t),l=E.useRef(null),c=E.useRef(null),u=E.useRef(null),d=E.useRef(null),f=Re(e,d,o.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;E.useEffect(()=>{const S=w=>{var v;s.length!==0&&s.every(m=>w[m]||w.code===m)&&((v=d.current)==null||v.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[s]),E.useEffect(()=>{const S=l.current,w=d.current;if(y&&S&&w){const _=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(ZT);w.dispatchEvent(A),o.isClosePausedRef.current=!0}},v=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(ek);w.dispatchEvent(A),o.isClosePausedRef.current=!1}},m=A=>{!S.contains(A.relatedTarget)&&v()},x=()=>{S.contains(document.activeElement)||v()};return S.addEventListener("focusin",_),S.addEventListener("focusout",m),S.addEventListener("pointermove",_),S.addEventListener("pointerleave",x),window.addEventListener("blur",_),window.addEventListener("focus",v),()=>{S.removeEventListener("focusin",_),S.removeEventListener("focusout",m),S.removeEventListener("pointermove",_),S.removeEventListener("pointerleave",x),window.removeEventListener("blur",_),window.removeEventListener("focus",v)}}},[y,o.isClosePausedRef]);const g=E.useCallback(({tabbingDirection:S})=>{const _=a().map(v=>{const m=v.ref.current,x=[m,...Bue(m)];return S==="forwards"?x:x.reverse()});return(S==="forwards"?_.reverse():_).flat()},[a]);return E.useEffect(()=>{const S=d.current;if(S){const w=_=>{var x,A,k;const v=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!v){const P=document.activeElement,R=_.shiftKey;if(_.target===S&&R){(x=c.current)==null||x.focus();return}const F=g({tabbingDirection:R?"backwards":"forwards"}),H=F.findIndex(D=>D===P);LE(F.slice(H+1))?_.preventDefault():R?(A=c.current)==null||A.focus():(k=u.current)==null||k.focus()}};return S.addEventListener("keydown",w),()=>S.removeEventListener("keydown",w)}},[a,g]),b.jsxs(T9,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&b.jsx(tk,{ref:c,onFocusFromOutsideViewport:()=>{const S=g({tabbingDirection:"forwards"});LE(S)}}),b.jsx(qP.Slot,{scope:t,children:b.jsx(me.ol,{tabIndex:-1,...r,ref:f})}),y&&b.jsx(tk,{ref:u,onFocusFromOutsideViewport:()=>{const S=g({tabbingDirection:"backwards"});LE(S)}})]})});kz.displayName=Tz;var Iz="ToastFocusProxy",tk=E.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...i}=n,r=i1(Iz,t);return b.jsx(HI,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=r.viewport)!=null&&c.contains(a))&&s()}})});tk.displayName=Iz;var Yv="Toast",Tue="toast.swipeStart",kue="toast.swipeMove",Iue="toast.swipeCancel",Pue="toast.swipeEnd",Pz=E.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:i,onOpenChange:r,...o}=n,[a,l]=mf({prop:s,defaultProp:i??!0,onChange:r,caller:Yv});return b.jsx(Df,{present:t||a,children:b.jsx(Nue,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Xn(n.onPause),onResume:Xn(n.onResume),onSwipeStart:X(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:X(n.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:X(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:X(n.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});Pz.displayName=Yv;var[Rue,Mue]=Cz(Yv,{onClose(){}}),Nue=E.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:i,open:r,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...y}=n,g=i1(Yv,t),[S,w]=E.useState(null),_=Re(e,D=>w(D)),v=E.useRef(null),m=E.useRef(null),x=i||g.duration,A=E.useRef(0),k=E.useRef(x),P=E.useRef(0),{onToastAdd:R,onToastRemove:M}=g,N=Xn(()=>{var $;(S==null?void 0:S.contains(document.activeElement))&&(($=g.viewport)==null||$.focus()),o()}),F=E.useCallback(D=>{!D||D===1/0||(window.clearTimeout(P.current),A.current=new Date().getTime(),P.current=window.setTimeout(N,D))},[N]);E.useEffect(()=>{const D=g.viewport;if(D){const $=()=>{F(k.current),c==null||c()},L=()=>{const B=new Date().getTime()-A.current;k.current=k.current-B,window.clearTimeout(P.current),l==null||l()};return D.addEventListener(ZT,L),D.addEventListener(ek,$),()=>{D.removeEventListener(ZT,L),D.removeEventListener(ek,$)}}},[g.viewport,x,l,c,F]),E.useEffect(()=>{r&&!g.isClosePausedRef.current&&F(x)},[r,x,g.isClosePausedRef,F]),E.useEffect(()=>(R(),()=>M()),[R,M]);const H=E.useMemo(()=>S?Fz(S):null,[S]);return g.viewport?b.jsxs(b.Fragment,{children:[H&&b.jsx(Due,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:H}),b.jsx(Rue,{scope:t,onClose:N,children:wu.createPortal(b.jsx(qP.ItemSlot,{scope:t,children:b.jsx(A9,{asChild:!0,onEscapeKeyDown:X(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||N(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:b.jsx(me.li,{tabIndex:0,"data-state":r?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:_,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:X(n.onKeyDown,D=>{D.key==="Escape"&&(a==null||a(D.nativeEvent),D.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:X(n.onPointerDown,D=>{D.button===0&&(v.current={x:D.clientX,y:D.clientY})}),onPointerMove:X(n.onPointerMove,D=>{if(!v.current)return;const $=D.clientX-v.current.x,L=D.clientY-v.current.y,B=!!m.current,O=["left","right"].includes(g.swipeDirection),j=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,z=O?j(0,$):0,W=O?0:j(0,L),K=D.pointerType==="touch"?10:2,Z={x:z,y:W},de={originalEvent:D,delta:Z};B?(m.current=Z,Ow(kue,d,de,{discrete:!1})):FL(Z,g.swipeDirection,K)?(m.current=Z,Ow(Tue,u,de,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs($)>K||Math.abs(L)>K)&&(v.current=null)}),onPointerUp:X(n.onPointerUp,D=>{const $=m.current,L=D.target;if(L.hasPointerCapture(D.pointerId)&&L.releasePointerCapture(D.pointerId),m.current=null,v.current=null,$){const B=D.currentTarget,O={originalEvent:D,delta:$};FL($,g.swipeDirection,g.swipeThreshold)?Ow(Pue,p,O,{discrete:!0}):Ow(Iue,f,O,{discrete:!0}),B.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Due=n=>{const{__scopeToast:e,children:t,...s}=n,i=i1(Yv,e),[r,o]=E.useState(!1),[a,l]=E.useState(!1);return Fue(()=>o(!0)),E.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:b.jsx(CS,{asChild:!0,children:b.jsx(HI,{...s,children:r&&b.jsxs(b.Fragment,{children:[i.label," ",t]})})})},Lue="ToastTitle",Rz=E.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return b.jsx(me.div,{...s,ref:e})});Rz.displayName=Lue;var Oue="ToastDescription",Mz=E.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return b.jsx(me.div,{...s,ref:e})});Mz.displayName=Oue;var Nz="ToastAction",Dz=E.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?b.jsx(Oz,{altText:t,asChild:!0,children:b.jsx(XP,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Nz}\`. Expected non-empty \`string\`.`),null)});Dz.displayName=Nz;var Lz="ToastClose",XP=E.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,i=Mue(Lz,t);return b.jsx(Oz,{asChild:!0,children:b.jsx(me.button,{type:"button",...s,ref:e,onClick:X(n.onClick,i.onClose)})})});XP.displayName=Lz;var Oz=E.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...i}=n;return b.jsx(me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:e})});function Fz(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),jue(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",r=s.dataset.radixToastAnnounceExclude==="";if(!i)if(r){const o=s.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Fz(s))}}),e}function Ow(n,e,t,{discrete:s}){const i=t.originalEvent.currentTarget,r=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?SI(i,r):i.dispatchEvent(r)}var FL=(n,e,t=0)=>{const s=Math.abs(n.x),i=Math.abs(n.y),r=s>i;return e==="left"||e==="right"?r&&s>t:!r&&i>t};function Fue(n=()=>{}){const e=Xn(n);on(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function jue(n){return n.nodeType===n.ELEMENT_NODE}function Bue(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function LE(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Hue=Az,jz=kz,Bz=Pz,Hz=Rz,Vz=Mz,Uz=Dz,$z=XP;const Vue=Hue,zz=te.forwardRef(({className:n,...e},t)=>b.jsx(jz,{ref:t,className:ke("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));zz.displayName=jz.displayName;const Uue=bI("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Wz=te.forwardRef(({className:n,variant:e,...t},s)=>b.jsx(Bz,{ref:s,className:ke(Uue({variant:e}),n),...t}));Wz.displayName=Bz.displayName;const $ue=te.forwardRef(({className:n,...e},t)=>b.jsx(Uz,{ref:t,className:ke("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));$ue.displayName=Uz.displayName;const Gz=te.forwardRef(({className:n,...e},t)=>b.jsx($z,{ref:t,className:ke("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:b.jsx(Gj,{className:"h-4 w-4"})}));Gz.displayName=$z.displayName;const Yz=te.forwardRef(({className:n,...e},t)=>b.jsx(Hz,{ref:t,className:ke("text-sm font-semibold",n),...e}));Yz.displayName=Hz.displayName;const Kz=te.forwardRef(({className:n,...e},t)=>b.jsx(Vz,{ref:t,className:ke("text-sm opacity-90",n),...e}));Kz.displayName=Vz.displayName;function zue(){const{toasts:n}=$I();return b.jsxs(Vue,{children:[n.map(({id:e,title:t,description:s,action:i,...r})=>b.jsxs(Wz,{...r,children:[b.jsxs("div",{className:"grid gap-1",children:[t&&b.jsx(Yz,{children:t}),s&&b.jsx(Kz,{children:s})]}),i,b.jsx(Gz,{})]},e)),b.jsx(zz,{})]})}const Wue={initial:{opacity:0},animate:{opacity:1,transition:{duration:.2}},exit:{opacity:0,transition:{duration:.4,delay:.3}}},Gue={initial:{scale:.8,y:0,rotateY:0},animate:{scale:[1,1.05,1],y:[0,-8,0],transition:{duration:1,ease:"easeInOut",repeat:1/0,repeatType:"mirror"}}},Yue=()=>b.jsx(Ae.div,{variants:Wue,initial:"initial",animate:"animate",exit:"exit",className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-background",children:b.jsx(Ae.div,{variants:Gue,children:b.jsx(_I,{className:"w-16 h-16 text-primary",strokeWidth:1.5})})}),Kue=()=>{const n=el(),[e,t]=E.useState(!1),[s,i]=E.useState(!0);return E.useEffect(()=>{if(s){i(!1);return}t(!0);const r=setTimeout(()=>{t(!1)},900);return()=>clearTimeout(r)},[n.pathname]),b.jsxs(b.Fragment,{children:[b.jsx(Im,{mode:"wait",children:e&&b.jsx(Yue,{})}),b.jsx("div",{style:{visibility:e?"hidden":"visible"},children:b.jsx(wZ,{children:b.jsxs(bG,{location:n,children:[b.jsx(cr,{path:"/",element:b.jsx(JZ,{})}),b.jsx(cr,{path:"/library",element:b.jsx(Qee,{})}),b.jsx(cr,{path:"/about",element:b.jsx(Jee,{})}),b.jsx(cr,{path:"/contact",element:b.jsx(iae,{})}),b.jsx(cr,{path:"/salvation",element:b.jsx(bue,{})}),b.jsx(cr,{path:"/read/:itemId",element:b.jsx(wue,{})}),b.jsx(cr,{path:"/comment-page",element:b.jsx(_ue,{})}),b.jsx(cr,{path:"/terms-of-service",element:b.jsx(xue,{})})]},n.pathname)})})]})};function que(){return b.jsx(eU,{children:b.jsxs(kG,{children:[b.jsx(bZ,{}),b.jsxs(OA,{children:[b.jsx("title",{children:"Kingdom Pages – Faith-Based Digital Library"}),b.jsx("link",{rel:"icon",href:"/./KingdomPagesLogo.jpg",type:"image/jpg"}),b.jsx("meta",{name:"description",content:"Discover a curated collection of Christian digital material: uplifting books, engaging comics, and inspiring stories for all ages."}),b.jsx("meta",{property:"og:title",content:"Kingdom Pages - Inspiring Digital Stories"}),b.jsx("meta",{property:"og:description",content:"Nourishing faith and inspiring minds through a curated collection of Christian digital literature."})]}),b.jsx(Kue,{}),b.jsx(zue,{})]})})}FE.createRoot(document.getElementById("root")).render(b.jsx(te.StrictMode,{children:b.jsx(h9,{defaultTheme:"Light",storageKey:"vite-ui-theme",children:b.jsx(que,{})})}));
